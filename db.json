{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/images/bird_32_gray.png","path":"images/bird_32_gray.png","modified":0,"renderable":0},{"_id":"source/images/bird_32_gray_fail.png","path":"images/bird_32_gray_fail.png","modified":0,"renderable":0},{"_id":"source/images/email.png","path":"images/email.png","modified":0,"renderable":0},{"_id":"source/images/dotted-border.png","path":"images/dotted-border.png","modified":0,"renderable":0},{"_id":"source/images/code_bg.png","path":"images/code_bg.png","modified":0,"renderable":0},{"_id":"source/images/favicon.png","path":"images/favicon.png","modified":0,"renderable":0},{"_id":"source/images/line-tile.png","path":"images/line-tile.png","modified":0,"renderable":0},{"_id":"source/images/noise.png","path":"images/noise.png","modified":0,"renderable":0},{"_id":"source/images/rss.png","path":"images/rss.png","modified":0,"renderable":0},{"_id":"source/images/search.png","path":"images/search.png","modified":0,"renderable":0},{"_id":"source/images/wood.jpg","path":"images/wood.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/fastcgi.jpg","path":"images/2013/fastcgi.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/panda.jpg","path":"images/2013/panda.jpg","modified":0,"renderable":0},{"_id":"source/images/2019/groupcache.png","path":"images/2019/groupcache.png","modified":0,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"source/images/2013/08/class.png","path":"images/2013/08/class.png","modified":0,"renderable":0},{"_id":"source/images/2013/08/ip.gif","path":"images/2013/08/ip.gif","modified":0,"renderable":0},{"_id":"source/images/2013/08/gearman.png","path":"images/2013/08/gearman.png","modified":0,"renderable":0},{"_id":"source/images/2013/08/ipc_unix_socket-300x300.png","path":"images/2013/08/ipc_unix_socket-300x300.png","modified":0,"renderable":0},{"_id":"source/images/2013/08/minigame.png","path":"images/2013/08/minigame.png","modified":0,"renderable":0},{"_id":"source/images/2013/08/oracle.png","path":"images/2013/08/oracle.png","modified":0,"renderable":0},{"_id":"source/images/2013/10/Gitar.jpg","path":"images/2013/10/Gitar.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/10/Violin.jpg","path":"images/2013/10/Violin.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/12/nba.jpg","path":"images/2013/12/nba.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/douya/ICON.jpg","path":"images/2013/douya/ICON.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/douya/around.jpg","path":"images/2013/douya/around.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/douya/chat.jpg","path":"images/2013/douya/chat.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/douya/collect.jpg","path":"images/2013/douya/collect.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/douya/description.jpg","path":"images/2013/douya/description.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/douya/friend.jpg","path":"images/2013/douya/friend.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/douya/review.jpg","path":"images/2013/douya/review.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/douya/myshare.jpg","path":"images/2013/douya/myshare.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/douya/settiing.jpg","path":"images/2013/douya/settiing.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/douya/share.jpg","path":"images/2013/douya/share.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/douya/welcom.jpg","path":"images/2013/douya/welcom.jpg","modified":0,"renderable":0},{"_id":"source/images/2015/02/triestruct.png","path":"images/2015/02/triestruct.png","modified":0,"renderable":0},{"_id":"source/images/2015/02/suggest.png","path":"images/2015/02/suggest.png","modified":0,"renderable":0},{"_id":"source/images/2014/01/rework.jpg","path":"images/2014/01/rework.jpg","modified":0,"renderable":0},{"_id":"source/images/2014/10/free.png","path":"images/2014/10/free.png","modified":0,"renderable":0},{"_id":"source/images/2014/01/skiplist.png","path":"images/2014/01/skiplist.png","modified":0,"renderable":0},{"_id":"source/images/2014/10/nestat.png","path":"images/2014/10/nestat.png","modified":0,"renderable":0},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/exturl.js","path":"js/src/exturl.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/js.cookie.js","path":"js/src/js.cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scroll-cookie.js","path":"js/src/scroll-cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","path":"lib/algolia-instant-search/instantsearch.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","path":"lib/canvas-ribbon/canvas-ribbon.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","path":"lib/canvas-nest/canvas-nest.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/LICENSE","path":"lib/fastclick/LICENSE","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/README.md","path":"lib/fastclick/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/bower.json","path":"lib/fastclick/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","path":"lib/jquery_lazyload/CONTRIBUTING.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","path":"lib/jquery_lazyload/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","path":"lib/jquery_lazyload/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","path":"lib/jquery_lazyload/jquery.scrollstop.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","path":"lib/jquery_lazyload/jquery.lazyload.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/bower.json","path":"lib/velocity/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/font-embedded.css","path":"lib/needsharebutton/font-embedded.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.css","path":"lib/needsharebutton/needsharebutton.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","path":"lib/pace/pace-theme-barber-shop.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.js","path":"lib/needsharebutton/needsharebutton.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","path":"lib/pace/pace-theme-big-counter.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","path":"lib/pace/pace-theme-bounce.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","path":"lib/pace/pace-theme-center-atom.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","path":"lib/pace/pace-theme-center-circle.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","path":"lib/pace/pace-theme-center-radar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","path":"lib/pace/pace-theme-center-simple.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","path":"lib/pace/pace-theme-corner-indicator.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","path":"lib/pace/pace-theme-flash.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","path":"lib/pace/pace-theme-fill-left.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","path":"lib/pace/pace-theme-mac-osx.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","path":"lib/pace/pace-theme-loading-bar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","path":"lib/pace/pace-theme-minimal.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace.min.js","path":"lib/pace/pace.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","path":"lib/three/canvas_lines.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","path":"lib/three/canvas_sphere.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/three-waves.min.js","path":"lib/three/three-waves.min.js","modified":0,"renderable":1},{"_id":"source/images/2013/12/Allen.jpg","path":"images/2013/12/Allen.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/12/gitar.jpg","path":"images/2013/12/gitar.jpg","modified":0,"renderable":0},{"_id":"source/images/2013/douya/main.jpg","path":"images/2013/douya/main.jpg","modified":0,"renderable":0},{"_id":"source/images/2016/04/flume.jpg","path":"images/2016/04/flume.jpg","modified":0,"renderable":0},{"_id":"source/images/2014/04/guitar.jpg","path":"images/2014/04/guitar.jpg","modified":0,"renderable":0},{"_id":"source/images/2014/10/top.png","path":"images/2014/10/top.png","modified":0,"renderable":0},{"_id":"themes/next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":0,"renderable":1},{"_id":"source/images/2013/09/hadoop.png","path":"images/2013/09/hadoop.png","modified":0,"renderable":0},{"_id":"source/images/2016/04/flume1toflume2.jpg","path":"images/2016/04/flume1toflume2.jpg","modified":0,"renderable":0},{"_id":"source/images/2015/08/teammate.png","path":"images/2015/08/teammate.png","modified":0,"renderable":0},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.css","path":"lib/Han/dist/han.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.css","path":"lib/Han/dist/han.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","path":"lib/fancybox/source/blank.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.js","path":"lib/Han/dist/han.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","path":"lib/fancybox/source/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","path":"lib/fancybox/source/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","path":"lib/fancybox/source/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","path":"lib/fancybox/source/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","path":"lib/fancybox/source/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","path":"lib/fancybox/source/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","path":"lib/fancybox/source/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","path":"lib/fancybox/source/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","path":"lib/fastclick/lib/fastclick.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","path":"lib/fastclick/lib/fastclick.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":0,"renderable":1},{"_id":"source/images/2017/05/dlist-delete.png","path":"images/2017/05/dlist-delete.png","modified":0,"renderable":0},{"_id":"themes/next/source/lib/Han/dist/han.js","path":"lib/Han/dist/han.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"source/images/2017/05/dlist-insert.png","path":"images/2017/05/dlist-insert.png","modified":0,"renderable":0},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","path":"lib/Han/dist/font/han-space.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","path":"lib/Han/dist/font/han-space.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","path":"lib/Han/dist/font/han.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","path":"lib/Han/dist/font/han.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff2","path":"lib/Han/dist/font/han.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","path":"lib/fancybox/source/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","path":"lib/fancybox/source/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","path":"lib/algolia-instant-search/instantsearch.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/three.min.js","path":"lib/three/three.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":0,"renderable":1}],"Cache":[{"_id":"themes/next/.bowerrc","hash":"3228a58ed0ece9f85e1e3136352094080b8dece1","modified":1523731104000},{"_id":"themes/next/.editorconfig","hash":"792fd2bd8174ece1a75d5fd24ab16594886f3a7f","modified":1523731104000},{"_id":"themes/next/.gitattributes","hash":"44bd4729c74ccb88110804f41746fec07bf487d4","modified":1523731104000},{"_id":"themes/next/.gitignore","hash":"0b5c2ffd41f66eb1849d6426ba8cf9649eeed329","modified":1523731104000},{"_id":"themes/next/.hound.yml","hash":"b76daa84c9ca3ad292c78412603370a367cc2bc3","modified":1523731104000},{"_id":"themes/next/.javascript_ignore","hash":"8a224b381155f10e6eb132a4d815c5b52962a9d1","modified":1523731104000},{"_id":"themes/next/.jshintrc","hash":"9928f81bd822f6a8d67fdbc909b517178533bca9","modified":1523731104000},{"_id":"themes/next/.stylintrc","hash":"b28e24704a5d8de08346c45286574c8e76cc109f","modified":1523731104000},{"_id":"themes/next/LICENSE","hash":"f293bcfcdc06c0b77ba13570bb8af55eb5c059fd","modified":1523731104000},{"_id":"themes/next/.travis.yml","hash":"d60d4a5375fea23d53b2156b764a99b2e56fa660","modified":1523731104000},{"_id":"themes/next/README.md","hash":"8ce60ce578963eb4e1eb5e33e1efc2fc4779af9c","modified":1523731104000},{"_id":"themes/next/README.cn.md","hash":"2c766b3369ed477bce134a5450dab45bef161504","modified":1523731104000},{"_id":"themes/next/_config.yml","hash":"edd13589375357b66aad4e6a8a6e98899b617c61","modified":1529236009000},{"_id":"themes/next/gulpfile.coffee","hash":"031bffc483e417b20e90eceb6cf358e7596d2e69","modified":1523731104000},{"_id":"themes/next/bower.json","hash":"0674f11d3d514e087a176da0e1d85c2286aa5fba","modified":1523731104000},{"_id":"themes/next/package.json","hash":"036d3a1346203d2f1a3958024df7f74e7ac07bfe","modified":1523731104000},{"_id":"source/_posts/2013-04-02-zhe-teng.markdown","hash":"a994a82288683aa90764d184bf27c52f06fd6b19","modified":1529231936000},{"_id":"source/_posts/2013-08-20-minigame-fu-wu-duan-she-ji.markdown","hash":"dfce76c95b326b788f8055e818dd0f023f9c335c","modified":1529231936000},{"_id":"source/_posts/2013-08-26-jiao-shen-ma-rong-yu-chu-pin-dou-ya-huan-shu.markdown","hash":"c1d744375750d06411be6ff6b47d60961dd67c05","modified":1529231951000},{"_id":"source/_posts/2013-08-26-si-kao-yu-fen-xiang-shi-jie-zhi-sheng-hua.markdown","hash":"52f290bc3c94e01899bf6c2ca925bc2fa9163857","modified":1529231936000},{"_id":"source/_posts/2013-08-28-fu-wu-qi-she-ji-mo-xing.markdown","hash":"8cb042e3efe30f2ce1341ab91c9e645d63fcfccc","modified":1529231936000},{"_id":"source/_posts/2013-08-28-nginxmo-kuai-kai-fa.markdown","hash":"b7cc93db37770afbde462fcda1d650c0e0e55030","modified":1529231936000},{"_id":"source/_posts/2013-08-28-thread-pool-in-python.markdown","hash":"da49ec0f2bb37c0b2c9df74cf70b9f7b8d23b786","modified":1530424334000},{"_id":"source/_posts/2013-08-28-zai-lu-shang.markdown","hash":"534a68374561535164a119d35f23d86daa2ae5b5","modified":1529231936000},{"_id":"source/_posts/2013-08-28-zhe-teng-libevent.markdown","hash":"abb7b027d332b0d4c397fd9e283fb067229dc7b2","modified":1529231936000},{"_id":"source/_posts/2013-08-28-zuo-kuai-le-de-cheng-xu-yuan.markdown","hash":"263f00bcbc00e52e00b76eb97db21f70dc35373d","modified":1529231936000},{"_id":"source/_posts/2013-08-29-dou-ban-xi-ai-wen-zhang-xia-zai-qi.markdown","hash":"f667c35367697a7de6e83e32db31dc38ba444a6a","modified":1530424360000},{"_id":"source/_posts/2013-08-29-c-plus-plus-yu-pythonde-hun-he-bian-cheng-pythontuo-zhan-bian-xie.markdown","hash":"e14bf32a1df7d6b7d6fb0609f11ef8ac6c8701f9","modified":1530424352000},{"_id":"source/_posts/2013-08-29-fan-hui-zhi-de-tou-che-li-jie.markdown","hash":"68410d7ece145706ea56facd17171865b1594edf","modified":1530424368000},{"_id":"source/_posts/2013-08-29-google-c-plus-plus-style.markdown","hash":"cb5ac6e203d83212519b0449fac49bb7a4878c5c","modified":1530424376000},{"_id":"source/_posts/2013-08-29-unix-domain-socket-ipctong-xin-ji-zhi.markdown","hash":"e8dd36564e199769288ad8c056fe3a41c122fe7c","modified":1529231936000},{"_id":"source/_posts/2013-08-29-hui-gu-zeromq.markdown","hash":"b3a4b2f8c16c2fd8b6aca06ddf47ab3a34cbe3b2","modified":1530424386000},{"_id":"source/_posts/2013-08-29-xiu-qi-xiao-bo.markdown","hash":"91663d006a4b439384ebd394f25c35960040205d","modified":1529231936000},{"_id":"source/_posts/2013-08-30-fen-bu-shi-chu-li-kuang-jia-gearman.markdown","hash":"65169be12ebaadd145db710929569edcdd975dfa","modified":1529231936000},{"_id":"source/_posts/2013-08-30-feng-pei-zhi-lu.markdown","hash":"4eef525d1f48c4b2a32b4eb86f1c3309d82cd763","modified":1529231936000},{"_id":"source/_posts/2013-09-12-nginx-plus-luaying-dui-zai-xian-zhuang-tai-fu-wu.markdown","hash":"8952b1107791647c7736697f5280e75ecb4e2592","modified":1529231936000},{"_id":"source/_posts/2013-08-30-jing-ran-ye-yong-dao-liao-oracle.markdown","hash":"42d976a184cae03d538fdd85ae5f6bebc27159a5","modified":1529231936000},{"_id":"source/_posts/2013-09-15-jsonpjie-jue-kua-yu-qing-qiu.markdown","hash":"fa76ba48afc4828d7ac3d1a49afb8cccd3cd22f0","modified":1529231936000},{"_id":"source/_posts/2013-09-21-leveldbben-di-cun-chu-yin-qing-jing-zhi-de-gong-ju.markdown","hash":"c4b0578370c672d3e10a8dcfedd52b258e6511eb","modified":1530424436000},{"_id":"source/_posts/2013-09-22-dan-ji-wan-hadoop.markdown","hash":"735372d7359125904c6fe1579a7de9ff175bc662","modified":1529231936000},{"_id":"source/_posts/2013-09-28-shellji-qiao-xiao-jie.markdown","hash":"00f214c656ea3172571741f3076357b19434c33b","modified":1530424446000},{"_id":"source/_posts/2013-09-29-zerorpcshi-ge-hao-dong-xi.markdown","hash":"8722a8784042601d29eaa55b663a5a4e3f270e8c","modified":1530424454000},{"_id":"source/_posts/2013-12-05-zui-jin-yong-dao-de-mysql.markdown","hash":"0ca62436a119ca4e874990f1dea142e1933dcc41","modified":1529231936000},{"_id":"source/_posts/2013-12-21-yu-jian.markdown","hash":"acb61ff5645e09808cce1736a37ba4ab2b09948d","modified":1529231936000},{"_id":"source/_posts/2013-10-10-shui-de-xin-jing.markdown","hash":"da9e1ae8e6f35295603099a1fe4f71b009796d52","modified":1529231936000},{"_id":"source/_posts/2014-01-06-re-geng-xin.markdown","hash":"7ad0df0a4e8958e7565344a2d3c6c3c51d035828","modified":1530424473000},{"_id":"source/_posts/2014-01-07-wei-xin-gong-zhong-hao-kai-fa.markdown","hash":"76b2cf338454609a599a3ba8f0c9213c469f7eb1","modified":1530424482000},{"_id":"source/_posts/2014-01-24-<<rework>>-shu-zhai.markdown","hash":"a69fe1592d53a94391728c967eac8f3b39734f94","modified":1529231936000},{"_id":"source/_posts/2014-02-05-shen-ru-strtokhan-shu.markdown","hash":"17d606349d0e09502effa5791fb18bebb16756ed","modified":1530424501000},{"_id":"source/_posts/2014-02-01-tiao-biao-skiplist.markdown","hash":"daaca0237db13faeee7ad0004ad9c6750c049c0a","modified":1530424494000},{"_id":"source/_posts/2014-02-24-socketnian-bao.markdown","hash":"77357f08388a8466ebad3b8eb5d461f90f11d3f4","modified":1529231936000},{"_id":"source/_posts/2014-03-13-expect-yu-xi-tong-zi-dong-jiao-hu.markdown","hash":"c7ce839e1ea3a53ebc58e8f854072c907959e98b","modified":1530424510000},{"_id":"source/_posts/2014-04-22-liu-xia-liao-xie-dong-xi.markdown","hash":"cd0318c02333e784a556599ad7a5e42969bca0e4","modified":1529231936000},{"_id":"source/_posts/2014-04-28-wei-wen-yi-lu.markdown","hash":"54217a0f9778ae14b7cecac3b9dbd422a307ecf5","modified":1529231936000},{"_id":"source/_posts/2014-05-03-mac-an-zhuang-go.markdown","hash":"aa3e886dad862a05549c1a74c3300a443e055659","modified":1530424525000},{"_id":"source/_posts/2014-05-03-make-setup-dot-py.markdown","hash":"2ce80f2bba1490691ba2a0ddbce4db0f808cb4da","modified":1530424534000},{"_id":"source/_posts/2014-06-21-da-mo-de-qing-chun.markdown","hash":"aa937ed1880222c01b7ab08f5d8bb47d35a9be02","modified":1529231936000},{"_id":"source/_posts/2014-05-13-nginx-pitfall.markdown","hash":"c02cf1926da73fda7748b9261b7b693ff4818661","modified":1530424541000},{"_id":"source/_posts/2014-07-12-goan-zhuang-protobuf.markdown","hash":"5819a364c4349fe1a0f962cf5693a5d449eeccb2","modified":1530424550000},{"_id":"source/_posts/2014-07-16-zhe-teng-docker.markdown","hash":"135c8068272c197ad796dd38c994a2c3925591fc","modified":1530424556000},{"_id":"source/_posts/2014-09-07-percona-server-zuo-zhu-cong.markdown","hash":"a5bb10e2d474a45545b62cf5efb76b573d8992ee","modified":1529231936000},{"_id":"source/_posts/2014-07-27-rsyslog-jie-shou-yuan-cheng-ri-zhi.markdown","hash":"dbe74e1bdc2953855af3081d0fbed335ec6fcb4f","modified":1529231936000},{"_id":"source/_posts/2014-10-13-nei-cun-du-qu-na-er-la.markdown","hash":"edb0c9b5f09ad0d79b341d95586cf492510954fa","modified":1529231936000},{"_id":"source/_posts/2014-10-04-redisre-bei.markdown","hash":"d8a77cddcc54f7860a662147f035bbf0194550d5","modified":1529231936000},{"_id":"source/_posts/2014-10-24-mysql-unique-index.markdown","hash":"af5e1b456a000a38a60556f0c02d595db5982f48","modified":1529231936000},{"_id":"source/_posts/2014-10-29-iptablezuo-natzhuan-fa.markdown","hash":"98a89ded708869c796282435674151096b0f7ad8","modified":1529231936000},{"_id":"source/_posts/2014-11-02-nginxyu-phpxi-tong-can-shu-pei-zhi.markdown","hash":"e00ede657bfa057e1ca0d6adb56fe4f56f552328","modified":1529231936000},{"_id":"source/_posts/2014-11-25-tired.markdown","hash":"2f600c06329e1b8f5d6563ca7a4044ff8749c665","modified":1529231936000},{"_id":"source/_posts/2014-11-29-yong-dao-de-tcpdump.markdown","hash":"0d5c6631d59113a90964e85276864027d0238971","modified":1529231936000},{"_id":"source/_posts/2014-12-13-nginxcuo-wu-ma.markdown","hash":"8798044cd6caed85171e6e7a6c5780c698a519ed","modified":1529231936000},{"_id":"source/_posts/2015-01-21-percona-toolkitxiao-xiang-li-di-pt-archiver.markdown","hash":"309b112d64412088281e24029736a0e853aaebb6","modified":1529231936000},{"_id":"source/_posts/2015-02-08-trie-suggestion.markdown","hash":"e46a097f276c039e05562c3d55e90839698aa653","modified":1530424598000},{"_id":"source/_posts/2015-04-05-yong-bao-docker.markdown","hash":"ac3e767c851e57d6645f0625492abf2e4d5e611f","modified":1529231936000},{"_id":"source/_posts/2015-05-17-da-jian-postfix.markdown","hash":"c4fcbb0412e78283d67cb7fcdac0223b36d71211","modified":1529231936000},{"_id":"source/_posts/2015-01-31-da-jian-elasticsearchyu-kibana.markdown","hash":"108cb08cc02b989ffb3d6352bca34dbdce721da2","modified":1529231936000},{"_id":"source/_posts/2015-02-03-haproxy-plus-mysql.markdown","hash":"4fb5b2097a89fef22725300a9e5effbe5fef19e8","modified":1529231936000},{"_id":"source/_posts/2015-05-10-mysql-slave-relay-log-corrupt-chu-li-he-hui-fu.markdown","hash":"d172b52b3f22ef16cc090d9cbcca16ede703131e","modified":1529231936000},{"_id":"source/_posts/2015-06-11-qing-qiao-shi-shi-tong-ji-yong-hu-shu.markdown","hash":"0ef660f0919296791529a495235222ed449883e7","modified":1530424613000},{"_id":"source/_posts/2015-07-24-ji-lu-cuo-wu-deng-lu-de-btmpwen-jian.markdown","hash":"b6e22f34674446e5188847c1d8d112374acb0531","modified":1529231936000},{"_id":"source/_posts/2015-07-12-my-dot-cnfpei-zhi-yi-ju.markdown","hash":"a1d9f5669e701e38ea3b2e771b5a34f99e92dfa4","modified":1529231936000},{"_id":"source/_posts/2015-08-10-hackthon.markdown","hash":"e63c089bd30298579dc397b082b8af442c7e35a9","modified":1529231936000},{"_id":"source/_posts/2015-08-21-supervisorjian-ting-qi.markdown","hash":"7b919740c382e0b41e44e9bddac408799aecd290","modified":1529233852000},{"_id":"source/_posts/2015-08-16-twemproxy.markdown","hash":"cca35f628432af9f1c0d0c9252cc38f713741041","modified":1529231936000},{"_id":"source/_posts/2015-10-01-python-shi-yong-ldap.markdown","hash":"e38765c526b51f618fc596795181b2c5b7a13f53","modified":1530424639000},{"_id":"source/_posts/2015-09-05-ansiblede-shi-yong-jing-yan.markdown","hash":"1c5182f46afb222eaf699b82cc9ea554af435da5","modified":1529231936000},{"_id":"source/_posts/2015-10-06-ji-lu-shi-yong-flaskde-dian-di.markdown","hash":"6c688a4f3e7951e1afd769fe6119de189bdbd1d1","modified":1530424735000},{"_id":"source/_posts/2015-09-10-sysdig-zhi-de-yong-you.markdown","hash":"ea335818679b5c8981d97e10ed9d3de1ad4657c5","modified":1529231936000},{"_id":"source/_posts/2015-10-29-gei-tengine-jia-shang-lua-tuo-zhan.markdown","hash":"6236fe20cfad4ede16a150eb9ad4177672b3a147","modified":1529231936000},{"_id":"source/_posts/2015-12-05-gre-tuning-and-keepalived.markdown","hash":"f7da087b76be11ba79ecab76e892ad9a2344db8c","modified":1529231936000},{"_id":"source/_posts/2015-12-10-fen-xi-nginxri-zhi-de-li-qi-goaccess.markdown","hash":"c0931902898aefaa1958e287fb248af6acbfbb29","modified":1529231936000},{"_id":"source/_posts/2016-01-07-shi-shi-jian-kong-nginx-qps-de-tuo-zhan.markdown","hash":"7767fcaf81aef3524df171a58bb8dfcdeab2f262","modified":1529231936000},{"_id":"source/_posts/2016-04-23-flume-shi-shi-shou-ji-nginx-ri-zhi.markdown","hash":"9eb22e5c7fb2d1e9e7b0edf14ea056b4b4082b7f","modified":1529231936000},{"_id":"source/_posts/2016-03-10-gai-xuan-ze-na-chong-redischi-jiu-hua-pei-zhi.markdown","hash":"c9378eedf599d9113475e3e370a10b82484ab47f","modified":1529231936000},{"_id":"source/_posts/2016-04-24-ansible-dynamic-inventory.markdown","hash":"d233cfa431d0f495aa40a1ebd6c2bf51fb34869d","modified":1529231936000},{"_id":"source/_posts/2016-06-03-zhun-que-jian-ce-mysql-fu-zhi-yan-chi.markdown","hash":"e646618440d062b6ab4b0847c9709e931f03c651","modified":1529231936000},{"_id":"source/_posts/2016-07-23-celeryde-crontabshi-jian.markdown","hash":"7f8511dba274b9e2fd48dbbe6265c3667ccbc4fd","modified":1530424677000},{"_id":"source/_posts/2016-07-16-bash-jia-zai-shun-xu.markdown","hash":"8a13b9752e12d9e714c198136e0c6884ca409fc5","modified":1529231936000},{"_id":"source/_posts/2016-08-01-cuckoofilter.markdown","hash":"cbd3b416273b1be65426ff9ced531a27bec8bfdc","modified":1530424687000},{"_id":"source/_posts/2016-09-25-gong-xiang-nei-cun-yu-xin-hao-liang.markdown","hash":"e99d0333954a533476cbe495872861e05904f659","modified":1529231936000},{"_id":"source/_posts/2016-09-28-ji-yi-ci-redis-server-bug.markdown","hash":"e2a4e6f006202b4f287edde0a80600e377b02e25","modified":1530424698000},{"_id":"source/_posts/2016-12-02-cgroupxian-zhi-ji-suan-zi-yuan.markdown","hash":"4129486dd2306a25934241efd5df368d95c93738","modified":1529231936000},{"_id":"source/_posts/2017-02-22-zheng-xiang-yu-fan-xiang-dai-li.markdown","hash":"c5665afdfe8f01c891a545699aaf87a0be0bc478","modified":1529231936000},{"_id":"source/_posts/2017-02-25-zookeeper-bi-ji.markdown","hash":"8bc5a54abf1272fb165fd12c6b30c1514584039e","modified":1529231936000},{"_id":"source/_posts/2017-05-29-shuang-duan-lian-biao.markdown","hash":"43bcd6f4bb0dd913cb6a76742bf17aeedfd2f277","modified":1530424714000},{"_id":"source/_posts/2017-07-13-httpserver-graceful-shutdown-in-go.markdown","hash":"428760fdadf50bbba7573c0de6f11fc4625482a9","modified":1530424727000},{"_id":"source/_posts/2017-06-04-mit-6-dot-824-mapreduce.markdown","hash":"c07080dd0d9893de57d8b38155d12b088f0c2fc5","modified":1530424721000},{"_id":"source/_posts/2018-07-01-boost-utility.md","hash":"9e4f88c555e9f2a052bc7022faff62f729979695","modified":1532706914000},{"_id":"source/_posts/2018-06-17-ban-nian-sui-xiang.markdown","hash":"776febcb53de751e1cbc8057ac90fd0cf7a5c10e","modified":1529236531000},{"_id":"source/_posts/2018-07-14-libco-study.md","hash":"5db0a210b5f781d2205968fe7a09da6ebb77a028","modified":1531579588000},{"_id":"source/_posts/2018-07-27-valgrind-sanitize.md","hash":"9476823deec408d5ebc2d1f26e530746737b20f7","modified":1534646049000},{"_id":"source/_posts/2018-09-08-edit-distance.md","hash":"6f931c23afad416618d0c55d6f71afce7016e3ba","modified":1536415610000},{"_id":"source/_posts/2019-02-05-blocking-queue.md","hash":"c66fcaf3d4ed729e9d1adafadc673f2b89d3cbb3","modified":1549526037000},{"_id":"source/_posts/2019-05-04-groupcache-source-note.md","hash":"dc9ec6c724abd08dfaf068a43406d322a7c38056","modified":1556940033125},{"_id":"source/_posts/2019-02-22-ac-automachine.md","hash":"5aeee63ae6b89e49fd481bae422c217f5bcd9525","modified":1556939707505},{"_id":"source/_posts/2019-03-08-es-skill.md","hash":"2d1a6bd932848dcfaee9036305bf9081d29f5632","modified":1562466077715},{"_id":"source/categories/index.md","hash":"7964bbb0e166c49e9d8e85fc57d36c561fb90379","modified":1529232102000},{"_id":"source/about/index.md","hash":"2f35fe4a873a6a837cd6d41cf859e6165dd8ee6e","modified":1529233434000},{"_id":"source/images/.DS_Store","hash":"a247078a4c6f5b79885b3e6df399a8a9e84c034c","modified":1529231216000},{"_id":"source/images/bird_32_gray.png","hash":"55345ff7370047a6b825dd235c9ce201545a0952","modified":1529231216000},{"_id":"source/images/bird_32_gray_fail.png","hash":"0c30b159e4cbb7e8a1ad826be537fc4bd79b0a8f","modified":1529231216000},{"_id":"source/images/email.png","hash":"2a5d251567fabcad68fa596ebaf1508296524930","modified":1529231216000},{"_id":"source/images/dotted-border.png","hash":"347784b401d0d38acf5e3b6d06a90346a16a8e8c","modified":1529231216000},{"_id":"source/images/code_bg.png","hash":"c34acd76f73ef68d62c031856bd627ffac9378f3","modified":1529231216000},{"_id":"source/images/favicon.png","hash":"19ca364fa2d577527b4981b7958718f9fa5a7bb0","modified":1529233469000},{"_id":"source/images/line-tile.png","hash":"a86a5d70fb0024dd295b85ea9058b43c1c5f25d3","modified":1529231216000},{"_id":"source/images/noise.png","hash":"a839ae391fbbb0a1a2b22f8aba1d8ae2a702ef34","modified":1529231216000},{"_id":"source/images/rss.png","hash":"d61fc1ccc66f081002b15532f66e054147d5f2fb","modified":1529231216000},{"_id":"source/images/search.png","hash":"3c0178651f38bff462d4feb927e4f4df87b0f9d0","modified":1529231216000},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"902f627155a65099e0a37842ff396a58d0dc306f","modified":1523731104000},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"50d48c47162817a3810a9d9ad51104e83947419a","modified":1523731104000},{"_id":"source/images/wood.jpg","hash":"70043f934922eca94934214931f0833a04798751","modified":1529231216000},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"3b5eafd32abb718e56ccf8d1cee0607ad8ce611d","modified":1523731104000},{"_id":"themes/next/.github/browserstack_logo.png","hash":"a6c43887f64a7f48a2814e3714eaa1215e542037","modified":1523731104000},{"_id":"themes/next/layout/_layout.swig","hash":"da0929166674ea637e0ad454f85ad0d7bac4aff2","modified":1523731104000},{"_id":"themes/next/layout/archive.swig","hash":"f0a8225feafd971419837cdb4bcfec98a4a59b2f","modified":1523731104000},{"_id":"themes/next/layout/category.swig","hash":"4472255f4a3e3dd6d79201523a9526dcabdfbf18","modified":1523731104000},{"_id":"themes/next/layout/index.swig","hash":"783611349c941848a0e26ee2f1dc44dd14879bd1","modified":1523731104000},{"_id":"themes/next/layout/page.swig","hash":"969caaee05bdea725e99016eb63d810893a73e99","modified":1523731104000},{"_id":"themes/next/layout/post.swig","hash":"b3589a8e46288a10d20e41c7a5985d2493725aec","modified":1523731104000},{"_id":"themes/next/layout/schedule.swig","hash":"d86f8de4e118f8c4d778b285c140474084a271db","modified":1523731104000},{"_id":"themes/next/scripts/merge-configs.js","hash":"81e86717ecfb775986b945d17f0a4ba27532ef07","modified":1523731104000},{"_id":"themes/next/scripts/merge.js","hash":"9130dabe6a674c54b535f322b17d75fe6081472f","modified":1523731104000},{"_id":"themes/next/layout/tag.swig","hash":"7e0a7d7d832883eddb1297483ad22c184e4368de","modified":1523731104000},{"_id":"themes/next/languages/de.yml","hash":"057e7df11ddeb1c8c15a5d7c5ff29430d725ec6b","modified":1523731104000},{"_id":"themes/next/languages/default.yml","hash":"44ef3f26917f467459326c2c8be2f73e4d947f35","modified":1523731104000},{"_id":"themes/next/languages/en.yml","hash":"7e680d9bb8f3a3a9d1ba1c9d312b3d257183dded","modified":1523731104000},{"_id":"themes/next/languages/fr-FR.yml","hash":"7e4eb7011b8feee641cfb11c6e73180b0ded1c0f","modified":1523731104000},{"_id":"themes/next/languages/id.yml","hash":"b5de1ea66dd9ef54cac9a1440eaa4e3f5fc011f5","modified":1523731104000},{"_id":"themes/next/languages/it.yml","hash":"aa595f2bda029f73ef7bfa104b4c55c3f4e9fb4c","modified":1523731104000},{"_id":"themes/next/languages/ja.yml","hash":"3c76e16fd19b262864475faa6854b718bc08c4d8","modified":1523731104000},{"_id":"themes/next/languages/ko.yml","hash":"ea5b46056e73ebcee121d5551627af35cbffc900","modified":1523731104000},{"_id":"themes/next/languages/nl-NL.yml","hash":"edca4f3598857dbc3cbf19ed412213329b6edd47","modified":1523731104000},{"_id":"themes/next/languages/pt-BR.yml","hash":"b1694ae766ed90277bcc4daca4b1cfa19cdcb72b","modified":1523731104000},{"_id":"themes/next/languages/pt.yml","hash":"44b61f2d085b827b507909a0b8f8ce31c6ef5d04","modified":1523731104000},{"_id":"themes/next/languages/ru.yml","hash":"98ec6f0b7183282e11cffc7ff586ceb82400dd75","modified":1523731104000},{"_id":"themes/next/languages/vi.yml","hash":"fd08d3c8d2c62965a98ac420fdaf95e54c25d97c","modified":1523731104000},{"_id":"themes/next/languages/zh-Hans.yml","hash":"16ef56d0dea94638de7d200984c90ae56f26b4fe","modified":1523731104000},{"_id":"themes/next/languages/zh-hk.yml","hash":"9396f41ae76e4fef99b257c93c7354e661f6e0fa","modified":1523731104000},{"_id":"themes/next/languages/zh-tw.yml","hash":"50b71abb3ecc0686f9739e179e2f829cd074ecd9","modified":1523731104000},{"_id":"themes/next/test/helpers.js","hash":"a1f5de25154c3724ffc24a91ddc576cdbd60864f","modified":1523731104000},{"_id":"themes/next/test/.jshintrc","hash":"19f93d13d1689fe033c82eb2d5f3ce30b6543cc0","modified":1523731104000},{"_id":"themes/next/test/intern.js","hash":"11fa8a4f5c3b4119a179ae0a2584c8187f907a73","modified":1523731104000},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1523731104000},{"_id":"source/images/2013/fastcgi.jpg","hash":"3d27e12353c43f153490e17f0e367e920066e3e2","modified":1529231216000},{"_id":"source/images/2013/panda.jpg","hash":"3c3f9d9391962a8936f88098be8995da946e2186","modified":1529231216000},{"_id":"source/images/2019/groupcache.png","hash":"f40cc20ce7f3348b57c4aff5cd0a061b9bef99c6","modified":1556932833895},{"_id":"themes/next/layout/_custom/header.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1523731104000},{"_id":"themes/next/layout/_custom/sidebar.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1523731104000},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"31322a7f57936cf2dc62e824af5490da5354cf02","modified":1523731104000},{"_id":"themes/next/layout/_macro/post-copyright.swig","hash":"665a928604f99d2ba7dc4a4a9150178229568cc6","modified":1523731104000},{"_id":"themes/next/layout/_macro/reward.swig","hash":"56e8d8556cf474c56ae1bef9cb7bbd26554adb07","modified":1523731104000},{"_id":"themes/next/layout/_macro/post.swig","hash":"446a35a2cd389f8cfc3aa38973a9b44ad0740134","modified":1523731104000},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"6a54c3c85ff6b19d275827a327abbf4bd99b2ebf","modified":1523731104000},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"39852700e4084ecccffa6d4669168e5cc0514c9e","modified":1523731104000},{"_id":"themes/next/layout/_partials/footer.swig","hash":"c4d6181f5d3db5365e622f78714af8cc58d7a45e","modified":1523731104000},{"_id":"themes/next/layout/_partials/comments.swig","hash":"4a6f5b1792b2e5262b7fdab9a716b3108e2f09c7","modified":1523731104000},{"_id":"themes/next/layout/_partials/head.swig","hash":"6b94fe8f3279daea5623c49ef4bb35917ba57510","modified":1523731104000},{"_id":"themes/next/layout/_partials/header.swig","hash":"ed042be6252848058c90109236ec988e392d91d4","modified":1523731104000},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"9e8e21d194ef44d271b1cca0bc1448c14d7edf4f","modified":1523731104000},{"_id":"themes/next/layout/_partials/page-header.swig","hash":"1efd925d34a5d4ba2dc0838d9c86ba911e705fc9","modified":1523731104000},{"_id":"themes/next/layout/_partials/search.swig","hash":"9dbd378e94abfcb3f864a5b8dbbf18d212ca2ee0","modified":1523731104000},{"_id":"themes/next/layout/_third-party/exturl.swig","hash":"7c04a42319d728be356746363aff8ea247791d24","modified":1523731104000},{"_id":"themes/next/layout/_third-party/duoshuo-hot-articles.swig","hash":"5d4638c46aef65bf32a01681495b62416ccc98db","modified":1523731104000},{"_id":"themes/next/layout/_third-party/mathjax.swig","hash":"6d25596d6a7c57700d37b607f8d9a62d89708683","modified":1523731104000},{"_id":"themes/next/layout/_third-party/needsharebutton.swig","hash":"5fe0447cc88a5a63b530cf0426f93c4634811876","modified":1523731104000},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"fc93b1a7e6aed0dddb1f3910142b48d8ab61174e","modified":1523731104000},{"_id":"themes/next/layout/_third-party/schedule.swig","hash":"22369026c87fc23893c35a7f250b42f3bb1b60f1","modified":1523731104000},{"_id":"themes/next/layout/_third-party/scroll-cookie.swig","hash":"1ddb2336a1a19b47af3017047012c01ec5f54529","modified":1523731104000},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"03aaebe9d50f6acb007ec38cc04acd1cfceb404d","modified":1523731104000},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"766b2bdda29523ed6cd8d7aa197f996022f8fd94","modified":1523731104000},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"a266f96ad06ee87bdeae6e105a4b53cd587bbd04","modified":1523731104000},{"_id":"themes/next/scripts/tags/button.js","hash":"d023f10a00077f47082b0517e2ad666e6e994f60","modified":1523731104000},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"535fc542781021c4326dec24d8495cbb1387634a","modified":1523731104000},{"_id":"themes/next/scripts/tags/exturl.js","hash":"8d7e60f60779bde050d20fd76f6fdc36fc85e06d","modified":1523731104000},{"_id":"themes/next/scripts/tags/full-image.js","hash":"8eeb3fb89540299bdbb799edfdfdac3743b50596","modified":1523731104000},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"49252824cd53184dc9b97b2f2d87ff28e1b3ef27","modified":1523731104000},{"_id":"themes/next/scripts/tags/label.js","hash":"2f8f41a7316372f0d1ed6b51190dc4acd3e16fff","modified":1523731104000},{"_id":"themes/next/scripts/tags/lazy-image.js","hash":"eeeabede68cf263de9e6593ecf682f620da16f0a","modified":1523731104000},{"_id":"themes/next/scripts/tags/note.js","hash":"64de4e9d01cf3b491ffc7d53afdf148ee5ad9779","modified":1523731104000},{"_id":"themes/next/scripts/tags/tabs.js","hash":"5786545d51c38e8ca38d1bfc7dd9e946fc70a316","modified":1523731104000},{"_id":"themes/next/source/css/main.styl","hash":"20702c48d6053c92c5bcdbc68e8d0ef1369848a0","modified":1523731104000},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1523731104000},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1523731104000},{"_id":"themes/next/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1523731104000},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1523731104000},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1523731104000},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1523731104000},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1523731104000},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1523731104000},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1523731104000},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1523731104000},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1523731104000},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1523731104000},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1523731104000},{"_id":"themes/next/source/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1523731104000},{"_id":"themes/next/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1523731104000},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1523731104000},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1523731104000},{"_id":"themes/next/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1523731104000},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1523731104000},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1523731104000},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1523731104000},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1523731104000},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1523731104000},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1523731104000},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1523731104000},{"_id":"source/images/2013/08/class.png","hash":"f7724bebc971054d4df28f0feab1230f0bb8e22d","modified":1529231216000},{"_id":"source/images/2013/08/ip.gif","hash":"4527e78a356a6468feaa98400c62fabb53da675c","modified":1529231216000},{"_id":"source/images/2013/08/gearman.png","hash":"4bd73fae2873a680dcc659eccffeeafe37fa9326","modified":1529231216000},{"_id":"source/images/2013/08/ipc_unix_socket-300x300.png","hash":"6c0af0c33b6712220c8792069da491a4e21b225f","modified":1529231216000},{"_id":"source/images/2013/08/minigame.png","hash":"34bb9bce493db9017e36074ac593f5f703e44df5","modified":1529231216000},{"_id":"source/images/2013/08/oracle.png","hash":"419a753045ee3638389cb09405953e4389391307","modified":1529231216000},{"_id":"source/images/2013/10/Gitar.jpg","hash":"bc882e7e76ee2ccbbe32a134c58f79fae5cb1d3e","modified":1529231216000},{"_id":"source/images/2013/10/Violin.jpg","hash":"1648339d81ca6735d725d5c9d6caacaf4ea11842","modified":1529231216000},{"_id":"source/images/2013/12/nba.jpg","hash":"29c718e4f7cd0ad90ae859688e8ecb36c1f2b063","modified":1529231216000},{"_id":"source/images/2013/douya/ICON.jpg","hash":"ed6fb1b491d518bb4176badeb5154a15fa082bb9","modified":1529231216000},{"_id":"source/images/2013/douya/around.jpg","hash":"f474d8b0947c936dfeae2b4b83a27f45056432eb","modified":1529231216000},{"_id":"source/images/2013/douya/chat.jpg","hash":"98b6bbde13437d213c78b91d3ff7fdce32b6dabb","modified":1529231216000},{"_id":"source/images/2013/douya/collect.jpg","hash":"821c96bce387d280fbe1badc16a282a490fd0969","modified":1529231216000},{"_id":"source/images/2013/douya/description.jpg","hash":"10a2f5ab89e1d2523642099185e8c58ebcf1a49e","modified":1529231216000},{"_id":"source/images/2013/douya/friend.jpg","hash":"b1fb9e773d5e29b0ea1be34d6d933b3494b9db27","modified":1529231216000},{"_id":"source/images/2013/douya/review.jpg","hash":"c8f7df9fb232ac223e5321d7a47aec636d70e568","modified":1529231216000},{"_id":"source/images/2013/douya/myshare.jpg","hash":"390278beab70dc953416a5f8cd9ed777f5c611e2","modified":1529231216000},{"_id":"source/images/2013/douya/settiing.jpg","hash":"17da1451ef64dc0ab04f8e229933b2e0ea2a7203","modified":1529231216000},{"_id":"source/images/2013/douya/share.jpg","hash":"8148dbebcbe1c39c6be3e3e955bcff3ed80058de","modified":1529231216000},{"_id":"source/images/2013/douya/welcom.jpg","hash":"f6c1c8ea58fad081a6edde47e8a2393dc662b113","modified":1529231216000},{"_id":"source/images/2015/02/triestruct.png","hash":"815436faa82c9e3a472008a284d501be4e27e20e","modified":1529231216000},{"_id":"source/images/2015/02/suggest.png","hash":"12ba6f827db0a0f5f0990eca40fade2df297dc3a","modified":1529231216000},{"_id":"source/images/2015/08/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1529231216000},{"_id":"source/images/2014/01/rework.jpg","hash":"85e9aa2dc597ccd4f09259657b89086e5777ed69","modified":1529231216000},{"_id":"source/images/2014/10/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1529231216000},{"_id":"source/images/2014/10/free.png","hash":"5edfcc57d428db417a2d24eb6cf55c8e2a1e57cf","modified":1529231216000},{"_id":"source/images/2014/01/skiplist.png","hash":"9f65eebae2d66346528924af503181609f168dbf","modified":1529231216000},{"_id":"themes/next/layout/_partials/head/custom-head.swig","hash":"9e1b9666efa77f4cf8d8261bcfa445a9ac608e53","modified":1523731104000},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"7ce76358411184482bb0934e70037949dd0da8ca","modified":1523731104000},{"_id":"source/images/2014/10/nestat.png","hash":"3ef0d6755a7506e0f23d7507612baf61b04799d1","modified":1529231216000},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"957701729b85fb0c5bfcf2fb99c19d54582f91ed","modified":1523731104000},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"eefe2388ff3d424694045eda21346989b123977c","modified":1523731104000},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"959b7e04a96a5596056e4009b73b6489c117597e","modified":1523731104000},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"1f1107468aaf03f7d0dcd7eb2b653e2813a675b4","modified":1523731104000},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"23e23dc0f76ef3c631f24c65277adf7ea517b383","modified":1523731104000},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"89c5a5240ecb223acfe1d12377df5562a943fd5d","modified":1523731104000},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"048fd5e98149469f8c28c21ba3561a7a67952c9b","modified":1523731104000},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"deda6a814ed48debc694c4e0c466f06c127163d0","modified":1523731104000},{"_id":"themes/next/layout/_third-party/analytics/application-insights.swig","hash":"60426bf73f8a89ba61fb1be2df3ad5398e32c4ef","modified":1523731104000},{"_id":"themes/next/layout/_third-party/analytics/analytics-with-widget.swig","hash":"98df9d72e37dd071e882f2d5623c9d817815b139","modified":1523731104000},{"_id":"themes/next/layout/_third-party/analytics/busuanzi-counter.swig","hash":"18e7bef8923d83ea42df6c97405e515a876cede4","modified":1523731104000},{"_id":"themes/next/layout/_third-party/analytics/cnzz-analytics.swig","hash":"8160b27bee0aa372c7dc7c8476c05bae57f58d0f","modified":1523731104000},{"_id":"themes/next/layout/_third-party/analytics/facebook-sdk.swig","hash":"a234c5cd1f75ca5731e814d0dbb92fdcf9240d1b","modified":1523731104000},{"_id":"themes/next/layout/_third-party/analytics/firestore.swig","hash":"1cd01c6e92ab1913d48e556a92bb4f28b6dc4996","modified":1523731104000},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"5d9943d74cc2e0a91badcf4f755c6de77eab193a","modified":1523731104000},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"5e9bb24c750b49513d9a65799e832f07410002ac","modified":1523731104000},{"_id":"themes/next/layout/_third-party/analytics/lean-analytics.swig","hash":"fc65b9c98a0a8ab43a5e7aabff6c5f03838e09c8","modified":1523731104000},{"_id":"themes/next/layout/_third-party/analytics/tencent-analytics.swig","hash":"3658414379e0e8a34c45c40feadc3edc8dc55f88","modified":1523731104000},{"_id":"themes/next/layout/_third-party/analytics/tencent-mta.swig","hash":"0ddc94ed4ba0c19627765fdf1abc4d8efbe53d5a","modified":1523731104000},{"_id":"themes/next/layout/_third-party/analytics/vkontakte-api.swig","hash":"c3971fd154d781088e1cc665035f8561a4098f4c","modified":1523731104000},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"0e3378f7c39b2b0f69638290873ede6b6b6825c0","modified":1523731104000},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"c316758546dc9ba6c60cb4d852c17ca6bb6d6724","modified":1523731104000},{"_id":"themes/next/layout/_third-party/comments/duoshuo.swig","hash":"a356b2185d40914447fde817eb3d358ab6b3e4c3","modified":1523731104000},{"_id":"themes/next/layout/_third-party/comments/hypercomments.swig","hash":"3e8dc5c6c912628a37e3b5f886bec7b2e5ed14ea","modified":1523731104000},{"_id":"themes/next/layout/_third-party/comments/gitment.swig","hash":"10160daceaa6f1ecf632323d422ebe2caae49ddf","modified":1523731104000},{"_id":"themes/next/layout/_third-party/comments/index.swig","hash":"aa0629277d751c55c6d973e7691bf84af9b17a60","modified":1523731104000},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"fcabbb241f894c9a6309c44e126cf3e8fea81fd4","modified":1523731104000},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"8a2e393d2e49f7bf560766d8a07cd461bf3fce4f","modified":1523731104000},{"_id":"themes/next/layout/_third-party/comments/youyan.swig","hash":"8b6650f77fe0a824c8075b2659e0403e0c78a705","modified":1523731104000},{"_id":"themes/next/layout/_third-party/seo/baidu-push.swig","hash":"c057b17f79e8261680fbae8dc4e81317a127c799","modified":1523731104000},{"_id":"themes/next/layout/_third-party/search/index.swig","hash":"c747fb5c6b1f500e8f0c583e44195878b66e4e29","modified":1523731104000},{"_id":"themes/next/layout/_third-party/search/tinysou.swig","hash":"cb3a5d36dbe1630bab84e03a52733a46df7c219b","modified":1523731104000},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"069d1357c717572256e5cdee09574ebce529cbae","modified":1523731104000},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"385c066af96bee30be2459dbec8aae1f15d382f5","modified":1523731104000},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a44acf9b0d0f44ef3dfc767376a95c984cc127de","modified":1523731104000},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"a44acf9b0d0f44ef3dfc767376a95c984cc127de","modified":1523731104000},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"328d9a9696cc2ccf59c67d3c26000d569f46344c","modified":1523731104000},{"_id":"themes/next/source/css/_mixins/Gemini.styl","hash":"2aa5b7166a85a8aa34b17792ae4f58a5a96df6cc","modified":1523731104000},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"82f9055955920ed88a2ab6a20ab02169abb2c634","modified":1523731104000},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"9ab65361ba0a12a986edd103e56492644c2db0b8","modified":1523731104000},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"99fbb4686ea9a3e03a4726ed7cf4d8f529034452","modified":1523731104000},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"be087dcc060e8179f7e7f60ab4feb65817bd3d9f","modified":1523731104000},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"f29165e36489a87ba32d17dddfd2720d84e3f3ec","modified":1523731104000},{"_id":"themes/next/source/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1523731104000},{"_id":"themes/next/source/js/src/algolia-search.js","hash":"b172f697ed339a24b1e80261075232978d164c35","modified":1523731104000},{"_id":"themes/next/source/css/_variables/base.styl","hash":"29c261fa6b4046322559074d75239c6b272fb8a3","modified":1523731104000},{"_id":"themes/next/source/js/src/exturl.js","hash":"e42e2aaab7bf4c19a0c8e779140e079c6aa5c0b1","modified":1523731104000},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"034bc8113e0966fe2096ba5b56061bbf10ef0512","modified":1523731104000},{"_id":"themes/next/source/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1523731104000},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1523731104000},{"_id":"themes/next/source/js/src/motion.js","hash":"754b294394f102c8fd9423a1789ddb1201677898","modified":1523731104000},{"_id":"themes/next/source/js/src/post-details.js","hash":"a13f45f7aa8291cf7244ec5ba93907d119c5dbdd","modified":1523731104000},{"_id":"themes/next/source/js/src/scroll-cookie.js","hash":"09dc828cbf5f31158ff6250d2bf7c3cde6365c67","modified":1523731104000},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1523731104000},{"_id":"themes/next/source/js/src/utils.js","hash":"9b1325801d27213083d1487a12b1a62b539ab6f8","modified":1523731104000},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1523731104000},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","hash":"ff5915eb2596e890a2fc6697c864f861a1995ec0","modified":1523731104000},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/.bower.json","hash":"cc40a9b11e52348e554c84e4a5c058056f6b7aeb","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/.gitattributes","hash":"2db21acfbd457452462f71cc4048a943ee61b8e0","modified":1523731104000},{"_id":"themes/next/source/lib/fastclick/.bower.json","hash":"93ebd5b35e632f714dcf1753e1f6db77ec74449b","modified":1523731104000},{"_id":"themes/next/source/lib/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1523731104000},{"_id":"themes/next/source/lib/fastclick/README.md","hash":"1decd8e1adad2cd6db0ab50cf56de6035156f4ea","modified":1523731104000},{"_id":"themes/next/source/lib/fastclick/bower.json","hash":"13379463c7463b4b96d13556b46faa4cc38d81e6","modified":1523731104000},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"a2aaaf12378db56bd10596ba3daae30950eac051","modified":1523731104000},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"69d152fa46b517141ec3b1114dd6134724494d83","modified":1523731104000},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1523731104000},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1523731104000},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1523731104000},{"_id":"themes/next/source/lib/jquery_lazyload/.bower.json","hash":"b7638afc93e9cd350d0783565ee9a7da6805ad8e","modified":1523731104000},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","hash":"4891864c24c28efecd81a6a8d3f261145190f901","modified":1523731104000},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","hash":"895d50fa29759af7835256522e9dd7dac597765c","modified":1523731104000},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","hash":"65bc85d12197e71c40a55c0cd7f6823995a05222","modified":1523731104000},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1523731104000},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1523731104000},{"_id":"themes/next/source/lib/jquery/.bower.json","hash":"91745c2cc6c946c7275f952b2b0760b880cea69e","modified":1523731104000},{"_id":"themes/next/source/lib/velocity/.bower.json","hash":"05f960846f1c7a93dab1d3f9a1121e86812e8c88","modified":1523731104000},{"_id":"themes/next/source/lib/velocity/bower.json","hash":"2ec99573e84c7117368beccb9e94b6bf35d2db03","modified":1523731104000},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1523731104000},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1523731104000},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1523731104000},{"_id":"themes/next/source/lib/needsharebutton/font-embedded.css","hash":"c39d37278c1e178838732af21bd26cd0baeddfe0","modified":1523731104000},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.css","hash":"3ef0020a1815ca6151ea4886cd0d37421ae3695c","modified":1523731104000},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1523731104000},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.js","hash":"9885fd9bea5e7ebafc5b1de9d17be5e106248d96","modified":1523731104000},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1523731104000},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1523731104000},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1523731104000},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1523731104000},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1523731104000},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1523731104000},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1523731104000},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1523731104000},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1523731104000},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1523731104000},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1523731104000},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1523731104000},{"_id":"themes/next/source/lib/pace/pace.min.js","hash":"9944dfb7814b911090e96446cea4d36e2b487234","modified":1523731104000},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","hash":"dce4a3b65f8bf958f973690caa7ec4952f353b0c","modified":1523731104000},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","hash":"d8ea241a53c135a650f7335d2b6982b899fd58a9","modified":1523731104000},{"_id":"themes/next/source/lib/three/three-waves.min.js","hash":"d968cba6b3a50b3626a02d67b544f349d83b147c","modified":1523731104000},{"_id":"source/images/2013/12/Allen.jpg","hash":"beb71c162b39a330f8a7ca19315417677cf02da7","modified":1529231216000},{"_id":"source/images/2013/12/gitar.jpg","hash":"5033ea65c2dcf040bca626d2bac74c0297c46c9a","modified":1529231216000},{"_id":"source/images/2013/douya/main.jpg","hash":"5ee32e3abf1bc5ff1e947cc521816622e4178b58","modified":1529231216000},{"_id":"source/images/2016/04/flume.jpg","hash":"3a2faf8e79798d88c9e75e745b0eb7f13b64b17b","modified":1529231216000},{"_id":"source/images/2014/04/guitar.jpg","hash":"a1ac5d4fecf25613440a8373499ed495069c1f48","modified":1529231216000},{"_id":"source/images/2014/10/top.png","hash":"3bb33050e8609d6b3c697b391196e84db2fded31","modified":1529231216000},{"_id":"themes/next/source/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1523731104000},{"_id":"source/images/2013/09/hadoop.png","hash":"c6059a50e0d67ca8b877187d3d4c03a9bd8ffb66","modified":1529231216000},{"_id":"source/images/2016/04/flume1toflume2.jpg","hash":"160b81bd0de441b51ce03fc06fa9dd1fb02349c1","modified":1529231216000},{"_id":"source/images/2015/08/teammate.png","hash":"0e58c75f06a14585a0b1eb8501c7c5a474255fb4","modified":1529231216000},{"_id":"themes/next/layout/_third-party/search/algolia-search/assets.swig","hash":"28ff4ed6714c59124569ffcbd10f1173d53ca923","modified":1523731104000},{"_id":"themes/next/layout/_third-party/search/algolia-search/dom.swig","hash":"ba698f49dd3a868c95b240d802f5b1b24ff287e4","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"31050fc7a25784805b4843550151c93bfa55c9c8","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"4719ce717962663c5c33ef97b1119a0b3a4ecdc3","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"471f1627891aca5c0e1973e09fbcb01e1510d193","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"7e509c7c28c59f905b847304dd3d14d94b6f3b8e","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"a6bb5256be6195e76addbda12f4ed7c662d65e7a","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"c5d48863f332ff8ce7c88dec2c893f709d7331d3","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"dd8a3b22fc2f222ac6e6c05bd8a773fb039169c0","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"18c3336ee3d09bd2da6a876e1336539f03d5a973","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"c2d079788d6fc2e9a191ccdae94e50d55bf849dc","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"5ae7906dc7c1d9468c7f4b4a6feddddc555797a1","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"3b25edfa187d1bbbd0d38b50dd013cef54758abf","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"9a5581a770af8964064fef7afd3e16963e45547f","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"b0dcca862cd0cc6e732e33d975b476d744911742","modified":1523731104000},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"f7c44b0ee46cf2cf82a4c9455ba8d8b55299976f","modified":1523731104000},{"_id":"themes/next/source/css/_common/scaffolding/mobile.styl","hash":"47a46583a1f3731157a3f53f80ed1ed5e2753e8e","modified":1523731104000},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"ece571f38180febaf02ace8187ead8318a300ea7","modified":1523731104000},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"a280a583b7615e939aaddbf778f5c108ef8a2a6c","modified":1523731104000},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"9c25c75311e1bd4d68df031d3f2ae6d141a90766","modified":1523731104000},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"64f5d56c08d74a338813df1265580ca0cbf0190b","modified":1523731104000},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"2186be20e317505cd31886f1291429cc21f76703","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"38e5df90c8689a71c978fd83ba74af3d4e4e5386","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"215de948be49bcf14f06d500cef9f7035e406a43","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"5b93958239d3d2bf9aeaede44eced2434d784462","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"c4ed249798296f60bda02351fe6404fb3ef2126f","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"2f878213cb24c5ddc18877f6d15ec5c5f57745ac","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"9d16fa3c14ed76b71229f022b63a02fd0f580958","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"0efa036a15c18f5abb058b7c0fad1dd9ac5eed4c","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"69ecd6c97e7cdfd822ac8102b45ad0ede85050db","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"4aac01962520d60b03b23022ab601ad4bd19c08c","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"a0e2030a606c934fb2c5c7373aaae04a1caac4c5","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"8829bc556ca38bfec4add4f15a2f028092ac6d46","modified":1523731104000},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"8050a5b2683d1d77238c5762b6bd89c543daed6e","modified":1523731104000},{"_id":"themes/next/source/lib/Han/dist/han.min.css","hash":"a0c9e32549a8b8cf327ab9227b037f323cdb60ee","modified":1523731104000},{"_id":"themes/next/source/lib/Han/dist/han.css","hash":"bd40da3fba8735df5850956814e312bd7b3193d7","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1523731104000},{"_id":"themes/next/source/lib/Han/dist/han.min.js","hash":"f559c68a25065a14f47da954a7617d87263e409d","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1523731104000},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1523731104000},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1523731104000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1523731104000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1523731104000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1523731104000},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1523731104000},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1523731104000},{"_id":"source/images/2017/05/dlist-delete.png","hash":"1e39536f859c8c83b935f2c0f5c46e740f2b2e70","modified":1529231216000},{"_id":"themes/next/source/lib/Han/dist/han.js","hash":"e345397e0585c9fed1449e614ec13e0224acf2ab","modified":1523731104000},{"_id":"themes/next/source/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1523731104000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1523731104000},{"_id":"source/images/2017/05/dlist-insert.png","hash":"bb916f2969d562878be21cb087c846d6a97d3ec2","modified":1529231216000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"7905a7f625702b45645d8be1268cb8af3f698c70","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"f5aa2ba3bfffc15475e7e72a55b5c9d18609fdf5","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"4eff5b252d7b614e500fc7d52c97ce325e57d3ab","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"2039590632bba3943c39319d80ef630af7928185","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"9bf4362a4d0ae151ada84b219d39fbe5bb8c790e","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"a82afbb72d83ee394aedc7b37ac0008a9823b4f4","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"96f32ea6c3265a3889e6abe57587f6e2a2a40dfb","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"25dc25f61a232f03ca72472b7852f882448ec185","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"ae1ca14e51de67b07dba8f61ec79ee0e2e344574","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"b76387934fb6bb75212b23c1a194486892cc495e","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"8a2421cb9005352905fae9d41a847ae56957247e","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d27448f199fc2f9980b601bc22b87f08b5d64dd1","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"6c00f6e0978f4d8f9a846a15579963728aaa6a17","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"0a6c0efffdf18bddbc1d1238feaed282b09cd0fe","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"49c2b2c14a1e7fcc810c6be4b632975d0204c281","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"89dd4f8b1f1cce3ad46cf2256038472712387d02","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"920343e41c124221a17f050bbb989494d44f7a24","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-dimmer.styl","hash":"efa5e5022e205b52786ce495d4879f5e7b8f84b2","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"9486ddd2cb255227db102d09a7df4cae0fabad72","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"45fa7193435a8eae9960267438750b4c9fa9587f","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"12937cae17c96c74d5c58db6cb29de3b2dfa14a2","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"f7784aba0c1cd20d824c918c120012d57a5eaa2a","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/third-party/algolia-search.styl","hash":"fd42777b9125fd8969dc39d4f15473e2b91b4142","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"50305b6ad7d09d2ffa4854e39f41ec1f4fe984fd","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"3623e7fa4324ec1307370f33d8f287a9e20a5578","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"93b08815c4d17e2b96fef8530ec1f1064dede6ef","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"d4e6d8d7b34dc69994593c208f875ae8f7e8a3ae","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/third-party/gitment.styl","hash":"34935b40237c074be5f5e8818c14ccfd802b7439","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/third-party/han.styl","hash":"cce6772e2cdb4db85d35486ae4c6c59367fbdd40","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"327b5f63d55ec26f7663185c1a778440588d9803","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"2340dd9b3202c61d73cc708b790fac5adddbfc7f","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"d89c4b562b528e4746696b2ad8935764d133bdae","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/third-party/needsharebutton.styl","hash":"a5e3e6b4b4b814a9fe40b34d784fed67d6d977fa","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"1ccfbd4d0f5754b2dc2719a91245c95f547a7652","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"e72a89e0f421444453e149ba32c77a64bd8e44e8","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"0f7f522cc6bfb3401d5afd62b0fcdf48bb2d604b","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"f54367c0feda6986c030cc4d15a0ca6ceea14bcb","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"2cdc094ecf907a02fce25ad4a607cd5c40da0f2b","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"535b3b4f8cb1eec2558e094320e7dfb01f94c0e7","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"387ce23bba52b22a586b2dfb4ec618fe1ffd3926","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"aea21141015ca8c409d8b33e3e34ec505f464e93","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"a5d8617a24d7cb6c5ad91ea621183ca2c0917331","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"36332c8a91f089f545f3c3e8ea90d08aa4d6e60c","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"a352ae5b1f8857393bf770d2e638bf15f0c9585d","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"017074ef58166e2d69c53bb7590a0e7a8947a1ed","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"d5a4e4fc17f1f7e7c3a61b52d8e2e9677e139de7","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"10251257aceecb117233c9554dcf8ecfef8e2104","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"e4055a0d2cd2b0ad9dc55928e2f3e7bd4e499da3","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"262debfd4442fa03d9919ceb88b948339df03fb0","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"c2abe4d87148e23e15d49ee225bc650de60baf46","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/tags/exturl.styl","hash":"1b3cc9f4e5a7f6e05b4100e9990b37b20d4a2005","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"37e951e734a252fe8a81f452b963df2ba90bfe90","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"4851b981020c5cbc354a1af9b831a2dcb3cf9d39","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/tags/label.styl","hash":"4a457d265d62f287c63d48764ce45d9bcfc9ec5a","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/tags/note-modern.styl","hash":"ee7528900578ef4753effe05b346381c40de5499","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"32c9156bea5bac9e9ad0b4c08ffbca8b3d9aac4b","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/tags/tabs.styl","hash":"4ab5deed8c3b0c338212380f678f8382672e1bcb","modified":1523731104000},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"ead0d0f2321dc71505788c7f689f92257cf14947","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"5dc4859c66305f871e56cba78f64bfe3bf1b5f01","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1523731104000},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1523731104000},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1523731104000},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1523731104000},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1523731104000},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1523731104000},{"_id":"themes/next/source/lib/Han/dist/font/han.woff2","hash":"623af3ed5423371ac136a4fe0e8cc7bb7396037a","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1523731104000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1523731104000},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1523731104000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1523731104000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1523731104000},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1523731104000},{"_id":"themes/next/source/lib/three/three.min.js","hash":"73f4cdc17e51a72b9bf5b9291f65386d615c483b","modified":1523731104000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1523731104000},{"_id":"public/categories/index.html","hash":"198205acf2f6afdcb14d48b0227cda9a7b45820f","modified":1564838588642},{"_id":"public/about/index.html","hash":"1686db54d2a8b234f4523878bf0cb548252d6ca5","modified":1564838588659},{"_id":"public/2014/11/29/2014-11-29-yong-dao-de-tcpdump/index.html","hash":"a896bcfffcbc9a087d0493d620ec515d0e02aeea","modified":1564838588660},{"_id":"public/2014/07/27/2014-07-27-rsyslog-jie-shou-yuan-cheng-ri-zhi/index.html","hash":"52ac58c3cb8ddf9cfdf8b1a4b5e147bfa6adbcc6","modified":1564838588660},{"_id":"public/2014/05/03/2014-05-03-mac-an-zhuang-go/index.html","hash":"683ff771594a918ffd510a573304bc46d356ab38","modified":1564838588660},{"_id":"public/2013/04/02/2013-04-02-zhe-teng/index.html","hash":"de884797f82d03d8c6096beb6f66a1b229470c1d","modified":1564838588660},{"_id":"public/tags/groupCache/index.html","hash":"1a995ea032af0330911e0406be79ecfb8a5478ae","modified":1564838588839},{"_id":"public/archives/2012/index.html","hash":"9acb9060dbfb8cda36ba1dae07661da187af7372","modified":1564838588839},{"_id":"public/archives/2012/03/index.html","hash":"9654b2f837b2798e19f32e71b80efd64f0336afe","modified":1564838588839},{"_id":"public/archives/2012/05/index.html","hash":"0016e8d96f8479ce2517f3408a1550aea06e901c","modified":1564838588840},{"_id":"public/archives/2012/07/index.html","hash":"ad8668f275bc405f4058fba69e52f8c7a8e2211a","modified":1564838588840},{"_id":"public/archives/2012/11/index.html","hash":"9f21f0c985985a8620fe33130c544ddfb74cf62a","modified":1564838588840},{"_id":"public/archives/2012/12/index.html","hash":"21bda34c39c9bb1122dd3d0629724668e142d313","modified":1564838588840},{"_id":"public/archives/2013/page/3/index.html","hash":"d86c425a2e78861bf8eb352a543d014c2f25d899","modified":1564838588840},{"_id":"public/archives/2013/02/index.html","hash":"8e8e55f06288b5f0663405f03ca32bc7dcf59df8","modified":1564838588840},{"_id":"public/archives/2013/04/index.html","hash":"a6423ba4c2172b6a57bd43abb751706ab98ba117","modified":1564838588840},{"_id":"public/archives/2013/05/index.html","hash":"9fc5c21559c92e838e7342766cc335e2e1fc6368","modified":1564838588840},{"_id":"public/archives/2013/06/index.html","hash":"cb869f681d7ae728e24f6ef6f801df0e3d1552f0","modified":1564838588840},{"_id":"public/archives/2013/07/index.html","hash":"139f16f3add2466666d51b62fa82d6b09d40995a","modified":1564838588840},{"_id":"public/archives/2013/08/index.html","hash":"7d66a4e5e1a522ee788aa834523f95e97d750d39","modified":1564838588840},{"_id":"public/archives/2013/09/index.html","hash":"2abf1b957059776a84407a57264898ca63c96da9","modified":1564838588841},{"_id":"public/archives/2013/11/index.html","hash":"07a46a505335f98224be7c1243c200defecfc959","modified":1564838588841},{"_id":"public/archives/2013/12/index.html","hash":"b4e5d2d62d22d10758461ffc9c31f278c6de0a64","modified":1564838588841},{"_id":"public/archives/2014/page/3/index.html","hash":"b9f67121d2bf2b7ab1699f9dde7bb975a4651b6d","modified":1564838588841},{"_id":"public/archives/2014/01/index.html","hash":"c4715a3e7de1bf47a20ad79aba4b6cf4fb039b91","modified":1564838588841},{"_id":"public/archives/2014/02/index.html","hash":"a06567db454e3ce7078ccabeccd76b1d9d283686","modified":1564838588841},{"_id":"public/archives/2014/03/index.html","hash":"b05891423c9cee077067bd30b33823f2efc4bec1","modified":1564838588841},{"_id":"public/archives/2014/04/index.html","hash":"ec715d5e6dad97dae8cbf15f3fce20bfd45b4b13","modified":1564838588841},{"_id":"public/archives/2014/05/index.html","hash":"4b8096e9bc54b23b40e3ff28763fd473aa313133","modified":1564838588841},{"_id":"public/archives/2014/06/index.html","hash":"a5cdcf07b4202ff5a8769f9e75a345adcac26604","modified":1564838588841},{"_id":"public/archives/2014/07/index.html","hash":"0c1a7d891d260513e1e9eb3ec932fa892c76dbe0","modified":1564838588841},{"_id":"public/archives/2014/09/index.html","hash":"4bf15bac0b91d2badce16b0f33586911c68a305b","modified":1564838588841},{"_id":"public/archives/2014/10/index.html","hash":"7e1bea1ad7989e083719b55d7d52dea038ffa567","modified":1564838588841},{"_id":"public/archives/2014/11/index.html","hash":"05f290c352daf2f16d1c5780107337a4bbb49cfd","modified":1564838588841},{"_id":"public/archives/2014/12/index.html","hash":"0407650c68260f82dae7811f874002605e666d4f","modified":1564838588842},{"_id":"public/archives/2015/01/index.html","hash":"3dfad5a33f6aefe7a4277e91f7cca1d3e4e2ecb8","modified":1564838588842},{"_id":"public/archives/2015/02/index.html","hash":"778f40f59183bee2453ad2016bca2491468563c0","modified":1564838588842},{"_id":"public/archives/2015/04/index.html","hash":"a2e867492c0277fac980d26bc0ce141d623ec66d","modified":1564838588842},{"_id":"public/archives/2015/05/index.html","hash":"b09bf8e607f9e00a1f861452794ff00e27e2b802","modified":1564838588842},{"_id":"public/archives/2015/06/index.html","hash":"2fe0d57b38cb1cf67aad6bd72758ab13a4c24d82","modified":1564838588842},{"_id":"public/archives/2015/07/index.html","hash":"ae7ed2b272cd699c3c2a928d6824eb97e0d0f179","modified":1564838588842},{"_id":"public/archives/2015/08/index.html","hash":"9142eacf348ec7b5c334b3301d59eeea2696cdc3","modified":1564838588842},{"_id":"public/archives/2015/09/index.html","hash":"b500d73988efc18c04df3f839b05ca1d3add3456","modified":1564838588842},{"_id":"public/archives/2015/10/index.html","hash":"0b3969f5c30eabb66a1e889dad56adc70c8922d6","modified":1564838588842},{"_id":"public/archives/2015/12/index.html","hash":"16b1772d7a26e10745fe84517af3943d59e767e2","modified":1564838588843},{"_id":"public/archives/2016/page/2/index.html","hash":"3f14ea0473f38f5f0445b61edfc66f163bd50544","modified":1564838588842},{"_id":"public/archives/2016/01/index.html","hash":"ff5be63133feee92ba26472f1d9bbcaabb13d7ac","modified":1564838588842},{"_id":"public/archives/2016/03/index.html","hash":"99fb97c62ad736ec12dcc366c299dd96a3c449ca","modified":1564838588842},{"_id":"public/archives/2016/04/index.html","hash":"8c288a84e93a28f8b074e2004cf18d00c045d601","modified":1564838588842},{"_id":"public/archives/2016/06/index.html","hash":"c3c33e3fa98e974dedb5b4ce2215a9c2a697f073","modified":1564838588842},{"_id":"public/archives/2016/07/index.html","hash":"af8e0de1ebca77bf257087db59309afc3f5cec0f","modified":1564838588843},{"_id":"public/archives/2016/08/index.html","hash":"958e5381b5f69824744fdf4a85ea96f96be9d53e","modified":1564838588843},{"_id":"public/archives/2016/09/index.html","hash":"c2339cbb0fea38f6007048512c1c736bba2b745b","modified":1564838588843},{"_id":"public/archives/2016/12/index.html","hash":"4f135cea9afaebd7deeb80f87c9331a52d1b0d1d","modified":1564838588843},{"_id":"public/archives/2017/index.html","hash":"6856da0989002ddb3217ad1914d5ff69d4582a7c","modified":1564838588843},{"_id":"public/archives/2017/02/index.html","hash":"fb1c01d7165ace9f6448055a436d762d0a89ae69","modified":1564838588843},{"_id":"public/archives/2017/05/index.html","hash":"aacf9b9f915dce38b1794ebf9df671558fe335b1","modified":1564838588843},{"_id":"public/archives/2017/06/index.html","hash":"143e71f467a1240d032c02b620e26535de126c7f","modified":1564838588844},{"_id":"public/archives/2017/07/index.html","hash":"955a2ecb950b451a315ba5f7703bdbd253f12e1c","modified":1564838588844},{"_id":"public/archives/2018/index.html","hash":"bdf258b767a64d5669d241ccce42f64e3f834691","modified":1564838588843},{"_id":"public/archives/2018/06/index.html","hash":"634a9a012260e2cdb6b76892d65ac29cf266d2b3","modified":1564838588843},{"_id":"public/archives/2018/07/index.html","hash":"3723f42d36667a35d1719d2be4d9fe3b0477fd31","modified":1564838588843},{"_id":"public/archives/2018/09/index.html","hash":"7c504e5e902116994e087eb43ff2b172ec99cfd3","modified":1564838588843},{"_id":"public/archives/2019/index.html","hash":"9ddaa04ee6bf1adef7b90ce6bb6b7a049f81894a","modified":1564838588843},{"_id":"public/archives/2019/02/index.html","hash":"7375e8175f1d9cfbe45eefae788d316a85d30dad","modified":1564838588843},{"_id":"public/categories/Life/page/2/index.html","hash":"b410373fff5a41be1ede1ea6f12dbc0a7546d3c4","modified":1564838588660},{"_id":"public/categories/Server/page/2/index.html","hash":"e222afc53c12928c7768c6e9445d39b581a2d381","modified":1564838588839},{"_id":"public/categories/Product/index.html","hash":"63b1a1ad6f78066a03f52635ddcab1b682cbdfbd","modified":1564838588660},{"_id":"public/categories/NetWork/index.html","hash":"44859d16f35d3bcdd7dfb1dff4c836a5b44b1b24","modified":1564838588839},{"_id":"public/categories/DataBase/page/2/index.html","hash":"016e7a3791c94194864ad8633a0c057ad959635a","modified":1564838588839},{"_id":"public/categories/NLP/index.html","hash":"1f6dbbe1677c2761e5173663d0b2be036ea550e0","modified":1564838588839},{"_id":"public/2018/09/08/2018-09-08-edit-distance/index.html","hash":"eb1c8c30817e0d5839d8630162fabbdd008c487c","modified":1564838588661},{"_id":"public/2018/07/01/2018-07-01-boost-utility/index.html","hash":"0153faec7fcad5ee3eaa7d4ffadb2864cf48c70b","modified":1564838588662},{"_id":"public/2018/06/17/2018-06-17-ban-nian-sui-xiang/index.html","hash":"afcde0bb4a6bc6f62aab4c77335e7b43bcfe6a27","modified":1564838588661},{"_id":"public/2017/07/13/2017-07-13-httpserver-graceful-shutdown-in-go/index.html","hash":"c1cd0e55c21ea2f5448fd10e5f19b38c281e5b87","modified":1564838588661},{"_id":"public/2017/06/04/2017-06-04-mit-6-dot-824-mapreduce/index.html","hash":"9618bd45b563776d8f7259598905cc36ee7d7da6","modified":1564838588661},{"_id":"public/2016/12/02/2016-12-02-cgroupxian-zhi-ji-suan-zi-yuan/index.html","hash":"245ee444bf9c8997d7a550579582e830bea1eec6","modified":1564838588661},{"_id":"public/2016/09/28/2016-09-28-ji-yi-ci-redis-server-bug/index.html","hash":"3cd4f641484657beaefd600324f04ff55da2c42e","modified":1564838588661},{"_id":"public/2016/07/16/2016-07-16-bash-jia-zai-shun-xu/index.html","hash":"2e3b23237f9591048122e1544ef8d015ab1b7d6b","modified":1564838588662},{"_id":"public/2016/04/23/2016-04-23-flume-shi-shi-shou-ji-nginx-ri-zhi/index.html","hash":"cba0b70fcca9519718ef56de0a93b20cbe92bdaf","modified":1564838588662},{"_id":"public/2016/01/07/2016-01-07-shi-shi-jian-kong-nginx-qps-de-tuo-zhan/index.html","hash":"836397d15044756b748f8f7d44095deea065e693","modified":1564838588662},{"_id":"public/2015/12/05/2015-12-05-gre-tuning-and-keepalived/index.html","hash":"4c20e39b6709a3cbe38f9a95afa9c986e1b2407f","modified":1564838588662},{"_id":"public/2015/10/06/2015-10-06-ji-lu-shi-yong-flaskde-dian-di/index.html","hash":"b8e5e1756e31882e0bd4fcfd8cb2f248c6b688b7","modified":1564838588662},{"_id":"public/2015/10/01/2015-10-01-python-shi-yong-ldap/index.html","hash":"70eefc3d835db02c24eaf4274b9ab0d464788574","modified":1564838588663},{"_id":"public/2015/08/16/2015-08-16-twemproxy/index.html","hash":"5f2c0e27978fd498c0c5476ad2ab22e8cc5a21c6","modified":1564838588663},{"_id":"public/2015/07/12/2015-07-12-my-dot-cnfpei-zhi-yi-ju/index.html","hash":"b76ce81239caae5bec130b7938bc2cabb45f5017","modified":1564838588663},{"_id":"public/2015/05/17/2015-05-17-da-jian-postfix/index.html","hash":"4a2acf2d06fc09a5df77c56301be54b175122116","modified":1564838588666},{"_id":"public/2015/02/08/2015-02-08-trie-suggestion/index.html","hash":"cc41bc5a3e3c4e19cf49c15c5ebb4596b5307c04","modified":1564838588663},{"_id":"public/2015/01/31/2015-01-31-da-jian-elasticsearchyu-kibana/index.html","hash":"740a5708a8879d140da98576fce14844005e6249","modified":1564838588663},{"_id":"public/2014/12/13/2014-12-13-nginxcuo-wu-ma/index.html","hash":"b009b823763e9cfc363a6f76451e082396dc987c","modified":1564838588663},{"_id":"public/2014/11/02/2014-11-02-nginxyu-phpxi-tong-can-shu-pei-zhi/index.html","hash":"ffb3af51e2be31cb0aadfd5d66c97dd7c659ac9c","modified":1564838588664},{"_id":"public/2014/09/07/2014-09-07-percona-server-zuo-zhu-cong/index.html","hash":"5b4c73902862d5fc8b44a241edc02f870caa1b98","modified":1564838588664},{"_id":"public/2014/05/03/2014-05-03-make-setup-dot-py/index.html","hash":"1e21c4bd416131e28dc5942a7f25a0eae07288a6","modified":1564838588664},{"_id":"public/2014/04/28/2014-04-28-wei-wen-yi-lu/index.html","hash":"dec6eb240173e098da166b4a353bddfd6bc17f6b","modified":1564838588664},{"_id":"public/2014/02/01/2014-02-01-tiao-biao-skiplist/index.html","hash":"897ca2e4bba7a5b0aa048e018223624be3ed18db","modified":1564838588665},{"_id":"public/2013/09/21/2013-09-21-leveldbben-di-cun-chu-yin-qing-jing-zhi-de-gong-ju/index.html","hash":"2df2414cd47be38fe60dbc3b20bbcd0c5dea878f","modified":1564838588666},{"_id":"public/2013/06/20/2013-08-30-fen-bu-shi-chu-li-kuang-jia-gearman/index.html","hash":"45c3b29f105ea6025101280a2fc9af8e383d64de","modified":1564838588666},{"_id":"public/2013/02/17/2013-08-28-nginxmo-kuai-kai-fa/index.html","hash":"ec35f0ccbd2bdd0a109e46da1f857d3520a0da3e","modified":1564838588666},{"_id":"public/2013/02/12/2013-08-28-zai-lu-shang/index.html","hash":"b85ee298e12944fbdec3bd2bdca74810ef56d225","modified":1564838588667},{"_id":"public/2012/12/27/2013-08-28-thread-pool-in-python/index.html","hash":"2821c80a5f85fb1839026c15afb7ba46ae40031d","modified":1564838588667},{"_id":"public/2012/11/28/2013-08-26-si-kao-yu-fen-xiang-shi-jie-zhi-sheng-hua/index.html","hash":"fe6e915bc6b050e359123dd183aeecc2fba551c3","modified":1564838588667},{"_id":"public/2012/07/12/2013-08-26-jiao-shen-ma-rong-yu-chu-pin-dou-ya-huan-shu/index.html","hash":"4494a30ba40d1ff9e71f5c3aba951aadf8c7f67e","modified":1564838588667},{"_id":"public/2012/05/07/2013-08-28-zuo-kuai-le-de-cheng-xu-yuan/index.html","hash":"ae0f1b00568bd01569ed0fe046515718e6a2e436","modified":1564838588667},{"_id":"public/archives/index.html","hash":"ab8f7ab157531886cc96c10c9ba82a459e18739f","modified":1564838588845},{"_id":"public/archives/page/2/index.html","hash":"bf9bf67aeee33bffc86ed4d0f72f6edaae01af06","modified":1564838588844},{"_id":"public/archives/page/3/index.html","hash":"1cb4e8a04d43f05d3d63d03f18645581c447e95a","modified":1564838588844},{"_id":"public/archives/page/4/index.html","hash":"ec7d6341c67be70a7aaedb27e5ad38cddd7b6560","modified":1564838588845},{"_id":"public/archives/page/5/index.html","hash":"464a8bf3563b27be5531b095f687f872cf591364","modified":1564838588845},{"_id":"public/archives/page/6/index.html","hash":"e2531bbfb13d5ccfd35dd2815bdd4a3f206ca4c5","modified":1564838588845},{"_id":"public/archives/page/7/index.html","hash":"0721208c081b3bef4826c512fe36cef37099cb2c","modified":1564838588845},{"_id":"public/archives/page/8/index.html","hash":"beb585ae2cd00bf6f4918e2bd648ee8810b9aacd","modified":1564838588845},{"_id":"public/archives/page/9/index.html","hash":"e9f75aa5b4bed51c2cc7ed58266795c7fe5d70ab","modified":1564838588845},{"_id":"public/archives/page/10/index.html","hash":"baa4fbcde7f598d111896a7c5824c58b6a551c77","modified":1564838588845},{"_id":"public/archives/2013/index.html","hash":"2b6cccbc10cb0b3e2f91c567f816263bf550275a","modified":1564838588845},{"_id":"public/archives/2013/page/2/index.html","hash":"f2e009e19b158d77e58fbfb35ef592bb79f7a250","modified":1564838588846},{"_id":"public/archives/2014/index.html","hash":"da44f434f859303d756d633907f09e35aeccd895","modified":1564838588846},{"_id":"public/archives/2014/page/2/index.html","hash":"2622ad8381bb5c6429bfb43443022ead990852b8","modified":1564838588846},{"_id":"public/archives/2015/index.html","hash":"24446d86ee8cb7db5a8a00319c3c5ce496c827d2","modified":1564838588846},{"_id":"public/archives/2015/page/2/index.html","hash":"516e9c91d02187d7cc9838d2f8f931a900d03a8f","modified":1564838588846},{"_id":"public/archives/2016/index.html","hash":"02f9e7ff8d94893b78a81966bc856617dc74d92c","modified":1564838588846},{"_id":"public/categories/Life/index.html","hash":"a0db80bc3db6128b864aebc3e9ffa0460fbb58fa","modified":1564838588669},{"_id":"public/categories/Server/index.html","hash":"4bbc1bc8c2c25807c00cb7a26c06811d93f99a33","modified":1564838588669},{"_id":"public/categories/Program/index.html","hash":"3e33a0a1ab53789d6f43fc4ae36ee3c8df7d9d40","modified":1564838588844},{"_id":"public/categories/Program/page/2/index.html","hash":"4a0c43403044bea4d70cff2d2412bfeb7b96d51a","modified":1564838588844},{"_id":"public/categories/Program/page/3/index.html","hash":"455c471db06e8c9e3802a0377bcb8018e65cec7b","modified":1564838588844},{"_id":"public/categories/DataBase/index.html","hash":"e7598ee57a3b062dc69fd609859b3b783607d43e","modified":1564838588844},{"_id":"public/categories/System/index.html","hash":"e663523d23d9ddce7036ff4a9ec0336b6315f831","modified":1564838588844},{"_id":"public/categories/System/page/2/index.html","hash":"a066da64782efa8588525113a8e0db1cfdf74e44","modified":1564838588844},{"_id":"public/index.html","hash":"f91e96c3e2c5d8b78950852ccad5e1d2622ca6cc","modified":1564838588667},{"_id":"public/page/2/index.html","hash":"e173f32c307bc7ae09e4eea3ee1676dd319522e8","modified":1564838588667},{"_id":"public/page/3/index.html","hash":"07ddf8c83f63acfe503730ec1ceee443a40ad8a8","modified":1564838588667},{"_id":"public/page/4/index.html","hash":"f34250e481bbc7771e46c4a43f2db0510e4705cb","modified":1564838588668},{"_id":"public/page/5/index.html","hash":"cbd62da43fcfc335b5cacaf9073c2957bbcb144b","modified":1564838588668},{"_id":"public/page/6/index.html","hash":"23ec8e84d01e2a5e00cc1cbec270fe752aea6ac5","modified":1564838588668},{"_id":"public/page/7/index.html","hash":"6df28abcf026231479d7b7a25d980ad1d4877383","modified":1564838588669},{"_id":"public/page/8/index.html","hash":"fd424e1d6ec0e184a823e5d8be0be62d18f422b3","modified":1564838588668},{"_id":"public/page/9/index.html","hash":"3d53dd1d93a96fb3d52493e324dd1cae3dd9107f","modified":1564838588669},{"_id":"public/page/10/index.html","hash":"22a355c31a3b45a52132351c0facbb51b09156df","modified":1564838588668},{"_id":"public/2015/08/10/2015-08-10-hackthon/index.html","hash":"49fc967a34ce467d19af545a6f26f30d7f8ae345","modified":1564838588660},{"_id":"public/2015/07/24/2015-07-24-ji-lu-cuo-wu-deng-lu-de-btmpwen-jian/index.html","hash":"d734910cefd6bc15f58d1ab77854bc1a1a093a88","modified":1564838588660},{"_id":"public/2014/11/25/2014-11-25-tired/index.html","hash":"a26483e5c84b7b6af808c1b0f10259114294ca26","modified":1564838588660},{"_id":"public/2014/10/29/2014-10-29-iptablezuo-natzhuan-fa/index.html","hash":"94816d3aa2acb0ce4c2c7c1e90d5b7c7d69ba944","modified":1564838588660},{"_id":"public/2014/10/04/2014-10-04-redisre-bei/index.html","hash":"289c922120d381bde1eb07cfe2ef1abeb6125020","modified":1564838588660},{"_id":"public/2012/03/17/2013-08-28-fu-wu-qi-she-ji-mo-xing/index.html","hash":"4550fb8b7610e92a08cff98168b97aad18f786ec","modified":1564838588660},{"_id":"public/2019/02/22/2019-03-08-es-skill/index.html","hash":"0083bce8b78301c0d24be59470e1c50a5c7d8223","modified":1564838588661},{"_id":"public/2019/02/22/2019-02-22-ac-automachine/index.html","hash":"750ea84addfb601a750d27c14d490f511dc19610","modified":1564838588661},{"_id":"public/2019/02/05/2019-02-05-blocking-queue/index.html","hash":"71dd98c4ce1a85c7ef95235b6ba8cd95ae9a62a4","modified":1564838588660},{"_id":"public/2018/07/14/2018-07-27-valgrind-sanitize/index.html","hash":"9dae8ed8673bd363f70084e05e5e58465fc63a92","modified":1564838588661},{"_id":"public/2018/07/14/2018-07-14-libco-study/index.html","hash":"edeffe0fb7426ff79c6465b6128f0369c9b4eca9","modified":1564838588662},{"_id":"public/2017/05/29/2017-05-29-shuang-duan-lian-biao/index.html","hash":"9d62cb239219f266dcfc394797e4908b1661f3c4","modified":1564838588661},{"_id":"public/2017/02/25/2017-02-25-zookeeper-bi-ji/index.html","hash":"8d38406101ca932ee45f41c8f57152e77e3c68b1","modified":1564838588661},{"_id":"public/2017/02/22/2017-02-22-zheng-xiang-yu-fan-xiang-dai-li/index.html","hash":"f690d37dacfef94fbfc989e2a31683897fcd2a6a","modified":1564838588661},{"_id":"public/2016/09/25/2016-09-25-gong-xiang-nei-cun-yu-xin-hao-liang/index.html","hash":"1dc6fa8a6790ef34c3319b66f22b535954b8f9a8","modified":1564838588661},{"_id":"public/2016/08/01/2016-08-01-cuckoofilter/index.html","hash":"4ea6dba1bd0322adb0e6334c4b01fec48a374836","modified":1564838588661},{"_id":"public/2016/07/23/2016-07-23-celeryde-crontabshi-jian/index.html","hash":"18da6a4e26ea3363d1b0d98304c5547f1aac5a11","modified":1564838588662},{"_id":"public/2016/06/03/2016-06-03-zhun-que-jian-ce-mysql-fu-zhi-yan-chi/index.html","hash":"b50d851a6f980c92cfb97f301086dc239885ed8f","modified":1564838588662},{"_id":"public/2016/04/24/2016-04-24-ansible-dynamic-inventory/index.html","hash":"d54c7f970a94a679bc3b03716e11e8fbfc942565","modified":1564838588662},{"_id":"public/2016/03/10/2016-03-10-gai-xuan-ze-na-chong-redischi-jiu-hua-pei-zhi/index.html","hash":"60a17129f7ad9404221d5d69614978d6f3d5c360","modified":1564838588662},{"_id":"public/2015/12/10/2015-12-10-fen-xi-nginxri-zhi-de-li-qi-goaccess/index.html","hash":"0f001da857e615438852362399f8029f44f5b919","modified":1564838588662},{"_id":"public/2015/10/29/2015-10-29-gei-tengine-jia-shang-lua-tuo-zhan/index.html","hash":"63ffba34dc118d499c9ecb977562da67cb9082ab","modified":1564838588662},{"_id":"public/2015/09/10/2015-09-10-sysdig-zhi-de-yong-you/index.html","hash":"69e6d0450b109e815d5575806efac3f14f99585f","modified":1564838588663},{"_id":"public/2015/09/05/2015-09-05-ansiblede-shi-yong-jing-yan/index.html","hash":"dc3c4b647649316aac736ccf881b226150bd3787","modified":1564838588663},{"_id":"public/2015/08/21/2015-08-21-supervisorjian-ting-qi/index.html","hash":"4dad23c2f440afa066403471be1f40596feaf10c","modified":1564838588663},{"_id":"public/2015/06/11/2015-06-11-qing-qiao-shi-shi-tong-ji-yong-hu-shu/index.html","hash":"06fea0fde28cfb88b54b7939b7536e0010565a96","modified":1564838588663},{"_id":"public/2015/05/10/2015-05-10-mysql-slave-relay-log-corrupt-chu-li-he-hui-fu/index.html","hash":"5d9ad741bf3c843ce31c0e8cc27ed8ea7fc29350","modified":1564838588663},{"_id":"public/2015/04/05/2015-04-05-yong-bao-docker/index.html","hash":"f244187a0e0577f2928aea42e38e22e6013810b9","modified":1564838588663},{"_id":"public/2015/02/03/2015-02-03-haproxy-plus-mysql/index.html","hash":"ad5f8150c56b4e426ed892449e4827cd3a92fce2","modified":1564838588663},{"_id":"public/2015/01/21/2015-01-21-percona-toolkitxiao-xiang-li-di-pt-archiver/index.html","hash":"43c6400f2cb8348ff647dd32f574bd971ec6ceac","modified":1564838588663},{"_id":"public/2014/10/23/2014-10-24-mysql-unique-index/index.html","hash":"be8cfbb8f8c2c514ff28bb3c03b72eab756ffdef","modified":1564838588664},{"_id":"public/2014/10/13/2014-10-13-nei-cun-du-qu-na-er-la/index.html","hash":"e8953d400ddd44740b5be32fa9a209049e9290bf","modified":1564838588664},{"_id":"public/2014/07/16/2014-07-16-zhe-teng-docker/index.html","hash":"07d643aefe0a4998c5e76b79d9462d0c7ae8a86f","modified":1564838588664},{"_id":"public/2014/07/12/2014-07-12-goan-zhuang-protobuf/index.html","hash":"00a32dba79b1a8eef4cca132e8d4c4763881aad1","modified":1564838588664},{"_id":"public/2014/06/21/2014-06-21-da-mo-de-qing-chun/index.html","hash":"a6d8a352ce682fbee525f43969624ec7a9a02ffb","modified":1564838588664},{"_id":"public/2014/05/13/2014-05-13-nginx-pitfall/index.html","hash":"7293fb8bdb3d8a6c015bb9758f07fd14330cbfd3","modified":1564838588667},{"_id":"public/2014/04/22/2014-04-22-liu-xia-liao-xie-dong-xi/index.html","hash":"f85948f3ec569e43c7c760bffadd35393d999760","modified":1564838588664},{"_id":"public/2014/03/13/2014-03-13-expect-yu-xi-tong-zi-dong-jiao-hu/index.html","hash":"916812d72c2d86c64692bc958718fa5ea6116321","modified":1564838588664},{"_id":"public/2014/02/24/2014-02-24-socketnian-bao/index.html","hash":"018db5fdab657222b064de7a80ba85f0c55512eb","modified":1564838588664},{"_id":"public/2014/02/05/2014-02-05-shen-ru-strtokhan-shu/index.html","hash":"a81f8e334e92a85f8e0a39a692ec70e186098b4e","modified":1564838588664},{"_id":"public/2014/01/24/2014-01-24-<<rework>>-shu-zhai/index.html","hash":"16c7552d472382babc36d6573f2687ceaa749d04","modified":1564838588665},{"_id":"public/2014/01/07/2014-01-07-wei-xin-gong-zhong-hao-kai-fa/index.html","hash":"d2309be194f66d1335077efd8b72970b468dc53e","modified":1564838588665},{"_id":"public/2014/01/06/2014-01-06-re-geng-xin/index.html","hash":"ae086d10f34698db81eefd7cce9675c0067d8036","modified":1564838588665},{"_id":"public/2013/12/21/2013-12-21-yu-jian/index.html","hash":"b7a777af6e4d0646f3bf9a2d615486c266cf742e","modified":1564838588665},{"_id":"public/2013/12/05/2013-12-05-zui-jin-yong-dao-de-mysql/index.html","hash":"b1eec928bcca223dd6d4bbb561935b6e40960471","modified":1564838588665},{"_id":"public/2013/11/10/2013-10-10-shui-de-xin-jing/index.html","hash":"1b7f1dc5cdf1a2d268c94582c83814210f5b0b8e","modified":1564838588665},{"_id":"public/2013/09/29/2013-09-29-zerorpcshi-ge-hao-dong-xi/index.html","hash":"8e6de7ca91364be76c575fc8ae011eb246bd672b","modified":1564838588666},{"_id":"public/2013/09/28/2013-09-28-shellji-qiao-xiao-jie/index.html","hash":"0d34eafb7066223f7456ee63e2d4e36cf3e41fb7","modified":1564838588665},{"_id":"public/2013/09/22/2013-09-22-dan-ji-wan-hadoop/index.html","hash":"8802d324af0c3ef01cd4233e60658612b8c0bd5c","modified":1564838588666},{"_id":"public/2013/09/15/2013-09-15-jsonpjie-jue-kua-yu-qing-qiu/index.html","hash":"7c1c32d2486f5dc3f84eaff69b7294ba9e8a54eb","modified":1564838588666},{"_id":"public/2013/09/12/2013-09-12-nginx-plus-luaying-dui-zai-xian-zhuang-tai-fu-wu/index.html","hash":"fb00b2abb4d5d4e9e3b9465ba9f5a547fecefa9c","modified":1564838588666},{"_id":"public/2013/08/20/2013-08-20-minigame-fu-wu-duan-she-ji/index.html","hash":"56aa9b0096e396159a069242d83f3849b6a3700b","modified":1564838588666},{"_id":"public/2013/08/16/2013-08-30-jing-ran-ye-yong-dao-liao-oracle/index.html","hash":"b101e01768779c1d55e1ad0558725d9a6af00b4a","modified":1564838588666},{"_id":"public/2013/07/15/2013-08-30-feng-pei-zhi-lu/index.html","hash":"bd68bf21a75f428061b7165836412aa246489624","modified":1564838588666},{"_id":"public/2013/06/29/2013-08-29-hui-gu-zeromq/index.html","hash":"b14cf1f3c32e85057f698c0fa651e348353bd4a7","modified":1564838588666},{"_id":"public/2013/06/17/2013-08-29-unix-domain-socket-ipctong-xin-ji-zhi/index.html","hash":"2445a8b24069e06fa58cd98aa2547e951131fe8d","modified":1564838588666},{"_id":"public/2013/06/12/2013-08-29-dou-ban-xi-ai-wen-zhang-xia-zai-qi/index.html","hash":"e38db55622072d7af7219f978e885944432b9ccc","modified":1564838588666},{"_id":"public/2013/06/08/2013-08-29-c-plus-plus-yu-pythonde-hun-he-bian-cheng-pythontuo-zhan-bian-xie/index.html","hash":"46707f69363757cbb76605d2b4d04463c2b52245","modified":1564838588668},{"_id":"public/2013/05/30/2013-08-29-xiu-qi-xiao-bo/index.html","hash":"cefc68de2d9b1180eec429dbee137f4fe63c1a6c","modified":1564838588666},{"_id":"public/2013/05/11/2013-08-29-google-c-plus-plus-style/index.html","hash":"3cd3afa1590244644cd36c027a605eb3424d7b52","modified":1564838588666},{"_id":"public/2013/04/20/2013-08-29-fan-hui-zhi-de-tou-che-li-jie/index.html","hash":"da76c2afd4269fddc7b64e6484e239247dfca00d","modified":1564838588666},{"_id":"public/2012/03/22/2013-08-28-zhe-teng-libevent/index.html","hash":"bf95ce037001e4cc21b9389d2b791cb49bc9646e","modified":1564838588667},{"_id":"public/archives/2019/05/index.html","hash":"bbc82cf0132be87d56df753a073610f05712ceae","modified":1564838588844},{"_id":"public/2019/05/04/2019-05-04-groupcache-source-note/index.html","hash":"cf1322a5a0e427c035b84907e6adb3620d03461c","modified":1564838588661},{"_id":"public/images/bird_32_gray.png","hash":"55345ff7370047a6b825dd235c9ce201545a0952","modified":1556939967673},{"_id":"public/images/bird_32_gray_fail.png","hash":"0c30b159e4cbb7e8a1ad826be537fc4bd79b0a8f","modified":1556939967673},{"_id":"public/images/email.png","hash":"2a5d251567fabcad68fa596ebaf1508296524930","modified":1556939967674},{"_id":"public/images/dotted-border.png","hash":"347784b401d0d38acf5e3b6d06a90346a16a8e8c","modified":1556939967674},{"_id":"public/images/code_bg.png","hash":"c34acd76f73ef68d62c031856bd627ffac9378f3","modified":1556939967674},{"_id":"public/images/favicon.png","hash":"19ca364fa2d577527b4981b7958718f9fa5a7bb0","modified":1556939967674},{"_id":"public/images/line-tile.png","hash":"a86a5d70fb0024dd295b85ea9058b43c1c5f25d3","modified":1556939967674},{"_id":"public/images/noise.png","hash":"a839ae391fbbb0a1a2b22f8aba1d8ae2a702ef34","modified":1556939967674},{"_id":"public/images/rss.png","hash":"d61fc1ccc66f081002b15532f66e054147d5f2fb","modified":1556939967674},{"_id":"public/images/search.png","hash":"3c0178651f38bff462d4feb927e4f4df87b0f9d0","modified":1556939967674},{"_id":"public/images/wood.jpg","hash":"70043f934922eca94934214931f0833a04798751","modified":1556939967674},{"_id":"public/images/2013/fastcgi.jpg","hash":"3d27e12353c43f153490e17f0e367e920066e3e2","modified":1556939967674},{"_id":"public/images/2013/panda.jpg","hash":"3c3f9d9391962a8936f88098be8995da946e2186","modified":1556939967674},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1556939967674},{"_id":"public/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1556939967674},{"_id":"public/images/2019/groupcache.png","hash":"f40cc20ce7f3348b57c4aff5cd0a061b9bef99c6","modified":1556939967674},{"_id":"public/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1556939967674},{"_id":"public/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1556939967674},{"_id":"public/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1556939967674},{"_id":"public/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1556939967674},{"_id":"public/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1556939967674},{"_id":"public/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1556939967675},{"_id":"public/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1556939967675},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1556939967675},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1556939967675},{"_id":"public/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1556939967675},{"_id":"public/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1556939967675},{"_id":"public/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1556939967675},{"_id":"public/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1556939967675},{"_id":"public/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1556939967675},{"_id":"public/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1556939967675},{"_id":"public/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1556939967675},{"_id":"public/images/2013/08/ip.gif","hash":"4527e78a356a6468feaa98400c62fabb53da675c","modified":1556939967675},{"_id":"public/images/2013/08/class.png","hash":"f7724bebc971054d4df28f0feab1230f0bb8e22d","modified":1556939967675},{"_id":"public/images/2013/08/gearman.png","hash":"4bd73fae2873a680dcc659eccffeeafe37fa9326","modified":1556939967675},{"_id":"public/images/2013/08/ipc_unix_socket-300x300.png","hash":"6c0af0c33b6712220c8792069da491a4e21b225f","modified":1556939967675},{"_id":"public/images/2013/08/oracle.png","hash":"419a753045ee3638389cb09405953e4389391307","modified":1556939967675},{"_id":"public/images/2013/08/minigame.png","hash":"34bb9bce493db9017e36074ac593f5f703e44df5","modified":1556939967675},{"_id":"public/images/2013/douya/ICON.jpg","hash":"ed6fb1b491d518bb4176badeb5154a15fa082bb9","modified":1556939967675},{"_id":"public/images/2013/10/Violin.jpg","hash":"1648339d81ca6735d725d5c9d6caacaf4ea11842","modified":1556939967676},{"_id":"public/images/2013/12/nba.jpg","hash":"29c718e4f7cd0ad90ae859688e8ecb36c1f2b063","modified":1556939967676},{"_id":"public/images/2013/10/Gitar.jpg","hash":"bc882e7e76ee2ccbbe32a134c58f79fae5cb1d3e","modified":1556939967676},{"_id":"public/images/2013/douya/around.jpg","hash":"f474d8b0947c936dfeae2b4b83a27f45056432eb","modified":1556939967676},{"_id":"public/images/2013/douya/chat.jpg","hash":"98b6bbde13437d213c78b91d3ff7fdce32b6dabb","modified":1556939967676},{"_id":"public/images/2013/douya/collect.jpg","hash":"821c96bce387d280fbe1badc16a282a490fd0969","modified":1556939967676},{"_id":"public/images/2013/douya/description.jpg","hash":"10a2f5ab89e1d2523642099185e8c58ebcf1a49e","modified":1556939967676},{"_id":"public/images/2013/douya/friend.jpg","hash":"b1fb9e773d5e29b0ea1be34d6d933b3494b9db27","modified":1556939967676},{"_id":"public/images/2013/douya/review.jpg","hash":"c8f7df9fb232ac223e5321d7a47aec636d70e568","modified":1556939967676},{"_id":"public/images/2013/douya/myshare.jpg","hash":"390278beab70dc953416a5f8cd9ed777f5c611e2","modified":1556939967676},{"_id":"public/images/2013/douya/settiing.jpg","hash":"17da1451ef64dc0ab04f8e229933b2e0ea2a7203","modified":1556939967676},{"_id":"public/images/2013/douya/share.jpg","hash":"8148dbebcbe1c39c6be3e3e955bcff3ed80058de","modified":1556939967676},{"_id":"public/images/2013/douya/welcom.jpg","hash":"f6c1c8ea58fad081a6edde47e8a2393dc662b113","modified":1556939967676},{"_id":"public/images/2015/02/triestruct.png","hash":"815436faa82c9e3a472008a284d501be4e27e20e","modified":1556939967676},{"_id":"public/images/2014/01/rework.jpg","hash":"85e9aa2dc597ccd4f09259657b89086e5777ed69","modified":1556939967676},{"_id":"public/images/2015/02/suggest.png","hash":"12ba6f827db0a0f5f0990eca40fade2df297dc3a","modified":1556939967676},{"_id":"public/images/2014/10/free.png","hash":"5edfcc57d428db417a2d24eb6cf55c8e2a1e57cf","modified":1556939967676},{"_id":"public/images/2014/01/skiplist.png","hash":"9f65eebae2d66346528924af503181609f168dbf","modified":1556939967676},{"_id":"public/lib/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1556939967677},{"_id":"public/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1556939967677},{"_id":"public/images/2014/10/nestat.png","hash":"3ef0d6755a7506e0f23d7507612baf61b04799d1","modified":1556939967677},{"_id":"public/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1556939967677},{"_id":"public/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1556939967677},{"_id":"public/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1556939967677},{"_id":"public/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1556939967677},{"_id":"public/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1556939967677},{"_id":"public/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1556939967677},{"_id":"public/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1556939967677},{"_id":"public/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1556939967677},{"_id":"public/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1556939967677},{"_id":"public/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1556939967677},{"_id":"public/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1556939967677},{"_id":"public/lib/Han/dist/font/han.woff2","hash":"623af3ed5423371ac136a4fe0e8cc7bb7396037a","modified":1556939967677},{"_id":"public/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1556939967677},{"_id":"public/images/2013/12/Allen.jpg","hash":"beb71c162b39a330f8a7ca19315417677cf02da7","modified":1556939968350},{"_id":"public/images/2013/douya/main.jpg","hash":"5ee32e3abf1bc5ff1e947cc521816622e4178b58","modified":1556939968352},{"_id":"public/images/2013/12/gitar.jpg","hash":"5033ea65c2dcf040bca626d2bac74c0297c46c9a","modified":1556939968353},{"_id":"public/images/2014/10/top.png","hash":"3bb33050e8609d6b3c697b391196e84db2fded31","modified":1556939968353},{"_id":"public/images/2014/04/guitar.jpg","hash":"a1ac5d4fecf25613440a8373499ed495069c1f48","modified":1556939968353},{"_id":"public/images/2016/04/flume.jpg","hash":"3a2faf8e79798d88c9e75e745b0eb7f13b64b17b","modified":1556939968353},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1556939968353},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1556939968353},{"_id":"public/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1556939968445},{"_id":"public/js/src/bootstrap.js","hash":"034bc8113e0966fe2096ba5b56061bbf10ef0512","modified":1556939968447},{"_id":"public/js/src/algolia-search.js","hash":"b172f697ed339a24b1e80261075232978d164c35","modified":1556939968450},{"_id":"public/js/src/exturl.js","hash":"e42e2aaab7bf4c19a0c8e779140e079c6aa5c0b1","modified":1556939968450},{"_id":"public/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1556939968451},{"_id":"public/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1556939968451},{"_id":"public/js/src/post-details.js","hash":"a13f45f7aa8291cf7244ec5ba93907d119c5dbdd","modified":1556939968451},{"_id":"public/js/src/scroll-cookie.js","hash":"09dc828cbf5f31158ff6250d2bf7c3cde6365c67","modified":1556939968452},{"_id":"public/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1556939968452},{"_id":"public/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1556939968452},{"_id":"public/lib/canvas-ribbon/canvas-ribbon.js","hash":"ff5915eb2596e890a2fc6697c864f861a1995ec0","modified":1556939968452},{"_id":"public/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1556939968454},{"_id":"public/lib/fastclick/README.html","hash":"da3c74d484c73cc7df565e8abbfa4d6a5a18d4da","modified":1556939968454},{"_id":"public/lib/fastclick/bower.json","hash":"4dcecf83afddba148464d5339c93f6d0aa9f42e9","modified":1556939968455},{"_id":"public/lib/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1556939968455},{"_id":"public/lib/jquery_lazyload/CONTRIBUTING.html","hash":"a6358170d346af13b1452ac157b60505bec7015c","modified":1556939968455},{"_id":"public/lib/jquery_lazyload/README.html","hash":"bde24335f6bc09d8801c0dcd7274f71b466552bd","modified":1556939968455},{"_id":"public/lib/jquery_lazyload/bower.json","hash":"ae3c3b61e6e7f9e1d7e3585ad854380ecc04cf53","modified":1556939968455},{"_id":"public/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1556939968455},{"_id":"public/lib/velocity/bower.json","hash":"0ef14e7ccdfba5db6eb3f8fc6aa3b47282c36409","modified":1556939968455},{"_id":"public/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1556939968456},{"_id":"public/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1556939968456},{"_id":"public/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1556939968456},{"_id":"public/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1556939968456},{"_id":"public/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1556939968456},{"_id":"public/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1556939968457},{"_id":"public/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1556939968457},{"_id":"public/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1556939968457},{"_id":"public/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1556939968457},{"_id":"public/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1556939968457},{"_id":"public/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1556939968457},{"_id":"public/lib/needsharebutton/needsharebutton.css","hash":"3ef0020a1815ca6151ea4886cd0d37421ae3695c","modified":1556939968457},{"_id":"public/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1556939968457},{"_id":"public/js/src/schemes/pisces.js","hash":"8050a5b2683d1d77238c5762b6bd89c543daed6e","modified":1556939968457},{"_id":"public/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1556939968457},{"_id":"public/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1556939968457},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1556939968457},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1556939968457},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1556939968457},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1556939968457},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1556939968457},{"_id":"public/css/main.css","hash":"5bb47da9731807fbe0f4d117b538460c50569d6c","modified":1556939968457},{"_id":"public/images/2013/09/hadoop.png","hash":"c6059a50e0d67ca8b877187d3d4c03a9bd8ffb66","modified":1556939968457},{"_id":"public/images/2015/08/teammate.png","hash":"0e58c75f06a14585a0b1eb8501c7c5a474255fb4","modified":1556939968458},{"_id":"public/images/2016/04/flume1toflume2.jpg","hash":"160b81bd0de441b51ce03fc06fa9dd1fb02349c1","modified":1556939968458},{"_id":"public/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1556939968458},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1556939968458},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1556939968458},{"_id":"public/js/src/motion.js","hash":"754b294394f102c8fd9423a1789ddb1201677898","modified":1556939968481},{"_id":"public/js/src/utils.js","hash":"9b1325801d27213083d1487a12b1a62b539ab6f8","modified":1556939968481},{"_id":"public/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1556939968482},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1556939968482},{"_id":"public/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1556939968482},{"_id":"public/lib/pace/pace.min.js","hash":"9944dfb7814b911090e96446cea4d36e2b487234","modified":1556939968482},{"_id":"public/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1556939968482},{"_id":"public/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1556939968482},{"_id":"public/images/2017/05/dlist-delete.png","hash":"1e39536f859c8c83b935f2c0f5c46e740f2b2e70","modified":1556939968482},{"_id":"public/lib/needsharebutton/needsharebutton.js","hash":"9885fd9bea5e7ebafc5b1de9d17be5e106248d96","modified":1556939968500},{"_id":"public/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1556939968500},{"_id":"public/images/2017/05/dlist-insert.png","hash":"bb916f2969d562878be21cb087c846d6a97d3ec2","modified":1556939968512},{"_id":"public/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1556939968532},{"_id":"public/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1556939968532},{"_id":"public/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1556939968544},{"_id":"public/lib/three/canvas_lines.min.js","hash":"dce4a3b65f8bf958f973690caa7ec4952f353b0c","modified":1556939968544},{"_id":"public/lib/three/canvas_sphere.min.js","hash":"d8ea241a53c135a650f7335d2b6982b899fd58a9","modified":1556939968545},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1556939968545},{"_id":"public/lib/Han/dist/han.min.js","hash":"f559c68a25065a14f47da954a7617d87263e409d","modified":1556939968545},{"_id":"public/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1556939968545},{"_id":"public/lib/three/three-waves.min.js","hash":"d968cba6b3a50b3626a02d67b544f349d83b147c","modified":1556939968545},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1556939968545},{"_id":"public/lib/needsharebutton/font-embedded.css","hash":"c39d37278c1e178838732af21bd26cd0baeddfe0","modified":1556939968554},{"_id":"public/lib/Han/dist/han.min.css","hash":"a0c9e32549a8b8cf327ab9227b037f323cdb60ee","modified":1556939968555},{"_id":"public/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1556939968555},{"_id":"public/lib/Han/dist/han.css","hash":"bd40da3fba8735df5850956814e312bd7b3193d7","modified":1556939968565},{"_id":"public/lib/Han/dist/han.js","hash":"e345397e0585c9fed1449e614ec13e0224acf2ab","modified":1556939968576},{"_id":"public/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1556939968578},{"_id":"public/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1556939968588},{"_id":"public/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1556939968629},{"_id":"public/lib/three/three.min.js","hash":"73f4cdc17e51a72b9bf5b9291f65386d615c483b","modified":1556939968645},{"_id":"source/_posts/2019-06-13-es-backup.md","hash":"1cbf10244f68e610febc973099836e3a08398e59","modified":1560429690000},{"_id":"public/2015/05/16/2015-05-17-da-jian-postfix/index.html","hash":"c3f41870ac03f06de213788f837fcda228ef8dbb","modified":1560428754924},{"_id":"public/2013/06/19/2013-08-30-fen-bu-shi-chu-li-kuang-jia-gearman/index.html","hash":"006b898475a76bb42644022cdb2c831b79712e35","modified":1560428754924},{"_id":"public/2012/11/27/2013-08-26-si-kao-yu-fen-xiang-shi-jie-zhi-sheng-hua/index.html","hash":"72288fb6ccd4f348eb1768521d63b480bd782237","modified":1560428754927},{"_id":"public/2012/07/11/2013-08-26-jiao-shen-ma-rong-yu-chu-pin-dou-ya-huan-shu/index.html","hash":"43de305b66ef4ba076ad3c01b05bc90fb3b23a61","modified":1560428754927},{"_id":"public/archives/2019/06/index.html","hash":"943c1a9e9185b9675d774cd1a8af658a4ee30d2d","modified":1564838588844},{"_id":"public/categories/Program/page/4/index.html","hash":"dd22fa5c92b35aed7f341b992029957dc9b76d47","modified":1564838588839},{"_id":"public/tags/System/index.html","hash":"057a5555ecf889da144bc5cd2d234582ba14e4a2","modified":1564838588839},{"_id":"public/2019/06/13/2019-06-13-es-backup/index.html","hash":"4d7fa745247cd95d9b8d471ee25864cd9368f4be","modified":1564838588660},{"_id":"source/_posts/2019-08-03-protobuffer-extension.md","hash":"2c2bef8284984a9d621cbff021c8f52bc05b57df","modified":1564838562732},{"_id":"public/page/11/index.html","hash":"85dd34e63ec24f16bbd950ffa55ad3313b413cbc","modified":1564838588837},{"_id":"public/2019/08/03/2019-08-03-protobuffer-extension/index.html","hash":"3ba2b7a4ac4371e9b44f925035a2f83e755d7576","modified":1564838588844},{"_id":"public/tags/ProtoBuffer/index.html","hash":"2cb70572d0270e4da10bd44e161988527a351c3d","modified":1564838588850},{"_id":"public/archives/page/11/index.html","hash":"c5312390cf3381bb721eed797a091bda8e69587e","modified":1564838588850},{"_id":"public/archives/2019/08/index.html","hash":"2962f0804aa6ab488762dbd4295b3f55ef05f4ec","modified":1564838588851}],"Category":[{"name":"Life","_id":"cjv8xui3f0002m1tj0zlc1f7v"},{"name":"Server","_id":"cjv8xui3l0006m1tj8tv4mh93"},{"name":"Product","_id":"cjv8xui3o000am1tjpk24z8gs"},{"name":"Program","_id":"cjv8xui3x000km1tj4qtabd9f"},{"name":"NetWork","_id":"cjv8xui3z000pm1tjsvdpdpb0"},{"name":"DataBase","_id":"cjv8xui4b001am1tjphnfvvkf"},{"name":"System","_id":"cjv8xui56002om1tjxdlhkgnh"},{"name":"NLP","_id":"cjv8xuict005mm1tj8mmq7g47"}],"Data":[],"Page":[{"title":"categories","date":"2018-06-17T10:40:50.000Z","type":"categories","comments":0,"_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2018-06-17 18:40:50\ntype: \"categories\"\ncomments: false\n---\n","updated":"2018-06-17T10:41:42.000Z","path":"categories/index.html","layout":"page","_id":"cjv8xuib9003cm1tjancsidho","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"page","title":"About Me","date":"2013-10-08T13:08:00.000Z","comments":1,"sharing":true,"footer":true,"keywords":"zheng-ji","description":"zheng-ji","_content":"\n#### Info\n\n``, `Scut`, `@Wechat`\n\n#### Motto\n> \n","source":"about/index.md","raw":"---\nlayout: page\ntitle: \"About Me\"\ndate: 2013-10-08 21:08\ncomments: true\nsharing: true\nfooter: true\nkeywords: zheng-ji\ndescription: zheng-ji\n---\n\n#### Info\n\n``, `Scut`, `@Wechat`\n\n#### Motto\n> \n","updated":"2018-06-17T11:03:54.000Z","path":"about/index.html","_id":"cjv8xuibb003em1tjylcb4n1k","content":"<h4 id=\"Info\"><a href=\"#Info\" class=\"headerlink\" title=\"Info\"></a>Info</h4><p><code></code>, <code>Scut</code>, <code>@Wechat</code></p>\n<h4 id=\"Motto\"><a href=\"#Motto\" class=\"headerlink\" title=\"Motto\"></a>Motto</h4><blockquote>\n<p></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"Info\"><a href=\"#Info\" class=\"headerlink\" title=\"Info\"></a>Info</h4><p><code></code>, <code>Scut</code>, <code>@Wechat</code></p>\n<h4 id=\"Motto\"><a href=\"#Motto\" class=\"headerlink\" title=\"Motto\"></a>Motto</h4><blockquote>\n<p></p>\n</blockquote>\n"}],"Post":[{"layout":"post","title":"","date":"2013-04-02T05:53:00.000Z","comments":1,"_content":"\n{% img /images/2013/panda.jpg %}\n\n\n\n [http:innerbrilliant.sinaapp.com](http:innerbrilliant.sinaapp.com)  [zheng-ji.info](http://zheng-ji.info)\n\n \n\n","source":"_posts/2013-04-02-zhe-teng.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2013-04-02 13:53\ncomments: true\ncategories: Life\n---\n\n{% img /images/2013/panda.jpg %}\n\n\n\n [http:innerbrilliant.sinaapp.com](http:innerbrilliant.sinaapp.com)  [zheng-ji.info](http://zheng-ji.info)\n\n \n\n","slug":"2013-04-02-zhe-teng","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui390000m1tj8iz6072z","content":"<img src=\"/images/2013/panda.jpg\">\n<p></p>\n<p> <a href=\"http:innerbrilliant.sinaapp.com\" target=\"_blank\" rel=\"noopener\">http:innerbrilliant.sinaapp.com</a>  <a href=\"http://zheng-ji.info\" target=\"_blank\" rel=\"noopener\">zheng-ji.info</a></p>\n<p> </p>\n","site":{"data":{}},"excerpt":"","more":"<img src=\"/images/2013/panda.jpg\">\n<p></p>\n<p> <a href=\"http:innerbrilliant.sinaapp.com\" target=\"_blank\" rel=\"noopener\">http:innerbrilliant.sinaapp.com</a>  <a href=\"http://zheng-ji.info\" target=\"_blank\" rel=\"noopener\">zheng-ji.info</a></p>\n<p> </p>\n"},{"layout":"post","title":"MiniGame ","date":"2013-08-20T10:54:00.000Z","comments":1,"_content":"\n   Jerry Cat Mzt\n\n#### \n{% img /images/2013/08/minigame.png %}\n\n\n+ :   ConnServer\n+          GameServer\n+          CacheServer\n  (Apk)\n\n* \nSocket\nmap \n\n* \n    ParserGameRoomAccount,MsgCenter,Heartbeat.log\n\n+ Parser:\n+ Account\n+ GameRoomRedis set11 \n+ MsgCenter:\n+ Heartbeat7.\n+ \n+ downloadertornadowebApk\n\n* \n    mysqlRedis\n\n#### \n{% img /images/2013/08/class.png %}\n\n* cache\nRedis,ID\n+ counter: Id \n\n```\n key value\n counter 1\n```\n\n* \nKey username:ValueID\nid   user:id:ID\n\n```\n key                    value\n User:name:zhengji         1\n User:id:1                 zhengji\n```\n\n* \nKeyuser:msg: Value:buff_id,\n\n```\n key              value\n user:zhengji:msg 100, 2,   1324256778.89\n```\n\n* \nredislist table_xx ,set,\n\n```\n   key      value\n Table_1 jerry,zhengji\n```\n     \ntable\nTable:tableindex.\n\n```\n   key       value\n Table:zhengji 1\n```\n\n","source":"_posts/2013-08-20-minigame-fu-wu-duan-she-ji.markdown","raw":"---\nlayout: post\ntitle: \"MiniGame \"\ndate: 2013-08-20 18:54\ncomments: true\ncategories: Server\n---\n\n   Jerry Cat Mzt\n\n#### \n{% img /images/2013/08/minigame.png %}\n\n\n+ :   ConnServer\n+          GameServer\n+          CacheServer\n  (Apk)\n\n* \nSocket\nmap \n\n* \n    ParserGameRoomAccount,MsgCenter,Heartbeat.log\n\n+ Parser:\n+ Account\n+ GameRoomRedis set11 \n+ MsgCenter:\n+ Heartbeat7.\n+ \n+ downloadertornadowebApk\n\n* \n    mysqlRedis\n\n#### \n{% img /images/2013/08/class.png %}\n\n* cache\nRedis,ID\n+ counter: Id \n\n```\n key value\n counter 1\n```\n\n* \nKey username:ValueID\nid   user:id:ID\n\n```\n key                    value\n User:name:zhengji         1\n User:id:1                 zhengji\n```\n\n* \nKeyuser:msg: Value:buff_id,\n\n```\n key              value\n user:zhengji:msg 100, 2,   1324256778.89\n```\n\n* \nredislist table_xx ,set,\n\n```\n   key      value\n Table_1 jerry,zhengji\n```\n     \ntable\nTable:tableindex.\n\n```\n   key       value\n Table:zhengji 1\n```\n\n","slug":"2013-08-20-minigame-fu-wu-duan-she-ji","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui3d0001m1tjtc5w0qtn","content":"<p>   Jerry Cat Mzt</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><img src=\"/images/2013/08/minigame.png\">\n<p></p>\n<ul>\n<li>:   ConnServer</li>\n<li>         GameServer</li>\n<li>         CacheServer<br>(Apk)</li>\n</ul>\n<ul>\n<li><p><br>Socket<br>map </p>\n</li>\n<li><p><br>  ParserGameRoomAccount,MsgCenter,Heartbeat.log</p>\n</li>\n</ul>\n<ul>\n<li>Parser:</li>\n<li>Account</li>\n<li>GameRoomRedis set11 </li>\n<li>MsgCenter:</li>\n<li>Heartbeat7.</li>\n<li></li>\n<li>downloadertornadowebApk</li>\n</ul>\n<ul>\n<li><br>  mysqlRedis</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><img src=\"/images/2013/08/class.png\">\n<ul>\n<li>cache<br>Redis,ID</li>\n</ul>\n<ul>\n<li>counter: Id </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> key value</span><br><span class=\"line\"> counter 1</span><br></pre></td></tr></table></figure>\n<ul>\n<li><br>Key username:ValueID<br>id   user:id:ID</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> key                    value</span><br><span class=\"line\"> User:name:zhengji         1</span><br><span class=\"line\"> User:id:1                 zhengji</span><br></pre></td></tr></table></figure>\n<ul>\n<li><br>Keyuser:msg: Value:buff_id,</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> key              value</span><br><span class=\"line\"> user:zhengji:msg 100, 2,   1324256778.89</span><br></pre></td></tr></table></figure>\n<ul>\n<li><br>redislist table_xx ,set,</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   key      value</span><br><span class=\"line\"> Table_1 jerry,zhengji</span><br></pre></td></tr></table></figure>\n<p>table<br>Table:tableindex.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   key       value</span><br><span class=\"line\"> Table:zhengji 1</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>   Jerry Cat Mzt</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><img src=\"/images/2013/08/minigame.png\">\n<p></p>\n<ul>\n<li>:   ConnServer</li>\n<li>         GameServer</li>\n<li>         CacheServer<br>(Apk)</li>\n</ul>\n<ul>\n<li><p><br>Socket<br>map </p>\n</li>\n<li><p><br>  ParserGameRoomAccount,MsgCenter,Heartbeat.log</p>\n</li>\n</ul>\n<ul>\n<li>Parser:</li>\n<li>Account</li>\n<li>GameRoomRedis set11 </li>\n<li>MsgCenter:</li>\n<li>Heartbeat7.</li>\n<li></li>\n<li>downloadertornadowebApk</li>\n</ul>\n<ul>\n<li><br>  mysqlRedis</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><img src=\"/images/2013/08/class.png\">\n<ul>\n<li>cache<br>Redis,ID</li>\n</ul>\n<ul>\n<li>counter: Id </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> key value</span><br><span class=\"line\"> counter 1</span><br></pre></td></tr></table></figure>\n<ul>\n<li><br>Key username:ValueID<br>id   user:id:ID</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> key                    value</span><br><span class=\"line\"> User:name:zhengji         1</span><br><span class=\"line\"> User:id:1                 zhengji</span><br></pre></td></tr></table></figure>\n<ul>\n<li><br>Keyuser:msg: Value:buff_id,</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> key              value</span><br><span class=\"line\"> user:zhengji:msg 100, 2,   1324256778.89</span><br></pre></td></tr></table></figure>\n<ul>\n<li><br>redislist table_xx ,set,</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   key      value</span><br><span class=\"line\"> Table_1 jerry,zhengji</span><br></pre></td></tr></table></figure>\n<p>table<br>Table:tableindex.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   key       value</span><br><span class=\"line\"> Table:zhengji 1</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"","date":"2012-07-11T16:22:00.000Z","comments":1,"_content":"\n****-****,leader.\n \n\n\n>APILBS  SNS\n\n{% img /images/2013/douya/ICON.jpg %}\n\n{% img /images/2013/douya/welcome.jpg %}\n\n{% img /images/2013/douya/main.jpg %}\n\n{% img /images/2013/douya/around.jpg %}\n\n{% img /images/2013/douya/share.jpg %}\n\n{% img /images/2013/douya/myshare.jpg %}\n\n{% img /images/2013/douya/collect.jpg %}\n\n{% img /images/2013/douya/review.jpg %}\n\n{% img /images/2013/douya/description.jpg %}\n\n{% img /images/2013/douya/friend.jpg %}\n\n{% img /images/2013/douya/chat.jpg %}\n\n{% img /images/2013/douya/settiing.jpg %}\n\n~\n\n\n\n","source":"_posts/2013-08-26-jiao-shen-ma-rong-yu-chu-pin-dou-ya-huan-shu.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2012-07-12 00:22\ncomments: true\ncategories: Product\n---\n\n****-****,leader.\n \n\n\n>APILBS  SNS\n\n{% img /images/2013/douya/ICON.jpg %}\n\n{% img /images/2013/douya/welcome.jpg %}\n\n{% img /images/2013/douya/main.jpg %}\n\n{% img /images/2013/douya/around.jpg %}\n\n{% img /images/2013/douya/share.jpg %}\n\n{% img /images/2013/douya/myshare.jpg %}\n\n{% img /images/2013/douya/collect.jpg %}\n\n{% img /images/2013/douya/review.jpg %}\n\n{% img /images/2013/douya/description.jpg %}\n\n{% img /images/2013/douya/friend.jpg %}\n\n{% img /images/2013/douya/chat.jpg %}\n\n{% img /images/2013/douya/settiing.jpg %}\n\n~\n\n\n\n","slug":"2013-08-26-jiao-shen-ma-rong-yu-chu-pin-dou-ya-huan-shu","published":1,"updated":"2018-06-17T10:39:11.000Z","photos":[],"link":"","_id":"cjv8xui3h0003m1tj30h6szin","content":"<p><strong></strong>-<strong></strong>,leader.<br> </p>\n<p></p>\n<blockquote>\n<p>APILBS  SNS</p>\n</blockquote>\n<img src=\"/images/2013/douya/ICON.jpg\">\n<img src=\"/images/2013/douya/welcome.jpg\">\n<img src=\"/images/2013/douya/main.jpg\">\n<img src=\"/images/2013/douya/around.jpg\">\n<img src=\"/images/2013/douya/share.jpg\">\n<img src=\"/images/2013/douya/myshare.jpg\">\n<img src=\"/images/2013/douya/collect.jpg\">\n<img src=\"/images/2013/douya/review.jpg\">\n<img src=\"/images/2013/douya/description.jpg\">\n<img src=\"/images/2013/douya/friend.jpg\">\n<img src=\"/images/2013/douya/chat.jpg\">\n<img src=\"/images/2013/douya/settiing.jpg\">\n<p>~</p>\n","site":{"data":{}},"excerpt":"","more":"<p><strong></strong>-<strong></strong>,leader.<br> </p>\n<p></p>\n<blockquote>\n<p>APILBS  SNS</p>\n</blockquote>\n<img src=\"/images/2013/douya/ICON.jpg\">\n<img src=\"/images/2013/douya/welcome.jpg\">\n<img src=\"/images/2013/douya/main.jpg\">\n<img src=\"/images/2013/douya/around.jpg\">\n<img src=\"/images/2013/douya/share.jpg\">\n<img src=\"/images/2013/douya/myshare.jpg\">\n<img src=\"/images/2013/douya/collect.jpg\">\n<img src=\"/images/2013/douya/review.jpg\">\n<img src=\"/images/2013/douya/description.jpg\">\n<img src=\"/images/2013/douya/friend.jpg\">\n<img src=\"/images/2013/douya/chat.jpg\">\n<img src=\"/images/2013/douya/settiing.jpg\">\n<p>~</p>\n"},{"layout":"post","title":"","date":"2012-03-17T12:37:00.000Z","comments":1,"_content":">\nSocket:\n\n* \n* \n* IO\n\n+  :\n    \n\n+ :\n\n\n+ TCP:\n\naccept\n*accept()\n*accept()\n*accept(),\n*IO:\n\n.CPU\n\nDemo\n\n [GitHub ](https://github.com/zheng-ji/Server-Model)\n","source":"_posts/2013-08-28-fu-wu-qi-she-ji-mo-xing.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2012-03-17 20:37\ncomments: true\ncategories: Server\n---\n>\nSocket:\n\n* \n* \n* IO\n\n+  :\n    \n\n+ :\n\n\n+ TCP:\n\naccept\n*accept()\n*accept()\n*accept(),\n*IO:\n\n.CPU\n\nDemo\n\n [GitHub ](https://github.com/zheng-ji/Server-Model)\n","slug":"2013-08-28-fu-wu-qi-she-ji-mo-xing","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui3i0004m1tjo1eefp4a","content":"<blockquote>\n<p><br>Socket:</p>\n</blockquote>\n<ul>\n<li></li>\n<li></li>\n<li>IO</li>\n</ul>\n<ul>\n<li><p>:<br> </p>\n</li>\n<li><p>:<br></p>\n</li>\n<li><p>TCP:</p>\n</li>\n</ul>\n<p>accept<br><em>accept()\n</em>accept()<br><em>accept(),\n</em>IO:</p>\n<p>.CPU</p>\n<p>Demo</p>\n<p> <a href=\"https://github.com/zheng-ji/Server-Model\" target=\"_blank\" rel=\"noopener\">GitHub </a></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p><br>Socket:</p>\n</blockquote>\n<ul>\n<li></li>\n<li></li>\n<li>IO</li>\n</ul>\n<ul>\n<li><p>:<br> </p>\n</li>\n<li><p>:<br></p>\n</li>\n<li><p>TCP:</p>\n</li>\n</ul>\n<p>accept<br><em>accept()\n</em>accept()<br><em>accept(),\n</em>IO:</p>\n<p>.CPU</p>\n<p>Demo</p>\n<p> <a href=\"https://github.com/zheng-ji/Server-Model\" target=\"_blank\" rel=\"noopener\">GitHub </a></p>\n"},{"layout":"post","title":"","date":"2012-11-27T16:45:00.000Z","comments":1,"_content":"4\n\nkant. @ruitao,@jiahuiThe gift of god\n\n **Mongodb,Redis,Go,Zmq,Python,Tonardo **3\n\nchandy\n\nthanks to ruitao coders at work15broaden my horizion\n\n vim@jiahui\n\n it must be!\n\n ,\n\n \n\n kant,\n","source":"_posts/2013-08-26-si-kao-yu-fen-xiang-shi-jie-zhi-sheng-hua.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2012-11-28 00:45\ncomments: true\ncategories: Life\n---\n4\n\nkant. @ruitao,@jiahuiThe gift of god\n\n **Mongodb,Redis,Go,Zmq,Python,Tonardo **3\n\nchandy\n\nthanks to ruitao coders at work15broaden my horizion\n\n vim@jiahui\n\n it must be!\n\n ,\n\n \n\n kant,\n","slug":"2013-08-26-si-kao-yu-fen-xiang-shi-jie-zhi-sheng-hua","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui3k0005m1tjq4ls55sx","content":"<p>4</p>\n<p>kant. @ruitao,@jiahuiThe gift of god</p>\n<p> <strong>Mongodb,Redis,Go,Zmq,Python,Tonardo </strong>3</p>\n<p>chandy</p>\n<p>thanks to ruitao coders at work15broaden my horizion</p>\n<p> vim@jiahui</p>\n<p> it must be!</p>\n<p> ,</p>\n<p> </p>\n<p> kant,</p>\n","site":{"data":{}},"excerpt":"","more":"<p>4</p>\n<p>kant. @ruitao,@jiahuiThe gift of god</p>\n<p> <strong>Mongodb,Redis,Go,Zmq,Python,Tonardo </strong>3</p>\n<p>chandy</p>\n<p>thanks to ruitao coders at work15broaden my horizion</p>\n<p> vim@jiahui</p>\n<p> it must be!</p>\n<p> ,</p>\n<p> </p>\n<p> kant,</p>\n"},{"layout":"post","title":"Nginx ","date":"2013-02-17T06:04:00.000Z","comments":1,"description":"nginx ","_content":"[](http://blog.codinglabs.org/articles/intro-of-nginx-module-development.html)\n\n#### Ngnix \n\n>Webnginx modulenginx module@TimYang\n\n#### Nginx \nNginxblockblock{}blockmain maineventhttphttpserver blockserver blocklocation block\n\n#### Nginx\nNginxHTTPlocation blocklocationNginx locationhandlerfilterlocationhandler filterNginxhandlerfilter\n\n####Nginx\nechohandlerechoHTTP\n\n```\nlocation /echo {\n    echo \"hello nginx\";\n}\n```\n\nNginxngx_http_[module-name]_[main|srv|loc]_conf_t\n\n\n+ echo\n+ HTTPHTTP\n+ \n\n#### Nginx\nNginxNginx\n\n+ config\n\n```\nngx_addon_name=\nHTTP_MODULES=$HTTP_MODULES \nNGX_ADDON_SRCS=$NGX_ADDON_SRCS $ngx_addon_dir/\n```\n\n+ Nginx\n\n```\n./configure --prefix= --add-module=\nmake\nmake install\n```\n\n/home/zj/tmp/ngx/ngx_http_echoconfig\n\n```\nngx_addon_name=ngx_http_echo_module\nHTTP_MODULES=\"$HTTP_MODULES ngx_http_echo_module\"\nNGX_ADDON_SRCS=\"$NGX_ADDON_SRCS $ngx_addon_dir/ngx_http_echo_module.c\"\n```\n\n#### \n\n```\n./configure --prefix=/usr/local/nginx --add-module=/home/zj/tmp/ngx/ngx_http_echo\nmake\nsudo make install\n```\n\nechoNginx\n\n```\nlocation /echo {\n    echo \"This is my first nginx module!!!\";\n}\n```\n\ncurl\n\n```\ncurl -i http://localhost/echo\n```\n","source":"_posts/2013-08-28-nginxmo-kuai-kai-fa.markdown","raw":"---\nlayout: post\ntitle: \"Nginx \"\ndate: 2013-02-17 14:04\ncomments: true\ncategories: Server\ndescription: nginx \n---\n[](http://blog.codinglabs.org/articles/intro-of-nginx-module-development.html)\n\n#### Ngnix \n\n>Webnginx modulenginx module@TimYang\n\n#### Nginx \nNginxblockblock{}blockmain maineventhttphttpserver blockserver blocklocation block\n\n#### Nginx\nNginxHTTPlocation blocklocationNginx locationhandlerfilterlocationhandler filterNginxhandlerfilter\n\n####Nginx\nechohandlerechoHTTP\n\n```\nlocation /echo {\n    echo \"hello nginx\";\n}\n```\n\nNginxngx_http_[module-name]_[main|srv|loc]_conf_t\n\n\n+ echo\n+ HTTPHTTP\n+ \n\n#### Nginx\nNginxNginx\n\n+ config\n\n```\nngx_addon_name=\nHTTP_MODULES=$HTTP_MODULES \nNGX_ADDON_SRCS=$NGX_ADDON_SRCS $ngx_addon_dir/\n```\n\n+ Nginx\n\n```\n./configure --prefix= --add-module=\nmake\nmake install\n```\n\n/home/zj/tmp/ngx/ngx_http_echoconfig\n\n```\nngx_addon_name=ngx_http_echo_module\nHTTP_MODULES=\"$HTTP_MODULES ngx_http_echo_module\"\nNGX_ADDON_SRCS=\"$NGX_ADDON_SRCS $ngx_addon_dir/ngx_http_echo_module.c\"\n```\n\n#### \n\n```\n./configure --prefix=/usr/local/nginx --add-module=/home/zj/tmp/ngx/ngx_http_echo\nmake\nsudo make install\n```\n\nechoNginx\n\n```\nlocation /echo {\n    echo \"This is my first nginx module!!!\";\n}\n```\n\ncurl\n\n```\ncurl -i http://localhost/echo\n```\n","slug":"2013-08-28-nginxmo-kuai-kai-fa","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui3m0007m1tjb1ppr8wt","content":"<p><a href=\"http://blog.codinglabs.org/articles/intro-of-nginx-module-development.html\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h4 id=\"Ngnix-\"><a href=\"#Ngnix-\" class=\"headerlink\" title=\"Ngnix \"></a>Ngnix </h4><blockquote>\n<p>Webnginx modulenginx module@TimYang</p>\n</blockquote>\n<h4 id=\"Nginx-\"><a href=\"#Nginx-\" class=\"headerlink\" title=\"Nginx \"></a>Nginx </h4><p>Nginxblockblock{}blockmain maineventhttphttpserver blockserver blocklocation block</p>\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><p>NginxHTTPlocation blocklocationNginx locationhandlerfilterlocationhandler filterNginxhandlerfilter</p>\n<p>####Nginx<br>echohandlerechoHTTP</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location /echo &#123;</span><br><span class=\"line\">    echo &quot;hello nginx&quot;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Nginxngx_http_[module-name]_[main|srv|loc]_conf_t</p>\n<p></p>\n<ul>\n<li>echo</li>\n<li>HTTPHTTP</li>\n<li></li>\n</ul>\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><p>NginxNginx</p>\n<ul>\n<li>config</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ngx_addon_name=</span><br><span class=\"line\">HTTP_MODULES=$HTTP_MODULES </span><br><span class=\"line\">NGX_ADDON_SRCS=$NGX_ADDON_SRCS $ngx_addon_dir/</span><br></pre></td></tr></table></figure>\n<ul>\n<li>Nginx</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --prefix= --add-module=</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p>/home/zj/tmp/ngx/ngx_http_echoconfig</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ngx_addon_name=ngx_http_echo_module</span><br><span class=\"line\">HTTP_MODULES=&quot;$HTTP_MODULES ngx_http_echo_module&quot;</span><br><span class=\"line\">NGX_ADDON_SRCS=&quot;$NGX_ADDON_SRCS $ngx_addon_dir/ngx_http_echo_module.c&quot;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --prefix=/usr/local/nginx --add-module=/home/zj/tmp/ngx/ngx_http_echo</span><br><span class=\"line\">make</span><br><span class=\"line\">sudo make install</span><br></pre></td></tr></table></figure>\n<p>echoNginx</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location /echo &#123;</span><br><span class=\"line\">    echo &quot;This is my first nginx module!!!&quot;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>curl</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i http://localhost/echo</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"http://blog.codinglabs.org/articles/intro-of-nginx-module-development.html\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h4 id=\"Ngnix-\"><a href=\"#Ngnix-\" class=\"headerlink\" title=\"Ngnix \"></a>Ngnix </h4><blockquote>\n<p>Webnginx modulenginx module@TimYang</p>\n</blockquote>\n<h4 id=\"Nginx-\"><a href=\"#Nginx-\" class=\"headerlink\" title=\"Nginx \"></a>Nginx </h4><p>Nginxblockblock{}blockmain maineventhttphttpserver blockserver blocklocation block</p>\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><p>NginxHTTPlocation blocklocationNginx locationhandlerfilterlocationhandler filterNginxhandlerfilter</p>\n<p>####Nginx<br>echohandlerechoHTTP</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location /echo &#123;</span><br><span class=\"line\">    echo &quot;hello nginx&quot;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Nginxngx_http_[module-name]_[main|srv|loc]_conf_t</p>\n<p></p>\n<ul>\n<li>echo</li>\n<li>HTTPHTTP</li>\n<li></li>\n</ul>\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><p>NginxNginx</p>\n<ul>\n<li>config</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ngx_addon_name=</span><br><span class=\"line\">HTTP_MODULES=$HTTP_MODULES </span><br><span class=\"line\">NGX_ADDON_SRCS=$NGX_ADDON_SRCS $ngx_addon_dir/</span><br></pre></td></tr></table></figure>\n<ul>\n<li>Nginx</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --prefix= --add-module=</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p>/home/zj/tmp/ngx/ngx_http_echoconfig</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ngx_addon_name=ngx_http_echo_module</span><br><span class=\"line\">HTTP_MODULES=&quot;$HTTP_MODULES ngx_http_echo_module&quot;</span><br><span class=\"line\">NGX_ADDON_SRCS=&quot;$NGX_ADDON_SRCS $ngx_addon_dir/ngx_http_echo_module.c&quot;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --prefix=/usr/local/nginx --add-module=/home/zj/tmp/ngx/ngx_http_echo</span><br><span class=\"line\">make</span><br><span class=\"line\">sudo make install</span><br></pre></td></tr></table></figure>\n<p>echoNginx</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location /echo &#123;</span><br><span class=\"line\">    echo &quot;This is my first nginx module!!!&quot;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>curl</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i http://localhost/echo</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"Thread Pool in Python","date":"2012-12-27T05:40:00.000Z","comments":1,"_content":"#### python\n\n+ Thread\n+ Threadclass class\n\n```python\nimport string, threading, time\n \ndef thread_main(a):\n        global count, mutex\n            # \n            threadname = threading.currentThread().getName()\n \n    for x in xrange(0, int(a)):\n                # \n                mutex.acquire()\n        count = count + 1\n                # \n                mutex.release()\n        print threadname, x, count\n                time.sleep(1)\n \ndef main(num):\n    global count, mutex\n    threads = []\n         \n    count = 1\n    # \n    mutex = threading.Lock()\n    # \n    for x in xrange(0, num):\n        threads.append(threading.Thread(target=thread_main, args=(10,)))\n    # \n    for t in threads:\n        t.start()\n    # \n    for t in threads:\n        t.join() \nif __name__ == '__main__':\n    num = 4\n    # 4\n    main(4)\n```\n\n\n```python\nimport threading\nimport time\n \nclass Test(threading.Thread):\n    def __init__(self, num):\n        threading.Thread.__init__(self)\n        self._run_num = num\n\n    def run(self):\n        global count, mutex\n        threadname = threading.currentThread().getName()\n\n    for x in xrange(0, int(self._run_num)):\n        mutex.acquire()\n        count = count + 1\n        mutex.release()\n        print threadname, x, count\n        time.sleep(1)\n\nif __name__ == '__main__':\n    global count, mutex\n    threads = []\n    num = 4\n    count = 1\n    # \n    mutex = threading.Lock()\n    # \n    for x in xrange(0, num):\n        threads.append(Test(10))\n    # \n    for t in threads:\n        t.start()\n    # \n    for t in threads:\n        t.join()\n```\n#### \nPythonQueueFIFO)QueueLIFOLifoQueuePriorityQueue\n\n#### \nN.\n\n```python\nimport time\nimport threading\nimport Queue\n \nclass Worker(threading.Thread):\n    def __init__(self, name, queue):\n        threading.Thread.__init__(self)\n        self.queue = queue\n        self.start()\n    def run(self):\n        # \n        while True:\n        # \n        if self.queue.empty():\n            break\n        # \n        foo = self.queue.get()\n        # 1S\n        time.sleep(1)\n        print self.getName(),':', foo\n        # \n        self.queue.task_done()\n \nqueue = Queue.Queue()\n \n# 100\nfor i in range(100):\n    queue.put(i)\n             \n# 10\nfor i in range(10):\n    threadName = 'Thread' + str(i)\n    Worker(threadName, queue)\n# \nqueue.join()\n```\n\n\n","source":"_posts/2013-08-28-thread-pool-in-python.markdown","raw":"---\nlayout: post\ntitle: \"Thread Pool in Python\"\ndate: 2012-12-27 13:40\ncomments: true\ncategories: Program\n---\n#### python\n\n+ Thread\n+ Threadclass class\n\n```python\nimport string, threading, time\n \ndef thread_main(a):\n        global count, mutex\n            # \n            threadname = threading.currentThread().getName()\n \n    for x in xrange(0, int(a)):\n                # \n                mutex.acquire()\n        count = count + 1\n                # \n                mutex.release()\n        print threadname, x, count\n                time.sleep(1)\n \ndef main(num):\n    global count, mutex\n    threads = []\n         \n    count = 1\n    # \n    mutex = threading.Lock()\n    # \n    for x in xrange(0, num):\n        threads.append(threading.Thread(target=thread_main, args=(10,)))\n    # \n    for t in threads:\n        t.start()\n    # \n    for t in threads:\n        t.join() \nif __name__ == '__main__':\n    num = 4\n    # 4\n    main(4)\n```\n\n\n```python\nimport threading\nimport time\n \nclass Test(threading.Thread):\n    def __init__(self, num):\n        threading.Thread.__init__(self)\n        self._run_num = num\n\n    def run(self):\n        global count, mutex\n        threadname = threading.currentThread().getName()\n\n    for x in xrange(0, int(self._run_num)):\n        mutex.acquire()\n        count = count + 1\n        mutex.release()\n        print threadname, x, count\n        time.sleep(1)\n\nif __name__ == '__main__':\n    global count, mutex\n    threads = []\n    num = 4\n    count = 1\n    # \n    mutex = threading.Lock()\n    # \n    for x in xrange(0, num):\n        threads.append(Test(10))\n    # \n    for t in threads:\n        t.start()\n    # \n    for t in threads:\n        t.join()\n```\n#### \nPythonQueueFIFO)QueueLIFOLifoQueuePriorityQueue\n\n#### \nN.\n\n```python\nimport time\nimport threading\nimport Queue\n \nclass Worker(threading.Thread):\n    def __init__(self, name, queue):\n        threading.Thread.__init__(self)\n        self.queue = queue\n        self.start()\n    def run(self):\n        # \n        while True:\n        # \n        if self.queue.empty():\n            break\n        # \n        foo = self.queue.get()\n        # 1S\n        time.sleep(1)\n        print self.getName(),':', foo\n        # \n        self.queue.task_done()\n \nqueue = Queue.Queue()\n \n# 100\nfor i in range(100):\n    queue.put(i)\n             \n# 10\nfor i in range(10):\n    threadName = 'Thread' + str(i)\n    Worker(threadName, queue)\n# \nqueue.join()\n```\n\n\n","slug":"2013-08-28-thread-pool-in-python","published":1,"updated":"2018-07-01T05:52:14.000Z","photos":[],"link":"","_id":"cjv8xui3n0008m1tj0qrtsdvj","content":"<h4 id=\"python\"><a href=\"#python\" class=\"headerlink\" title=\"python\"></a>python</h4><p></p>\n<ul>\n<li>Thread</li>\n<li>Threadclass class</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> string, threading, time</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">thread_main</span><span class=\"params\">(a)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">global</span> count, mutex</span><br><span class=\"line\">            <span class=\"comment\"># </span></span><br><span class=\"line\">            threadname = threading.currentThread().getName()</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> xrange(<span class=\"number\">0</span>, int(a)):</span><br><span class=\"line\">                <span class=\"comment\"># </span></span><br><span class=\"line\">                mutex.acquire()</span><br><span class=\"line\">        count = count + <span class=\"number\">1</span></span><br><span class=\"line\">                <span class=\"comment\"># </span></span><br><span class=\"line\">                mutex.release()</span><br><span class=\"line\">        <span class=\"keyword\">print</span> threadname, x, count</span><br><span class=\"line\">                time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span><span class=\"params\">(num)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> count, mutex</span><br><span class=\"line\">    threads = []</span><br><span class=\"line\">         </span><br><span class=\"line\">    count = <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    mutex = threading.Lock()</span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> xrange(<span class=\"number\">0</span>, num):</span><br><span class=\"line\">        threads.append(threading.Thread(target=thread_main, args=(<span class=\"number\">10</span>,)))</span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> t <span class=\"keyword\">in</span> threads:</span><br><span class=\"line\">        t.start()</span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> t <span class=\"keyword\">in</span> threads:</span><br><span class=\"line\">        t.join() </span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    num = <span class=\"number\">4</span></span><br><span class=\"line\">    <span class=\"comment\"># 4</span></span><br><span class=\"line\">    main(<span class=\"number\">4</span>)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> threading</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span><span class=\"params\">(threading.Thread)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, num)</span>:</span></span><br><span class=\"line\">        threading.Thread.__init__(self)</span><br><span class=\"line\">        self._run_num = num</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">run</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">global</span> count, mutex</span><br><span class=\"line\">        threadname = threading.currentThread().getName()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> xrange(<span class=\"number\">0</span>, int(self._run_num)):</span><br><span class=\"line\">        mutex.acquire()</span><br><span class=\"line\">        count = count + <span class=\"number\">1</span></span><br><span class=\"line\">        mutex.release()</span><br><span class=\"line\">        <span class=\"keyword\">print</span> threadname, x, count</span><br><span class=\"line\">        time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    <span class=\"keyword\">global</span> count, mutex</span><br><span class=\"line\">    threads = []</span><br><span class=\"line\">    num = <span class=\"number\">4</span></span><br><span class=\"line\">    count = <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    mutex = threading.Lock()</span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> xrange(<span class=\"number\">0</span>, num):</span><br><span class=\"line\">        threads.append(Test(<span class=\"number\">10</span>))</span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> t <span class=\"keyword\">in</span> threads:</span><br><span class=\"line\">        t.start()</span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> t <span class=\"keyword\">in</span> threads:</span><br><span class=\"line\">        t.join()</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>PythonQueueFIFO)QueueLIFOLifoQueuePriorityQueue</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>N.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> threading</span><br><span class=\"line\"><span class=\"keyword\">import</span> Queue</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Worker</span><span class=\"params\">(threading.Thread)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, name, queue)</span>:</span></span><br><span class=\"line\">        threading.Thread.__init__(self)</span><br><span class=\"line\">        self.queue = queue</span><br><span class=\"line\">        self.start()</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">run</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># </span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</span><br><span class=\"line\">        <span class=\"comment\"># </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.queue.empty():</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        <span class=\"comment\"># </span></span><br><span class=\"line\">        foo = self.queue.get()</span><br><span class=\"line\">        <span class=\"comment\"># 1S</span></span><br><span class=\"line\">        time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"keyword\">print</span> self.getName(),<span class=\"string\">':'</span>, foo</span><br><span class=\"line\">        <span class=\"comment\"># </span></span><br><span class=\"line\">        self.queue.task_done()</span><br><span class=\"line\"> </span><br><span class=\"line\">queue = Queue.Queue()</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 100</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">100</span>):</span><br><span class=\"line\">    queue.put(i)</span><br><span class=\"line\">             </span><br><span class=\"line\"><span class=\"comment\"># 10</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">10</span>):</span><br><span class=\"line\">    threadName = <span class=\"string\">'Thread'</span> + str(i)</span><br><span class=\"line\">    Worker(threadName, queue)</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">queue.join()</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"python\"><a href=\"#python\" class=\"headerlink\" title=\"python\"></a>python</h4><p></p>\n<ul>\n<li>Thread</li>\n<li>Threadclass class</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> string, threading, time</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">thread_main</span><span class=\"params\">(a)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">global</span> count, mutex</span><br><span class=\"line\">            <span class=\"comment\"># </span></span><br><span class=\"line\">            threadname = threading.currentThread().getName()</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> xrange(<span class=\"number\">0</span>, int(a)):</span><br><span class=\"line\">                <span class=\"comment\"># </span></span><br><span class=\"line\">                mutex.acquire()</span><br><span class=\"line\">        count = count + <span class=\"number\">1</span></span><br><span class=\"line\">                <span class=\"comment\"># </span></span><br><span class=\"line\">                mutex.release()</span><br><span class=\"line\">        <span class=\"keyword\">print</span> threadname, x, count</span><br><span class=\"line\">                time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span><span class=\"params\">(num)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> count, mutex</span><br><span class=\"line\">    threads = []</span><br><span class=\"line\">         </span><br><span class=\"line\">    count = <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    mutex = threading.Lock()</span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> xrange(<span class=\"number\">0</span>, num):</span><br><span class=\"line\">        threads.append(threading.Thread(target=thread_main, args=(<span class=\"number\">10</span>,)))</span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> t <span class=\"keyword\">in</span> threads:</span><br><span class=\"line\">        t.start()</span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> t <span class=\"keyword\">in</span> threads:</span><br><span class=\"line\">        t.join() </span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    num = <span class=\"number\">4</span></span><br><span class=\"line\">    <span class=\"comment\"># 4</span></span><br><span class=\"line\">    main(<span class=\"number\">4</span>)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> threading</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span><span class=\"params\">(threading.Thread)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, num)</span>:</span></span><br><span class=\"line\">        threading.Thread.__init__(self)</span><br><span class=\"line\">        self._run_num = num</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">run</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">global</span> count, mutex</span><br><span class=\"line\">        threadname = threading.currentThread().getName()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> xrange(<span class=\"number\">0</span>, int(self._run_num)):</span><br><span class=\"line\">        mutex.acquire()</span><br><span class=\"line\">        count = count + <span class=\"number\">1</span></span><br><span class=\"line\">        mutex.release()</span><br><span class=\"line\">        <span class=\"keyword\">print</span> threadname, x, count</span><br><span class=\"line\">        time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    <span class=\"keyword\">global</span> count, mutex</span><br><span class=\"line\">    threads = []</span><br><span class=\"line\">    num = <span class=\"number\">4</span></span><br><span class=\"line\">    count = <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    mutex = threading.Lock()</span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> xrange(<span class=\"number\">0</span>, num):</span><br><span class=\"line\">        threads.append(Test(<span class=\"number\">10</span>))</span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> t <span class=\"keyword\">in</span> threads:</span><br><span class=\"line\">        t.start()</span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> t <span class=\"keyword\">in</span> threads:</span><br><span class=\"line\">        t.join()</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>PythonQueueFIFO)QueueLIFOLifoQueuePriorityQueue</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>N.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> threading</span><br><span class=\"line\"><span class=\"keyword\">import</span> Queue</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Worker</span><span class=\"params\">(threading.Thread)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, name, queue)</span>:</span></span><br><span class=\"line\">        threading.Thread.__init__(self)</span><br><span class=\"line\">        self.queue = queue</span><br><span class=\"line\">        self.start()</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">run</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># </span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</span><br><span class=\"line\">        <span class=\"comment\"># </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.queue.empty():</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        <span class=\"comment\"># </span></span><br><span class=\"line\">        foo = self.queue.get()</span><br><span class=\"line\">        <span class=\"comment\"># 1S</span></span><br><span class=\"line\">        time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"keyword\">print</span> self.getName(),<span class=\"string\">':'</span>, foo</span><br><span class=\"line\">        <span class=\"comment\"># </span></span><br><span class=\"line\">        self.queue.task_done()</span><br><span class=\"line\"> </span><br><span class=\"line\">queue = Queue.Queue()</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 100</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">100</span>):</span><br><span class=\"line\">    queue.put(i)</span><br><span class=\"line\">             </span><br><span class=\"line\"><span class=\"comment\"># 10</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">10</span>):</span><br><span class=\"line\">    threadName = <span class=\"string\">'Thread'</span> + str(i)</span><br><span class=\"line\">    Worker(threadName, queue)</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">queue.join()</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"","date":"2013-02-12T06:00:00.000Z","comments":1,"_content":"\n\n.loserLinux ,110,rz\n\n3I hope Change Coming!\n\nVim GoogleReader ,evernoteUnixGeek\n\nCoolShell,Tinyfool,blogTimYangDBANote.2/280, \n\n.\n\ntiny4voice \n\n :-) \n> \n","source":"_posts/2013-08-28-zai-lu-shang.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2013-02-12 14:00\ncomments: true\ncategories: Life\n---\n\n\n.loserLinux ,110,rz\n\n3I hope Change Coming!\n\nVim GoogleReader ,evernoteUnixGeek\n\nCoolShell,Tinyfool,blogTimYangDBANote.2/280, \n\n.\n\ntiny4voice \n\n :-) \n> \n","slug":"2013-08-28-zai-lu-shang","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui3p000bm1tj19yhm3eg","content":"<p></p>\n<p>.loserLinux ,110,rz</p>\n<p>3I hope Change Coming!</p>\n<p>Vim GoogleReader ,evernoteUnixGeek</p>\n<p>CoolShell,Tinyfool,blogTimYangDBANote.2/280, </p>\n<p>.</p>\n<p>tiny4voice </p>\n<p> :-) </p>\n<blockquote>\n<p> </p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p></p>\n<p>.loserLinux ,110,rz</p>\n<p>3I hope Change Coming!</p>\n<p>Vim GoogleReader ,evernoteUnixGeek</p>\n<p>CoolShell,Tinyfool,blogTimYangDBANote.2/280, </p>\n<p>.</p>\n<p>tiny4voice </p>\n<p> :-) </p>\n<blockquote>\n<p> </p>\n</blockquote>\n"},{"layout":"post","title":" libevent","date":"2012-03-22T12:25:00.000Z","comments":1,"_content":"### libevent\n\n[IBM developworks](www.ibm.com/developerworks/cn/aix/library/au-libev/)\n\n CPU \n\n\n\n+ \n\n),100  99 \n\n+ pollepoll \n\npoll \n\n\n+ select() 1024 \n\n\n\nlibevent  select()poll() libevent  I/O  libevent \n\n libevent :\n\n*  event_dispatch()\n\n*  libevent \n\n* \n\n\n\n```\nevent_set() //\nevent_add() //\nevent_dispatch() // \n```\n\n### Tips\n    \nTips: -levent\nlibeventEchoServer[](https://github.com/zheng-ji/ToyCollection/tree/master/libevent)\n\n","source":"_posts/2013-08-28-zhe-teng-libevent.markdown","raw":"---\nlayout: post\ntitle: \" libevent\"\ndate: 2012-03-22 20:25\ncomments: true\ncategories: NetWork\n---\n### libevent\n\n[IBM developworks](www.ibm.com/developerworks/cn/aix/library/au-libev/)\n\n CPU \n\n\n\n+ \n\n),100  99 \n\n+ pollepoll \n\npoll \n\n\n+ select() 1024 \n\n\n\nlibevent  select()poll() libevent  I/O  libevent \n\n libevent :\n\n*  event_dispatch()\n\n*  libevent \n\n* \n\n\n\n```\nevent_set() //\nevent_add() //\nevent_dispatch() // \n```\n\n### Tips\n    \nTips: -levent\nlibeventEchoServer[](https://github.com/zheng-ji/ToyCollection/tree/master/libevent)\n\n","slug":"2013-08-28-zhe-teng-libevent","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui3r000dm1tj4vkjjs92","content":"<h3 id=\"libevent\"><a href=\"#libevent\" class=\"headerlink\" title=\"libevent\"></a>libevent</h3><p><a href=\"www.ibm.com/developerworks/cn/aix/library/au-libev/\">IBM developworks</a></p>\n<p> CPU </p>\n<p></p>\n<ul>\n<li></li>\n</ul>\n<p>),100  99 </p>\n<ul>\n<li>pollepoll </li>\n</ul>\n<p>poll <br></p>\n<ul>\n<li>select() 1024 </li>\n</ul>\n<p></p>\n<p>libevent  select()poll() libevent  I/O  libevent </p>\n<p> libevent :</p>\n<ul>\n<li><p> event_dispatch()</p>\n</li>\n<li><p> libevent </p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">event_set() //</span><br><span class=\"line\">event_add() //</span><br><span class=\"line\">event_dispatch() // </span><br></pre></td></tr></table></figure>\n<h3 id=\"Tips\"><a href=\"#Tips\" class=\"headerlink\" title=\"Tips\"></a>Tips</h3><p>Tips: -levent<br>libeventEchoServer<a href=\"https://github.com/zheng-ji/ToyCollection/tree/master/libevent\" target=\"_blank\" rel=\"noopener\"></a></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"libevent\"><a href=\"#libevent\" class=\"headerlink\" title=\"libevent\"></a>libevent</h3><p><a href=\"www.ibm.com/developerworks/cn/aix/library/au-libev/\">IBM developworks</a></p>\n<p> CPU </p>\n<p></p>\n<ul>\n<li></li>\n</ul>\n<p>),100  99 </p>\n<ul>\n<li>pollepoll </li>\n</ul>\n<p>poll <br></p>\n<ul>\n<li>select() 1024 </li>\n</ul>\n<p></p>\n<p>libevent  select()poll() libevent  I/O  libevent </p>\n<p> libevent :</p>\n<ul>\n<li><p> event_dispatch()</p>\n</li>\n<li><p> libevent </p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">event_set() //</span><br><span class=\"line\">event_add() //</span><br><span class=\"line\">event_dispatch() // </span><br></pre></td></tr></table></figure>\n<h3 id=\"Tips\"><a href=\"#Tips\" class=\"headerlink\" title=\"Tips\"></a>Tips</h3><p>Tips: -levent<br>libeventEchoServer<a href=\"https://github.com/zheng-ji/ToyCollection/tree/master/libevent\" target=\"_blank\" rel=\"noopener\"></a></p>\n"},{"layout":"post","title":"","date":"2013-06-12T15:31:00.000Z","comments":1,"_content":"\n\nBeautifulSoup,urllib.\n\n\n\n```python\nif __name__ == \"__main__\":\n    #,douban ID\n    usrnames = [\"laiyonghao\",\"fenng\"]\n        for name in usrnames:\n                cwl = Crawler(name)\n        cwl.start()\n        parser = Parser(cwl)\n        parser.run()\n```\n> python main.py\n\n \n\n```\ntmp\n     fenng\n        Got talent?\n        QCon Beijing 2013 \n        \n        \n        \n        \n        \n        \n        \n        \n        \n        --&lt;&gt;\n     laiyonghao\n         Live Together, Hate Each Other\n         \n         \n         \n         ---\n```\n\n[](https://github.com/zheng-ji/douban-likes-crawler.git)\nHappy Hacking : )\n\n\n","source":"_posts/2013-08-29-dou-ban-xi-ai-wen-zhang-xia-zai-qi.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2013-06-12 23:31\ncomments: true\ncategories: Program \n---\n\n\nBeautifulSoup,urllib.\n\n\n\n```python\nif __name__ == \"__main__\":\n    #,douban ID\n    usrnames = [\"laiyonghao\",\"fenng\"]\n        for name in usrnames:\n                cwl = Crawler(name)\n        cwl.start()\n        parser = Parser(cwl)\n        parser.run()\n```\n> python main.py\n\n \n\n```\ntmp\n     fenng\n        Got talent?\n        QCon Beijing 2013 \n        \n        \n        \n        \n        \n        \n        \n        \n        \n        --&lt;&gt;\n     laiyonghao\n         Live Together, Hate Each Other\n         \n         \n         \n         ---\n```\n\n[](https://github.com/zheng-ji/douban-likes-crawler.git)\nHappy Hacking : )\n\n\n","slug":"2013-08-29-dou-ban-xi-ai-wen-zhang-xia-zai-qi","published":1,"updated":"2018-07-01T05:52:40.000Z","photos":[],"link":"","_id":"cjv8xui3v000gm1tjucnd9jh2","content":"<p></p>\n<p>BeautifulSoup,urllib.</p>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\">    <span class=\"comment\">#,douban ID</span></span><br><span class=\"line\">    usrnames = [<span class=\"string\">\"laiyonghao\"</span>,<span class=\"string\">\"fenng\"</span>]</span><br><span class=\"line\">        <span class=\"keyword\">for</span> name <span class=\"keyword\">in</span> usrnames:</span><br><span class=\"line\">                cwl = Crawler(name)</span><br><span class=\"line\">        cwl.start()</span><br><span class=\"line\">        parser = Parser(cwl)</span><br><span class=\"line\">        parser.run()</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p> python main.py</p>\n</blockquote>\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tmp</span><br><span class=\"line\">     fenng</span><br><span class=\"line\">        Got talent?</span><br><span class=\"line\">        QCon Beijing 2013 </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        --&amp;lt;&amp;gt;</span><br><span class=\"line\">     laiyonghao</span><br><span class=\"line\">         Live Together, Hate Each Other</span><br><span class=\"line\">         </span><br><span class=\"line\">         </span><br><span class=\"line\">         </span><br><span class=\"line\">         ---</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://github.com/zheng-ji/douban-likes-crawler.git\" target=\"_blank\" rel=\"noopener\"></a><br>Happy Hacking : )</p>\n","site":{"data":{}},"excerpt":"","more":"<p></p>\n<p>BeautifulSoup,urllib.</p>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\">    <span class=\"comment\">#,douban ID</span></span><br><span class=\"line\">    usrnames = [<span class=\"string\">\"laiyonghao\"</span>,<span class=\"string\">\"fenng\"</span>]</span><br><span class=\"line\">        <span class=\"keyword\">for</span> name <span class=\"keyword\">in</span> usrnames:</span><br><span class=\"line\">                cwl = Crawler(name)</span><br><span class=\"line\">        cwl.start()</span><br><span class=\"line\">        parser = Parser(cwl)</span><br><span class=\"line\">        parser.run()</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p> python main.py</p>\n</blockquote>\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tmp</span><br><span class=\"line\">     fenng</span><br><span class=\"line\">        Got talent?</span><br><span class=\"line\">        QCon Beijing 2013 </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        --&amp;lt;&amp;gt;</span><br><span class=\"line\">     laiyonghao</span><br><span class=\"line\">         Live Together, Hate Each Other</span><br><span class=\"line\">         </span><br><span class=\"line\">         </span><br><span class=\"line\">         </span><br><span class=\"line\">         ---</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://github.com/zheng-ji/douban-likes-crawler.git\" target=\"_blank\" rel=\"noopener\"></a><br>Happy Hacking : )</p>\n"},{"layout":"post","title":"C++Python","date":"2013-06-08T15:42:00.000Z","comments":1,"_content":"#### python\nC++python\n:\n* \n\n```\nstring add(int a,int b)\n```\n\n* pythonpython\n\n```c\nPyObject* wrap_add(PyObject* self,PyObject* args);\n//\nPyArg_ParseTuple(args,\"i|i\",&a,&b);\n//\nPy_BuildValue(\"s\",add(a,b).c_str());\n```\n\n* \n\n```c\nstatic PyMethodDef bintMethods[] =\n{\n        {\"add\", wrap_add, METH_VARARGS, \"For add\"},\n            {NULL, NULL,0,NULL}\n}\n```\n\n*.\n\n```c\nvoid initbint() {\n    PyObject* m;\n    m = Py_InitModule(\"bint\", bintMethods);\n}\n\n```\n\n\n\n```c    \n#include \"BigNum.h\"\n#include <python2.7/Python.h>\n#include <iostream>\n\nstring add(int a,int b) {\n    Bint num1(a);\n    Bint num2(b);\n    Bint ans = num1 + num2;\n    return Bint::write(ans);\n}\n\nstring multiple(int a,int b) {\n    Bint num1(a);\n    Bint num2(b);\n    Bint ans = num1 * num2;\n    return Bint::write(ans);\n}\n\nPyObject* wrap_add(PyObject* self,PyObject* args) {\n    int a,b;\n    if (!PyArg_ParseTuple(args,\"i|i\",&a,&b))\n        return NULL;\n    return Py_BuildValue(\"s\",add(a,b).c_str());\n}\n\nPyObject* wrap_mul(PyObject* self,PyObject* args) {\n    int a,b;\n    if (!PyArg_ParseTuple(args,\"i|i\",&a,&b))\n        return NULL;\n    return Py_BuildValue(\"s\",multiple(a,b).c_str());\n}\n\nstatic PyMethodDef bintMethods[] =\n{\n    {\"add\", wrap_add, METH_VARARGS, \"For add\"},\n    {\"mul\", wrap_mul, METH_VARARGS, \"For mul\"},\n    {NULL, NULL,0,NULL}\n};\n\nextern \"C\"              //initbint\nvoid initbint() {\n    PyObject* m;\n    m = Py_InitModule(\"bint\", bintMethods);\n}\n```\n\n\n\n```\nall:\n    g++ -fPIC -shared BigNum.cpp -o Bint.so\nclean:\n    rm -rf bint.so\n```\n\n```python           \nimport bint\nbint.mul(4000000,5000000)\n```\n\nGitHub[](http://innerbrilliant.sinaapp.com/?p=515)\n\n### C++Python\n\npythonC++/C Cpythonpython\n* \nPy_Initialize();\n\n* PyObject* PyImport_ImportModule (char *name)\n(pmod = PyImport_ImportModule (\"zhengji.app_context\")\npy),PyObject *pmod,NULL\n\n* PyObject * opmod\nPyObject* PyObject_GetAttrString (PyObject *o, char *attr_name)\n \n* callable_object\nPyObject* PyObject_CallFunction (PyObject *callable_object, char *format, ...)\n \n* PyObject* char*\nchar* PyString_AsString (PyObject *string)\n \n* \nPy_Finalize();\n\nscript.py\n\n```python\n#!/usr/bin/python\n# Filename: script.py\nclass Student:\n    def SetName(self,name):\n        self._name = name\n    def PrintName(self):\n        print self._name\n    def hello():\n        print \"Hello World\\n\"\n    def world(name):\n        print \"name\" \n```\n\n#### C++Script.py\n\n```c\n#include <python2.7/Python.h>\n#include <iostream>\n#include <string>\n\nint main () {\n\n    //pythonPy_Initialize();\n    Py_Initialize();\n\n    PyRun_SimpleString(\"import sys\");\n    PyRun_SimpleString(\"sys.path.append('./')\");\n\n    PyObject * pModule = NULL;\n    PyObject * pFunc = NULL;\n    PyObject * pClass = NULL;\n    PyObject * pInstance = NULL;\n\n    //\n    pModule = PyImport_ImportModule(\"script\");\n    //\n    pFunc= PyObject_GetAttrString(pModule, \"hello\");\n    //\n    PyEval_CallObject(pFunc, NULL);\n    Py_DECREF(pFunc); \n\n    pFunc = PyObject_GetAttrString(pModule, \"world\");\n    PyObject_CallFunction(pFunc, \"s\", \"zhengji\");\n    Py_DECREF(pFunc); \n\n    //python\n    pClass = PyObject_GetAttrString(pModule, \"Student\");\n    if (!pClass) {\n        printf(\"Can't find Student class.\\n\");\n        return -1;\n    }\n    pInstance = PyInstance_New(pClass, NULL, NULL);\n    if (!pInstance) {\n        printf(\"Can't create Student instance.\\n\");\n        return -1;\n    }\n    PyObject_CallMethod(pInstance, \"SetName\", \"s\",\"my family\");\n    PyObject_CallMethod(pInstance, \"PrintName\",NULL,NULL);\n    //Py_FinalizePy_Initialize\n    Py_Finalize();\n    return 0;\n}\n```\n\nC++\n\n```\ng++ zj.cpp -o zj -lpython2.7\n```\n\n\n\n```\nzj@hp:~/tmp/CcalPy$ ./zj\nHello World\nname\nmy family\n```\n\n","source":"_posts/2013-08-29-c-plus-plus-yu-pythonde-hun-he-bian-cheng-pythontuo-zhan-bian-xie.markdown","raw":"---\nlayout: post\ntitle: \"C++Python\"\ndate: 2013-06-08 23:42\ncomments: true\ncategories: Program\n---\n#### python\nC++python\n:\n* \n\n```\nstring add(int a,int b)\n```\n\n* pythonpython\n\n```c\nPyObject* wrap_add(PyObject* self,PyObject* args);\n//\nPyArg_ParseTuple(args,\"i|i\",&a,&b);\n//\nPy_BuildValue(\"s\",add(a,b).c_str());\n```\n\n* \n\n```c\nstatic PyMethodDef bintMethods[] =\n{\n        {\"add\", wrap_add, METH_VARARGS, \"For add\"},\n            {NULL, NULL,0,NULL}\n}\n```\n\n*.\n\n```c\nvoid initbint() {\n    PyObject* m;\n    m = Py_InitModule(\"bint\", bintMethods);\n}\n\n```\n\n\n\n```c    \n#include \"BigNum.h\"\n#include <python2.7/Python.h>\n#include <iostream>\n\nstring add(int a,int b) {\n    Bint num1(a);\n    Bint num2(b);\n    Bint ans = num1 + num2;\n    return Bint::write(ans);\n}\n\nstring multiple(int a,int b) {\n    Bint num1(a);\n    Bint num2(b);\n    Bint ans = num1 * num2;\n    return Bint::write(ans);\n}\n\nPyObject* wrap_add(PyObject* self,PyObject* args) {\n    int a,b;\n    if (!PyArg_ParseTuple(args,\"i|i\",&a,&b))\n        return NULL;\n    return Py_BuildValue(\"s\",add(a,b).c_str());\n}\n\nPyObject* wrap_mul(PyObject* self,PyObject* args) {\n    int a,b;\n    if (!PyArg_ParseTuple(args,\"i|i\",&a,&b))\n        return NULL;\n    return Py_BuildValue(\"s\",multiple(a,b).c_str());\n}\n\nstatic PyMethodDef bintMethods[] =\n{\n    {\"add\", wrap_add, METH_VARARGS, \"For add\"},\n    {\"mul\", wrap_mul, METH_VARARGS, \"For mul\"},\n    {NULL, NULL,0,NULL}\n};\n\nextern \"C\"              //initbint\nvoid initbint() {\n    PyObject* m;\n    m = Py_InitModule(\"bint\", bintMethods);\n}\n```\n\n\n\n```\nall:\n    g++ -fPIC -shared BigNum.cpp -o Bint.so\nclean:\n    rm -rf bint.so\n```\n\n```python           \nimport bint\nbint.mul(4000000,5000000)\n```\n\nGitHub[](http://innerbrilliant.sinaapp.com/?p=515)\n\n### C++Python\n\npythonC++/C Cpythonpython\n* \nPy_Initialize();\n\n* PyObject* PyImport_ImportModule (char *name)\n(pmod = PyImport_ImportModule (\"zhengji.app_context\")\npy),PyObject *pmod,NULL\n\n* PyObject * opmod\nPyObject* PyObject_GetAttrString (PyObject *o, char *attr_name)\n \n* callable_object\nPyObject* PyObject_CallFunction (PyObject *callable_object, char *format, ...)\n \n* PyObject* char*\nchar* PyString_AsString (PyObject *string)\n \n* \nPy_Finalize();\n\nscript.py\n\n```python\n#!/usr/bin/python\n# Filename: script.py\nclass Student:\n    def SetName(self,name):\n        self._name = name\n    def PrintName(self):\n        print self._name\n    def hello():\n        print \"Hello World\\n\"\n    def world(name):\n        print \"name\" \n```\n\n#### C++Script.py\n\n```c\n#include <python2.7/Python.h>\n#include <iostream>\n#include <string>\n\nint main () {\n\n    //pythonPy_Initialize();\n    Py_Initialize();\n\n    PyRun_SimpleString(\"import sys\");\n    PyRun_SimpleString(\"sys.path.append('./')\");\n\n    PyObject * pModule = NULL;\n    PyObject * pFunc = NULL;\n    PyObject * pClass = NULL;\n    PyObject * pInstance = NULL;\n\n    //\n    pModule = PyImport_ImportModule(\"script\");\n    //\n    pFunc= PyObject_GetAttrString(pModule, \"hello\");\n    //\n    PyEval_CallObject(pFunc, NULL);\n    Py_DECREF(pFunc); \n\n    pFunc = PyObject_GetAttrString(pModule, \"world\");\n    PyObject_CallFunction(pFunc, \"s\", \"zhengji\");\n    Py_DECREF(pFunc); \n\n    //python\n    pClass = PyObject_GetAttrString(pModule, \"Student\");\n    if (!pClass) {\n        printf(\"Can't find Student class.\\n\");\n        return -1;\n    }\n    pInstance = PyInstance_New(pClass, NULL, NULL);\n    if (!pInstance) {\n        printf(\"Can't create Student instance.\\n\");\n        return -1;\n    }\n    PyObject_CallMethod(pInstance, \"SetName\", \"s\",\"my family\");\n    PyObject_CallMethod(pInstance, \"PrintName\",NULL,NULL);\n    //Py_FinalizePy_Initialize\n    Py_Finalize();\n    return 0;\n}\n```\n\nC++\n\n```\ng++ zj.cpp -o zj -lpython2.7\n```\n\n\n\n```\nzj@hp:~/tmp/CcalPy$ ./zj\nHello World\nname\nmy family\n```\n\n","slug":"2013-08-29-c-plus-plus-yu-pythonde-hun-he-bian-cheng-pythontuo-zhan-bian-xie","published":1,"updated":"2018-07-01T05:52:32.000Z","photos":[],"link":"","_id":"cjv8xui3w000im1tjdz38atu2","content":"<h4 id=\"python\"><a href=\"#python\" class=\"headerlink\" title=\"python\"></a>python</h4><p>C++python<br>:</p>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">string add(int a,int b)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>pythonpython</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">PyObject* <span class=\"title\">wrap_add</span><span class=\"params\">(PyObject* self,PyObject* args)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\">PyArg_ParseTuple(args,<span class=\"string\">\"i|i\"</span>,&amp;a,&amp;b);</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\">Py_BuildValue(<span class=\"string\">\"s\"</span>,add(a,b).c_str());</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> PyMethodDef bintMethods[] =</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        &#123;<span class=\"string\">\"add\"</span>, wrap_add, METH_VARARGS, <span class=\"string\">\"For add\"</span>&#125;,</span><br><span class=\"line\">            &#123;<span class=\"literal\">NULL</span>, <span class=\"literal\">NULL</span>,<span class=\"number\">0</span>,<span class=\"literal\">NULL</span>&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>*.</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">initbint</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    PyObject* m;</span><br><span class=\"line\">    m = Py_InitModule(<span class=\"string\">\"bint\"</span>, bintMethods);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">\"BigNum.h\"</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;python2.7/Python.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> a,<span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Bint <span class=\"title\">num1</span><span class=\"params\">(a)</span></span>;</span><br><span class=\"line\">    <span class=\"function\">Bint <span class=\"title\">num2</span><span class=\"params\">(b)</span></span>;</span><br><span class=\"line\">    Bint ans = num1 + num2;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Bint::write(ans);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">multiple</span><span class=\"params\">(<span class=\"keyword\">int</span> a,<span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Bint <span class=\"title\">num1</span><span class=\"params\">(a)</span></span>;</span><br><span class=\"line\">    <span class=\"function\">Bint <span class=\"title\">num2</span><span class=\"params\">(b)</span></span>;</span><br><span class=\"line\">    Bint ans = num1 * num2;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Bint::write(ans);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">PyObject* <span class=\"title\">wrap_add</span><span class=\"params\">(PyObject* self,PyObject* args)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a,b;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!PyArg_ParseTuple(args,<span class=\"string\">\"i|i\"</span>,&amp;a,&amp;b))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Py_BuildValue(<span class=\"string\">\"s\"</span>,add(a,b).c_str());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">PyObject* <span class=\"title\">wrap_mul</span><span class=\"params\">(PyObject* self,PyObject* args)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a,b;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!PyArg_ParseTuple(args,<span class=\"string\">\"i|i\"</span>,&amp;a,&amp;b))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Py_BuildValue(<span class=\"string\">\"s\"</span>,multiple(a,b).c_str());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">static</span> PyMethodDef bintMethods[] =</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &#123;<span class=\"string\">\"add\"</span>, wrap_add, METH_VARARGS, <span class=\"string\">\"For add\"</span>&#125;,</span><br><span class=\"line\">    &#123;<span class=\"string\">\"mul\"</span>, wrap_mul, METH_VARARGS, <span class=\"string\">\"For mul\"</span>&#125;,</span><br><span class=\"line\">    &#123;<span class=\"literal\">NULL</span>, <span class=\"literal\">NULL</span>,<span class=\"number\">0</span>,<span class=\"literal\">NULL</span>&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"string\">\"C\"</span>              <span class=\"comment\">//initbint</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">initbint</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    PyObject* m;</span><br><span class=\"line\">    m = Py_InitModule(<span class=\"string\">\"bint\"</span>, bintMethods);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">all:</span><br><span class=\"line\">    g++ -fPIC -shared BigNum.cpp -o Bint.so</span><br><span class=\"line\">clean:</span><br><span class=\"line\">    rm -rf bint.so</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> bint</span><br><span class=\"line\">bint.mul(<span class=\"number\">4000000</span>,<span class=\"number\">5000000</span>)</span><br></pre></td></tr></table></figure>\n<p>GitHub<a href=\"http://innerbrilliant.sinaapp.com/?p=515\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h3 id=\"C-Python\"><a href=\"#C-Python\" class=\"headerlink\" title=\"C++Python\"></a>C++Python</h3><p>pythonC++/C Cpythonpython</p>\n<ul>\n<li><p><br>Py_Initialize();</p>\n</li>\n<li><p>PyObject<em> PyImport_ImportModule (char </em>name)<br>(pmod = PyImport_ImportModule (zhengji.app_context)<br>py),PyObject *pmod,NULL</p>\n</li>\n<li><p>PyObject <em> opmod<br>PyObject</em> PyObject_GetAttrString (PyObject <em>o, char </em>attr_name)</p>\n</li>\n</ul>\n<p><em> callable_object<br>PyObject</em> PyObject_CallFunction (PyObject <em>callable_object, char </em>format, )</p>\n<ul>\n<li><p>PyObject<em> char</em><br>char<em> PyString_AsString (PyObject </em>string)</p>\n</li>\n<li><p><br>Py_Finalize();</p>\n</li>\n</ul>\n<p>script.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python</span></span><br><span class=\"line\"><span class=\"comment\"># Filename: script.py</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Student</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">SetName</span><span class=\"params\">(self,name)</span>:</span></span><br><span class=\"line\">        self._name = name</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">PrintName</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">print</span> self._name</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">print</span> <span class=\"string\">\"Hello World\\n\"</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">world</span><span class=\"params\">(name)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">print</span> <span class=\"string\">\"name\"</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"C-Script-py\"><a href=\"#C-Script-py\" class=\"headerlink\" title=\"C++Script.py\"></a>C++Script.py</h4><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;python2.7/Python.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//pythonPy_Initialize();</span></span><br><span class=\"line\">    Py_Initialize();</span><br><span class=\"line\"></span><br><span class=\"line\">    PyRun_SimpleString(<span class=\"string\">\"import sys\"</span>);</span><br><span class=\"line\">    PyRun_SimpleString(<span class=\"string\">\"sys.path.append('./')\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    PyObject * pModule = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    PyObject * pFunc = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    PyObject * pClass = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    PyObject * pInstance = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    pModule = PyImport_ImportModule(<span class=\"string\">\"script\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    pFunc= PyObject_GetAttrString(pModule, <span class=\"string\">\"hello\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    PyEval_CallObject(pFunc, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\">    Py_DECREF(pFunc); </span><br><span class=\"line\"></span><br><span class=\"line\">    pFunc = PyObject_GetAttrString(pModule, <span class=\"string\">\"world\"</span>);</span><br><span class=\"line\">    PyObject_CallFunction(pFunc, <span class=\"string\">\"s\"</span>, <span class=\"string\">\"zhengji\"</span>);</span><br><span class=\"line\">    Py_DECREF(pFunc); </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//python</span></span><br><span class=\"line\">    pClass = PyObject_GetAttrString(pModule, <span class=\"string\">\"Student\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!pClass) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"Can't find Student class.\\n\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    pInstance = PyInstance_New(pClass, <span class=\"literal\">NULL</span>, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!pInstance) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"Can't create Student instance.\\n\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    PyObject_CallMethod(pInstance, <span class=\"string\">\"SetName\"</span>, <span class=\"string\">\"s\"</span>,<span class=\"string\">\"my family\"</span>);</span><br><span class=\"line\">    PyObject_CallMethod(pInstance, <span class=\"string\">\"PrintName\"</span>,<span class=\"literal\">NULL</span>,<span class=\"literal\">NULL</span>);</span><br><span class=\"line\">    <span class=\"comment\">//Py_FinalizePy_Initialize</span></span><br><span class=\"line\">    Py_Finalize();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>C++</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">g++ zj.cpp -o zj -lpython2.7</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@hp:~/tmp/CcalPy$ ./zj</span><br><span class=\"line\">Hello World</span><br><span class=\"line\">name</span><br><span class=\"line\">my family</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"python\"><a href=\"#python\" class=\"headerlink\" title=\"python\"></a>python</h4><p>C++python<br>:</p>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">string add(int a,int b)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>pythonpython</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">PyObject* <span class=\"title\">wrap_add</span><span class=\"params\">(PyObject* self,PyObject* args)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\">PyArg_ParseTuple(args,<span class=\"string\">\"i|i\"</span>,&amp;a,&amp;b);</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\">Py_BuildValue(<span class=\"string\">\"s\"</span>,add(a,b).c_str());</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> PyMethodDef bintMethods[] =</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        &#123;<span class=\"string\">\"add\"</span>, wrap_add, METH_VARARGS, <span class=\"string\">\"For add\"</span>&#125;,</span><br><span class=\"line\">            &#123;<span class=\"literal\">NULL</span>, <span class=\"literal\">NULL</span>,<span class=\"number\">0</span>,<span class=\"literal\">NULL</span>&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>*.</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">initbint</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    PyObject* m;</span><br><span class=\"line\">    m = Py_InitModule(<span class=\"string\">\"bint\"</span>, bintMethods);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">\"BigNum.h\"</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;python2.7/Python.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> a,<span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Bint <span class=\"title\">num1</span><span class=\"params\">(a)</span></span>;</span><br><span class=\"line\">    <span class=\"function\">Bint <span class=\"title\">num2</span><span class=\"params\">(b)</span></span>;</span><br><span class=\"line\">    Bint ans = num1 + num2;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Bint::write(ans);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">multiple</span><span class=\"params\">(<span class=\"keyword\">int</span> a,<span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Bint <span class=\"title\">num1</span><span class=\"params\">(a)</span></span>;</span><br><span class=\"line\">    <span class=\"function\">Bint <span class=\"title\">num2</span><span class=\"params\">(b)</span></span>;</span><br><span class=\"line\">    Bint ans = num1 * num2;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Bint::write(ans);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">PyObject* <span class=\"title\">wrap_add</span><span class=\"params\">(PyObject* self,PyObject* args)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a,b;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!PyArg_ParseTuple(args,<span class=\"string\">\"i|i\"</span>,&amp;a,&amp;b))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Py_BuildValue(<span class=\"string\">\"s\"</span>,add(a,b).c_str());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">PyObject* <span class=\"title\">wrap_mul</span><span class=\"params\">(PyObject* self,PyObject* args)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a,b;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!PyArg_ParseTuple(args,<span class=\"string\">\"i|i\"</span>,&amp;a,&amp;b))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Py_BuildValue(<span class=\"string\">\"s\"</span>,multiple(a,b).c_str());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">static</span> PyMethodDef bintMethods[] =</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &#123;<span class=\"string\">\"add\"</span>, wrap_add, METH_VARARGS, <span class=\"string\">\"For add\"</span>&#125;,</span><br><span class=\"line\">    &#123;<span class=\"string\">\"mul\"</span>, wrap_mul, METH_VARARGS, <span class=\"string\">\"For mul\"</span>&#125;,</span><br><span class=\"line\">    &#123;<span class=\"literal\">NULL</span>, <span class=\"literal\">NULL</span>,<span class=\"number\">0</span>,<span class=\"literal\">NULL</span>&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"string\">\"C\"</span>              <span class=\"comment\">//initbint</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">initbint</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    PyObject* m;</span><br><span class=\"line\">    m = Py_InitModule(<span class=\"string\">\"bint\"</span>, bintMethods);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">all:</span><br><span class=\"line\">    g++ -fPIC -shared BigNum.cpp -o Bint.so</span><br><span class=\"line\">clean:</span><br><span class=\"line\">    rm -rf bint.so</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> bint</span><br><span class=\"line\">bint.mul(<span class=\"number\">4000000</span>,<span class=\"number\">5000000</span>)</span><br></pre></td></tr></table></figure>\n<p>GitHub<a href=\"http://innerbrilliant.sinaapp.com/?p=515\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h3 id=\"C-Python\"><a href=\"#C-Python\" class=\"headerlink\" title=\"C++Python\"></a>C++Python</h3><p>pythonC++/C Cpythonpython</p>\n<ul>\n<li><p><br>Py_Initialize();</p>\n</li>\n<li><p>PyObject<em> PyImport_ImportModule (char </em>name)<br>(pmod = PyImport_ImportModule (zhengji.app_context)<br>py),PyObject *pmod,NULL</p>\n</li>\n<li><p>PyObject <em> opmod<br>PyObject</em> PyObject_GetAttrString (PyObject <em>o, char </em>attr_name)</p>\n</li>\n</ul>\n<p><em> callable_object<br>PyObject</em> PyObject_CallFunction (PyObject <em>callable_object, char </em>format, )</p>\n<ul>\n<li><p>PyObject<em> char</em><br>char<em> PyString_AsString (PyObject </em>string)</p>\n</li>\n<li><p><br>Py_Finalize();</p>\n</li>\n</ul>\n<p>script.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python</span></span><br><span class=\"line\"><span class=\"comment\"># Filename: script.py</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Student</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">SetName</span><span class=\"params\">(self,name)</span>:</span></span><br><span class=\"line\">        self._name = name</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">PrintName</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">print</span> self._name</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">print</span> <span class=\"string\">\"Hello World\\n\"</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">world</span><span class=\"params\">(name)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">print</span> <span class=\"string\">\"name\"</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"C-Script-py\"><a href=\"#C-Script-py\" class=\"headerlink\" title=\"C++Script.py\"></a>C++Script.py</h4><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;python2.7/Python.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//pythonPy_Initialize();</span></span><br><span class=\"line\">    Py_Initialize();</span><br><span class=\"line\"></span><br><span class=\"line\">    PyRun_SimpleString(<span class=\"string\">\"import sys\"</span>);</span><br><span class=\"line\">    PyRun_SimpleString(<span class=\"string\">\"sys.path.append('./')\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    PyObject * pModule = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    PyObject * pFunc = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    PyObject * pClass = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    PyObject * pInstance = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    pModule = PyImport_ImportModule(<span class=\"string\">\"script\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    pFunc= PyObject_GetAttrString(pModule, <span class=\"string\">\"hello\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    PyEval_CallObject(pFunc, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\">    Py_DECREF(pFunc); </span><br><span class=\"line\"></span><br><span class=\"line\">    pFunc = PyObject_GetAttrString(pModule, <span class=\"string\">\"world\"</span>);</span><br><span class=\"line\">    PyObject_CallFunction(pFunc, <span class=\"string\">\"s\"</span>, <span class=\"string\">\"zhengji\"</span>);</span><br><span class=\"line\">    Py_DECREF(pFunc); </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//python</span></span><br><span class=\"line\">    pClass = PyObject_GetAttrString(pModule, <span class=\"string\">\"Student\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!pClass) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"Can't find Student class.\\n\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    pInstance = PyInstance_New(pClass, <span class=\"literal\">NULL</span>, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!pInstance) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"Can't create Student instance.\\n\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    PyObject_CallMethod(pInstance, <span class=\"string\">\"SetName\"</span>, <span class=\"string\">\"s\"</span>,<span class=\"string\">\"my family\"</span>);</span><br><span class=\"line\">    PyObject_CallMethod(pInstance, <span class=\"string\">\"PrintName\"</span>,<span class=\"literal\">NULL</span>,<span class=\"literal\">NULL</span>);</span><br><span class=\"line\">    <span class=\"comment\">//Py_FinalizePy_Initialize</span></span><br><span class=\"line\">    Py_Finalize();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>C++</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">g++ zj.cpp -o zj -lpython2.7</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@hp:~/tmp/CcalPy$ ./zj</span><br><span class=\"line\">Hello World</span><br><span class=\"line\">name</span><br><span class=\"line\">my family</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"","date":"2013-04-20T15:06:00.000Z","comments":1,"_content":"C++\n\n```c\nvoid swap(int a, int b) {\n    int tmp;\n    tmp = a;\n    a = b;\n    b = tmp;\n}\nint get_ini(int a) {\n    int  i = i + a;\n    return i;\n}\n\nchar * get_memory0() {\n    char * p = (char *) malloc(sizeof(char ) * 20);\n    strcpy(p,\"hello world\");\n    return p;\n}\n\nchar * get_memory1() {\n    char * p = \"hello world\";\n    return p;\n}\n\nchar * get_memory2() {\n    char p[] = \"hello world\";\n    return p;\n}\n\nint main(int argc,char * argv[]){\n    int x = 4,y = 3;\n    swap(x,y);\n    int z = x - y;\n    printf(\"z = %d\\n\",z);//1\n\n    z = get_ini(z);\n    printf(\"z = %d\\n\",z);//2\n\n    char * c0 = get_memory0();//3\n    printf(\"c0 = %s\\n\",co);\n\n    char * c1 = get_memory1();//4\n    printf(\"c1 = %s\\n\",c1);\n\n    char * c2 = get_memory2();//5\n    printf(\"c1 = %s\\n\",c2);\n}\n```\n\n#### 1\na,b 1M,swap(int a, int b)a,bint a  int babint a ,int ba,ba,b.\n\n#### 2\ni\niiz.c0 = hello world\n\n#### 3\nppc1 = hello world\n\n#### 4:\nhello world\n\n#### 5\np[]p[12]p[12]\nc2 = \n\n","source":"_posts/2013-08-29-fan-hui-zhi-de-tou-che-li-jie.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2013-04-20 23:06\ncomments: true\ncategories: Program\n---\nC++\n\n```c\nvoid swap(int a, int b) {\n    int tmp;\n    tmp = a;\n    a = b;\n    b = tmp;\n}\nint get_ini(int a) {\n    int  i = i + a;\n    return i;\n}\n\nchar * get_memory0() {\n    char * p = (char *) malloc(sizeof(char ) * 20);\n    strcpy(p,\"hello world\");\n    return p;\n}\n\nchar * get_memory1() {\n    char * p = \"hello world\";\n    return p;\n}\n\nchar * get_memory2() {\n    char p[] = \"hello world\";\n    return p;\n}\n\nint main(int argc,char * argv[]){\n    int x = 4,y = 3;\n    swap(x,y);\n    int z = x - y;\n    printf(\"z = %d\\n\",z);//1\n\n    z = get_ini(z);\n    printf(\"z = %d\\n\",z);//2\n\n    char * c0 = get_memory0();//3\n    printf(\"c0 = %s\\n\",co);\n\n    char * c1 = get_memory1();//4\n    printf(\"c1 = %s\\n\",c1);\n\n    char * c2 = get_memory2();//5\n    printf(\"c1 = %s\\n\",c2);\n}\n```\n\n#### 1\na,b 1M,swap(int a, int b)a,bint a  int babint a ,int ba,ba,b.\n\n#### 2\ni\niiz.c0 = hello world\n\n#### 3\nppc1 = hello world\n\n#### 4:\nhello world\n\n#### 5\np[]p[12]p[12]\nc2 = \n\n","slug":"2013-08-29-fan-hui-zhi-de-tou-che-li-jie","published":1,"updated":"2018-07-01T05:52:48.000Z","photos":[],"link":"","_id":"cjv8xui3y000lm1tjoxtaefxe","content":"<p>C++</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">swap</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> tmp;</span><br><span class=\"line\">    tmp = a;</span><br><span class=\"line\">    a = b;</span><br><span class=\"line\">    b = tmp;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_ini</span><span class=\"params\">(<span class=\"keyword\">int</span> a)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>  i = i + a;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> i;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">char</span> * <span class=\"title\">get_memory0</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> * p = (<span class=\"keyword\">char</span> *) <span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(<span class=\"keyword\">char</span> ) * <span class=\"number\">20</span>);</span><br><span class=\"line\">    <span class=\"built_in\">strcpy</span>(p,<span class=\"string\">\"hello world\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">char</span> * <span class=\"title\">get_memory1</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> * p = <span class=\"string\">\"hello world\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">char</span> * <span class=\"title\">get_memory2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> p[] = <span class=\"string\">\"hello world\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">int</span> argc,<span class=\"keyword\">char</span> * argv[])</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> x = <span class=\"number\">4</span>,y = <span class=\"number\">3</span>;</span><br><span class=\"line\">    swap(x,y);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> z = x - y;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"z = %d\\n\"</span>,z);<span class=\"comment\">//1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    z = get_ini(z);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"z = %d\\n\"</span>,z);<span class=\"comment\">//2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">char</span> * c0 = get_memory0();<span class=\"comment\">//3</span></span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"c0 = %s\\n\"</span>,co);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">char</span> * c1 = get_memory1();<span class=\"comment\">//4</span></span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"c1 = %s\\n\"</span>,c1);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">char</span> * c2 = get_memory2();<span class=\"comment\">//5</span></span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"c1 = %s\\n\"</span>,c2);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h4><p>a,b 1M,swap(int a, int b)a,bint a  int babint a ,int ba,ba,b.</p>\n<h4 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h4><p>i<br>iiz.c0 = hello world</p>\n<h4 id=\"3\"><a href=\"#3\" class=\"headerlink\" title=\"3\"></a>3</h4><p>ppc1 = hello world</p>\n<h4 id=\"4\"><a href=\"#4\" class=\"headerlink\" title=\"4:\"></a>4:</h4><p>hello world</p>\n<h4 id=\"5\"><a href=\"#5\" class=\"headerlink\" title=\"5\"></a>5</h4><p>p[]p[12]p[12]<br>c2 = </p>\n","site":{"data":{}},"excerpt":"","more":"<p>C++</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">swap</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> tmp;</span><br><span class=\"line\">    tmp = a;</span><br><span class=\"line\">    a = b;</span><br><span class=\"line\">    b = tmp;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_ini</span><span class=\"params\">(<span class=\"keyword\">int</span> a)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>  i = i + a;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> i;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">char</span> * <span class=\"title\">get_memory0</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> * p = (<span class=\"keyword\">char</span> *) <span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(<span class=\"keyword\">char</span> ) * <span class=\"number\">20</span>);</span><br><span class=\"line\">    <span class=\"built_in\">strcpy</span>(p,<span class=\"string\">\"hello world\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">char</span> * <span class=\"title\">get_memory1</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> * p = <span class=\"string\">\"hello world\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">char</span> * <span class=\"title\">get_memory2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> p[] = <span class=\"string\">\"hello world\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">int</span> argc,<span class=\"keyword\">char</span> * argv[])</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> x = <span class=\"number\">4</span>,y = <span class=\"number\">3</span>;</span><br><span class=\"line\">    swap(x,y);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> z = x - y;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"z = %d\\n\"</span>,z);<span class=\"comment\">//1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    z = get_ini(z);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"z = %d\\n\"</span>,z);<span class=\"comment\">//2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">char</span> * c0 = get_memory0();<span class=\"comment\">//3</span></span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"c0 = %s\\n\"</span>,co);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">char</span> * c1 = get_memory1();<span class=\"comment\">//4</span></span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"c1 = %s\\n\"</span>,c1);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">char</span> * c2 = get_memory2();<span class=\"comment\">//5</span></span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"c1 = %s\\n\"</span>,c2);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h4><p>a,b 1M,swap(int a, int b)a,bint a  int babint a ,int ba,ba,b.</p>\n<h4 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h4><p>i<br>iiz.c0 = hello world</p>\n<h4 id=\"3\"><a href=\"#3\" class=\"headerlink\" title=\"3\"></a>3</h4><p>ppc1 = hello world</p>\n<h4 id=\"4\"><a href=\"#4\" class=\"headerlink\" title=\"4:\"></a>4:</h4><p>hello world</p>\n<h4 id=\"5\"><a href=\"#5\" class=\"headerlink\" title=\"5\"></a>5</h4><p>p[]p[12]p[12]<br>c2 = </p>\n"},{"layout":"post","title":"Google C++ Style","date":"2013-05-11T15:12:00.000Z","comments":1,"_content":"Google C++ Style\n\n*  #define , : ___H__\n*  #include\n; :  File,  File ,  class File;  #include file/base/file.h.\n\n*  10 .\n, , .:, . , \n\n* , : , \n\n\n* \n (non-trivial) ,  Init()  () .\n\n*  C++  explicit.\n    , . , , ,  public . private: , , .  private, , . ,  DISALLOW_COPY_AND_ASSIGN :\n\n```\n\n#define DISALLOW_COPY_AND_ASSIGN(TypeName) \\\n    TypeName(const TypeName&); \\\nvoid operator=(const TypeName&)\nclass Foo {\n    public:\n        Foo(int f);\n        ~Foo();\n\n    private:\n        DISALLOW_COPY_AND_ASSIGN(Foo);\n};\n```\n\n*  struct,  class.\n* \n 40 , .\n\n* \n\n private, . ,  foo_ ,  foo().  set_foo()..\n* \n\n: public:  private: ,  () ;\n\n\n+ public -> protected -> private;\n+ typedefs \n+ \n+ \n+ \n+ , \n+ , \n+ \n\n C++ ,  static_cast<>().  int y = (int)x  int y = int(x) ;\n C .  C++ .\n*  (++i) , .\n\n,  (++i)  (i++) .  ()  i .  i , .\n*  sizeof(varname)  sizeof(type).\n","source":"_posts/2013-08-29-google-c-plus-plus-style.markdown","raw":"---\nlayout: post\ntitle: \"Google C++ Style\"\ndate: 2013-05-11 23:12\ncomments: true\ncategories: Program\n---\nGoogle C++ Style\n\n*  #define , : ___H__\n*  #include\n; :  File,  File ,  class File;  #include file/base/file.h.\n\n*  10 .\n, , .:, . , \n\n* , : , \n\n\n* \n (non-trivial) ,  Init()  () .\n\n*  C++  explicit.\n    , . , , ,  public . private: , , .  private, , . ,  DISALLOW_COPY_AND_ASSIGN :\n\n```\n\n#define DISALLOW_COPY_AND_ASSIGN(TypeName) \\\n    TypeName(const TypeName&); \\\nvoid operator=(const TypeName&)\nclass Foo {\n    public:\n        Foo(int f);\n        ~Foo();\n\n    private:\n        DISALLOW_COPY_AND_ASSIGN(Foo);\n};\n```\n\n*  struct,  class.\n* \n 40 , .\n\n* \n\n private, . ,  foo_ ,  foo().  set_foo()..\n* \n\n: public:  private: ,  () ;\n\n\n+ public -> protected -> private;\n+ typedefs \n+ \n+ \n+ \n+ , \n+ , \n+ \n\n C++ ,  static_cast<>().  int y = (int)x  int y = int(x) ;\n C .  C++ .\n*  (++i) , .\n\n,  (++i)  (i++) .  ()  i .  i , .\n*  sizeof(varname)  sizeof(type).\n","slug":"2013-08-29-google-c-plus-plus-style","published":1,"updated":"2018-07-01T05:52:56.000Z","photos":[],"link":"","_id":"cjv8xui3z000nm1tjlegrq1rh","content":"<p>Google C++ Style</p>\n<ul>\n<li> #define , : <strong>_H</strong></li>\n<li><p> #include<br>; :  File,  File ,  class File;  #include file/base/file.h.</p>\n</li>\n<li><p> 10 .<br>, , .:, . , </p>\n</li>\n<li><p>, : , <br></p>\n</li>\n<li><p><br> (non-trivial) ,  Init()  () .</p>\n</li>\n<li><p> C++  explicit.<br>  , . , , ,  public . private: , , .  private, , . ,  DISALLOW_COPY_AND_ASSIGN :</p>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">#define DISALLOW_COPY_AND_ASSIGN(TypeName) \\</span><br><span class=\"line\">    TypeName(const TypeName&amp;); \\</span><br><span class=\"line\">void operator=(const TypeName&amp;)</span><br><span class=\"line\">class Foo &#123;</span><br><span class=\"line\">    public:</span><br><span class=\"line\">        Foo(int f);</span><br><span class=\"line\">        ~Foo();</span><br><span class=\"line\"></span><br><span class=\"line\">    private:</span><br><span class=\"line\">        DISALLOW_COPY_AND_ASSIGN(Foo);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ul>\n<li> struct,  class.</li>\n<li><p><br> 40 , .</p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<p> private, . ,  foo_ ,  foo().  set_foo()..</p>\n<ul>\n<li></li>\n</ul>\n<p>: public:  private: ,  () ;</p>\n<p></p>\n<ul>\n<li>public -&gt; protected -&gt; private;</li>\n<li>typedefs </li>\n<li></li>\n<li></li>\n<li></li>\n<li>, </li>\n<li>, </li>\n<li></li>\n</ul>\n<p> C++ ,  static_cast&lt;&gt;().  int y = (int)x  int y = int(x) ;<br> C .  C++ .</p>\n<ul>\n<li> (++i) , .</li>\n</ul>\n<p>,  (++i)  (i++) .  ()  i .  i , .</p>\n<ul>\n<li> sizeof(varname)  sizeof(type).</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>Google C++ Style</p>\n<ul>\n<li> #define , : <strong>_H</strong></li>\n<li><p> #include<br>; :  File,  File ,  class File;  #include file/base/file.h.</p>\n</li>\n<li><p> 10 .<br>, , .:, . , </p>\n</li>\n<li><p>, : , <br></p>\n</li>\n<li><p><br> (non-trivial) ,  Init()  () .</p>\n</li>\n<li><p> C++  explicit.<br>  , . , , ,  public . private: , , .  private, , . ,  DISALLOW_COPY_AND_ASSIGN :</p>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">#define DISALLOW_COPY_AND_ASSIGN(TypeName) \\</span><br><span class=\"line\">    TypeName(const TypeName&amp;); \\</span><br><span class=\"line\">void operator=(const TypeName&amp;)</span><br><span class=\"line\">class Foo &#123;</span><br><span class=\"line\">    public:</span><br><span class=\"line\">        Foo(int f);</span><br><span class=\"line\">        ~Foo();</span><br><span class=\"line\"></span><br><span class=\"line\">    private:</span><br><span class=\"line\">        DISALLOW_COPY_AND_ASSIGN(Foo);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ul>\n<li> struct,  class.</li>\n<li><p><br> 40 , .</p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<p> private, . ,  foo_ ,  foo().  set_foo()..</p>\n<ul>\n<li></li>\n</ul>\n<p>: public:  private: ,  () ;</p>\n<p></p>\n<ul>\n<li>public -&gt; protected -&gt; private;</li>\n<li>typedefs </li>\n<li></li>\n<li></li>\n<li></li>\n<li>, </li>\n<li>, </li>\n<li></li>\n</ul>\n<p> C++ ,  static_cast&lt;&gt;().  int y = (int)x  int y = int(x) ;<br> C .  C++ .</p>\n<ul>\n<li> (++i) , .</li>\n</ul>\n<p>,  (++i)  (i++) .  ()  i .  i , .</p>\n<ul>\n<li> sizeof(varname)  sizeof(type).</li>\n</ul>\n"},{"layout":"post","title":"Unix Domain Socket  IPC","date":"2013-06-17T15:52:00.000Z","comments":1,"_content":"#### Unix Domain Socket\nsocketIPCUNIX Domain Socketsocketloopback127.0.0.1UNIX Domain SocketIPC\n\n* \n* \n\nIPCUNIX Domain SocketAPITCPUDPUNIX Domain Socket\n\n#### \n\nUNIX Domain SocketAPIIPCIPCX WindowGUIUNIX Domain Socket\n\nNginxunix:/socketfastcgi,tcp socket\n+ nginx.conf\n\n```\nfastcgi_pass unix:/tmp/php-cgi.sock;\n#fastcgi_pass 127.0.0.1:9000;\n```\n\n+ php-fpm.conf\n\n```\n/tmp/php-cgi.sock\n```\n\n\n\n{% img /images/2013/08/ipc_unix_socket-300x300.png %}\n\nUnix domain socketDemo\n\nUNIX Domain Socketsocketsocket()socketaddress familyAF_UNIXtypeSOCK_DGRAMSOCK_STREAMprotocol0/tmp/\n\ndemo[](https://github.com/zheng-ji/ToyCollection/tree/master/unix-sock)\n\n","source":"_posts/2013-08-29-unix-domain-socket-ipctong-xin-ji-zhi.markdown","raw":"---\nlayout: post\ntitle: \"Unix Domain Socket  IPC\"\ndate: 2013-06-17 23:52\ncomments: true\ncategories: NetWork\n---\n#### Unix Domain Socket\nsocketIPCUNIX Domain Socketsocketloopback127.0.0.1UNIX Domain SocketIPC\n\n* \n* \n\nIPCUNIX Domain SocketAPITCPUDPUNIX Domain Socket\n\n#### \n\nUNIX Domain SocketAPIIPCIPCX WindowGUIUNIX Domain Socket\n\nNginxunix:/socketfastcgi,tcp socket\n+ nginx.conf\n\n```\nfastcgi_pass unix:/tmp/php-cgi.sock;\n#fastcgi_pass 127.0.0.1:9000;\n```\n\n+ php-fpm.conf\n\n```\n/tmp/php-cgi.sock\n```\n\n\n\n{% img /images/2013/08/ipc_unix_socket-300x300.png %}\n\nUnix domain socketDemo\n\nUNIX Domain Socketsocketsocket()socketaddress familyAF_UNIXtypeSOCK_DGRAMSOCK_STREAMprotocol0/tmp/\n\ndemo[](https://github.com/zheng-ji/ToyCollection/tree/master/unix-sock)\n\n","slug":"2013-08-29-unix-domain-socket-ipctong-xin-ji-zhi","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui40000qm1tj3287x4h0","content":"<h4 id=\"Unix-Domain-Socket\"><a href=\"#Unix-Domain-Socket\" class=\"headerlink\" title=\"Unix Domain Socket\"></a>Unix Domain Socket</h4><p>socketIPCUNIX Domain Socketsocketloopback127.0.0.1UNIX Domain SocketIPC</p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<p>IPCUNIX Domain SocketAPITCPUDPUNIX Domain Socket</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>UNIX Domain SocketAPIIPCIPCX WindowGUIUNIX Domain Socket</p>\n<p>Nginxunix:/socketfastcgi,tcp socket</p>\n<ul>\n<li>nginx.conf</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastcgi_pass unix:/tmp/php-cgi.sock;</span><br><span class=\"line\">#fastcgi_pass 127.0.0.1:9000;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>php-fpm.conf</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/tmp/php-cgi.sock</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/images/2013/08/ipc_unix_socket-300x300.png\">\n<p>Unix domain socketDemo</p>\n<p>UNIX Domain Socketsocketsocket()socketaddress familyAF_UNIXtypeSOCK_DGRAMSOCK_STREAMprotocol0/tmp/</p>\n<p>demo<a href=\"https://github.com/zheng-ji/ToyCollection/tree/master/unix-sock\" target=\"_blank\" rel=\"noopener\"></a></p>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"Unix-Domain-Socket\"><a href=\"#Unix-Domain-Socket\" class=\"headerlink\" title=\"Unix Domain Socket\"></a>Unix Domain Socket</h4><p>socketIPCUNIX Domain Socketsocketloopback127.0.0.1UNIX Domain SocketIPC</p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<p>IPCUNIX Domain SocketAPITCPUDPUNIX Domain Socket</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>UNIX Domain SocketAPIIPCIPCX WindowGUIUNIX Domain Socket</p>\n<p>Nginxunix:/socketfastcgi,tcp socket</p>\n<ul>\n<li>nginx.conf</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastcgi_pass unix:/tmp/php-cgi.sock;</span><br><span class=\"line\">#fastcgi_pass 127.0.0.1:9000;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>php-fpm.conf</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/tmp/php-cgi.sock</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/images/2013/08/ipc_unix_socket-300x300.png\">\n<p>Unix domain socketDemo</p>\n<p>UNIX Domain Socketsocketsocket()socketaddress familyAF_UNIXtypeSOCK_DGRAMSOCK_STREAMprotocol0/tmp/</p>\n<p>demo<a href=\"https://github.com/zheng-ji/ToyCollection/tree/master/unix-sock\" target=\"_blank\" rel=\"noopener\"></a></p>\n"},{"layout":"post","title":" ZeroMQ","date":"2013-06-29T15:25:00.000Z","comments":1,"_content":"ZeroMQ[](https://github.com/zheng-ji/log2aws)Go ,[gozmq](https://github.com/alecthomas/gozmq).[](www.searchtb.com/2012/08/zeromq-primer.html) \n\n#### \n* \nsocket\n\n* \nZeroMQZeroMQZeroMQZeroMQzmq_device\n\n* \nREQ-REP PUSH-PULL  PUB-SUB   \n\n* \nIPCZeroMQipc:///xxxtcp://*.*.*.*:****\n\n* \nZeroMQIOZeroMQZeroMQ\n\n\n","source":"_posts/2013-08-29-hui-gu-zeromq.markdown","raw":"---\nlayout: post\ntitle: \" ZeroMQ\"\ndate: 2013-06-29 23:25\ncomments: true\ncategories: NetWork \n---\nZeroMQ[](https://github.com/zheng-ji/log2aws)Go ,[gozmq](https://github.com/alecthomas/gozmq).[](www.searchtb.com/2012/08/zeromq-primer.html) \n\n#### \n* \nsocket\n\n* \nZeroMQZeroMQZeroMQZeroMQzmq_device\n\n* \nREQ-REP PUSH-PULL  PUB-SUB   \n\n* \nIPCZeroMQipc:///xxxtcp://*.*.*.*:****\n\n* \nZeroMQIOZeroMQZeroMQ\n\n\n","slug":"2013-08-29-hui-gu-zeromq","published":1,"updated":"2018-07-01T05:53:06.000Z","photos":[],"link":"","_id":"cjv8xui40000rm1tjz925ihj0","content":"<p>ZeroMQ<a href=\"https://github.com/zheng-ji/log2aws\" target=\"_blank\" rel=\"noopener\"></a>Go ,<a href=\"https://github.com/alecthomas/gozmq\" target=\"_blank\" rel=\"noopener\">gozmq</a>.<a href=\"www.searchtb.com/2012/08/zeromq-primer.html\"></a> </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><p><br>socket</p>\n</li>\n<li><p><br>ZeroMQZeroMQZeroMQZeroMQzmq_device</p>\n</li>\n<li><p><br>REQ-REP PUSH-PULL  PUB-SUB   </p>\n</li>\n<li><p><br>IPCZeroMQipc:///xxxtcp://<em>.</em>.<em>.</em>:<em>**</em></p>\n</li>\n<li><p><br>ZeroMQIOZeroMQZeroMQ</p>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>ZeroMQ<a href=\"https://github.com/zheng-ji/log2aws\" target=\"_blank\" rel=\"noopener\"></a>Go ,<a href=\"https://github.com/alecthomas/gozmq\" target=\"_blank\" rel=\"noopener\">gozmq</a>.<a href=\"www.searchtb.com/2012/08/zeromq-primer.html\"></a> </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><p><br>socket</p>\n</li>\n<li><p><br>ZeroMQZeroMQZeroMQZeroMQzmq_device</p>\n</li>\n<li><p><br>REQ-REP PUSH-PULL  PUB-SUB   </p>\n</li>\n<li><p><br>IPCZeroMQipc:///xxxtcp://<em>.</em>.<em>.</em>:<em>**</em></p>\n</li>\n<li><p><br>ZeroMQIOZeroMQZeroMQ</p>\n</li>\n</ul>\n"},{"layout":"post","title":"","date":"2013-05-30T15:20:00.000Z","comments":1,"_content":"#### \n\nFenng\n\nwpcss\n\n#### \n\nTX()Github\n\n\n\n\"CopyCat,\"@ruitao PS@ruitaoGeek&&,.\n\n#### \n\nlolB\nleveldb\n\nleveldbleveldb\n\nLeveldb4M\n* bytes >= 1M bytes,\n* bytes <= 1M 4M \nGithub [](https://github.com/zheng-ji/ToyCollection/tree/master/Level_memo)\n","source":"_posts/2013-08-29-xiu-qi-xiao-bo.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2013-05-30 23:20\ncomments: true\ncategories: Life\n---\n#### \n\nFenng\n\nwpcss\n\n#### \n\nTX()Github\n\n\n\n\"CopyCat,\"@ruitao PS@ruitaoGeek&&,.\n\n#### \n\nlolB\nleveldb\n\nleveldbleveldb\n\nLeveldb4M\n* bytes >= 1M bytes,\n* bytes <= 1M 4M \nGithub [](https://github.com/zheng-ji/ToyCollection/tree/master/Level_memo)\n","slug":"2013-08-29-xiu-qi-xiao-bo","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui41000tm1tjiwnwpgvd","content":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Fenng</p>\n<p>wpcss</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>TX()Github</p>\n<p></p>\n<p>CopyCat,@ruitao PS@ruitaoGeek&amp;&amp;,.</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>lolB<br>leveldb</p>\n<p>leveldbleveldb</p>\n<p>Leveldb4M</p>\n<ul>\n<li>bytes &gt;= 1M bytes,</li>\n<li>bytes &lt;= 1M 4M <br>Github <a href=\"https://github.com/zheng-ji/ToyCollection/tree/master/Level_memo\" target=\"_blank\" rel=\"noopener\"></a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Fenng</p>\n<p>wpcss</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>TX()Github</p>\n<p></p>\n<p>CopyCat,@ruitao PS@ruitaoGeek&amp;&amp;,.</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>lolB<br>leveldb</p>\n<p>leveldbleveldb</p>\n<p>Leveldb4M</p>\n<ul>\n<li>bytes &gt;= 1M bytes,</li>\n<li>bytes &lt;= 1M 4M <br>Github <a href=\"https://github.com/zheng-ji/ToyCollection/tree/master/Level_memo\" target=\"_blank\" rel=\"noopener\"></a></li>\n</ul>\n"},{"layout":"post","title":"-Gearman","date":"2013-06-19T16:00:00.000Z","comments":1,"_content":"Gearman.[](http://www.gearman.org/),[](http://pythonhosted.org/gearman/)[](http://www.s135.com/dips/)\n\n\n\n>Gearman provides a generic application framework to farm out work to other machines or processes that are better suited to do the work. It allows you to do work in parallel, to load balance processing, and to call functions between languages. It can be used in a variety of applications, from high-availability web sites to the transport of database replication events. In other words, it is the nervous system for how distributed processing communicates. \n\nGearmanwebReplication\n\n#### \n\n+ \n    GearmanWorkerClient\n\n+  Map/Reduce\n\n+ GearmanC\n\n+ Gearman\n\n+ Gearman\n\n#### \n\nIOCPUGearman \n\n\n{% img /images/2013/08/gearman.png %}\n\n#### Gearman \n+ Job Server:\n+ ClientJob,\n+ WorkerJob\n\nGearmanubuntu,4730\n\n```\nsudo apt-get install gearman\n```\n\npython-gearman\n\n```\nsudo apt-get install python-gearman\n```\n\npython\nworker\n\n```\n#worker.py\nimport os\nimport gearman\nimport math \n \nclass CustomGearmanWorker(gearman.GearmanWorker):\n   def on_job_execute(self, current_job):\n          return super(CustomGearmanWorker, self).on_job_execute(current_job)\ndef task_callback(gearman_worker, job):\n    print job.data\n    return job.data + \" has received\" \n                   \nnew_worker = CustomGearmanWorker(['127.0.0.1:4730'])\nnew_worker.register_task(\"ping\", task_callback)\nnew_worker.work()\n```\n\nclient\n\n```python\n#!/usr/bin/env python2.7\n# -*- coding: utf-8 -*-\n# # file: client.py\nfrom gearman import GearmanClient\nnew_client = GearmanClient(['127.0.0.1:4730'])\ncurrent_request = new_client.submit_job('ping', 'foo')\nnew_result = current_request.result\nprint new_resul\n```\n\n\n\n```\nfoo has received\n```\n\nGo\n\n```\n#gearmanGo,example\ngo get https://github.com/mikespook/gearman-go\n```\n\nHappy Hacking!\n","source":"_posts/2013-08-30-fen-bu-shi-chu-li-kuang-jia-gearman.markdown","raw":"---\nlayout: post\ntitle: \"-Gearman\"\ndate: 2013-06-20 00:00\ncomments: true\ncategories: Server \n---\nGearman.[](http://www.gearman.org/),[](http://pythonhosted.org/gearman/)[](http://www.s135.com/dips/)\n\n\n\n>Gearman provides a generic application framework to farm out work to other machines or processes that are better suited to do the work. It allows you to do work in parallel, to load balance processing, and to call functions between languages. It can be used in a variety of applications, from high-availability web sites to the transport of database replication events. In other words, it is the nervous system for how distributed processing communicates. \n\nGearmanwebReplication\n\n#### \n\n+ \n    GearmanWorkerClient\n\n+  Map/Reduce\n\n+ GearmanC\n\n+ Gearman\n\n+ Gearman\n\n#### \n\nIOCPUGearman \n\n\n{% img /images/2013/08/gearman.png %}\n\n#### Gearman \n+ Job Server:\n+ ClientJob,\n+ WorkerJob\n\nGearmanubuntu,4730\n\n```\nsudo apt-get install gearman\n```\n\npython-gearman\n\n```\nsudo apt-get install python-gearman\n```\n\npython\nworker\n\n```\n#worker.py\nimport os\nimport gearman\nimport math \n \nclass CustomGearmanWorker(gearman.GearmanWorker):\n   def on_job_execute(self, current_job):\n          return super(CustomGearmanWorker, self).on_job_execute(current_job)\ndef task_callback(gearman_worker, job):\n    print job.data\n    return job.data + \" has received\" \n                   \nnew_worker = CustomGearmanWorker(['127.0.0.1:4730'])\nnew_worker.register_task(\"ping\", task_callback)\nnew_worker.work()\n```\n\nclient\n\n```python\n#!/usr/bin/env python2.7\n# -*- coding: utf-8 -*-\n# # file: client.py\nfrom gearman import GearmanClient\nnew_client = GearmanClient(['127.0.0.1:4730'])\ncurrent_request = new_client.submit_job('ping', 'foo')\nnew_result = current_request.result\nprint new_resul\n```\n\n\n\n```\nfoo has received\n```\n\nGo\n\n```\n#gearmanGo,example\ngo get https://github.com/mikespook/gearman-go\n```\n\nHappy Hacking!\n","slug":"2013-08-30-fen-bu-shi-chu-li-kuang-jia-gearman","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui43000wm1tjvn1sygw7","content":"<p>Gearman.<a href=\"http://www.gearman.org/\" target=\"_blank\" rel=\"noopener\"></a>,<a href=\"http://pythonhosted.org/gearman/\" target=\"_blank\" rel=\"noopener\"></a><a href=\"http://www.s135.com/dips/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p></p>\n<blockquote>\n<p>Gearman provides a generic application framework to farm out work to other machines or processes that are better suited to do the work. It allows you to do work in parallel, to load balance processing, and to call functions between languages. It can be used in a variety of applications, from high-availability web sites to the transport of database replication events. In other words, it is the nervous system for how distributed processing communicates. </p>\n</blockquote>\n<p>GearmanwebReplication</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><p><br>  GearmanWorkerClient</p>\n</li>\n<li><p> Map/Reduce</p>\n</li>\n<li><p>GearmanC</p>\n</li>\n<li><p>Gearman</p>\n</li>\n<li><p>Gearman</p>\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>IOCPUGearman </p>\n<p><br><img src=\"/images/2013/08/gearman.png\"></p>\n<h4 id=\"Gearman-\"><a href=\"#Gearman-\" class=\"headerlink\" title=\"Gearman \"></a>Gearman </h4><ul>\n<li>Job Server:</li>\n<li>ClientJob,</li>\n<li>WorkerJob</li>\n</ul>\n<p>Gearmanubuntu,4730</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install gearman</span><br></pre></td></tr></table></figure>\n<p>python-gearman</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install python-gearman</span><br></pre></td></tr></table></figure>\n<p>python<br>worker</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#worker.py</span><br><span class=\"line\">import os</span><br><span class=\"line\">import gearman</span><br><span class=\"line\">import math </span><br><span class=\"line\"> </span><br><span class=\"line\">class CustomGearmanWorker(gearman.GearmanWorker):</span><br><span class=\"line\">   def on_job_execute(self, current_job):</span><br><span class=\"line\">          return super(CustomGearmanWorker, self).on_job_execute(current_job)</span><br><span class=\"line\">def task_callback(gearman_worker, job):</span><br><span class=\"line\">    print job.data</span><br><span class=\"line\">    return job.data + &quot; has received&quot; </span><br><span class=\"line\">                   </span><br><span class=\"line\">new_worker = CustomGearmanWorker([&apos;127.0.0.1:4730&apos;])</span><br><span class=\"line\">new_worker.register_task(&quot;ping&quot;, task_callback)</span><br><span class=\"line\">new_worker.work()</span><br></pre></td></tr></table></figure>\n<p>client</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python2.7</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"><span class=\"comment\"># # file: client.py</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> gearman <span class=\"keyword\">import</span> GearmanClient</span><br><span class=\"line\">new_client = GearmanClient([<span class=\"string\">'127.0.0.1:4730'</span>])</span><br><span class=\"line\">current_request = new_client.submit_job(<span class=\"string\">'ping'</span>, <span class=\"string\">'foo'</span>)</span><br><span class=\"line\">new_result = current_request.result</span><br><span class=\"line\"><span class=\"keyword\">print</span> new_resul</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">foo has received</span><br></pre></td></tr></table></figure>\n<p>Go</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#gearmanGo,example</span><br><span class=\"line\">go get https://github.com/mikespook/gearman-go</span><br></pre></td></tr></table></figure>\n<p>Happy Hacking!</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Gearman.<a href=\"http://www.gearman.org/\" target=\"_blank\" rel=\"noopener\"></a>,<a href=\"http://pythonhosted.org/gearman/\" target=\"_blank\" rel=\"noopener\"></a><a href=\"http://www.s135.com/dips/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p></p>\n<blockquote>\n<p>Gearman provides a generic application framework to farm out work to other machines or processes that are better suited to do the work. It allows you to do work in parallel, to load balance processing, and to call functions between languages. It can be used in a variety of applications, from high-availability web sites to the transport of database replication events. In other words, it is the nervous system for how distributed processing communicates. </p>\n</blockquote>\n<p>GearmanwebReplication</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><p><br>  GearmanWorkerClient</p>\n</li>\n<li><p> Map/Reduce</p>\n</li>\n<li><p>GearmanC</p>\n</li>\n<li><p>Gearman</p>\n</li>\n<li><p>Gearman</p>\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>IOCPUGearman </p>\n<p><br><img src=\"/images/2013/08/gearman.png\"></p>\n<h4 id=\"Gearman-\"><a href=\"#Gearman-\" class=\"headerlink\" title=\"Gearman \"></a>Gearman </h4><ul>\n<li>Job Server:</li>\n<li>ClientJob,</li>\n<li>WorkerJob</li>\n</ul>\n<p>Gearmanubuntu,4730</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install gearman</span><br></pre></td></tr></table></figure>\n<p>python-gearman</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install python-gearman</span><br></pre></td></tr></table></figure>\n<p>python<br>worker</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#worker.py</span><br><span class=\"line\">import os</span><br><span class=\"line\">import gearman</span><br><span class=\"line\">import math </span><br><span class=\"line\"> </span><br><span class=\"line\">class CustomGearmanWorker(gearman.GearmanWorker):</span><br><span class=\"line\">   def on_job_execute(self, current_job):</span><br><span class=\"line\">          return super(CustomGearmanWorker, self).on_job_execute(current_job)</span><br><span class=\"line\">def task_callback(gearman_worker, job):</span><br><span class=\"line\">    print job.data</span><br><span class=\"line\">    return job.data + &quot; has received&quot; </span><br><span class=\"line\">                   </span><br><span class=\"line\">new_worker = CustomGearmanWorker([&apos;127.0.0.1:4730&apos;])</span><br><span class=\"line\">new_worker.register_task(&quot;ping&quot;, task_callback)</span><br><span class=\"line\">new_worker.work()</span><br></pre></td></tr></table></figure>\n<p>client</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python2.7</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"><span class=\"comment\"># # file: client.py</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> gearman <span class=\"keyword\">import</span> GearmanClient</span><br><span class=\"line\">new_client = GearmanClient([<span class=\"string\">'127.0.0.1:4730'</span>])</span><br><span class=\"line\">current_request = new_client.submit_job(<span class=\"string\">'ping'</span>, <span class=\"string\">'foo'</span>)</span><br><span class=\"line\">new_result = current_request.result</span><br><span class=\"line\"><span class=\"keyword\">print</span> new_resul</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">foo has received</span><br></pre></td></tr></table></figure>\n<p>Go</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#gearmanGo,example</span><br><span class=\"line\">go get https://github.com/mikespook/gearman-go</span><br></pre></td></tr></table></figure>\n<p>Happy Hacking!</p>\n"},{"layout":"post","title":"","date":"2013-07-15T11:32:00.000Z","comments":1,"_content":"10   by \n\n#### \n\n6windsunwang(xiaochunguo)vinajiangMztQQhazel,windsunwangxiaochunguoMztvinajianghazelSB :) \n\nlittenSNGlitten\n\n\n\n#### \n\nTarget Plan Chect Action,\n#### \n\nQQPresentation\n\nCustom Engagement.Demo,\n\n\n\n\n\n   ,\n\n","source":"_posts/2013-08-30-feng-pei-zhi-lu.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2013-07-15 19:32\ncomments: true\ncategories: Life\n---\n10   by \n\n#### \n\n6windsunwang(xiaochunguo)vinajiangMztQQhazel,windsunwangxiaochunguoMztvinajianghazelSB :) \n\nlittenSNGlitten\n\n\n\n#### \n\nTarget Plan Chect Action,\n#### \n\nQQPresentation\n\nCustom Engagement.Demo,\n\n\n\n\n\n   ,\n\n","slug":"2013-08-30-feng-pei-zhi-lu","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui44000ym1tjglmx6f2r","content":"<p>10   by </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>6windsunwang(xiaochunguo)vinajiangMztQQhazel,windsunwangxiaochunguoMztvinajianghazelSB :) </p>\n<p>littenSNGlitten</p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Target Plan Chect Action,</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>QQPresentation</p>\n<p>Custom Engagement.Demo,</p>\n<p></p>\n<p></p>\n<p>   ,</p>\n","site":{"data":{}},"excerpt":"","more":"<p>10   by </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>6windsunwang(xiaochunguo)vinajiangMztQQhazel,windsunwangxiaochunguoMztvinajianghazelSB :) </p>\n<p>littenSNGlitten</p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Target Plan Chect Action,</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>QQPresentation</p>\n<p>Custom Engagement.Demo,</p>\n<p></p>\n<p></p>\n<p>   ,</p>\n"},{"layout":"post","title":"nginx+lua","date":"2013-09-12T15:12:00.000Z","comments":1,"description":"nginx lua","_content":"\n@ideawu.\n[](http://www.ideawu.net/blog/archives/732.html) 1@agentzh , :) \n\n\n\n* \n* \n\n,:\nJavaScript, , .100, 1PV, 10, 10000(10000qps)., .\n \n. tornado + Redis\nNgnixrediskv\n\nkvC++httpKV[](https://github.com/zheng-ji/KvDb).\nnginx luanginxc,lua\n\nlua  **luajit**\n\n```\n#\nshell> export LUAJIT_LIB=/usr/local/lib\nshell> export LUAJIT_INC=/usr/local/include/luajit-<VERSION>\n```\n\n#### nginx \n\n```\nngx_devel_kit https://github.com/simpl/ngx_devel_kit\nset-misc-nginx-module https://github.com/agentzh/set-misc-nginx-module\nmemc-nginx-module https://github.com/agentzh/memc-nginx-module \nlua-nginx-module https://github.com/chaoslawful/lua-nginx-module\n```\n\n#### nginx\n                 \n```\n./configure --prefix=/path/to/nginx_src --add-module=/path/to/ngx_devel_kit --add-module=set-misc-nginx-module \\\n--add-module=/path/to/lua-nginx-module -add-module=ngx_devel_kit \nmake \nmake install\n```\n\nnginx.conf                  \n\n```\nlocation /echo {  \n    default_type 'text/plain';  \n    echo 'hello echo';  \n}  \n\nlocation /lua {  \n    default_type 'text/plain';  \n    content_by_lua 'ngx.say(\"hello, lua\")';  \n}  \n```\n\n,\n\n```\nshell> echo \"/usr/local/lib\" > /etc/ld.so.conf.d/usr_local_lib.conf\nshell> ldconfig\n```\n\nhello,lua :) ()\n \n### ideawu \n\n>, , , . , . Facebook, , , Comet, (push).\n\n Lua  Redis content_by_lua_file nginx_lua_module  Lua \nagentzh [lua-resty-redis](https://github.com/agentzh/lua-resty-redis.git)\n\n lib  lib  /home/zj/soft/data/www/lua/\n Nginx  redis.lua\n http \n\n```\nlua_package_path \"/home/zj/soft/data/www/lua//?.lua;;\";  \n```\n\n lua  server  on  Nginx nginx \n\n```\nlua_code_cache off;  \n```\n\nnginx.conf \n\n```\nlocation /getolNum {\n    content_by_lua_file /conf/online.lua;  \n} \n```\n\n##### online.lua \n\n```lua\nlocal redis = require \"redis\"\nlocal cache = redis.new()\n\nlocal ok, err = cache.connect(cache, '127.0.0.1', '6379')\nif not ok then\n    ngx.say(\"failed to connect:\", err)\n    return\nend\n\ncache:set_timeout(30000)\nargs = ngx.req.get_uri_args()\nuser = args[\"user\"]\n-- 3 min \ncache:setex(user,180,23)\n\nlocal res,err = cache:keys('*')\n\n--count res num\ncount = 0\nfor _ in pairs(res) do\n    count = count + 1\nend\nngx.say(count)\nlocal ok, err = cache:close()\n```\n\n\n\n```\ncurl localhost/getOlnum?user=zj\n1\ncurl localhost/getOlnum?user=zhengji\n2\n```\n\nHappy Hacking :)\n \n\n\n\n\n\n\n\n\n","source":"_posts/2013-09-12-nginx-plus-luaying-dui-zai-xian-zhuang-tai-fu-wu.markdown","raw":"---\nlayout: post\ntitle: \"nginx+lua\"\ndate: 2013-09-12 23:12\ncomments: true\ncategories: Server\ndescription: nginx lua\n---\n\n@ideawu.\n[](http://www.ideawu.net/blog/archives/732.html) 1@agentzh , :) \n\n\n\n* \n* \n\n,:\nJavaScript, , .100, 1PV, 10, 10000(10000qps)., .\n \n. tornado + Redis\nNgnixrediskv\n\nkvC++httpKV[](https://github.com/zheng-ji/KvDb).\nnginx luanginxc,lua\n\nlua  **luajit**\n\n```\n#\nshell> export LUAJIT_LIB=/usr/local/lib\nshell> export LUAJIT_INC=/usr/local/include/luajit-<VERSION>\n```\n\n#### nginx \n\n```\nngx_devel_kit https://github.com/simpl/ngx_devel_kit\nset-misc-nginx-module https://github.com/agentzh/set-misc-nginx-module\nmemc-nginx-module https://github.com/agentzh/memc-nginx-module \nlua-nginx-module https://github.com/chaoslawful/lua-nginx-module\n```\n\n#### nginx\n                 \n```\n./configure --prefix=/path/to/nginx_src --add-module=/path/to/ngx_devel_kit --add-module=set-misc-nginx-module \\\n--add-module=/path/to/lua-nginx-module -add-module=ngx_devel_kit \nmake \nmake install\n```\n\nnginx.conf                  \n\n```\nlocation /echo {  \n    default_type 'text/plain';  \n    echo 'hello echo';  \n}  \n\nlocation /lua {  \n    default_type 'text/plain';  \n    content_by_lua 'ngx.say(\"hello, lua\")';  \n}  \n```\n\n,\n\n```\nshell> echo \"/usr/local/lib\" > /etc/ld.so.conf.d/usr_local_lib.conf\nshell> ldconfig\n```\n\nhello,lua :) ()\n \n### ideawu \n\n>, , , . , . Facebook, , , Comet, (push).\n\n Lua  Redis content_by_lua_file nginx_lua_module  Lua \nagentzh [lua-resty-redis](https://github.com/agentzh/lua-resty-redis.git)\n\n lib  lib  /home/zj/soft/data/www/lua/\n Nginx  redis.lua\n http \n\n```\nlua_package_path \"/home/zj/soft/data/www/lua//?.lua;;\";  \n```\n\n lua  server  on  Nginx nginx \n\n```\nlua_code_cache off;  \n```\n\nnginx.conf \n\n```\nlocation /getolNum {\n    content_by_lua_file /conf/online.lua;  \n} \n```\n\n##### online.lua \n\n```lua\nlocal redis = require \"redis\"\nlocal cache = redis.new()\n\nlocal ok, err = cache.connect(cache, '127.0.0.1', '6379')\nif not ok then\n    ngx.say(\"failed to connect:\", err)\n    return\nend\n\ncache:set_timeout(30000)\nargs = ngx.req.get_uri_args()\nuser = args[\"user\"]\n-- 3 min \ncache:setex(user,180,23)\n\nlocal res,err = cache:keys('*')\n\n--count res num\ncount = 0\nfor _ in pairs(res) do\n    count = count + 1\nend\nngx.say(count)\nlocal ok, err = cache:close()\n```\n\n\n\n```\ncurl localhost/getOlnum?user=zj\n1\ncurl localhost/getOlnum?user=zhengji\n2\n```\n\nHappy Hacking :)\n \n\n\n\n\n\n\n\n\n","slug":"2013-09-12-nginx-plus-luaying-dui-zai-xian-zhuang-tai-fu-wu","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui460011m1tj5e59dc6m","content":"<p>@ideawu.<br><a href=\"http://www.ideawu.net/blog/archives/732.html\" target=\"_blank\" rel=\"noopener\"></a> 1@agentzh , :) </p>\n<p></p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<p>,:<br>JavaScript, , .100, 1PV, 10, 10000(10000qps)., .</p>\n<p>. tornado + Redis<br>Ngnixrediskv</p>\n<p>kvC++httpKV<a href=\"https://github.com/zheng-ji/KvDb\" target=\"_blank\" rel=\"noopener\"></a>.<br>nginx luanginxc,lua</p>\n<p>lua  <strong>luajit</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#</span><br><span class=\"line\">shell&gt; export LUAJIT_LIB=/usr/local/lib</span><br><span class=\"line\">shell&gt; export LUAJIT_INC=/usr/local/include/luajit-&lt;VERSION&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"nginx-\"><a href=\"#nginx-\" class=\"headerlink\" title=\"nginx \"></a>nginx </h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ngx_devel_kit https://github.com/simpl/ngx_devel_kit</span><br><span class=\"line\">set-misc-nginx-module https://github.com/agentzh/set-misc-nginx-module</span><br><span class=\"line\">memc-nginx-module https://github.com/agentzh/memc-nginx-module </span><br><span class=\"line\">lua-nginx-module https://github.com/chaoslawful/lua-nginx-module</span><br></pre></td></tr></table></figure>\n<h4 id=\"nginx\"><a href=\"#nginx\" class=\"headerlink\" title=\"nginx\"></a>nginx</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --prefix=/path/to/nginx_src --add-module=/path/to/ngx_devel_kit --add-module=set-misc-nginx-module \\</span><br><span class=\"line\">--add-module=/path/to/lua-nginx-module -add-module=ngx_devel_kit </span><br><span class=\"line\">make </span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p>nginx.conf                  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location /echo &#123;  </span><br><span class=\"line\">    default_type &apos;text/plain&apos;;  </span><br><span class=\"line\">    echo &apos;hello echo&apos;;  </span><br><span class=\"line\">&#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">location /lua &#123;  </span><br><span class=\"line\">    default_type &apos;text/plain&apos;;  </span><br><span class=\"line\">    content_by_lua &apos;ngx.say(&quot;hello, lua&quot;)&apos;;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">shell&gt; echo &quot;/usr/local/lib&quot; &gt; /etc/ld.so.conf.d/usr_local_lib.conf</span><br><span class=\"line\">shell&gt; ldconfig</span><br></pre></td></tr></table></figure>\n<p>hello,lua :) ()</p>\n<h3 id=\"ideawu-\"><a href=\"#ideawu-\" class=\"headerlink\" title=\"ideawu \"></a>ideawu </h3><blockquote>\n<p>, , , . , . Facebook, , , Comet, (push).</p>\n</blockquote>\n<p> Lua  Redis content_by_lua_file nginx_lua_module  Lua <br>agentzh <a href=\"https://github.com/agentzh/lua-resty-redis.git\" target=\"_blank\" rel=\"noopener\">lua-resty-redis</a></p>\n<p> lib  lib  /home/zj/soft/data/www/lua/<br> Nginx  redis.lua<br> http </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lua_package_path &quot;/home/zj/soft/data/www/lua//?.lua;;&quot;;</span><br></pre></td></tr></table></figure>\n<p> lua  server  on  Nginx nginx </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lua_code_cache off;</span><br></pre></td></tr></table></figure>\n<p>nginx.conf </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location /getolNum &#123;</span><br><span class=\"line\">    content_by_lua_file /conf/online.lua;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"online-lua-\"><a href=\"#online-lua-\" class=\"headerlink\" title=\"online.lua \"></a>online.lua </h5><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">local</span> redis = <span class=\"built_in\">require</span> <span class=\"string\">\"redis\"</span></span><br><span class=\"line\"><span class=\"keyword\">local</span> cache = redis.new()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">local</span> ok, err = cache.connect(cache, <span class=\"string\">'127.0.0.1'</span>, <span class=\"string\">'6379'</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"keyword\">not</span> ok <span class=\"keyword\">then</span></span><br><span class=\"line\">    ngx.say(<span class=\"string\">\"failed to connect:\"</span>, err)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">cache:set_timeout(<span class=\"number\">30000</span>)</span><br><span class=\"line\">args = ngx.req.get_uri_args()</span><br><span class=\"line\">user = args[<span class=\"string\">\"user\"</span>]</span><br><span class=\"line\"><span class=\"comment\">-- 3 min </span></span><br><span class=\"line\">cache:setex(user,<span class=\"number\">180</span>,<span class=\"number\">23</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">local</span> res,err = cache:keys(<span class=\"string\">'*'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">--count res num</span></span><br><span class=\"line\">count = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> <span class=\"built_in\">pairs</span>(res) <span class=\"keyword\">do</span></span><br><span class=\"line\">    count = count + <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\">ngx.say(count)</span><br><span class=\"line\"><span class=\"keyword\">local</span> ok, err = cache:<span class=\"built_in\">close</span>()</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl localhost/getOlnum?user=zj</span><br><span class=\"line\">1</span><br><span class=\"line\">curl localhost/getOlnum?user=zhengji</span><br><span class=\"line\">2</span><br></pre></td></tr></table></figure>\n<p>Happy Hacking :)</p>\n","site":{"data":{}},"excerpt":"","more":"<p>@ideawu.<br><a href=\"http://www.ideawu.net/blog/archives/732.html\" target=\"_blank\" rel=\"noopener\"></a> 1@agentzh , :) </p>\n<p></p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<p>,:<br>JavaScript, , .100, 1PV, 10, 10000(10000qps)., .</p>\n<p>. tornado + Redis<br>Ngnixrediskv</p>\n<p>kvC++httpKV<a href=\"https://github.com/zheng-ji/KvDb\" target=\"_blank\" rel=\"noopener\"></a>.<br>nginx luanginxc,lua</p>\n<p>lua  <strong>luajit</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#</span><br><span class=\"line\">shell&gt; export LUAJIT_LIB=/usr/local/lib</span><br><span class=\"line\">shell&gt; export LUAJIT_INC=/usr/local/include/luajit-&lt;VERSION&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"nginx-\"><a href=\"#nginx-\" class=\"headerlink\" title=\"nginx \"></a>nginx </h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ngx_devel_kit https://github.com/simpl/ngx_devel_kit</span><br><span class=\"line\">set-misc-nginx-module https://github.com/agentzh/set-misc-nginx-module</span><br><span class=\"line\">memc-nginx-module https://github.com/agentzh/memc-nginx-module </span><br><span class=\"line\">lua-nginx-module https://github.com/chaoslawful/lua-nginx-module</span><br></pre></td></tr></table></figure>\n<h4 id=\"nginx\"><a href=\"#nginx\" class=\"headerlink\" title=\"nginx\"></a>nginx</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --prefix=/path/to/nginx_src --add-module=/path/to/ngx_devel_kit --add-module=set-misc-nginx-module \\</span><br><span class=\"line\">--add-module=/path/to/lua-nginx-module -add-module=ngx_devel_kit </span><br><span class=\"line\">make </span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p>nginx.conf                  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location /echo &#123;  </span><br><span class=\"line\">    default_type &apos;text/plain&apos;;  </span><br><span class=\"line\">    echo &apos;hello echo&apos;;  </span><br><span class=\"line\">&#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">location /lua &#123;  </span><br><span class=\"line\">    default_type &apos;text/plain&apos;;  </span><br><span class=\"line\">    content_by_lua &apos;ngx.say(&quot;hello, lua&quot;)&apos;;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">shell&gt; echo &quot;/usr/local/lib&quot; &gt; /etc/ld.so.conf.d/usr_local_lib.conf</span><br><span class=\"line\">shell&gt; ldconfig</span><br></pre></td></tr></table></figure>\n<p>hello,lua :) ()</p>\n<h3 id=\"ideawu-\"><a href=\"#ideawu-\" class=\"headerlink\" title=\"ideawu \"></a>ideawu </h3><blockquote>\n<p>, , , . , . Facebook, , , Comet, (push).</p>\n</blockquote>\n<p> Lua  Redis content_by_lua_file nginx_lua_module  Lua <br>agentzh <a href=\"https://github.com/agentzh/lua-resty-redis.git\" target=\"_blank\" rel=\"noopener\">lua-resty-redis</a></p>\n<p> lib  lib  /home/zj/soft/data/www/lua/<br> Nginx  redis.lua<br> http </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lua_package_path &quot;/home/zj/soft/data/www/lua//?.lua;;&quot;;</span><br></pre></td></tr></table></figure>\n<p> lua  server  on  Nginx nginx </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lua_code_cache off;</span><br></pre></td></tr></table></figure>\n<p>nginx.conf </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location /getolNum &#123;</span><br><span class=\"line\">    content_by_lua_file /conf/online.lua;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"online-lua-\"><a href=\"#online-lua-\" class=\"headerlink\" title=\"online.lua \"></a>online.lua </h5><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">local</span> redis = <span class=\"built_in\">require</span> <span class=\"string\">\"redis\"</span></span><br><span class=\"line\"><span class=\"keyword\">local</span> cache = redis.new()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">local</span> ok, err = cache.connect(cache, <span class=\"string\">'127.0.0.1'</span>, <span class=\"string\">'6379'</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"keyword\">not</span> ok <span class=\"keyword\">then</span></span><br><span class=\"line\">    ngx.say(<span class=\"string\">\"failed to connect:\"</span>, err)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">cache:set_timeout(<span class=\"number\">30000</span>)</span><br><span class=\"line\">args = ngx.req.get_uri_args()</span><br><span class=\"line\">user = args[<span class=\"string\">\"user\"</span>]</span><br><span class=\"line\"><span class=\"comment\">-- 3 min </span></span><br><span class=\"line\">cache:setex(user,<span class=\"number\">180</span>,<span class=\"number\">23</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">local</span> res,err = cache:keys(<span class=\"string\">'*'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">--count res num</span></span><br><span class=\"line\">count = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> <span class=\"built_in\">pairs</span>(res) <span class=\"keyword\">do</span></span><br><span class=\"line\">    count = count + <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\">ngx.say(count)</span><br><span class=\"line\"><span class=\"keyword\">local</span> ok, err = cache:<span class=\"built_in\">close</span>()</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl localhost/getOlnum?user=zj</span><br><span class=\"line\">1</span><br><span class=\"line\">curl localhost/getOlnum?user=zhengji</span><br><span class=\"line\">2</span><br></pre></td></tr></table></figure>\n<p>Happy Hacking :)</p>\n"},{"layout":"post","title":"Oracle","date":"2013-08-16T12:25:00.000Z","comments":1,"_content":"\n#### Oracle\n\nOOracleOracleMysql MongoDB,Redis,LevelDbOracle3.5,\n\nMysqlOracle \n\n{% img /images/2013/08/oracle.png %}\n\nDTC++feelC++ ,Debug GDB\nOracle\n\nOracle,OCCI OracleC++:\n\n```\n//enviroment\nEnvironment *env = Environment::createEnvironment( Environment::DEFAULT);\n//\nConnection *conn = env->createConnection( userName, password, connectString);\n// \nStatement *stmt = conn->createStatement( \"SELECT blobcol FROM mytable\");\n//\nResultSet *rs = stmt->executeQuery();\n//\nstmt->closeResultSet(rs);\nconn->terminateStatement(stmt);\nenv->terminateConnection(conn);\nEnvironment::terminateEnvironment(env);\n```\n\n\n\nOracle  :) \n\n+ Mysql\n+ Oraclebug,\n\n\n\n```            \n#include<string.h>\nusing namespace oracle::occi;\nclass COraclconn\n{\n    public :\n\n        COraclconn (const std::string & user, const std:: string& password,\n                const std:: string& dbname)\n        {\n            m_status = false;\n            env = NULL;\n            conn = NULL;\n            stmt = NULL;\n            env = Environment::createEnvironment( Environment::THREADED_MUTEXED);\n            if (! env)\n            {\n                env = NULL;\n                return;\n            }\n            conn = env-> createConnection(user, password, dbname);\n            if (! conn)\n            {\n                conn = NULL;\n                return;\n            }\n            m_status = true;\n        }\n\n        ~COraclconn ()\n        {\n            if ( conn && stmt)\n                conn-> terminateStatement( stmt);\n            if ( env && conn)\n                env-> terminateConnection( conn);\n            if ( env)\n                Environment:: terminateEnvironment( env);\n        }\n        Statement * getstmt( const string& sql)\n        {\n            if (! m_status)\n                return NULL;\n            if ( stmt)\n            {\n                conn-> terminateStatement( stmt);\n                stmt = NULL;\n\n            }\n            stmt = conn-> createStatement(sql);\n            if (! stmt)\n            {\n                stmt = NULL;\n                m_status = false;\n            }\n            return stmt;\n\n        }\n    protected :\n        bool m_status;\n        Environment *env ;\n        Connection *conn ;\n        Statement *stmt ;\n};\n```\n\nSQL\n\nHappy Hacking \n\n","source":"_posts/2013-08-30-jing-ran-ye-yong-dao-liao-oracle.markdown","raw":"---\nlayout: post\ntitle: \"Oracle\"\ndate: 2013-08-16 20:25\ncomments: true\ncategories: DataBase\n---\n\n#### Oracle\n\nOOracleOracleMysql MongoDB,Redis,LevelDbOracle3.5,\n\nMysqlOracle \n\n{% img /images/2013/08/oracle.png %}\n\nDTC++feelC++ ,Debug GDB\nOracle\n\nOracle,OCCI OracleC++:\n\n```\n//enviroment\nEnvironment *env = Environment::createEnvironment( Environment::DEFAULT);\n//\nConnection *conn = env->createConnection( userName, password, connectString);\n// \nStatement *stmt = conn->createStatement( \"SELECT blobcol FROM mytable\");\n//\nResultSet *rs = stmt->executeQuery();\n//\nstmt->closeResultSet(rs);\nconn->terminateStatement(stmt);\nenv->terminateConnection(conn);\nEnvironment::terminateEnvironment(env);\n```\n\n\n\nOracle  :) \n\n+ Mysql\n+ Oraclebug,\n\n\n\n```            \n#include<string.h>\nusing namespace oracle::occi;\nclass COraclconn\n{\n    public :\n\n        COraclconn (const std::string & user, const std:: string& password,\n                const std:: string& dbname)\n        {\n            m_status = false;\n            env = NULL;\n            conn = NULL;\n            stmt = NULL;\n            env = Environment::createEnvironment( Environment::THREADED_MUTEXED);\n            if (! env)\n            {\n                env = NULL;\n                return;\n            }\n            conn = env-> createConnection(user, password, dbname);\n            if (! conn)\n            {\n                conn = NULL;\n                return;\n            }\n            m_status = true;\n        }\n\n        ~COraclconn ()\n        {\n            if ( conn && stmt)\n                conn-> terminateStatement( stmt);\n            if ( env && conn)\n                env-> terminateConnection( conn);\n            if ( env)\n                Environment:: terminateEnvironment( env);\n        }\n        Statement * getstmt( const string& sql)\n        {\n            if (! m_status)\n                return NULL;\n            if ( stmt)\n            {\n                conn-> terminateStatement( stmt);\n                stmt = NULL;\n\n            }\n            stmt = conn-> createStatement(sql);\n            if (! stmt)\n            {\n                stmt = NULL;\n                m_status = false;\n            }\n            return stmt;\n\n        }\n    protected :\n        bool m_status;\n        Environment *env ;\n        Connection *conn ;\n        Statement *stmt ;\n};\n```\n\nSQL\n\nHappy Hacking \n\n","slug":"2013-08-30-jing-ran-ye-yong-dao-liao-oracle","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui470013m1tjaf2pmba4","content":"<h4 id=\"Oracle\"><a href=\"#Oracle\" class=\"headerlink\" title=\"Oracle\"></a>Oracle</h4><p>OOracleOracleMysql MongoDB,Redis,LevelDbOracle3.5,</p>\n<p>MysqlOracle </p>\n<img src=\"/images/2013/08/oracle.png\">\n<p>DTC++feelC++ ,Debug GDB<br>Oracle</p>\n<p>Oracle,OCCI OracleC++:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//enviroment</span><br><span class=\"line\">Environment *env = Environment::createEnvironment( Environment::DEFAULT);</span><br><span class=\"line\">//</span><br><span class=\"line\">Connection *conn = env-&gt;createConnection( userName, password, connectString);</span><br><span class=\"line\">// </span><br><span class=\"line\">Statement *stmt = conn-&gt;createStatement( &quot;SELECT blobcol FROM mytable&quot;);</span><br><span class=\"line\">//</span><br><span class=\"line\">ResultSet *rs = stmt-&gt;executeQuery();</span><br><span class=\"line\">//</span><br><span class=\"line\">stmt-&gt;closeResultSet(rs);</span><br><span class=\"line\">conn-&gt;terminateStatement(stmt);</span><br><span class=\"line\">env-&gt;terminateConnection(conn);</span><br><span class=\"line\">Environment::terminateEnvironment(env);</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>Oracle  :) </p>\n<ul>\n<li>Mysql</li>\n<li>Oraclebug,</li>\n</ul>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include&lt;string.h&gt;</span><br><span class=\"line\">using namespace oracle::occi;</span><br><span class=\"line\">class COraclconn</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    public :</span><br><span class=\"line\"></span><br><span class=\"line\">        COraclconn (const std::string &amp; user, const std:: string&amp; password,</span><br><span class=\"line\">                const std:: string&amp; dbname)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            m_status = false;</span><br><span class=\"line\">            env = NULL;</span><br><span class=\"line\">            conn = NULL;</span><br><span class=\"line\">            stmt = NULL;</span><br><span class=\"line\">            env = Environment::createEnvironment( Environment::THREADED_MUTEXED);</span><br><span class=\"line\">            if (! env)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                env = NULL;</span><br><span class=\"line\">                return;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            conn = env-&gt; createConnection(user, password, dbname);</span><br><span class=\"line\">            if (! conn)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                conn = NULL;</span><br><span class=\"line\">                return;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            m_status = true;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        ~COraclconn ()</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            if ( conn &amp;&amp; stmt)</span><br><span class=\"line\">                conn-&gt; terminateStatement( stmt);</span><br><span class=\"line\">            if ( env &amp;&amp; conn)</span><br><span class=\"line\">                env-&gt; terminateConnection( conn);</span><br><span class=\"line\">            if ( env)</span><br><span class=\"line\">                Environment:: terminateEnvironment( env);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Statement * getstmt( const string&amp; sql)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            if (! m_status)</span><br><span class=\"line\">                return NULL;</span><br><span class=\"line\">            if ( stmt)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                conn-&gt; terminateStatement( stmt);</span><br><span class=\"line\">                stmt = NULL;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            stmt = conn-&gt; createStatement(sql);</span><br><span class=\"line\">            if (! stmt)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                stmt = NULL;</span><br><span class=\"line\">                m_status = false;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            return stmt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    protected :</span><br><span class=\"line\">        bool m_status;</span><br><span class=\"line\">        Environment *env ;</span><br><span class=\"line\">        Connection *conn ;</span><br><span class=\"line\">        Statement *stmt ;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>SQL</p>\n<p>Happy Hacking </p>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"Oracle\"><a href=\"#Oracle\" class=\"headerlink\" title=\"Oracle\"></a>Oracle</h4><p>OOracleOracleMysql MongoDB,Redis,LevelDbOracle3.5,</p>\n<p>MysqlOracle </p>\n<img src=\"/images/2013/08/oracle.png\">\n<p>DTC++feelC++ ,Debug GDB<br>Oracle</p>\n<p>Oracle,OCCI OracleC++:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//enviroment</span><br><span class=\"line\">Environment *env = Environment::createEnvironment( Environment::DEFAULT);</span><br><span class=\"line\">//</span><br><span class=\"line\">Connection *conn = env-&gt;createConnection( userName, password, connectString);</span><br><span class=\"line\">// </span><br><span class=\"line\">Statement *stmt = conn-&gt;createStatement( &quot;SELECT blobcol FROM mytable&quot;);</span><br><span class=\"line\">//</span><br><span class=\"line\">ResultSet *rs = stmt-&gt;executeQuery();</span><br><span class=\"line\">//</span><br><span class=\"line\">stmt-&gt;closeResultSet(rs);</span><br><span class=\"line\">conn-&gt;terminateStatement(stmt);</span><br><span class=\"line\">env-&gt;terminateConnection(conn);</span><br><span class=\"line\">Environment::terminateEnvironment(env);</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>Oracle  :) </p>\n<ul>\n<li>Mysql</li>\n<li>Oraclebug,</li>\n</ul>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include&lt;string.h&gt;</span><br><span class=\"line\">using namespace oracle::occi;</span><br><span class=\"line\">class COraclconn</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    public :</span><br><span class=\"line\"></span><br><span class=\"line\">        COraclconn (const std::string &amp; user, const std:: string&amp; password,</span><br><span class=\"line\">                const std:: string&amp; dbname)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            m_status = false;</span><br><span class=\"line\">            env = NULL;</span><br><span class=\"line\">            conn = NULL;</span><br><span class=\"line\">            stmt = NULL;</span><br><span class=\"line\">            env = Environment::createEnvironment( Environment::THREADED_MUTEXED);</span><br><span class=\"line\">            if (! env)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                env = NULL;</span><br><span class=\"line\">                return;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            conn = env-&gt; createConnection(user, password, dbname);</span><br><span class=\"line\">            if (! conn)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                conn = NULL;</span><br><span class=\"line\">                return;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            m_status = true;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        ~COraclconn ()</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            if ( conn &amp;&amp; stmt)</span><br><span class=\"line\">                conn-&gt; terminateStatement( stmt);</span><br><span class=\"line\">            if ( env &amp;&amp; conn)</span><br><span class=\"line\">                env-&gt; terminateConnection( conn);</span><br><span class=\"line\">            if ( env)</span><br><span class=\"line\">                Environment:: terminateEnvironment( env);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Statement * getstmt( const string&amp; sql)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            if (! m_status)</span><br><span class=\"line\">                return NULL;</span><br><span class=\"line\">            if ( stmt)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                conn-&gt; terminateStatement( stmt);</span><br><span class=\"line\">                stmt = NULL;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            stmt = conn-&gt; createStatement(sql);</span><br><span class=\"line\">            if (! stmt)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                stmt = NULL;</span><br><span class=\"line\">                m_status = false;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            return stmt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    protected :</span><br><span class=\"line\">        bool m_status;</span><br><span class=\"line\">        Environment *env ;</span><br><span class=\"line\">        Connection *conn ;</span><br><span class=\"line\">        Statement *stmt ;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>SQL</p>\n<p>Happy Hacking </p>\n"},{"layout":"post","title":"Jsonp","date":"2013-09-15T13:50:00.000Z","comments":1,"_content":"\njs,,.js. phonegap + jqtouchApp\n\n\n\nAjax\n\nServerphp,\n\n```php\n$arr = array(\n        'user'=>'123',\n        'friends' => 234\n        )\necho json_encode($arr);\n```\n\njs,jqueryget ,E:/mytest/test.html\n\n```javascript\n$(function(){\n    url = \"http://127.0.0.1/test.php\"\n    $.get(url,funtion(result) {\n        alert(result);\n    })\n);\n```\n\njquerychrome \n\n#####\na.com jsb.comc.a.com,http://127.0.0.1/test.php  E/mytest/test.html\n>NetscapeJavaScript tab \n\n,jsonp\n\n#####jsonp\n>JSONPJSON with PaddingScript tagsjavascript callbackJSONP - \n\nServerphp\n\n```python\n$arr = array(\n        'user'=>'123',\n        'friends' => 234\n        )\n$callback = $_GET['callback']; //\necho $callback.json_encode($arr);\n```\n\njs,callback,javascripte callbackscrpt tags\n\n```javascript\n$(function(){\n    url = \"http://127.0.0.1/test.php?callback=?\"\n    $.get(url,funtion(result) {\n        alert(result);\n    }));\n```\n\n\n \n\n\n\n\n\n","source":"_posts/2013-09-15-jsonpjie-jue-kua-yu-qing-qiu.markdown","raw":"---\nlayout: post\ntitle: \"Jsonp\"\ndate: 2013-09-15 21:50\ncomments: true\ncategories: NetWork\n---\n\njs,,.js. phonegap + jqtouchApp\n\n\n\nAjax\n\nServerphp,\n\n```php\n$arr = array(\n        'user'=>'123',\n        'friends' => 234\n        )\necho json_encode($arr);\n```\n\njs,jqueryget ,E:/mytest/test.html\n\n```javascript\n$(function(){\n    url = \"http://127.0.0.1/test.php\"\n    $.get(url,funtion(result) {\n        alert(result);\n    })\n);\n```\n\njquerychrome \n\n#####\na.com jsb.comc.a.com,http://127.0.0.1/test.php  E/mytest/test.html\n>NetscapeJavaScript tab \n\n,jsonp\n\n#####jsonp\n>JSONPJSON with PaddingScript tagsjavascript callbackJSONP - \n\nServerphp\n\n```python\n$arr = array(\n        'user'=>'123',\n        'friends' => 234\n        )\n$callback = $_GET['callback']; //\necho $callback.json_encode($arr);\n```\n\njs,callback,javascripte callbackscrpt tags\n\n```javascript\n$(function(){\n    url = \"http://127.0.0.1/test.php?callback=?\"\n    $.get(url,funtion(result) {\n        alert(result);\n    }));\n```\n\n\n \n\n\n\n\n\n","slug":"2013-09-15-jsonpjie-jue-kua-yu-qing-qiu","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui490016m1tjp4g7c0uc","content":"<p>js,,.js. phonegap + jqtouchApp</p>\n<p><br>Ajax</p>\n<p>Serverphp,</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$arr = <span class=\"keyword\">array</span>(</span><br><span class=\"line\">        <span class=\"string\">'user'</span>=&gt;<span class=\"string\">'123'</span>,</span><br><span class=\"line\">        <span class=\"string\">'friends'</span> =&gt; <span class=\"number\">234</span></span><br><span class=\"line\">        )</span><br><span class=\"line\"><span class=\"keyword\">echo</span> json_encode($arr);</span><br></pre></td></tr></table></figure>\n<p>js,jqueryget ,E:/mytest/test.html</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    url = <span class=\"string\">\"http://127.0.0.1/test.php\"</span></span><br><span class=\"line\">    $.get(url,funtion(result) &#123;</span><br><span class=\"line\">        alert(result);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>jquerychrome </p>\n<p>#####<br>a.com jsb.comc.a.com,<a href=\"http://127.0.0.1/test.php\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1/test.php</a>  E/mytest/test.html</p>\n<blockquote>\n<p>NetscapeJavaScript tab </p>\n</blockquote>\n<p>,jsonp</p>\n<p>#####jsonp</p>\n<blockquote>\n<p>JSONPJSON with PaddingScript tagsjavascript callbackJSONP - </p>\n</blockquote>\n<p>Serverphp</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$arr = array(</span><br><span class=\"line\">        'user'=&gt;'123',</span><br><span class=\"line\">        'friends' =&gt; 234</span><br><span class=\"line\">        )</span><br><span class=\"line\">$callback = $_GET[<span class=\"string\">'callback'</span>]; //</span><br><span class=\"line\">echo $callback.json_encode($arr);</span><br></pre></td></tr></table></figure>\n<p>js,callback,javascripte callbackscrpt tags</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    url = <span class=\"string\">\"http://127.0.0.1/test.php?callback=?\"</span></span><br><span class=\"line\">    $.get(url,funtion(result) &#123;</span><br><span class=\"line\">        alert(result);</span><br><span class=\"line\">    &#125;));</span><br></pre></td></tr></table></figure>\n<p><br> </p>\n","site":{"data":{}},"excerpt":"","more":"<p>js,,.js. phonegap + jqtouchApp</p>\n<p><br>Ajax</p>\n<p>Serverphp,</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$arr = <span class=\"keyword\">array</span>(</span><br><span class=\"line\">        <span class=\"string\">'user'</span>=&gt;<span class=\"string\">'123'</span>,</span><br><span class=\"line\">        <span class=\"string\">'friends'</span> =&gt; <span class=\"number\">234</span></span><br><span class=\"line\">        )</span><br><span class=\"line\"><span class=\"keyword\">echo</span> json_encode($arr);</span><br></pre></td></tr></table></figure>\n<p>js,jqueryget ,E:/mytest/test.html</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    url = <span class=\"string\">\"http://127.0.0.1/test.php\"</span></span><br><span class=\"line\">    $.get(url,funtion(result) &#123;</span><br><span class=\"line\">        alert(result);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>jquerychrome </p>\n<p>#####<br>a.com jsb.comc.a.com,<a href=\"http://127.0.0.1/test.php\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1/test.php</a>  E/mytest/test.html</p>\n<blockquote>\n<p>NetscapeJavaScript tab </p>\n</blockquote>\n<p>,jsonp</p>\n<p>#####jsonp</p>\n<blockquote>\n<p>JSONPJSON with PaddingScript tagsjavascript callbackJSONP - </p>\n</blockquote>\n<p>Serverphp</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$arr = array(</span><br><span class=\"line\">        'user'=&gt;'123',</span><br><span class=\"line\">        'friends' =&gt; 234</span><br><span class=\"line\">        )</span><br><span class=\"line\">$callback = $_GET[<span class=\"string\">'callback'</span>]; //</span><br><span class=\"line\">echo $callback.json_encode($arr);</span><br></pre></td></tr></table></figure>\n<p>js,callback,javascripte callbackscrpt tags</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    url = <span class=\"string\">\"http://127.0.0.1/test.php?callback=?\"</span></span><br><span class=\"line\">    $.get(url,funtion(result) &#123;</span><br><span class=\"line\">        alert(result);</span><br><span class=\"line\">    &#125;));</span><br></pre></td></tr></table></figure>\n<p><br> </p>\n"},{"layout":"post","title":"leveldb-","date":"2013-09-21T01:42:00.000Z","comments":1,"_content":"\n leveldbgooglekvbillion LSM LevelDB 4Q6600CPU40w10w@ideawussdbLeveldbNB \n\n:\n\n* k/v db library \n* No Server \n* No cache \n \n\n>talk is cheap ,Show me the Code\n\nC++Leveldb ,leveldb[code](https://github.com/basho/leveldb)\n\n```python\n#include<iostream>  \n#include<string>  \n#include\"leveldb/db.h\"  \n\nusing namespace std;  \nusing namespace leveldb;  \n\nint main()  \n{  \n    DB *db;  \n    Options options;  \n    options.create_if_missing = true;  \n    Status s = DB::Open(options,\"/data/leveldb/lvd.db\",&db);  \n    if(!s.ok()){  \n        cerr << s.ToString() << endl;\n    }  \n    string key = \"name\",val = \"leveldb\";  \n    s = db->Put(WriteOptions(),key,val);  \n    if(!s.ok()){  \n        cerr << s.ToString() << endl; \n    }  \n    s = db->Get(ReadOptions(),key,&val);  \n    if(s.ok()){  \n        cout << key << \"=\" << val << endl;  \n        s = db->Put(leveldb::WriteOptions(),\"key2\",val);  \n        if(s.ok()){  \n            s = db->Delete(leveldb::WriteOptions(),key);  \n            if(!s.ok()){  \n                cerr << s.ToString() << endl;\n            }  \n        }  \n    }  \n                                                                                                                                    }  \n```\n\n\n\n```\ng++ testleveldb.cpp -o main -I./Include -l./ -lleveldb -lrt\n```\n\n./main ,leveldb\n\n```\nzj@hp:~/lvd.db$ tree\n.\n 000003.log\n CURRENT\n LOCK\n LOG\n MANIFEST-000002\n sst_0\n sst_1\n sst_2\n sst_3\n sst_4\n sst_5\n sst_6\n```\n\nbinding,python   [py-leveldb](https://github.com/rjpower/py-leveldb)  \npython-leveldb\n\n```python\nimport leveldb\ndb = leveldb.LevelDB('./db')\ndb.Put('hello', 'world')\nprint db.Get('hello')\n```\n\nServer \n\n\n\n\n\n\n","source":"_posts/2013-09-21-leveldbben-di-cun-chu-yin-qing-jing-zhi-de-gong-ju.markdown","raw":"---\nlayout: post\ntitle: \"leveldb-\"\ndate: 2013-09-21 09:42\ncomments: true\ncategories: DataBase \n---\n\n leveldbgooglekvbillion LSM LevelDB 4Q6600CPU40w10w@ideawussdbLeveldbNB \n\n:\n\n* k/v db library \n* No Server \n* No cache \n \n\n>talk is cheap ,Show me the Code\n\nC++Leveldb ,leveldb[code](https://github.com/basho/leveldb)\n\n```python\n#include<iostream>  \n#include<string>  \n#include\"leveldb/db.h\"  \n\nusing namespace std;  \nusing namespace leveldb;  \n\nint main()  \n{  \n    DB *db;  \n    Options options;  \n    options.create_if_missing = true;  \n    Status s = DB::Open(options,\"/data/leveldb/lvd.db\",&db);  \n    if(!s.ok()){  \n        cerr << s.ToString() << endl;\n    }  \n    string key = \"name\",val = \"leveldb\";  \n    s = db->Put(WriteOptions(),key,val);  \n    if(!s.ok()){  \n        cerr << s.ToString() << endl; \n    }  \n    s = db->Get(ReadOptions(),key,&val);  \n    if(s.ok()){  \n        cout << key << \"=\" << val << endl;  \n        s = db->Put(leveldb::WriteOptions(),\"key2\",val);  \n        if(s.ok()){  \n            s = db->Delete(leveldb::WriteOptions(),key);  \n            if(!s.ok()){  \n                cerr << s.ToString() << endl;\n            }  \n        }  \n    }  \n                                                                                                                                    }  \n```\n\n\n\n```\ng++ testleveldb.cpp -o main -I./Include -l./ -lleveldb -lrt\n```\n\n./main ,leveldb\n\n```\nzj@hp:~/lvd.db$ tree\n.\n 000003.log\n CURRENT\n LOCK\n LOG\n MANIFEST-000002\n sst_0\n sst_1\n sst_2\n sst_3\n sst_4\n sst_5\n sst_6\n```\n\nbinding,python   [py-leveldb](https://github.com/rjpower/py-leveldb)  \npython-leveldb\n\n```python\nimport leveldb\ndb = leveldb.LevelDB('./db')\ndb.Put('hello', 'world')\nprint db.Get('hello')\n```\n\nServer \n\n\n\n\n\n\n","slug":"2013-09-21-leveldbben-di-cun-chu-yin-qing-jing-zhi-de-gong-ju","published":1,"updated":"2018-07-01T05:53:56.000Z","photos":[],"link":"","_id":"cjv8xui4a0018m1tjj91cop8q","content":"<p> leveldbgooglekvbillion LSM LevelDB 4Q6600CPU40w10w@ideawussdbLeveldbNB </p>\n<p>:</p>\n<ul>\n<li>k/v db library </li>\n<li>No Server </li>\n<li>No cache<br> </li>\n</ul>\n<blockquote>\n<p>talk is cheap ,Show me the Code</p>\n</blockquote>\n<p>C++Leveldb ,leveldb<a href=\"https://github.com/basho/leveldb\" target=\"_blank\" rel=\"noopener\">code</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#include&lt;iostream&gt;  </span></span><br><span class=\"line\"><span class=\"comment\">#include&lt;string&gt;  </span></span><br><span class=\"line\"><span class=\"comment\">#include\"leveldb/db.h\"  </span></span><br><span class=\"line\"></span><br><span class=\"line\">using namespace std;  </span><br><span class=\"line\">using namespace leveldb;  </span><br><span class=\"line\"></span><br><span class=\"line\">int main()  </span><br><span class=\"line\">&#123;  </span><br><span class=\"line\">    DB *db;  </span><br><span class=\"line\">    Options options;  </span><br><span class=\"line\">    options.create_if_missing = true;  </span><br><span class=\"line\">    Status s = DB::Open(options,<span class=\"string\">\"/data/leveldb/lvd.db\"</span>,&amp;db);  </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!s.ok())&#123;  </span><br><span class=\"line\">        cerr &lt;&lt; s.ToString() &lt;&lt; endl;</span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    string key = <span class=\"string\">\"name\"</span>,val = <span class=\"string\">\"leveldb\"</span>;  </span><br><span class=\"line\">    s = db-&gt;Put(WriteOptions(),key,val);  </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!s.ok())&#123;  </span><br><span class=\"line\">        cerr &lt;&lt; s.ToString() &lt;&lt; endl; </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    s = db-&gt;Get(ReadOptions(),key,&amp;val);  </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(s.ok())&#123;  </span><br><span class=\"line\">        cout &lt;&lt; key &lt;&lt; <span class=\"string\">\"=\"</span> &lt;&lt; val &lt;&lt; endl;  </span><br><span class=\"line\">        s = db-&gt;Put(leveldb::WriteOptions(),\"key2\",val);  </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(s.ok())&#123;  </span><br><span class=\"line\">            s = db-&gt;Delete(leveldb::WriteOptions(),key);  </span><br><span class=\"line\">            <span class=\"keyword\">if</span>(!s.ok())&#123;  </span><br><span class=\"line\">                cerr &lt;&lt; s.ToString() &lt;&lt; endl;</span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">                                                                                                                                    &#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">g++ testleveldb.cpp -o main -I./Include -l./ -lleveldb -lrt</span><br></pre></td></tr></table></figure>\n<p>./main ,leveldb</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@hp:~/lvd.db$ tree</span><br><span class=\"line\">.</span><br><span class=\"line\"> 000003.log</span><br><span class=\"line\"> CURRENT</span><br><span class=\"line\"> LOCK</span><br><span class=\"line\"> LOG</span><br><span class=\"line\"> MANIFEST-000002</span><br><span class=\"line\"> sst_0</span><br><span class=\"line\"> sst_1</span><br><span class=\"line\"> sst_2</span><br><span class=\"line\"> sst_3</span><br><span class=\"line\"> sst_4</span><br><span class=\"line\"> sst_5</span><br><span class=\"line\"> sst_6</span><br></pre></td></tr></table></figure>\n<p>binding,python   <a href=\"https://github.com/rjpower/py-leveldb\" target=\"_blank\" rel=\"noopener\">py-leveldb</a><br>python-leveldb</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> leveldb</span><br><span class=\"line\">db = leveldb.LevelDB(<span class=\"string\">'./db'</span>)</span><br><span class=\"line\">db.Put(<span class=\"string\">'hello'</span>, <span class=\"string\">'world'</span>)</span><br><span class=\"line\"><span class=\"keyword\">print</span> db.Get(<span class=\"string\">'hello'</span>)</span><br></pre></td></tr></table></figure>\n<p>Server </p>\n","site":{"data":{}},"excerpt":"","more":"<p> leveldbgooglekvbillion LSM LevelDB 4Q6600CPU40w10w@ideawussdbLeveldbNB </p>\n<p>:</p>\n<ul>\n<li>k/v db library </li>\n<li>No Server </li>\n<li>No cache<br> </li>\n</ul>\n<blockquote>\n<p>talk is cheap ,Show me the Code</p>\n</blockquote>\n<p>C++Leveldb ,leveldb<a href=\"https://github.com/basho/leveldb\" target=\"_blank\" rel=\"noopener\">code</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#include&lt;iostream&gt;  </span></span><br><span class=\"line\"><span class=\"comment\">#include&lt;string&gt;  </span></span><br><span class=\"line\"><span class=\"comment\">#include\"leveldb/db.h\"  </span></span><br><span class=\"line\"></span><br><span class=\"line\">using namespace std;  </span><br><span class=\"line\">using namespace leveldb;  </span><br><span class=\"line\"></span><br><span class=\"line\">int main()  </span><br><span class=\"line\">&#123;  </span><br><span class=\"line\">    DB *db;  </span><br><span class=\"line\">    Options options;  </span><br><span class=\"line\">    options.create_if_missing = true;  </span><br><span class=\"line\">    Status s = DB::Open(options,<span class=\"string\">\"/data/leveldb/lvd.db\"</span>,&amp;db);  </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!s.ok())&#123;  </span><br><span class=\"line\">        cerr &lt;&lt; s.ToString() &lt;&lt; endl;</span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    string key = <span class=\"string\">\"name\"</span>,val = <span class=\"string\">\"leveldb\"</span>;  </span><br><span class=\"line\">    s = db-&gt;Put(WriteOptions(),key,val);  </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!s.ok())&#123;  </span><br><span class=\"line\">        cerr &lt;&lt; s.ToString() &lt;&lt; endl; </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    s = db-&gt;Get(ReadOptions(),key,&amp;val);  </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(s.ok())&#123;  </span><br><span class=\"line\">        cout &lt;&lt; key &lt;&lt; <span class=\"string\">\"=\"</span> &lt;&lt; val &lt;&lt; endl;  </span><br><span class=\"line\">        s = db-&gt;Put(leveldb::WriteOptions(),\"key2\",val);  </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(s.ok())&#123;  </span><br><span class=\"line\">            s = db-&gt;Delete(leveldb::WriteOptions(),key);  </span><br><span class=\"line\">            <span class=\"keyword\">if</span>(!s.ok())&#123;  </span><br><span class=\"line\">                cerr &lt;&lt; s.ToString() &lt;&lt; endl;</span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">                                                                                                                                    &#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">g++ testleveldb.cpp -o main -I./Include -l./ -lleveldb -lrt</span><br></pre></td></tr></table></figure>\n<p>./main ,leveldb</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@hp:~/lvd.db$ tree</span><br><span class=\"line\">.</span><br><span class=\"line\"> 000003.log</span><br><span class=\"line\"> CURRENT</span><br><span class=\"line\"> LOCK</span><br><span class=\"line\"> LOG</span><br><span class=\"line\"> MANIFEST-000002</span><br><span class=\"line\"> sst_0</span><br><span class=\"line\"> sst_1</span><br><span class=\"line\"> sst_2</span><br><span class=\"line\"> sst_3</span><br><span class=\"line\"> sst_4</span><br><span class=\"line\"> sst_5</span><br><span class=\"line\"> sst_6</span><br></pre></td></tr></table></figure>\n<p>binding,python   <a href=\"https://github.com/rjpower/py-leveldb\" target=\"_blank\" rel=\"noopener\">py-leveldb</a><br>python-leveldb</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> leveldb</span><br><span class=\"line\">db = leveldb.LevelDB(<span class=\"string\">'./db'</span>)</span><br><span class=\"line\">db.Put(<span class=\"string\">'hello'</span>, <span class=\"string\">'world'</span>)</span><br><span class=\"line\"><span class=\"keyword\">print</span> db.Get(<span class=\"string\">'hello'</span>)</span><br></pre></td></tr></table></figure>\n<p>Server </p>\n"},{"layout":"post","title":"Hadoop","date":"2013-09-22T10:11:00.000Z","comments":1,"_content":"Amazon Web Service[AWS](http://aws.amazon.com/) Hadoop .Tencent tencent TDW,Hadoop .hadoop \n\n+ hadoop;\n\n```\nsudo addgroup hadoop\nsudo adduser -ingroup hadoop hadoop\n```\n\nhadoop/etc/sudoers; root   ALL=(ALL:ALL)   ALL\n\n```\nhadoop  ALL=(ALL:ALL) ALL\n```\n\n+ UbuntuJDK \n\n```\nsudo apt-add-repository ppa:flexiondotorg/java\nsudo apt-get update\nsudo apt-get install sun-java6-jre sun-java6-jdk sun-java6-plugin\n```\n:\n\n```\nW: GPG http://ppa.launchpad.net precise Release:  NO_PUBKEY 2EA8F35793D8809A\n\nsudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 2EA8F35793D8809A  \n```\n\n sudo vi /etc/environment\n\n\n```\nJAVA_HOME=/usr/lib/jvm/java-6-sun\nCLASSPATH=.:/usr/lib/jvm/java-6-sun/lib\n```\n\n+ ssh \n\n```\nsudo apt-get install ssh openssh-server\n```\n\nhadoop\n\n```\nsu - hadoop\n```\n\n rsa  key\n\n```\nssh-keygen -t rsa -P \"\"\n```\n\n~/.ssh/id_rsa.pubauthorized_keys,\n\n```\ncd ~/.ssh\ncat id_rsa.pub >> authorized_keys\n```\n\n+ [hadoop](http://www.apache.org/dyn/closer.cgi/hadoop/common/),\n\n```\nsudo cp hadoop-0.20.203.0rc1.tar.gz /usr/local/\n```\n\nhadoop-0.20.203.tar.gz\n\n```\ncd /usr/local\nsudo tar -zxf hadoop-0.20.203.0rc1.tar.gz\n```\n\nhadoop;\n\n```\nsudo mv hadoop-0.20.203.0 hadoop\n```\n\nhadoophadoop\n\n```\nsudo chown -R hadoop:hadoop hadoop\n```\n\nhadoop/conf/hadoop-env.sh;\n\n```\nsudo vi hadoop/conf/hadoop-env.sh\n```\n\nconf/hadoop-env.sh,jdk;\n\n```\nexport JAVA_HOME=/usr/lib/jvm/java-6-sun/\nexport HADOOP_HOME=/usr/local/hadoop\nexport PATH=$PATH:/usr/local/hadoop/bin\n```\n\nsource hadoop-env.sh \n\nconf/core-site.xml;\n\n```\n<?xml version=\"1.0\"?>\n<?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?>\n<!-- Put site-specific property overrides in this file. -->\n<configuration>\n    <property>  \n        <name>fs.default.name</name>  \n        <value>hdfs://localhost:9000</value>   \n    </property>  \n</configuration>\n```\n\nconf/mapred-site.xml;\n\n```\n<?xml version=\"1.0\"?>\n<?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?>\n<!-- Put site-specific property overrides in this file. -->\n<configuration>  \n     <property>   \n           <name>mapred.job.tracker</name>  \n            <value>localhost:9001</value>   \n      </property>  \n</configuration>\n```\n\nconf/hdfs-site.xml;\n\n```\n<configuration>\n    <property>\n        <name>dfs.name.dir</name>\n        <value>/usr/local/hadoop/datalog1,/usr/local/hadoop/datalog2</value>\n    </property>\n    <property>\n        <name>dfs.data.dir</name>\n        <value>/usr/local/hadoop/data1,/usr/local/hadoop/data2</value>\n    </property>\n    <property>\n        <name>dfs.replication</name>\n        <value>2</value>\n    </property>\n</configuration>\n```\n\n+ hadoop,\n\n```\ncd /usr/local/hadoop/\nbin/hadoop namenode -format // hadoophdfs\nbin/start-all.sh //\n```\n\nhadoop\n\n```\nhadoop@hp:/usr/local/hadoop/bin$ sudo jps\n11822 DataNode\n12461 Jps\n11581 NameNode\n12157 JobTracker\n12064 SecondaryNameNode\n12377 TaskTracker\n```\n\nhadoop\n[http://localhost:50030/](http://localhost:50030/),\n{% img /images/2013/09/hadoop.png %}\nwordcounw\n\n,hdfs\n\n```\nhadoop@hp:/usr/local/hadoop$ mkdir input //\nhadoop@hp:/usr/local/hadoop$ cp conf/* input\nhadoop@hp:/usr/local/hadoop$ bin/hadoop fs -put input/ input\n```\n\nwordcount,inputoutput,\n\n```\nbin/hadoop jar hadoop-examples-0.20.203.0.jar wordcount input output\n```\n\n\n\n```\n13/09/22 17:59:40 INFO input.FileInputFormat: Total input paths to process : 15\n13/09/22 17:59:41 INFO mapred.JobClient: Running job: job_201309221738_0006\n13/09/22 17:59:42 INFO mapred.JobClient:  map 0% reduce 0%\n13/09/22 17:59:58 INFO mapred.JobClient:  map 13% reduce 0%\n13/09/22 18:00:07 INFO mapred.JobClient:  map 26% reduce 0%\n13/09/22 18:00:16 INFO mapred.JobClient:  map 40% reduce 8%\n13/09/22 18:00:22 INFO mapred.JobClient:  map 53% reduce 13%\n13/09/22 18:00:28 INFO mapred.JobClient:  map 66% reduce 13%\n13/09/22 18:00:31 INFO mapred.JobClient:  map 66% reduce 17%\n13/09/22 18:00:34 INFO mapred.JobClient:  map 80% reduce 17%\n13/09/22 18:00:37 INFO mapred.JobClient:  map 80% reduce 22%\n13/09/22 18:00:40 INFO mapred.JobClient:  map 93% reduce 22%\n13/09/22 18:00:46 INFO mapred.JobClient:  map 100% reduce 26%\n13/09/22 18:00:55 INFO mapred.JobClient:  map 100% reduce 100%\n13/09/22 18:01:00 INFO mapred.JobClient: Job complete: job_201309221738_0006\n13/09/22 18:01:00 INFO mapred.JobClient: Counters: 25\n13/09/22 18:01:00 INFO mapred.JobClient:   Job Counters \n```\n\n\n\n```\nhadoop@hp:/usr/local/hadoop$ bin/hadoop fs -cat output/*\n```\n\n\n\n```\nhadoop@hp:/usr/local/hadoop$ hadoop fs -cat output/*\n\"\". 4\n\"*\" 10\n\"alice,bob  10\n\"console\"   1\n\"hadoop.root.logger\".   1\n\"jks\".  4\n   79\n$HADOOP_BALANCER_OPTS\"   1\n$HADOOP_DATANODE_OPTS\"   1\n$HADOOP_HOME/conf/slaves 1\n$HADOOP_HOME/logs    1\n$HADOOP_JOBTRACKER_OPTS\" 1\n$HADOOP_NAMENODE_OPTS\"   1\n$HADOOP_SECONDARYNAMENODE_OPTS\"  1\n```\n\nhadoop\n\n```\nhadoop@hp:/usr/local/hadoop$ ./stop-all.sh \n```\n\nhadoop\n\n\n","source":"_posts/2013-09-22-dan-ji-wan-hadoop.markdown","raw":"---\nlayout: post\ntitle: \"Hadoop\"\ndate: 2013-09-22 18:11\ncomments: true\ncategories: Server\n---\nAmazon Web Service[AWS](http://aws.amazon.com/) Hadoop .Tencent tencent TDW,Hadoop .hadoop \n\n+ hadoop;\n\n```\nsudo addgroup hadoop\nsudo adduser -ingroup hadoop hadoop\n```\n\nhadoop/etc/sudoers; root   ALL=(ALL:ALL)   ALL\n\n```\nhadoop  ALL=(ALL:ALL) ALL\n```\n\n+ UbuntuJDK \n\n```\nsudo apt-add-repository ppa:flexiondotorg/java\nsudo apt-get update\nsudo apt-get install sun-java6-jre sun-java6-jdk sun-java6-plugin\n```\n:\n\n```\nW: GPG http://ppa.launchpad.net precise Release:  NO_PUBKEY 2EA8F35793D8809A\n\nsudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 2EA8F35793D8809A  \n```\n\n sudo vi /etc/environment\n\n\n```\nJAVA_HOME=/usr/lib/jvm/java-6-sun\nCLASSPATH=.:/usr/lib/jvm/java-6-sun/lib\n```\n\n+ ssh \n\n```\nsudo apt-get install ssh openssh-server\n```\n\nhadoop\n\n```\nsu - hadoop\n```\n\n rsa  key\n\n```\nssh-keygen -t rsa -P \"\"\n```\n\n~/.ssh/id_rsa.pubauthorized_keys,\n\n```\ncd ~/.ssh\ncat id_rsa.pub >> authorized_keys\n```\n\n+ [hadoop](http://www.apache.org/dyn/closer.cgi/hadoop/common/),\n\n```\nsudo cp hadoop-0.20.203.0rc1.tar.gz /usr/local/\n```\n\nhadoop-0.20.203.tar.gz\n\n```\ncd /usr/local\nsudo tar -zxf hadoop-0.20.203.0rc1.tar.gz\n```\n\nhadoop;\n\n```\nsudo mv hadoop-0.20.203.0 hadoop\n```\n\nhadoophadoop\n\n```\nsudo chown -R hadoop:hadoop hadoop\n```\n\nhadoop/conf/hadoop-env.sh;\n\n```\nsudo vi hadoop/conf/hadoop-env.sh\n```\n\nconf/hadoop-env.sh,jdk;\n\n```\nexport JAVA_HOME=/usr/lib/jvm/java-6-sun/\nexport HADOOP_HOME=/usr/local/hadoop\nexport PATH=$PATH:/usr/local/hadoop/bin\n```\n\nsource hadoop-env.sh \n\nconf/core-site.xml;\n\n```\n<?xml version=\"1.0\"?>\n<?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?>\n<!-- Put site-specific property overrides in this file. -->\n<configuration>\n    <property>  \n        <name>fs.default.name</name>  \n        <value>hdfs://localhost:9000</value>   \n    </property>  \n</configuration>\n```\n\nconf/mapred-site.xml;\n\n```\n<?xml version=\"1.0\"?>\n<?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?>\n<!-- Put site-specific property overrides in this file. -->\n<configuration>  \n     <property>   \n           <name>mapred.job.tracker</name>  \n            <value>localhost:9001</value>   \n      </property>  \n</configuration>\n```\n\nconf/hdfs-site.xml;\n\n```\n<configuration>\n    <property>\n        <name>dfs.name.dir</name>\n        <value>/usr/local/hadoop/datalog1,/usr/local/hadoop/datalog2</value>\n    </property>\n    <property>\n        <name>dfs.data.dir</name>\n        <value>/usr/local/hadoop/data1,/usr/local/hadoop/data2</value>\n    </property>\n    <property>\n        <name>dfs.replication</name>\n        <value>2</value>\n    </property>\n</configuration>\n```\n\n+ hadoop,\n\n```\ncd /usr/local/hadoop/\nbin/hadoop namenode -format // hadoophdfs\nbin/start-all.sh //\n```\n\nhadoop\n\n```\nhadoop@hp:/usr/local/hadoop/bin$ sudo jps\n11822 DataNode\n12461 Jps\n11581 NameNode\n12157 JobTracker\n12064 SecondaryNameNode\n12377 TaskTracker\n```\n\nhadoop\n[http://localhost:50030/](http://localhost:50030/),\n{% img /images/2013/09/hadoop.png %}\nwordcounw\n\n,hdfs\n\n```\nhadoop@hp:/usr/local/hadoop$ mkdir input //\nhadoop@hp:/usr/local/hadoop$ cp conf/* input\nhadoop@hp:/usr/local/hadoop$ bin/hadoop fs -put input/ input\n```\n\nwordcount,inputoutput,\n\n```\nbin/hadoop jar hadoop-examples-0.20.203.0.jar wordcount input output\n```\n\n\n\n```\n13/09/22 17:59:40 INFO input.FileInputFormat: Total input paths to process : 15\n13/09/22 17:59:41 INFO mapred.JobClient: Running job: job_201309221738_0006\n13/09/22 17:59:42 INFO mapred.JobClient:  map 0% reduce 0%\n13/09/22 17:59:58 INFO mapred.JobClient:  map 13% reduce 0%\n13/09/22 18:00:07 INFO mapred.JobClient:  map 26% reduce 0%\n13/09/22 18:00:16 INFO mapred.JobClient:  map 40% reduce 8%\n13/09/22 18:00:22 INFO mapred.JobClient:  map 53% reduce 13%\n13/09/22 18:00:28 INFO mapred.JobClient:  map 66% reduce 13%\n13/09/22 18:00:31 INFO mapred.JobClient:  map 66% reduce 17%\n13/09/22 18:00:34 INFO mapred.JobClient:  map 80% reduce 17%\n13/09/22 18:00:37 INFO mapred.JobClient:  map 80% reduce 22%\n13/09/22 18:00:40 INFO mapred.JobClient:  map 93% reduce 22%\n13/09/22 18:00:46 INFO mapred.JobClient:  map 100% reduce 26%\n13/09/22 18:00:55 INFO mapred.JobClient:  map 100% reduce 100%\n13/09/22 18:01:00 INFO mapred.JobClient: Job complete: job_201309221738_0006\n13/09/22 18:01:00 INFO mapred.JobClient: Counters: 25\n13/09/22 18:01:00 INFO mapred.JobClient:   Job Counters \n```\n\n\n\n```\nhadoop@hp:/usr/local/hadoop$ bin/hadoop fs -cat output/*\n```\n\n\n\n```\nhadoop@hp:/usr/local/hadoop$ hadoop fs -cat output/*\n\"\". 4\n\"*\" 10\n\"alice,bob  10\n\"console\"   1\n\"hadoop.root.logger\".   1\n\"jks\".  4\n   79\n$HADOOP_BALANCER_OPTS\"   1\n$HADOOP_DATANODE_OPTS\"   1\n$HADOOP_HOME/conf/slaves 1\n$HADOOP_HOME/logs    1\n$HADOOP_JOBTRACKER_OPTS\" 1\n$HADOOP_NAMENODE_OPTS\"   1\n$HADOOP_SECONDARYNAMENODE_OPTS\"  1\n```\n\nhadoop\n\n```\nhadoop@hp:/usr/local/hadoop$ ./stop-all.sh \n```\n\nhadoop\n\n\n","slug":"2013-09-22-dan-ji-wan-hadoop","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui4b001bm1tjh0jpimcn","content":"<p>Amazon Web Service<a href=\"http://aws.amazon.com/\" target=\"_blank\" rel=\"noopener\">AWS</a> Hadoop .Tencent tencent TDW,Hadoop .hadoop </p>\n<ul>\n<li>hadoop;</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo addgroup hadoop</span><br><span class=\"line\">sudo adduser -ingroup hadoop hadoop</span><br></pre></td></tr></table></figure>\n<p>hadoop/etc/sudoers; root   ALL=(ALL:ALL)   ALL</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop  ALL=(ALL:ALL) ALL</span><br></pre></td></tr></table></figure>\n<ul>\n<li>UbuntuJDK </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-add-repository ppa:flexiondotorg/java</span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get install sun-java6-jre sun-java6-jdk sun-java6-plugin</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">W: GPG http://ppa.launchpad.net precise Release:  NO_PUBKEY 2EA8F35793D8809A</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 2EA8F35793D8809A</span><br></pre></td></tr></table></figure>\n<p> sudo vi /etc/environment<br></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JAVA_HOME=/usr/lib/jvm/java-6-sun</span><br><span class=\"line\">CLASSPATH=.:/usr/lib/jvm/java-6-sun/lib</span><br></pre></td></tr></table></figure>\n<ul>\n<li>ssh </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install ssh openssh-server</span><br></pre></td></tr></table></figure>\n<p>hadoop</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">su - hadoop</span><br></pre></td></tr></table></figure>\n<p> rsa  key</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -P &quot;&quot;</span><br></pre></td></tr></table></figure>\n<p>~/.ssh/id_rsa.pubauthorized_keys,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~/.ssh</span><br><span class=\"line\">cat id_rsa.pub &gt;&gt; authorized_keys</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"http://www.apache.org/dyn/closer.cgi/hadoop/common/\" target=\"_blank\" rel=\"noopener\">hadoop</a>,</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo cp hadoop-0.20.203.0rc1.tar.gz /usr/local/</span><br></pre></td></tr></table></figure>\n<p>hadoop-0.20.203.tar.gz</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local</span><br><span class=\"line\">sudo tar -zxf hadoop-0.20.203.0rc1.tar.gz</span><br></pre></td></tr></table></figure>\n<p>hadoop;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mv hadoop-0.20.203.0 hadoop</span><br></pre></td></tr></table></figure>\n<p>hadoophadoop</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chown -R hadoop:hadoop hadoop</span><br></pre></td></tr></table></figure>\n<p>hadoop/conf/hadoop-env.sh;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vi hadoop/conf/hadoop-env.sh</span><br></pre></td></tr></table></figure>\n<p>conf/hadoop-env.sh,jdk;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export JAVA_HOME=/usr/lib/jvm/java-6-sun/</span><br><span class=\"line\">export HADOOP_HOME=/usr/local/hadoop</span><br><span class=\"line\">export PATH=$PATH:/usr/local/hadoop/bin</span><br></pre></td></tr></table></figure>\n<p>source hadoop-env.sh </p>\n<p>conf/core-site.xml;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class=\"line\">&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;</span><br><span class=\"line\">&lt;!-- Put site-specific property overrides in this file. --&gt;</span><br><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">    &lt;property&gt;  </span><br><span class=\"line\">        &lt;name&gt;fs.default.name&lt;/name&gt;  </span><br><span class=\"line\">        &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;   </span><br><span class=\"line\">    &lt;/property&gt;  </span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>\n<p>conf/mapred-site.xml;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class=\"line\">&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;</span><br><span class=\"line\">&lt;!-- Put site-specific property overrides in this file. --&gt;</span><br><span class=\"line\">&lt;configuration&gt;  </span><br><span class=\"line\">     &lt;property&gt;   </span><br><span class=\"line\">           &lt;name&gt;mapred.job.tracker&lt;/name&gt;  </span><br><span class=\"line\">            &lt;value&gt;localhost:9001&lt;/value&gt;   </span><br><span class=\"line\">      &lt;/property&gt;  </span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>\n<p>conf/hdfs-site.xml;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">    &lt;property&gt;</span><br><span class=\"line\">        &lt;name&gt;dfs.name.dir&lt;/name&gt;</span><br><span class=\"line\">        &lt;value&gt;/usr/local/hadoop/datalog1,/usr/local/hadoop/datalog2&lt;/value&gt;</span><br><span class=\"line\">    &lt;/property&gt;</span><br><span class=\"line\">    &lt;property&gt;</span><br><span class=\"line\">        &lt;name&gt;dfs.data.dir&lt;/name&gt;</span><br><span class=\"line\">        &lt;value&gt;/usr/local/hadoop/data1,/usr/local/hadoop/data2&lt;/value&gt;</span><br><span class=\"line\">    &lt;/property&gt;</span><br><span class=\"line\">    &lt;property&gt;</span><br><span class=\"line\">        &lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class=\"line\">        &lt;value&gt;2&lt;/value&gt;</span><br><span class=\"line\">    &lt;/property&gt;</span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>hadoop,</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local/hadoop/</span><br><span class=\"line\">bin/hadoop namenode -format // hadoophdfs</span><br><span class=\"line\">bin/start-all.sh //</span><br></pre></td></tr></table></figure>\n<p>hadoop</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@hp:/usr/local/hadoop/bin$ sudo jps</span><br><span class=\"line\">11822 DataNode</span><br><span class=\"line\">12461 Jps</span><br><span class=\"line\">11581 NameNode</span><br><span class=\"line\">12157 JobTracker</span><br><span class=\"line\">12064 SecondaryNameNode</span><br><span class=\"line\">12377 TaskTracker</span><br></pre></td></tr></table></figure>\n<p>hadoop<br><a href=\"http://localhost:50030/\" target=\"_blank\" rel=\"noopener\">http://localhost:50030/</a>,<br><img src=\"/images/2013/09/hadoop.png\"><br>wordcounw</p>\n<p>,hdfs</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@hp:/usr/local/hadoop$ mkdir input //</span><br><span class=\"line\">hadoop@hp:/usr/local/hadoop$ cp conf/* input</span><br><span class=\"line\">hadoop@hp:/usr/local/hadoop$ bin/hadoop fs -put input/ input</span><br></pre></td></tr></table></figure>\n<p>wordcount,inputoutput,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/hadoop jar hadoop-examples-0.20.203.0.jar wordcount input output</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">13/09/22 17:59:40 INFO input.FileInputFormat: Total input paths to process : 15</span><br><span class=\"line\">13/09/22 17:59:41 INFO mapred.JobClient: Running job: job_201309221738_0006</span><br><span class=\"line\">13/09/22 17:59:42 INFO mapred.JobClient:  map 0% reduce 0%</span><br><span class=\"line\">13/09/22 17:59:58 INFO mapred.JobClient:  map 13% reduce 0%</span><br><span class=\"line\">13/09/22 18:00:07 INFO mapred.JobClient:  map 26% reduce 0%</span><br><span class=\"line\">13/09/22 18:00:16 INFO mapred.JobClient:  map 40% reduce 8%</span><br><span class=\"line\">13/09/22 18:00:22 INFO mapred.JobClient:  map 53% reduce 13%</span><br><span class=\"line\">13/09/22 18:00:28 INFO mapred.JobClient:  map 66% reduce 13%</span><br><span class=\"line\">13/09/22 18:00:31 INFO mapred.JobClient:  map 66% reduce 17%</span><br><span class=\"line\">13/09/22 18:00:34 INFO mapred.JobClient:  map 80% reduce 17%</span><br><span class=\"line\">13/09/22 18:00:37 INFO mapred.JobClient:  map 80% reduce 22%</span><br><span class=\"line\">13/09/22 18:00:40 INFO mapred.JobClient:  map 93% reduce 22%</span><br><span class=\"line\">13/09/22 18:00:46 INFO mapred.JobClient:  map 100% reduce 26%</span><br><span class=\"line\">13/09/22 18:00:55 INFO mapred.JobClient:  map 100% reduce 100%</span><br><span class=\"line\">13/09/22 18:01:00 INFO mapred.JobClient: Job complete: job_201309221738_0006</span><br><span class=\"line\">13/09/22 18:01:00 INFO mapred.JobClient: Counters: 25</span><br><span class=\"line\">13/09/22 18:01:00 INFO mapred.JobClient:   Job Counters</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@hp:/usr/local/hadoop$ bin/hadoop fs -cat output/*</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@hp:/usr/local/hadoop$ hadoop fs -cat output/*</span><br><span class=\"line\">&quot;&quot;. 4</span><br><span class=\"line\">&quot;*&quot; 10</span><br><span class=\"line\">&quot;alice,bob  10</span><br><span class=\"line\">&quot;console&quot;   1</span><br><span class=\"line\">&quot;hadoop.root.logger&quot;.   1</span><br><span class=\"line\">&quot;jks&quot;.  4</span><br><span class=\"line\">   79</span><br><span class=\"line\">$HADOOP_BALANCER_OPTS&quot;   1</span><br><span class=\"line\">$HADOOP_DATANODE_OPTS&quot;   1</span><br><span class=\"line\">$HADOOP_HOME/conf/slaves 1</span><br><span class=\"line\">$HADOOP_HOME/logs    1</span><br><span class=\"line\">$HADOOP_JOBTRACKER_OPTS&quot; 1</span><br><span class=\"line\">$HADOOP_NAMENODE_OPTS&quot;   1</span><br><span class=\"line\">$HADOOP_SECONDARYNAMENODE_OPTS&quot;  1</span><br></pre></td></tr></table></figure>\n<p>hadoop</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@hp:/usr/local/hadoop$ ./stop-all.sh</span><br></pre></td></tr></table></figure>\n<p>hadoop</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Amazon Web Service<a href=\"http://aws.amazon.com/\" target=\"_blank\" rel=\"noopener\">AWS</a> Hadoop .Tencent tencent TDW,Hadoop .hadoop </p>\n<ul>\n<li>hadoop;</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo addgroup hadoop</span><br><span class=\"line\">sudo adduser -ingroup hadoop hadoop</span><br></pre></td></tr></table></figure>\n<p>hadoop/etc/sudoers; root   ALL=(ALL:ALL)   ALL</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop  ALL=(ALL:ALL) ALL</span><br></pre></td></tr></table></figure>\n<ul>\n<li>UbuntuJDK </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-add-repository ppa:flexiondotorg/java</span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get install sun-java6-jre sun-java6-jdk sun-java6-plugin</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">W: GPG http://ppa.launchpad.net precise Release:  NO_PUBKEY 2EA8F35793D8809A</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 2EA8F35793D8809A</span><br></pre></td></tr></table></figure>\n<p> sudo vi /etc/environment<br></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JAVA_HOME=/usr/lib/jvm/java-6-sun</span><br><span class=\"line\">CLASSPATH=.:/usr/lib/jvm/java-6-sun/lib</span><br></pre></td></tr></table></figure>\n<ul>\n<li>ssh </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install ssh openssh-server</span><br></pre></td></tr></table></figure>\n<p>hadoop</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">su - hadoop</span><br></pre></td></tr></table></figure>\n<p> rsa  key</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -P &quot;&quot;</span><br></pre></td></tr></table></figure>\n<p>~/.ssh/id_rsa.pubauthorized_keys,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~/.ssh</span><br><span class=\"line\">cat id_rsa.pub &gt;&gt; authorized_keys</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"http://www.apache.org/dyn/closer.cgi/hadoop/common/\" target=\"_blank\" rel=\"noopener\">hadoop</a>,</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo cp hadoop-0.20.203.0rc1.tar.gz /usr/local/</span><br></pre></td></tr></table></figure>\n<p>hadoop-0.20.203.tar.gz</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local</span><br><span class=\"line\">sudo tar -zxf hadoop-0.20.203.0rc1.tar.gz</span><br></pre></td></tr></table></figure>\n<p>hadoop;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mv hadoop-0.20.203.0 hadoop</span><br></pre></td></tr></table></figure>\n<p>hadoophadoop</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chown -R hadoop:hadoop hadoop</span><br></pre></td></tr></table></figure>\n<p>hadoop/conf/hadoop-env.sh;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vi hadoop/conf/hadoop-env.sh</span><br></pre></td></tr></table></figure>\n<p>conf/hadoop-env.sh,jdk;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export JAVA_HOME=/usr/lib/jvm/java-6-sun/</span><br><span class=\"line\">export HADOOP_HOME=/usr/local/hadoop</span><br><span class=\"line\">export PATH=$PATH:/usr/local/hadoop/bin</span><br></pre></td></tr></table></figure>\n<p>source hadoop-env.sh </p>\n<p>conf/core-site.xml;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class=\"line\">&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;</span><br><span class=\"line\">&lt;!-- Put site-specific property overrides in this file. --&gt;</span><br><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">    &lt;property&gt;  </span><br><span class=\"line\">        &lt;name&gt;fs.default.name&lt;/name&gt;  </span><br><span class=\"line\">        &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;   </span><br><span class=\"line\">    &lt;/property&gt;  </span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>\n<p>conf/mapred-site.xml;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class=\"line\">&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;</span><br><span class=\"line\">&lt;!-- Put site-specific property overrides in this file. --&gt;</span><br><span class=\"line\">&lt;configuration&gt;  </span><br><span class=\"line\">     &lt;property&gt;   </span><br><span class=\"line\">           &lt;name&gt;mapred.job.tracker&lt;/name&gt;  </span><br><span class=\"line\">            &lt;value&gt;localhost:9001&lt;/value&gt;   </span><br><span class=\"line\">      &lt;/property&gt;  </span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>\n<p>conf/hdfs-site.xml;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">    &lt;property&gt;</span><br><span class=\"line\">        &lt;name&gt;dfs.name.dir&lt;/name&gt;</span><br><span class=\"line\">        &lt;value&gt;/usr/local/hadoop/datalog1,/usr/local/hadoop/datalog2&lt;/value&gt;</span><br><span class=\"line\">    &lt;/property&gt;</span><br><span class=\"line\">    &lt;property&gt;</span><br><span class=\"line\">        &lt;name&gt;dfs.data.dir&lt;/name&gt;</span><br><span class=\"line\">        &lt;value&gt;/usr/local/hadoop/data1,/usr/local/hadoop/data2&lt;/value&gt;</span><br><span class=\"line\">    &lt;/property&gt;</span><br><span class=\"line\">    &lt;property&gt;</span><br><span class=\"line\">        &lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class=\"line\">        &lt;value&gt;2&lt;/value&gt;</span><br><span class=\"line\">    &lt;/property&gt;</span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>hadoop,</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local/hadoop/</span><br><span class=\"line\">bin/hadoop namenode -format // hadoophdfs</span><br><span class=\"line\">bin/start-all.sh //</span><br></pre></td></tr></table></figure>\n<p>hadoop</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@hp:/usr/local/hadoop/bin$ sudo jps</span><br><span class=\"line\">11822 DataNode</span><br><span class=\"line\">12461 Jps</span><br><span class=\"line\">11581 NameNode</span><br><span class=\"line\">12157 JobTracker</span><br><span class=\"line\">12064 SecondaryNameNode</span><br><span class=\"line\">12377 TaskTracker</span><br></pre></td></tr></table></figure>\n<p>hadoop<br><a href=\"http://localhost:50030/\" target=\"_blank\" rel=\"noopener\">http://localhost:50030/</a>,<br><img src=\"/images/2013/09/hadoop.png\"><br>wordcounw</p>\n<p>,hdfs</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@hp:/usr/local/hadoop$ mkdir input //</span><br><span class=\"line\">hadoop@hp:/usr/local/hadoop$ cp conf/* input</span><br><span class=\"line\">hadoop@hp:/usr/local/hadoop$ bin/hadoop fs -put input/ input</span><br></pre></td></tr></table></figure>\n<p>wordcount,inputoutput,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/hadoop jar hadoop-examples-0.20.203.0.jar wordcount input output</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">13/09/22 17:59:40 INFO input.FileInputFormat: Total input paths to process : 15</span><br><span class=\"line\">13/09/22 17:59:41 INFO mapred.JobClient: Running job: job_201309221738_0006</span><br><span class=\"line\">13/09/22 17:59:42 INFO mapred.JobClient:  map 0% reduce 0%</span><br><span class=\"line\">13/09/22 17:59:58 INFO mapred.JobClient:  map 13% reduce 0%</span><br><span class=\"line\">13/09/22 18:00:07 INFO mapred.JobClient:  map 26% reduce 0%</span><br><span class=\"line\">13/09/22 18:00:16 INFO mapred.JobClient:  map 40% reduce 8%</span><br><span class=\"line\">13/09/22 18:00:22 INFO mapred.JobClient:  map 53% reduce 13%</span><br><span class=\"line\">13/09/22 18:00:28 INFO mapred.JobClient:  map 66% reduce 13%</span><br><span class=\"line\">13/09/22 18:00:31 INFO mapred.JobClient:  map 66% reduce 17%</span><br><span class=\"line\">13/09/22 18:00:34 INFO mapred.JobClient:  map 80% reduce 17%</span><br><span class=\"line\">13/09/22 18:00:37 INFO mapred.JobClient:  map 80% reduce 22%</span><br><span class=\"line\">13/09/22 18:00:40 INFO mapred.JobClient:  map 93% reduce 22%</span><br><span class=\"line\">13/09/22 18:00:46 INFO mapred.JobClient:  map 100% reduce 26%</span><br><span class=\"line\">13/09/22 18:00:55 INFO mapred.JobClient:  map 100% reduce 100%</span><br><span class=\"line\">13/09/22 18:01:00 INFO mapred.JobClient: Job complete: job_201309221738_0006</span><br><span class=\"line\">13/09/22 18:01:00 INFO mapred.JobClient: Counters: 25</span><br><span class=\"line\">13/09/22 18:01:00 INFO mapred.JobClient:   Job Counters</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@hp:/usr/local/hadoop$ bin/hadoop fs -cat output/*</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@hp:/usr/local/hadoop$ hadoop fs -cat output/*</span><br><span class=\"line\">&quot;&quot;. 4</span><br><span class=\"line\">&quot;*&quot; 10</span><br><span class=\"line\">&quot;alice,bob  10</span><br><span class=\"line\">&quot;console&quot;   1</span><br><span class=\"line\">&quot;hadoop.root.logger&quot;.   1</span><br><span class=\"line\">&quot;jks&quot;.  4</span><br><span class=\"line\">   79</span><br><span class=\"line\">$HADOOP_BALANCER_OPTS&quot;   1</span><br><span class=\"line\">$HADOOP_DATANODE_OPTS&quot;   1</span><br><span class=\"line\">$HADOOP_HOME/conf/slaves 1</span><br><span class=\"line\">$HADOOP_HOME/logs    1</span><br><span class=\"line\">$HADOOP_JOBTRACKER_OPTS&quot; 1</span><br><span class=\"line\">$HADOOP_NAMENODE_OPTS&quot;   1</span><br><span class=\"line\">$HADOOP_SECONDARYNAMENODE_OPTS&quot;  1</span><br></pre></td></tr></table></figure>\n<p>hadoop</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@hp:/usr/local/hadoop$ ./stop-all.sh</span><br></pre></td></tr></table></figure>\n<p>hadoop</p>\n"},{"layout":"post","title":"Bash Shell ","date":"2013-09-28T14:52:00.000Z","comments":1,"_content":"\n*  shell \n\n```\n#\ncurrent_pid=$$\n#\nps -aux|grep \"/usr/sbin/httpd\" | grep -v \"grep\"| awk '{print $2}' >/tmp/${current_pid}.txt\n#commands start\nfor pid in `cat /tmp/${current_pid}.txt`\ndo\n{\n    echo \"kill -9 $pid\"\n    kill -9 $pid\n}\ndone \nrm -f /tmp/${current_pid}.txt \n```\n\n* shell \n\n```\nfunc()\n{\n    echo $a $b $c\n    echo $1 $2 $3\n}\na=\"aaa\"\nb=\"bbb\"\nc=\"ccc\"\nfunc $a e f\n```\n\n funcname $para1 $para2 ...,$1,$2,$3\n\n\n```\naaa bbb ccc\naaa e f \n```\n\n* \ntraptrap name signal(s)\n,namenamenamesignal\n  (trap \"\" 23) \n\n```\ntrap 'exitprocess' 2#exitprocess function\nLOOP=0\nfunction exitprocess()\n{\n    echo \"You Just hit <CTRL-C>, at number $LOOP\"\n    echo \"I will now exit\"\n    exit 1\n}\nwhile : #  \ndo\n    LOOP=$LOOP+1\n    echo $LOOP\n    sleep 1\ndone \n```\n\n2000 ~ 3000 \n\n```\ncat data.txt | tail -n +2000 | head -n 1000 > result.txt\n```\n\n\n\n```\nfind /data -name hello.cpp \n```\n\n","source":"_posts/2013-09-28-shellji-qiao-xiao-jie.markdown","raw":"---\nlayout: post\ntitle: \"Bash Shell \"\ndate: 2013-09-28 22:52\ncomments: true\ncategories: Program\n---\n\n*  shell \n\n```\n#\ncurrent_pid=$$\n#\nps -aux|grep \"/usr/sbin/httpd\" | grep -v \"grep\"| awk '{print $2}' >/tmp/${current_pid}.txt\n#commands start\nfor pid in `cat /tmp/${current_pid}.txt`\ndo\n{\n    echo \"kill -9 $pid\"\n    kill -9 $pid\n}\ndone \nrm -f /tmp/${current_pid}.txt \n```\n\n* shell \n\n```\nfunc()\n{\n    echo $a $b $c\n    echo $1 $2 $3\n}\na=\"aaa\"\nb=\"bbb\"\nc=\"ccc\"\nfunc $a e f\n```\n\n funcname $para1 $para2 ...,$1,$2,$3\n\n\n```\naaa bbb ccc\naaa e f \n```\n\n* \ntraptrap name signal(s)\n,namenamenamesignal\n  (trap \"\" 23) \n\n```\ntrap 'exitprocess' 2#exitprocess function\nLOOP=0\nfunction exitprocess()\n{\n    echo \"You Just hit <CTRL-C>, at number $LOOP\"\n    echo \"I will now exit\"\n    exit 1\n}\nwhile : #  \ndo\n    LOOP=$LOOP+1\n    echo $LOOP\n    sleep 1\ndone \n```\n\n2000 ~ 3000 \n\n```\ncat data.txt | tail -n +2000 | head -n 1000 > result.txt\n```\n\n\n\n```\nfind /data -name hello.cpp \n```\n\n","slug":"2013-09-28-shellji-qiao-xiao-jie","published":1,"updated":"2018-07-01T05:54:06.000Z","photos":[],"link":"","_id":"cjv8xui4d001dm1tjre6ee0tw","content":"<ul>\n<li> shell </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#</span><br><span class=\"line\">current_pid=$$</span><br><span class=\"line\">#</span><br><span class=\"line\">ps -aux|grep &quot;/usr/sbin/httpd&quot; | grep -v &quot;grep&quot;| awk &apos;&#123;print $2&#125;&apos; &gt;/tmp/$&#123;current_pid&#125;.txt</span><br><span class=\"line\">#commands start</span><br><span class=\"line\">for pid in `cat /tmp/$&#123;current_pid&#125;.txt`</span><br><span class=\"line\">do</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    echo &quot;kill -9 $pid&quot;</span><br><span class=\"line\">    kill -9 $pid</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">done </span><br><span class=\"line\">rm -f /tmp/$&#123;current_pid&#125;.txt</span><br></pre></td></tr></table></figure>\n<ul>\n<li>shell </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">func()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    echo $a $b $c</span><br><span class=\"line\">    echo $1 $2 $3</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">a=&quot;aaa&quot;</span><br><span class=\"line\">b=&quot;bbb&quot;</span><br><span class=\"line\">c=&quot;ccc&quot;</span><br><span class=\"line\">func $a e f</span><br></pre></td></tr></table></figure>\n<p> funcname $para1 $para2 ,$1,$2,$3<br></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">aaa bbb ccc</span><br><span class=\"line\">aaa e f</span><br></pre></td></tr></table></figure>\n<ul>\n<li><br>traptrap name signal(s)<br>,namenamenamesignal<br>  (trap  23) </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">trap &apos;exitprocess&apos; 2#exitprocess function</span><br><span class=\"line\">LOOP=0</span><br><span class=\"line\">function exitprocess()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    echo &quot;You Just hit &lt;CTRL-C&gt;, at number $LOOP&quot;</span><br><span class=\"line\">    echo &quot;I will now exit&quot;</span><br><span class=\"line\">    exit 1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">while : #  </span><br><span class=\"line\">do</span><br><span class=\"line\">    LOOP=$LOOP+1</span><br><span class=\"line\">    echo $LOOP</span><br><span class=\"line\">    sleep 1</span><br><span class=\"line\">done</span><br></pre></td></tr></table></figure>\n<p>2000 ~ 3000 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat data.txt | tail -n +2000 | head -n 1000 &gt; result.txt</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find /data -name hello.cpp</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li> shell </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#</span><br><span class=\"line\">current_pid=$$</span><br><span class=\"line\">#</span><br><span class=\"line\">ps -aux|grep &quot;/usr/sbin/httpd&quot; | grep -v &quot;grep&quot;| awk &apos;&#123;print $2&#125;&apos; &gt;/tmp/$&#123;current_pid&#125;.txt</span><br><span class=\"line\">#commands start</span><br><span class=\"line\">for pid in `cat /tmp/$&#123;current_pid&#125;.txt`</span><br><span class=\"line\">do</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    echo &quot;kill -9 $pid&quot;</span><br><span class=\"line\">    kill -9 $pid</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">done </span><br><span class=\"line\">rm -f /tmp/$&#123;current_pid&#125;.txt</span><br></pre></td></tr></table></figure>\n<ul>\n<li>shell </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">func()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    echo $a $b $c</span><br><span class=\"line\">    echo $1 $2 $3</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">a=&quot;aaa&quot;</span><br><span class=\"line\">b=&quot;bbb&quot;</span><br><span class=\"line\">c=&quot;ccc&quot;</span><br><span class=\"line\">func $a e f</span><br></pre></td></tr></table></figure>\n<p> funcname $para1 $para2 ,$1,$2,$3<br></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">aaa bbb ccc</span><br><span class=\"line\">aaa e f</span><br></pre></td></tr></table></figure>\n<ul>\n<li><br>traptrap name signal(s)<br>,namenamenamesignal<br>  (trap  23) </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">trap &apos;exitprocess&apos; 2#exitprocess function</span><br><span class=\"line\">LOOP=0</span><br><span class=\"line\">function exitprocess()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    echo &quot;You Just hit &lt;CTRL-C&gt;, at number $LOOP&quot;</span><br><span class=\"line\">    echo &quot;I will now exit&quot;</span><br><span class=\"line\">    exit 1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">while : #  </span><br><span class=\"line\">do</span><br><span class=\"line\">    LOOP=$LOOP+1</span><br><span class=\"line\">    echo $LOOP</span><br><span class=\"line\">    sleep 1</span><br><span class=\"line\">done</span><br></pre></td></tr></table></figure>\n<p>2000 ~ 3000 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat data.txt | tail -n +2000 | head -n 1000 &gt; result.txt</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find /data -name hello.cpp</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"ZeroRPC-ZMQRPC","date":"2013-09-29T12:56:00.000Z","comments":1,"_content":"[dotCloud](https://www.dotcloud.com/) ,Amazon,Google..\n\n**dotCloud**[ZeroRpc](https://github.com/dotcloud/zerorpc-python),dotcloudmanual \n>ZeroRPC is a modern communication layer for distributed systems built on top of ZeroMQ,\n\npython ZeroMQRPC LevelDBRPCpython[] (https://github.com/dotcloud/zerorpc-python)\n\nGithub,ZeroRpcCLi .\n\nzerorpc\n\n```\nsudo pip install zerorpc \n```\n\ndemo\nZeroRpc\n\n* [ZMQ](http://www.zeromq.org/) msgpack(http://msgpack.org/),ZeroMQ,MsgPack \n* ,,heartbeat, multiplexing, and events.\n* RPC:,\n\n[](http://zerorpc.dotcloud.com/)demo\n\n####server.py #####\n\n```python\nimport zerorpc\nclass HelloRPC(object):\n    def hello(self, name):\n        return \"Hello, %s\" % name\n\ns = zerorpc.Server(HelloRPC())\ns.bind(\"tcp://0.0.0.0:4242\")\ns.run()\n```\n\n####client.py\n\n```python\nimport zerorpc\n\nc = zerorpc.Client()\nc.connect(\"tcp://127.0.0.1:4242\")\nprint c.hello(\"RPC\")\n```\nclient\n\n```python\nzerorpc tcp://127.0.0.1:4242 hello RPC\n```\n\n\n\n\n####server.py\n\n```python\nimport zerorpc\n\nclass StreamingRPC(object):\n    @zerorpc.stream\n    def streaming_range(self, fr, to, step):\n        return xrange(fr, to, step)\n\ns = zerorpc.Server(StreamingRPC())\ns.bind(\"tcp://0.0.0.0:4242\")\ns.run()\n```\n\n####client.py\n\n```python\nimport zerorpc\n\nc = zerorpc.Client()\nc.connect(\"tcp://127.0.0.1:4242\")\n\nfor item in c.streaming_range(10, 20, 2):\n    print item\n```\n\nclient,--json json\n\n```\nzerorpc tcp://127.0.0.1:4242 streaming_range 10 20 2 --json\n```\n\nHappy Hacking\n\n\n","source":"_posts/2013-09-29-zerorpcshi-ge-hao-dong-xi.markdown","raw":"---\nlayout: post\ntitle: \"ZeroRPC-ZMQRPC\"\ndate: 2013-09-29 20:56\ncomments: true\ncategories: NetWork\n---\n[dotCloud](https://www.dotcloud.com/) ,Amazon,Google..\n\n**dotCloud**[ZeroRpc](https://github.com/dotcloud/zerorpc-python),dotcloudmanual \n>ZeroRPC is a modern communication layer for distributed systems built on top of ZeroMQ,\n\npython ZeroMQRPC LevelDBRPCpython[] (https://github.com/dotcloud/zerorpc-python)\n\nGithub,ZeroRpcCLi .\n\nzerorpc\n\n```\nsudo pip install zerorpc \n```\n\ndemo\nZeroRpc\n\n* [ZMQ](http://www.zeromq.org/) msgpack(http://msgpack.org/),ZeroMQ,MsgPack \n* ,,heartbeat, multiplexing, and events.\n* RPC:,\n\n[](http://zerorpc.dotcloud.com/)demo\n\n####server.py #####\n\n```python\nimport zerorpc\nclass HelloRPC(object):\n    def hello(self, name):\n        return \"Hello, %s\" % name\n\ns = zerorpc.Server(HelloRPC())\ns.bind(\"tcp://0.0.0.0:4242\")\ns.run()\n```\n\n####client.py\n\n```python\nimport zerorpc\n\nc = zerorpc.Client()\nc.connect(\"tcp://127.0.0.1:4242\")\nprint c.hello(\"RPC\")\n```\nclient\n\n```python\nzerorpc tcp://127.0.0.1:4242 hello RPC\n```\n\n\n\n\n####server.py\n\n```python\nimport zerorpc\n\nclass StreamingRPC(object):\n    @zerorpc.stream\n    def streaming_range(self, fr, to, step):\n        return xrange(fr, to, step)\n\ns = zerorpc.Server(StreamingRPC())\ns.bind(\"tcp://0.0.0.0:4242\")\ns.run()\n```\n\n####client.py\n\n```python\nimport zerorpc\n\nc = zerorpc.Client()\nc.connect(\"tcp://127.0.0.1:4242\")\n\nfor item in c.streaming_range(10, 20, 2):\n    print item\n```\n\nclient,--json json\n\n```\nzerorpc tcp://127.0.0.1:4242 streaming_range 10 20 2 --json\n```\n\nHappy Hacking\n\n\n","slug":"2013-09-29-zerorpcshi-ge-hao-dong-xi","published":1,"updated":"2018-07-01T05:54:14.000Z","photos":[],"link":"","_id":"cjv8xui4f001gm1tjl1tndacc","content":"<p><a href=\"https://www.dotcloud.com/\" target=\"_blank\" rel=\"noopener\">dotCloud</a> ,Amazon,Google..</p>\n<p><strong>dotCloud</strong><a href=\"https://github.com/dotcloud/zerorpc-python\" target=\"_blank\" rel=\"noopener\">ZeroRpc</a>,dotcloudmanual </p>\n<blockquote>\n<p>ZeroRPC is a modern communication layer for distributed systems built on top of ZeroMQ,</p>\n</blockquote>\n<p>python ZeroMQRPC LevelDBRPCpython[] (<a href=\"https://github.com/dotcloud/zerorpc-python\" target=\"_blank\" rel=\"noopener\">https://github.com/dotcloud/zerorpc-python</a>)</p>\n<p>Github,ZeroRpcCLi .</p>\n<p>zerorpc</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo pip install zerorpc</span><br></pre></td></tr></table></figure>\n<p>demo<br>ZeroRpc</p>\n<ul>\n<li><a href=\"http://www.zeromq.org/\" target=\"_blank\" rel=\"noopener\">ZMQ</a> msgpack(<a href=\"http://msgpack.org/),ZeroMQ,MsgPack\" target=\"_blank\" rel=\"noopener\">http://msgpack.org/),ZeroMQ,MsgPack</a> </li>\n<li>,,heartbeat, multiplexing, and events.</li>\n<li>RPC:,</li>\n</ul>\n<p><a href=\"http://zerorpc.dotcloud.com/\" target=\"_blank\" rel=\"noopener\"></a>demo</p>\n<p>####server.py #####</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> zerorpc</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloRPC</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(self, name)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"Hello, %s\"</span> % name</span><br><span class=\"line\"></span><br><span class=\"line\">s = zerorpc.Server(HelloRPC())</span><br><span class=\"line\">s.bind(<span class=\"string\">\"tcp://0.0.0.0:4242\"</span>)</span><br><span class=\"line\">s.run()</span><br></pre></td></tr></table></figure>\n<p>####client.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> zerorpc</span><br><span class=\"line\"></span><br><span class=\"line\">c = zerorpc.Client()</span><br><span class=\"line\">c.connect(<span class=\"string\">\"tcp://127.0.0.1:4242\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">print</span> c.hello(<span class=\"string\">\"RPC\"</span>)</span><br></pre></td></tr></table></figure>\n<p>client</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zerorpc tcp://<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">4242</span> hello RPC</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<p>####server.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> zerorpc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StreamingRPC</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">    @zerorpc.stream</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">streaming_range</span><span class=\"params\">(self, fr, to, step)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> xrange(fr, to, step)</span><br><span class=\"line\"></span><br><span class=\"line\">s = zerorpc.Server(StreamingRPC())</span><br><span class=\"line\">s.bind(<span class=\"string\">\"tcp://0.0.0.0:4242\"</span>)</span><br><span class=\"line\">s.run()</span><br></pre></td></tr></table></figure>\n<p>####client.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> zerorpc</span><br><span class=\"line\"></span><br><span class=\"line\">c = zerorpc.Client()</span><br><span class=\"line\">c.connect(<span class=\"string\">\"tcp://127.0.0.1:4242\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> c.streaming_range(<span class=\"number\">10</span>, <span class=\"number\">20</span>, <span class=\"number\">2</span>):</span><br><span class=\"line\">    <span class=\"keyword\">print</span> item</span><br></pre></td></tr></table></figure>\n<p>client,json json</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zerorpc tcp://127.0.0.1:4242 streaming_range 10 20 2 --json</span><br></pre></td></tr></table></figure>\n<p>Happy Hacking</p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://www.dotcloud.com/\" target=\"_blank\" rel=\"noopener\">dotCloud</a> ,Amazon,Google..</p>\n<p><strong>dotCloud</strong><a href=\"https://github.com/dotcloud/zerorpc-python\" target=\"_blank\" rel=\"noopener\">ZeroRpc</a>,dotcloudmanual </p>\n<blockquote>\n<p>ZeroRPC is a modern communication layer for distributed systems built on top of ZeroMQ,</p>\n</blockquote>\n<p>python ZeroMQRPC LevelDBRPCpython[] (<a href=\"https://github.com/dotcloud/zerorpc-python\" target=\"_blank\" rel=\"noopener\">https://github.com/dotcloud/zerorpc-python</a>)</p>\n<p>Github,ZeroRpcCLi .</p>\n<p>zerorpc</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo pip install zerorpc</span><br></pre></td></tr></table></figure>\n<p>demo<br>ZeroRpc</p>\n<ul>\n<li><a href=\"http://www.zeromq.org/\" target=\"_blank\" rel=\"noopener\">ZMQ</a> msgpack(<a href=\"http://msgpack.org/),ZeroMQ,MsgPack\" target=\"_blank\" rel=\"noopener\">http://msgpack.org/),ZeroMQ,MsgPack</a> </li>\n<li>,,heartbeat, multiplexing, and events.</li>\n<li>RPC:,</li>\n</ul>\n<p><a href=\"http://zerorpc.dotcloud.com/\" target=\"_blank\" rel=\"noopener\"></a>demo</p>\n<p>####server.py #####</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> zerorpc</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloRPC</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(self, name)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"Hello, %s\"</span> % name</span><br><span class=\"line\"></span><br><span class=\"line\">s = zerorpc.Server(HelloRPC())</span><br><span class=\"line\">s.bind(<span class=\"string\">\"tcp://0.0.0.0:4242\"</span>)</span><br><span class=\"line\">s.run()</span><br></pre></td></tr></table></figure>\n<p>####client.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> zerorpc</span><br><span class=\"line\"></span><br><span class=\"line\">c = zerorpc.Client()</span><br><span class=\"line\">c.connect(<span class=\"string\">\"tcp://127.0.0.1:4242\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">print</span> c.hello(<span class=\"string\">\"RPC\"</span>)</span><br></pre></td></tr></table></figure>\n<p>client</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zerorpc tcp://<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">4242</span> hello RPC</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<p>####server.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> zerorpc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StreamingRPC</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">    @zerorpc.stream</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">streaming_range</span><span class=\"params\">(self, fr, to, step)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> xrange(fr, to, step)</span><br><span class=\"line\"></span><br><span class=\"line\">s = zerorpc.Server(StreamingRPC())</span><br><span class=\"line\">s.bind(<span class=\"string\">\"tcp://0.0.0.0:4242\"</span>)</span><br><span class=\"line\">s.run()</span><br></pre></td></tr></table></figure>\n<p>####client.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> zerorpc</span><br><span class=\"line\"></span><br><span class=\"line\">c = zerorpc.Client()</span><br><span class=\"line\">c.connect(<span class=\"string\">\"tcp://127.0.0.1:4242\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> c.streaming_range(<span class=\"number\">10</span>, <span class=\"number\">20</span>, <span class=\"number\">2</span>):</span><br><span class=\"line\">    <span class=\"keyword\">print</span> item</span><br></pre></td></tr></table></figure>\n<p>client,json json</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zerorpc tcp://127.0.0.1:4242 streaming_range 10 20 2 --json</span><br></pre></td></tr></table></figure>\n<p>Happy Hacking</p>\n"},{"layout":"post","title":" MySql ","date":"2013-12-05T15:01:00.000Z","comments":1,"keywords":"","description":"mysql","_content":",, \n\n### \n\n```\ndesc Tbl;\nshow create table Tbl;\nshow full fields table Tbl;\n```\n\n\n\n```\ndesc Tbl/G;\n```\n\n2000,:(\n\n```\nSHOW TABLES LIKE '%tb%';\n```\n\n####\n\n```\nshow variables like '%character%';\n```\n\n####\n\n```\nmysql -h10.145.135.234 -uoss -pxxx dbName --default-character-set=gbk;\n```\n\n####\n\n```\nshow grants for 'xxx'@'xxx.xxx.xxx.xxx'\n```\n\n####\n\n```\ncreate table newtb select * from oldtable\n```\n\n####\n\n```\nalter tbA modify fieldA int(11) unsigned default '0'\n```\n\n####\n\n```\nalter table t2 drop column c;\n```\n\n####\n\n```\nalter table tbA drop primary key;\nAlter table tbA add primary key(dtStatDate,File2)\n```\n\n####,query\n\n```\nshow processlist;\nkill pid\n```\n\n####shell:\n\n```\nmysql -h10.112.111.111 -uxxx -pxxxx dbname -Ns -e\"\nselect distinct(iUin) from TableA where dtEventTime >= '2013-05-05' \n\" > records.txt;\n```\n\n#### \n\n```\nINSERT IGNORE into\nReplace Into \n```\n\n####load data infile\nmysqldload data infilefile\n\n```\nload data infile \"/home/Order txt\" into table Orders(Order_Number, Order_Date, Customer_ID) terminated by',';\n```\n\n#### mysqldump  \"Access denied for user when using LOCK TABLES\"\n\n```\nmysqldump -udbuser -p dbname --skip-lock-tables > dbname.sql\n```\n\n####\n\n```\nuse information_schema;\n#\nselect concat(round(sum(DATA_LENGTH/1024/1024),2),'MB') as data  from TABLES where table_schema='db1';\n```\n\n####\n\n```\nFROM_UNIXTIME(iLoginTime,'%Y-%m-%d')\nunix_timestamp('2013-12-03');\nDate_SUB(OrderDate,INTERVAL 2 DAY)\nDate_ADD(OrderDate,INTERVAL 2 DAY)\ntimestampdiff(week,2009-01-24,2009-06-20);\n```\n\n####no exist,having\n\n\n```\nSELECT distinct field1\nFROM table a\nwhere date <= 20130430 and\nnot exists (\n        SELECT field1 FROM table b where date>=20130501 and a.field1=b.field1\n)\n\n#,\nselect * from TbRole having min(CreateTime) between 'xxx' and 'xxx' \n```\n\n####mysql ,\n\n```\ncase condition1\nwhen result1 then 'xx'\nwhen result2 then 'xx'\nelse result1 then 'xx'\nend as 'xx'\n\nifnull(a,b) #aa,b\nif(condition,a,b)#condition a,b\n```\n\n####group by \ngroup by , \n\n```\nselect * From tableA group by (round(field1/100,0));\n```\n\n####\n\n```\nconcat('a','b')\n```\n\n####mysql'@'\nsql10\n\n```\nselect * from (\n    select dtStatDate,iRoleLevel,iUserNum,\n    if(@templevel=a.iRoleLevel,@tno:=@tno+1,@tno:=1) as tno,@templevel:=a.iRoleLevel \n    from tbl_a , (SELECT @tno:= 0,@templevel:=null) tbl_b\n    order by a.iRoleLevel asc,a.iUserNum desc\n) c\nwhere tno<=10 order by iRoleLevel asc\n```\n\n####\nunion all union,union, \n","source":"_posts/2013-12-05-zui-jin-yong-dao-de-mysql.markdown","raw":"---\nlayout: post\ntitle: \" MySql \"\ndate: 2013-12-05 23:01\ncomments: true\ncategories: DataBase\nkeywords: \ndescription: mysql\n---\n,, \n\n### \n\n```\ndesc Tbl;\nshow create table Tbl;\nshow full fields table Tbl;\n```\n\n\n\n```\ndesc Tbl/G;\n```\n\n2000,:(\n\n```\nSHOW TABLES LIKE '%tb%';\n```\n\n####\n\n```\nshow variables like '%character%';\n```\n\n####\n\n```\nmysql -h10.145.135.234 -uoss -pxxx dbName --default-character-set=gbk;\n```\n\n####\n\n```\nshow grants for 'xxx'@'xxx.xxx.xxx.xxx'\n```\n\n####\n\n```\ncreate table newtb select * from oldtable\n```\n\n####\n\n```\nalter tbA modify fieldA int(11) unsigned default '0'\n```\n\n####\n\n```\nalter table t2 drop column c;\n```\n\n####\n\n```\nalter table tbA drop primary key;\nAlter table tbA add primary key(dtStatDate,File2)\n```\n\n####,query\n\n```\nshow processlist;\nkill pid\n```\n\n####shell:\n\n```\nmysql -h10.112.111.111 -uxxx -pxxxx dbname -Ns -e\"\nselect distinct(iUin) from TableA where dtEventTime >= '2013-05-05' \n\" > records.txt;\n```\n\n#### \n\n```\nINSERT IGNORE into\nReplace Into \n```\n\n####load data infile\nmysqldload data infilefile\n\n```\nload data infile \"/home/Order txt\" into table Orders(Order_Number, Order_Date, Customer_ID) terminated by',';\n```\n\n#### mysqldump  \"Access denied for user when using LOCK TABLES\"\n\n```\nmysqldump -udbuser -p dbname --skip-lock-tables > dbname.sql\n```\n\n####\n\n```\nuse information_schema;\n#\nselect concat(round(sum(DATA_LENGTH/1024/1024),2),'MB') as data  from TABLES where table_schema='db1';\n```\n\n####\n\n```\nFROM_UNIXTIME(iLoginTime,'%Y-%m-%d')\nunix_timestamp('2013-12-03');\nDate_SUB(OrderDate,INTERVAL 2 DAY)\nDate_ADD(OrderDate,INTERVAL 2 DAY)\ntimestampdiff(week,2009-01-24,2009-06-20);\n```\n\n####no exist,having\n\n\n```\nSELECT distinct field1\nFROM table a\nwhere date <= 20130430 and\nnot exists (\n        SELECT field1 FROM table b where date>=20130501 and a.field1=b.field1\n)\n\n#,\nselect * from TbRole having min(CreateTime) between 'xxx' and 'xxx' \n```\n\n####mysql ,\n\n```\ncase condition1\nwhen result1 then 'xx'\nwhen result2 then 'xx'\nelse result1 then 'xx'\nend as 'xx'\n\nifnull(a,b) #aa,b\nif(condition,a,b)#condition a,b\n```\n\n####group by \ngroup by , \n\n```\nselect * From tableA group by (round(field1/100,0));\n```\n\n####\n\n```\nconcat('a','b')\n```\n\n####mysql'@'\nsql10\n\n```\nselect * from (\n    select dtStatDate,iRoleLevel,iUserNum,\n    if(@templevel=a.iRoleLevel,@tno:=@tno+1,@tno:=1) as tno,@templevel:=a.iRoleLevel \n    from tbl_a , (SELECT @tno:= 0,@templevel:=null) tbl_b\n    order by a.iRoleLevel asc,a.iUserNum desc\n) c\nwhere tno<=10 order by iRoleLevel asc\n```\n\n####\nunion all union,union, \n","slug":"2013-12-05-zui-jin-yong-dao-de-mysql","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui4h001im1tjvbkbdbhe","content":"<p>,, </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">desc Tbl;</span><br><span class=\"line\">show create table Tbl;</span><br><span class=\"line\">show full fields table Tbl;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">desc Tbl/G;</span><br></pre></td></tr></table></figure>\n<p>2000,:(</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHOW TABLES LIKE &apos;%tb%&apos;;</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show variables like &apos;%character%&apos;;</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -h10.145.135.234 -uoss -pxxx dbName --default-character-set=gbk;</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show grants for &apos;xxx&apos;@&apos;xxx.xxx.xxx.xxx&apos;</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create table newtb select * from oldtable</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter tbA modify fieldA int(11) unsigned default &apos;0&apos;</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table t2 drop column c;</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table tbA drop primary key;</span><br><span class=\"line\">Alter table tbA add primary key(dtStatDate,File2)</span><br></pre></td></tr></table></figure>\n<p>####,query</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show processlist;</span><br><span class=\"line\">kill pid</span><br></pre></td></tr></table></figure>\n<p>####shell:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -h10.112.111.111 -uxxx -pxxxx dbname -Ns -e&quot;</span><br><span class=\"line\">select distinct(iUin) from TableA where dtEventTime &gt;= &apos;2013-05-05&apos; </span><br><span class=\"line\">&quot; &gt; records.txt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INSERT IGNORE into</span><br><span class=\"line\">Replace Into </span><br></pre></td></tr></table></figure>\n<p>####load data infile<br>mysqldload data infilefile</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">load data infile &quot;/home/Order txt&quot; into table Orders(Order_Number, Order_Date, Customer_ID) terminated by&apos;,&apos;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"mysqldump--Access-denied-for-user-when-using-LOCK-TABLES\"><a href=\"#mysqldump--Access-denied-for-user-when-using-LOCK-TABLES\" class=\"headerlink\" title=\"mysqldump  Access denied for user when using LOCK TABLES\"></a>mysqldump  Access denied for user when using LOCK TABLES</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqldump -udbuser -p dbname --skip-lock-tables &gt; dbname.sql</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use information_schema;</span><br><span class=\"line\">#</span><br><span class=\"line\">select concat(round(sum(DATA_LENGTH/1024/1024),2),&apos;MB&apos;) as data  from TABLES where table_schema=&apos;db1&apos;;</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM_UNIXTIME(iLoginTime,&apos;%Y-%m-%d&apos;)</span><br><span class=\"line\">unix_timestamp(&apos;2013-12-03&apos;);</span><br><span class=\"line\">Date_SUB(OrderDate,INTERVAL 2 DAY)</span><br><span class=\"line\">Date_ADD(OrderDate,INTERVAL 2 DAY)</span><br><span class=\"line\">timestampdiff(week,2009-01-24,2009-06-20);</span><br></pre></td></tr></table></figure>\n<p>####no exist,having<br></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT distinct field1</span><br><span class=\"line\">FROM table a</span><br><span class=\"line\">where date &lt;= 20130430 and</span><br><span class=\"line\">not exists (</span><br><span class=\"line\">        SELECT field1 FROM table b where date&gt;=20130501 and a.field1=b.field1</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\">#,</span><br><span class=\"line\">select * from TbRole having min(CreateTime) between &apos;xxx&apos; and &apos;xxx&apos;</span><br></pre></td></tr></table></figure>\n<p>####mysql ,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">case condition1</span><br><span class=\"line\">when result1 then &apos;xx&apos;</span><br><span class=\"line\">when result2 then &apos;xx&apos;</span><br><span class=\"line\">else result1 then &apos;xx&apos;</span><br><span class=\"line\">end as &apos;xx&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">ifnull(a,b) #aa,b</span><br><span class=\"line\">if(condition,a,b)#condition a,b</span><br></pre></td></tr></table></figure>\n<p>####group by<br>group by , </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * From tableA group by (round(field1/100,0));</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">concat(&apos;a&apos;,&apos;b&apos;)</span><br></pre></td></tr></table></figure>\n<p>####mysql@<br>sql10</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from (</span><br><span class=\"line\">    select dtStatDate,iRoleLevel,iUserNum,</span><br><span class=\"line\">    if(@templevel=a.iRoleLevel,@tno:=@tno+1,@tno:=1) as tno,@templevel:=a.iRoleLevel </span><br><span class=\"line\">    from tbl_a , (SELECT @tno:= 0,@templevel:=null) tbl_b</span><br><span class=\"line\">    order by a.iRoleLevel asc,a.iUserNum desc</span><br><span class=\"line\">) c</span><br><span class=\"line\">where tno&lt;=10 order by iRoleLevel asc</span><br></pre></td></tr></table></figure>\n<p>####<br>union all union,union, </p>\n","site":{"data":{}},"excerpt":"","more":"<p>,, </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">desc Tbl;</span><br><span class=\"line\">show create table Tbl;</span><br><span class=\"line\">show full fields table Tbl;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">desc Tbl/G;</span><br></pre></td></tr></table></figure>\n<p>2000,:(</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHOW TABLES LIKE &apos;%tb%&apos;;</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show variables like &apos;%character%&apos;;</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -h10.145.135.234 -uoss -pxxx dbName --default-character-set=gbk;</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show grants for &apos;xxx&apos;@&apos;xxx.xxx.xxx.xxx&apos;</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create table newtb select * from oldtable</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter tbA modify fieldA int(11) unsigned default &apos;0&apos;</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table t2 drop column c;</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table tbA drop primary key;</span><br><span class=\"line\">Alter table tbA add primary key(dtStatDate,File2)</span><br></pre></td></tr></table></figure>\n<p>####,query</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show processlist;</span><br><span class=\"line\">kill pid</span><br></pre></td></tr></table></figure>\n<p>####shell:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -h10.112.111.111 -uxxx -pxxxx dbname -Ns -e&quot;</span><br><span class=\"line\">select distinct(iUin) from TableA where dtEventTime &gt;= &apos;2013-05-05&apos; </span><br><span class=\"line\">&quot; &gt; records.txt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INSERT IGNORE into</span><br><span class=\"line\">Replace Into </span><br></pre></td></tr></table></figure>\n<p>####load data infile<br>mysqldload data infilefile</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">load data infile &quot;/home/Order txt&quot; into table Orders(Order_Number, Order_Date, Customer_ID) terminated by&apos;,&apos;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"mysqldump--Access-denied-for-user-when-using-LOCK-TABLES\"><a href=\"#mysqldump--Access-denied-for-user-when-using-LOCK-TABLES\" class=\"headerlink\" title=\"mysqldump  Access denied for user when using LOCK TABLES\"></a>mysqldump  Access denied for user when using LOCK TABLES</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqldump -udbuser -p dbname --skip-lock-tables &gt; dbname.sql</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use information_schema;</span><br><span class=\"line\">#</span><br><span class=\"line\">select concat(round(sum(DATA_LENGTH/1024/1024),2),&apos;MB&apos;) as data  from TABLES where table_schema=&apos;db1&apos;;</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM_UNIXTIME(iLoginTime,&apos;%Y-%m-%d&apos;)</span><br><span class=\"line\">unix_timestamp(&apos;2013-12-03&apos;);</span><br><span class=\"line\">Date_SUB(OrderDate,INTERVAL 2 DAY)</span><br><span class=\"line\">Date_ADD(OrderDate,INTERVAL 2 DAY)</span><br><span class=\"line\">timestampdiff(week,2009-01-24,2009-06-20);</span><br></pre></td></tr></table></figure>\n<p>####no exist,having<br></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT distinct field1</span><br><span class=\"line\">FROM table a</span><br><span class=\"line\">where date &lt;= 20130430 and</span><br><span class=\"line\">not exists (</span><br><span class=\"line\">        SELECT field1 FROM table b where date&gt;=20130501 and a.field1=b.field1</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\">#,</span><br><span class=\"line\">select * from TbRole having min(CreateTime) between &apos;xxx&apos; and &apos;xxx&apos;</span><br></pre></td></tr></table></figure>\n<p>####mysql ,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">case condition1</span><br><span class=\"line\">when result1 then &apos;xx&apos;</span><br><span class=\"line\">when result2 then &apos;xx&apos;</span><br><span class=\"line\">else result1 then &apos;xx&apos;</span><br><span class=\"line\">end as &apos;xx&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">ifnull(a,b) #aa,b</span><br><span class=\"line\">if(condition,a,b)#condition a,b</span><br></pre></td></tr></table></figure>\n<p>####group by<br>group by , </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * From tableA group by (round(field1/100,0));</span><br></pre></td></tr></table></figure>\n<p>####</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">concat(&apos;a&apos;,&apos;b&apos;)</span><br></pre></td></tr></table></figure>\n<p>####mysql@<br>sql10</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from (</span><br><span class=\"line\">    select dtStatDate,iRoleLevel,iUserNum,</span><br><span class=\"line\">    if(@templevel=a.iRoleLevel,@tno:=@tno+1,@tno:=1) as tno,@templevel:=a.iRoleLevel </span><br><span class=\"line\">    from tbl_a , (SELECT @tno:= 0,@templevel:=null) tbl_b</span><br><span class=\"line\">    order by a.iRoleLevel asc,a.iUserNum desc</span><br><span class=\"line\">) c</span><br><span class=\"line\">where tno&lt;=10 order by iRoleLevel asc</span><br></pre></td></tr></table></figure>\n<p>####<br>union all union,union, </p>\n"},{"layout":"post","title":"","date":"2013-12-21T08:16:00.000Z","comments":1,"_content":"\n,YY,\"\".15.,\n\n ponyMa  AllenZhang ,,., foxmail,QQmail ,, ,,,. ,\"\"... ,,., \n\n{% img /images/2013/12/Allen.jpg %}\n\n,,,,,,, ,,,(),:\n\n+ ,\n+ ,\n\n,,,,,,,\n\n,, , Allen ,.\n\n{% img /images/2013/12/gitar.jpg %}\n\n,,\n","source":"_posts/2013-12-21-yu-jian.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2013-12-21 16:16\ncomments: true\ncategories: Life\n---\n\n,YY,\"\".15.,\n\n ponyMa  AllenZhang ,,., foxmail,QQmail ,, ,,,. ,\"\"... ,,., \n\n{% img /images/2013/12/Allen.jpg %}\n\n,,,,,,, ,,,(),:\n\n+ ,\n+ ,\n\n,,,,,,,\n\n,, , Allen ,.\n\n{% img /images/2013/12/gitar.jpg %}\n\n,,\n","slug":"2013-12-21-yu-jian","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui4j001km1tj99301vkn","content":"<p>,YY,.15.,</p>\n<p> ponyMa  AllenZhang ,,., foxmail,QQmail ,, ,,,. , ,,., </p>\n<img src=\"/images/2013/12/Allen.jpg\">\n<p>,,,,,,, ,,,(),:</p>\n<ul>\n<li>,</li>\n<li>,</li>\n</ul>\n<p>,,,,,,,</p>\n<p>,, , Allen ,.</p>\n<img src=\"/images/2013/12/gitar.jpg\">\n<p>,,</p>\n","site":{"data":{}},"excerpt":"","more":"<p>,YY,.15.,</p>\n<p> ponyMa  AllenZhang ,,., foxmail,QQmail ,, ,,,. , ,,., </p>\n<img src=\"/images/2013/12/Allen.jpg\">\n<p>,,,,,,, ,,,(),:</p>\n<ul>\n<li>,</li>\n<li>,</li>\n</ul>\n<p>,,,,,,,</p>\n<p>,, , Allen ,.</p>\n<img src=\"/images/2013/12/gitar.jpg\">\n<p>,,</p>\n"},{"layout":"post","title":"-","date":"2013-11-10T13:29:00.000Z","comments":1,"_content":" ***MiniGame***\n\n{% img /images/2013/10/Gitar.jpg %}\n{% img /images/2013/10/Violin.jpg %}\n\n.,.\n\n***,***\n\n\n****** .\n\n+ ArchLinux\n+ MongoDb\n+ chrome,\n+ octopress,\n\n\n \n2[Youmi](http://youmi.net)KISSi like it[](http://sysrt.net)tx\n \n,[@coolshell](http://coolshell.cn),[@Fenng](http://dbanotes.net)..Q,[](http://everet.org)\n\n,,\n\n","source":"_posts/2013-10-10-shui-de-xin-jing.markdown","raw":"---\nlayout: post\ntitle: \"-\"\ndate: 2013-11-10 21:29\ncomments: true\ncategories: Life\n---\n ***MiniGame***\n\n{% img /images/2013/10/Gitar.jpg %}\n{% img /images/2013/10/Violin.jpg %}\n\n.,.\n\n***,***\n\n\n****** .\n\n+ ArchLinux\n+ MongoDb\n+ chrome,\n+ octopress,\n\n\n \n2[Youmi](http://youmi.net)KISSi like it[](http://sysrt.net)tx\n \n,[@coolshell](http://coolshell.cn),[@Fenng](http://dbanotes.net)..Q,[](http://everet.org)\n\n,,\n\n","slug":"2013-10-10-shui-de-xin-jing","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui4l001mm1tjtco34r0q","content":"<p> <strong><em>MiniGame</em></strong></p>\n<img src=\"/images/2013/10/Gitar.jpg\">\n<img src=\"/images/2013/10/Violin.jpg\">\n<p>.,.</p>\n<p><strong><em>,</em></strong><br></p>\n<p><strong><em></em></strong> .</p>\n<ul>\n<li>ArchLinux</li>\n<li>MongoDb</li>\n<li>chrome,</li>\n<li>octopress,</li>\n</ul>\n<p></p>\n<p>2<a href=\"http://youmi.net\" target=\"_blank\" rel=\"noopener\">Youmi</a>KISSi like it<a href=\"http://sysrt.net\" target=\"_blank\" rel=\"noopener\"></a>tx</p>\n<p>,<a href=\"http://coolshell.cn\" target=\"_blank\" rel=\"noopener\">@coolshell</a>,<a href=\"http://dbanotes.net\" target=\"_blank\" rel=\"noopener\">@Fenng</a>..Q,<a href=\"http://everet.org\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>,,</p>\n","site":{"data":{}},"excerpt":"","more":"<p> <strong><em>MiniGame</em></strong></p>\n<img src=\"/images/2013/10/Gitar.jpg\">\n<img src=\"/images/2013/10/Violin.jpg\">\n<p>.,.</p>\n<p><strong><em>,</em></strong><br></p>\n<p><strong><em></em></strong> .</p>\n<ul>\n<li>ArchLinux</li>\n<li>MongoDb</li>\n<li>chrome,</li>\n<li>octopress,</li>\n</ul>\n<p></p>\n<p>2<a href=\"http://youmi.net\" target=\"_blank\" rel=\"noopener\">Youmi</a>KISSi like it<a href=\"http://sysrt.net\" target=\"_blank\" rel=\"noopener\"></a>tx</p>\n<p>,<a href=\"http://coolshell.cn\" target=\"_blank\" rel=\"noopener\">@coolshell</a>,<a href=\"http://dbanotes.net\" target=\"_blank\" rel=\"noopener\">@Fenng</a>..Q,<a href=\"http://everet.org\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>,,</p>\n"},{"layout":"post","title":"","date":"2014-01-07T10:47:00.000Z","comments":1,"keywords":"","description":"","_content":"### \n\n20132014.BTW,\n> ,python\n\n,.,VPS\n\n{% img /images/2013/12/nba.jpg %}\n\n,300, .,20.,.\n\n#####\n `APPID`, `APPSeceret`, Server  URL, `TOKEN`,\n\n#####\nServer \n\n/\n\n*  `token``timestamp``nonce` \n* sha1\n*  `signature` \n\n```python\nclass BaseHandler(tornado.web.RequestHandler):\n    #,\n    def prepare(self):\n        timestamp = self.get_argument(\"timestamp\", None)\n        nonce = self.get_argument(\"nonce\", None)\n        signature = self.get_argument(\"signature\", None)\n        print 'request:', timestamp, nonce, signature\n        print self.request.method, timestamp, nonce, signature\n        if validate(timestamp, nonce, signature) is False:\n            print \"=========validate failed =====\"\n            self.finish()\n\ndef validate(timestamp, nonce, signature):\n    print 'validate:', timestamp, nonce, signature\n    if timestamp is None or nonce is None or signature is None:\n        return False\n    tmp = [TOKEN, timestamp, nonce]\n    tmp = sorted(tmparr)\n    tmpStr = ''.join(tmp)\n    hashStr = sha1(tmpStr).hexdigest()\n    return (hashStr == signature)\n```\n\n,URLweixinURLGet.,\n\n```\nclass serverHandler(BaseHandler):\n    def get(self):\n        echostr = self.get_argument('echostr', None)\n        self.write(echostr)\n``` \n\n\n#####. \n \"/u\" tornadorender_string,json.dump(menu)post, render_string@ihao\n\n```\nclass UIHandler(tornado.web.RequestHandler):\n    def get(self):\n        msg = self.render_string('menu.json')\n        createMenu(menu)\n```\n\n\n#####. \n\n```\nxml = uni(self.request.body)        #xml,unicode\ndic = xml2dict(xml)                 #xmldict\nif dic['MsgType'].lower() == 'event':\n    event = dic['Event'].lower()\n    if event == 'subscribe':\n        ctx = do_subscribe(dic)     #\n        msg = self.render_string('text_resp.xml', dic=ctx)\n        self.write(msg)\n    elif event == 'click':\n        ctx = do_click(dic)         #\n        msg = self.render_string('text_resp.xml', dic=ctx)\n        self.write(msg)\n```\n\nself.write(msg)\n\n\n#### \n- [](http://mp.weixin.qq.com/wiki/index.php)\n- [](http://mp.weixin.qq.com/debug/)\n\n\n#### \n- `tornado`\n- `virtualenv`\n- `pyquery()`\n- `pymongo`\n- `lxml`\n- `urllib2`\n\n\n","source":"_posts/2014-01-07-wei-xin-gong-zhong-hao-kai-fa.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2014-01-07 18:47\ncomments: true\ncategories: Product\nkeywords: \ndescription:  \n---\n### \n\n20132014.BTW,\n> ,python\n\n,.,VPS\n\n{% img /images/2013/12/nba.jpg %}\n\n,300, .,20.,.\n\n#####\n `APPID`, `APPSeceret`, Server  URL, `TOKEN`,\n\n#####\nServer \n\n/\n\n*  `token``timestamp``nonce` \n* sha1\n*  `signature` \n\n```python\nclass BaseHandler(tornado.web.RequestHandler):\n    #,\n    def prepare(self):\n        timestamp = self.get_argument(\"timestamp\", None)\n        nonce = self.get_argument(\"nonce\", None)\n        signature = self.get_argument(\"signature\", None)\n        print 'request:', timestamp, nonce, signature\n        print self.request.method, timestamp, nonce, signature\n        if validate(timestamp, nonce, signature) is False:\n            print \"=========validate failed =====\"\n            self.finish()\n\ndef validate(timestamp, nonce, signature):\n    print 'validate:', timestamp, nonce, signature\n    if timestamp is None or nonce is None or signature is None:\n        return False\n    tmp = [TOKEN, timestamp, nonce]\n    tmp = sorted(tmparr)\n    tmpStr = ''.join(tmp)\n    hashStr = sha1(tmpStr).hexdigest()\n    return (hashStr == signature)\n```\n\n,URLweixinURLGet.,\n\n```\nclass serverHandler(BaseHandler):\n    def get(self):\n        echostr = self.get_argument('echostr', None)\n        self.write(echostr)\n``` \n\n\n#####. \n \"/u\" tornadorender_string,json.dump(menu)post, render_string@ihao\n\n```\nclass UIHandler(tornado.web.RequestHandler):\n    def get(self):\n        msg = self.render_string('menu.json')\n        createMenu(menu)\n```\n\n\n#####. \n\n```\nxml = uni(self.request.body)        #xml,unicode\ndic = xml2dict(xml)                 #xmldict\nif dic['MsgType'].lower() == 'event':\n    event = dic['Event'].lower()\n    if event == 'subscribe':\n        ctx = do_subscribe(dic)     #\n        msg = self.render_string('text_resp.xml', dic=ctx)\n        self.write(msg)\n    elif event == 'click':\n        ctx = do_click(dic)         #\n        msg = self.render_string('text_resp.xml', dic=ctx)\n        self.write(msg)\n```\n\nself.write(msg)\n\n\n#### \n- [](http://mp.weixin.qq.com/wiki/index.php)\n- [](http://mp.weixin.qq.com/debug/)\n\n\n#### \n- `tornado`\n- `virtualenv`\n- `pyquery()`\n- `pymongo`\n- `lxml`\n- `urllib2`\n\n\n","slug":"2014-01-07-wei-xin-gong-zhong-hao-kai-fa","published":1,"updated":"2018-07-01T05:54:42.000Z","photos":[],"link":"","_id":"cjv8xui4m001om1tjvqwgiie6","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>20132014.BTW,</p>\n<blockquote>\n<p>,python</p>\n</blockquote>\n<p>,.,VPS</p>\n<img src=\"/images/2013/12/nba.jpg\">\n<p>,300, .,20.,.</p>\n<p>#####<br> <code>APPID</code>, <code>APPSeceret</code>, Server  URL, <code>TOKEN</code>,</p>\n<p>#####<br>Server </p>\n<p>/</p>\n<ul>\n<li> <code>token</code><code>timestamp</code><code>nonce</code> </li>\n<li>sha1</li>\n<li> <code>signature</code> </li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BaseHandler</span><span class=\"params\">(tornado.web.RequestHandler)</span>:</span></span><br><span class=\"line\">    <span class=\"comment\">#,</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">prepare</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        timestamp = self.get_argument(<span class=\"string\">\"timestamp\"</span>, <span class=\"keyword\">None</span>)</span><br><span class=\"line\">        nonce = self.get_argument(<span class=\"string\">\"nonce\"</span>, <span class=\"keyword\">None</span>)</span><br><span class=\"line\">        signature = self.get_argument(<span class=\"string\">\"signature\"</span>, <span class=\"keyword\">None</span>)</span><br><span class=\"line\">        <span class=\"keyword\">print</span> <span class=\"string\">'request:'</span>, timestamp, nonce, signature</span><br><span class=\"line\">        <span class=\"keyword\">print</span> self.request.method, timestamp, nonce, signature</span><br><span class=\"line\">        <span class=\"keyword\">if</span> validate(timestamp, nonce, signature) <span class=\"keyword\">is</span> <span class=\"keyword\">False</span>:</span><br><span class=\"line\">            <span class=\"keyword\">print</span> <span class=\"string\">\"=========validate failed =====\"</span></span><br><span class=\"line\">            self.finish()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">validate</span><span class=\"params\">(timestamp, nonce, signature)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">print</span> <span class=\"string\">'validate:'</span>, timestamp, nonce, signature</span><br><span class=\"line\">    <span class=\"keyword\">if</span> timestamp <span class=\"keyword\">is</span> <span class=\"keyword\">None</span> <span class=\"keyword\">or</span> nonce <span class=\"keyword\">is</span> <span class=\"keyword\">None</span> <span class=\"keyword\">or</span> signature <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">False</span></span><br><span class=\"line\">    tmp = [TOKEN, timestamp, nonce]</span><br><span class=\"line\">    tmp = sorted(tmparr)</span><br><span class=\"line\">    tmpStr = <span class=\"string\">''</span>.join(tmp)</span><br><span class=\"line\">    hashStr = sha1(tmpStr).hexdigest()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (hashStr == signature)</span><br></pre></td></tr></table></figure>\n<p>,URLweixinURLGet.,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class serverHandler(BaseHandler):</span><br><span class=\"line\">    def get(self):</span><br><span class=\"line\">        echostr = self.get_argument(&apos;echostr&apos;, None)</span><br><span class=\"line\">        self.write(echostr)</span><br><span class=\"line\">``` </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#####. </span><br><span class=\"line\"> &quot;/u&quot; tornadorender_string,json.dump(menu)post, render_string@ihao</span><br></pre></td></tr></table></figure>\n<p>class UIHandler(tornado.web.RequestHandler):<br>    def get(self):<br>        msg = self.render_string(menu.json)<br>        createMenu(menu)<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#####. </span><br></pre></td></tr></table></figure></p>\n<p>xml = uni(self.request.body)        #xml,unicode<br>dic = xml2dict(xml)                 #xmldict<br>if dic[MsgType].lower() == event:<br>    event = dic[Event].lower()<br>    if event == subscribe:<br>        ctx = do_subscribe(dic)     #<br>        msg = self.render_string(text_resp.xml, dic=ctx)<br>        self.write(msg)<br>    elif event == click:<br>        ctx = do_click(dic)         #<br>        msg = self.render_string(text_resp.xml, dic=ctx)<br>        self.write(msg)<br><code>`</code></p>\n<p>self.write(msg)</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><a href=\"http://mp.weixin.qq.com/wiki/index.php\" target=\"_blank\" rel=\"noopener\"></a></li>\n<li><a href=\"http://mp.weixin.qq.com/debug/\" target=\"_blank\" rel=\"noopener\"></a></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><code>tornado</code></li>\n<li><code>virtualenv</code></li>\n<li><code>pyquery()</code></li>\n<li><code>pymongo</code></li>\n<li><code>lxml</code></li>\n<li><code>urllib2</code></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>20132014.BTW,</p>\n<blockquote>\n<p>,python</p>\n</blockquote>\n<p>,.,VPS</p>\n<img src=\"/images/2013/12/nba.jpg\">\n<p>,300, .,20.,.</p>\n<p>#####<br> <code>APPID</code>, <code>APPSeceret</code>, Server  URL, <code>TOKEN</code>,</p>\n<p>#####<br>Server </p>\n<p>/</p>\n<ul>\n<li> <code>token</code><code>timestamp</code><code>nonce</code> </li>\n<li>sha1</li>\n<li> <code>signature</code> </li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BaseHandler</span><span class=\"params\">(tornado.web.RequestHandler)</span>:</span></span><br><span class=\"line\">    <span class=\"comment\">#,</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">prepare</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        timestamp = self.get_argument(<span class=\"string\">\"timestamp\"</span>, <span class=\"keyword\">None</span>)</span><br><span class=\"line\">        nonce = self.get_argument(<span class=\"string\">\"nonce\"</span>, <span class=\"keyword\">None</span>)</span><br><span class=\"line\">        signature = self.get_argument(<span class=\"string\">\"signature\"</span>, <span class=\"keyword\">None</span>)</span><br><span class=\"line\">        <span class=\"keyword\">print</span> <span class=\"string\">'request:'</span>, timestamp, nonce, signature</span><br><span class=\"line\">        <span class=\"keyword\">print</span> self.request.method, timestamp, nonce, signature</span><br><span class=\"line\">        <span class=\"keyword\">if</span> validate(timestamp, nonce, signature) <span class=\"keyword\">is</span> <span class=\"keyword\">False</span>:</span><br><span class=\"line\">            <span class=\"keyword\">print</span> <span class=\"string\">\"=========validate failed =====\"</span></span><br><span class=\"line\">            self.finish()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">validate</span><span class=\"params\">(timestamp, nonce, signature)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">print</span> <span class=\"string\">'validate:'</span>, timestamp, nonce, signature</span><br><span class=\"line\">    <span class=\"keyword\">if</span> timestamp <span class=\"keyword\">is</span> <span class=\"keyword\">None</span> <span class=\"keyword\">or</span> nonce <span class=\"keyword\">is</span> <span class=\"keyword\">None</span> <span class=\"keyword\">or</span> signature <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">False</span></span><br><span class=\"line\">    tmp = [TOKEN, timestamp, nonce]</span><br><span class=\"line\">    tmp = sorted(tmparr)</span><br><span class=\"line\">    tmpStr = <span class=\"string\">''</span>.join(tmp)</span><br><span class=\"line\">    hashStr = sha1(tmpStr).hexdigest()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (hashStr == signature)</span><br></pre></td></tr></table></figure>\n<p>,URLweixinURLGet.,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class serverHandler(BaseHandler):</span><br><span class=\"line\">    def get(self):</span><br><span class=\"line\">        echostr = self.get_argument(&apos;echostr&apos;, None)</span><br><span class=\"line\">        self.write(echostr)</span><br><span class=\"line\">``` </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#####. </span><br><span class=\"line\"> &quot;/u&quot; tornadorender_string,json.dump(menu)post, render_string@ihao</span><br></pre></td></tr></table></figure>\n<p>class UIHandler(tornado.web.RequestHandler):<br>    def get(self):<br>        msg = self.render_string(menu.json)<br>        createMenu(menu)<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#####. </span><br></pre></td></tr></table></figure></p>\n<p>xml = uni(self.request.body)        #xml,unicode<br>dic = xml2dict(xml)                 #xmldict<br>if dic[MsgType].lower() == event:<br>    event = dic[Event].lower()<br>    if event == subscribe:<br>        ctx = do_subscribe(dic)     #<br>        msg = self.render_string(text_resp.xml, dic=ctx)<br>        self.write(msg)<br>    elif event == click:<br>        ctx = do_click(dic)         #<br>        msg = self.render_string(text_resp.xml, dic=ctx)<br>        self.write(msg)<br><code>`</code></p>\n<p>self.write(msg)</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><a href=\"http://mp.weixin.qq.com/wiki/index.php\" target=\"_blank\" rel=\"noopener\"></a></li>\n<li><a href=\"http://mp.weixin.qq.com/debug/\" target=\"_blank\" rel=\"noopener\"></a></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><code>tornado</code></li>\n<li><code>virtualenv</code></li>\n<li><code>pyquery()</code></li>\n<li><code>pymongo</code></li>\n<li><code>lxml</code></li>\n<li><code>urllib2</code></li>\n</ul>\n"},{"layout":"post","title":"","date":"2014-01-06T12:58:00.000Z","comments":1,"_content":"  Server NginxDjango.,python:\n \n1. ,py,reload,\n2. sys.module['modname']pycpy\n\n```python\nimport time\nimport sys, os\ndef auto_reload():\n    mods = [\"test_config\"]\n    for mod in mods:\n        try:\n            module = sys.modules[mod]\n        except:\n            continue\n        filename = module.__file__\n        print filename\n        if filename.endswith(\".pyc\"):\n            filename = filename.replace(\".pyc\", \".py\")\n            mod_time = os.path.getmtime(filename)\n        if not \"loadtime\" in module.__dict__:\n            module.loadtime = 0 # first load's time  1*\n            try:\n                if mod_time > module.loadtime:\n                    reload(module)\n                except:\n                    pass\n        module.loadtime = mod_time # 2*\n\nif __name__ == \"__main__\":\n    import time\n    import my_config\n    tmp = None\n    while True:\n        auto_reload()\n        if test_config.address != tmp:\n        print test_config.address\n        tmp = test_config.address\n        time.sleep(2)\n```\n\ntest_config.py\n\n```\naddress = \"127.0.0.1\"\n```\n","source":"_posts/2014-01-06-re-geng-xin.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2014-01-06 20:58\ncomments: true\ncategories: Program\n---\n  Server NginxDjango.,python:\n \n1. ,py,reload,\n2. sys.module['modname']pycpy\n\n```python\nimport time\nimport sys, os\ndef auto_reload():\n    mods = [\"test_config\"]\n    for mod in mods:\n        try:\n            module = sys.modules[mod]\n        except:\n            continue\n        filename = module.__file__\n        print filename\n        if filename.endswith(\".pyc\"):\n            filename = filename.replace(\".pyc\", \".py\")\n            mod_time = os.path.getmtime(filename)\n        if not \"loadtime\" in module.__dict__:\n            module.loadtime = 0 # first load's time  1*\n            try:\n                if mod_time > module.loadtime:\n                    reload(module)\n                except:\n                    pass\n        module.loadtime = mod_time # 2*\n\nif __name__ == \"__main__\":\n    import time\n    import my_config\n    tmp = None\n    while True:\n        auto_reload()\n        if test_config.address != tmp:\n        print test_config.address\n        tmp = test_config.address\n        time.sleep(2)\n```\n\ntest_config.py\n\n```\naddress = \"127.0.0.1\"\n```\n","slug":"2014-01-06-re-geng-xin","published":1,"updated":"2018-07-01T05:54:33.000Z","photos":[],"link":"","_id":"cjv8xui4n001qm1tji108cru2","content":"<p>  Server NginxDjango.,python:</p>\n<ol>\n<li>,py,reload,</li>\n<li>sys.module[modname]pycpy</li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys, os</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">auto_reload</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    mods = [<span class=\"string\">\"test_config\"</span>]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> mod <span class=\"keyword\">in</span> mods:</span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            module = sys.modules[mod]</span><br><span class=\"line\">        <span class=\"keyword\">except</span>:</span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        filename = module.__file__</span><br><span class=\"line\">        <span class=\"keyword\">print</span> filename</span><br><span class=\"line\">        <span class=\"keyword\">if</span> filename.endswith(<span class=\"string\">\".pyc\"</span>):</span><br><span class=\"line\">            filename = filename.replace(<span class=\"string\">\".pyc\"</span>, <span class=\"string\">\".py\"</span>)</span><br><span class=\"line\">            mod_time = os.path.getmtime(filename)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> <span class=\"string\">\"loadtime\"</span> <span class=\"keyword\">in</span> module.__dict__:</span><br><span class=\"line\">            module.loadtime = <span class=\"number\">0</span> <span class=\"comment\"># first load's time  1*</span></span><br><span class=\"line\">            <span class=\"keyword\">try</span>:</span><br><span class=\"line\">                <span class=\"keyword\">if</span> mod_time &gt; module.loadtime:</span><br><span class=\"line\">                    reload(module)</span><br><span class=\"line\">                <span class=\"keyword\">except</span>:</span><br><span class=\"line\">                    <span class=\"keyword\">pass</span></span><br><span class=\"line\">        module.loadtime = mod_time <span class=\"comment\"># 2*</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\">    <span class=\"keyword\">import</span> time</span><br><span class=\"line\">    <span class=\"keyword\">import</span> my_config</span><br><span class=\"line\">    tmp = <span class=\"keyword\">None</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</span><br><span class=\"line\">        auto_reload()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> test_config.address != tmp:</span><br><span class=\"line\">        <span class=\"keyword\">print</span> test_config.address</span><br><span class=\"line\">        tmp = test_config.address</span><br><span class=\"line\">        time.sleep(<span class=\"number\">2</span>)</span><br></pre></td></tr></table></figure>\n<p>test_config.py</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">address = &quot;127.0.0.1&quot;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>  Server NginxDjango.,python:</p>\n<ol>\n<li>,py,reload,</li>\n<li>sys.module[modname]pycpy</li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys, os</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">auto_reload</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    mods = [<span class=\"string\">\"test_config\"</span>]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> mod <span class=\"keyword\">in</span> mods:</span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            module = sys.modules[mod]</span><br><span class=\"line\">        <span class=\"keyword\">except</span>:</span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        filename = module.__file__</span><br><span class=\"line\">        <span class=\"keyword\">print</span> filename</span><br><span class=\"line\">        <span class=\"keyword\">if</span> filename.endswith(<span class=\"string\">\".pyc\"</span>):</span><br><span class=\"line\">            filename = filename.replace(<span class=\"string\">\".pyc\"</span>, <span class=\"string\">\".py\"</span>)</span><br><span class=\"line\">            mod_time = os.path.getmtime(filename)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> <span class=\"string\">\"loadtime\"</span> <span class=\"keyword\">in</span> module.__dict__:</span><br><span class=\"line\">            module.loadtime = <span class=\"number\">0</span> <span class=\"comment\"># first load's time  1*</span></span><br><span class=\"line\">            <span class=\"keyword\">try</span>:</span><br><span class=\"line\">                <span class=\"keyword\">if</span> mod_time &gt; module.loadtime:</span><br><span class=\"line\">                    reload(module)</span><br><span class=\"line\">                <span class=\"keyword\">except</span>:</span><br><span class=\"line\">                    <span class=\"keyword\">pass</span></span><br><span class=\"line\">        module.loadtime = mod_time <span class=\"comment\"># 2*</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\">    <span class=\"keyword\">import</span> time</span><br><span class=\"line\">    <span class=\"keyword\">import</span> my_config</span><br><span class=\"line\">    tmp = <span class=\"keyword\">None</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</span><br><span class=\"line\">        auto_reload()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> test_config.address != tmp:</span><br><span class=\"line\">        <span class=\"keyword\">print</span> test_config.address</span><br><span class=\"line\">        tmp = test_config.address</span><br><span class=\"line\">        time.sleep(<span class=\"number\">2</span>)</span><br></pre></td></tr></table></figure>\n<p>test_config.py</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">address = &quot;127.0.0.1&quot;</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"Rework","date":"2014-01-24T14:31:00.000Z","comments":1,"keywords":"Rework","description":"Rework ","_content":"\nReWork\n\n{% img /images/2014/01/rework.jpg %}\n\n.\n\n37signal rework\n\n* \n\n> .\n\n* \n\n> \n\n*  \n\n> \n\n* \n\n> N \n\n\n* \n\n> .\n\n* \n\n>  \n\n* \n\n> \n\n* \n\n> \n\n* \n \n> \n\n* \n\n>  \n\n\n* \n\n> 37signals3\n\n> 66.\n\n> \n\n> \n\n* \n\n>  \n\n* \n\n>   \n\n*  \n\n> 60100\n\n* \n\n>  \n\n----------------------------------------------------------  --------------------------------------------------------------\n\n\n [](http://book.douban.com/subject/25735727/) \n\n>  - by \n","source":"_posts/2014-01-24-<<rework>>-shu-zhai.markdown","raw":"---\nlayout: post\ntitle: \"Rework\"\ndate: 2014-01-24 22:31\ncomments: true\ncategories: Life\nkeywords: Rework\ndescription: Rework \n---\n\nReWork\n\n{% img /images/2014/01/rework.jpg %}\n\n.\n\n37signal rework\n\n* \n\n> .\n\n* \n\n> \n\n*  \n\n> \n\n* \n\n> N \n\n\n* \n\n> .\n\n* \n\n>  \n\n* \n\n> \n\n* \n\n> \n\n* \n \n> \n\n* \n\n>  \n\n\n* \n\n> 37signals3\n\n> 66.\n\n> \n\n> \n\n* \n\n>  \n\n* \n\n>   \n\n*  \n\n> 60100\n\n* \n\n>  \n\n----------------------------------------------------------  --------------------------------------------------------------\n\n\n [](http://book.douban.com/subject/25735727/) \n\n>  - by \n","slug":"2014-01-24-<<rework>>-shu-zhai","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui4o001sm1tjdc0kg42u","content":"<p>ReWork</p>\n<img src=\"/images/2014/01/rework.jpg\">\n<p>.</p>\n<p>37signal rework</p>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p>.</p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p> </p>\n</blockquote>\n<ul>\n<li> </li>\n</ul>\n<blockquote>\n<p></p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p>N </p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p>.</p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p> </p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p></p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p></p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p></p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p> </p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p>37signals3</p>\n</blockquote>\n<blockquote>\n<p>66.</p>\n</blockquote>\n<blockquote>\n<p></p>\n</blockquote>\n<blockquote>\n<p></p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p> </p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p>  </p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p>60100</p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p> </p>\n</blockquote>\n<p>-  </p>\n<p><br> <a href=\"http://book.douban.com/subject/25735727/\" target=\"_blank\" rel=\"noopener\"></a> </p>\n<blockquote>\n<p> - by </p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p>ReWork</p>\n<img src=\"/images/2014/01/rework.jpg\">\n<p>.</p>\n<p>37signal rework</p>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p>.</p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p> </p>\n</blockquote>\n<ul>\n<li> </li>\n</ul>\n<blockquote>\n<p></p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p>N </p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p>.</p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p> </p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p></p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p></p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p></p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p> </p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p>37signals3</p>\n</blockquote>\n<blockquote>\n<p>66.</p>\n</blockquote>\n<blockquote>\n<p></p>\n</blockquote>\n<blockquote>\n<p></p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p> </p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p>  </p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p>60100</p>\n</blockquote>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p> </p>\n</blockquote>\n<p>-  </p>\n<p><br> <a href=\"http://book.douban.com/subject/25735727/\" target=\"_blank\" rel=\"noopener\"></a> </p>\n<blockquote>\n<p> - by </p>\n</blockquote>\n"},{"layout":"post","title":" strtok ","date":"2014-02-05T08:35:00.000Z","comments":1,"keywords":"strtok","description":"strtok","_content":"\n strtok , ,  C++ manual,, , \n\n### Man strtok\n```c\nstrtok:\nchar *strtok(char *s, char *delim)\n```\n delim s\nsNULL SAVE_PTR \n save_ptr \ns\nNULLNULL\n\n### How to use?\n```c\nchar s[100] = \" zheng-ji is so stupid\";\nchar *del = \" \";\nchar *token ;\ntoken = strtok(s, del);\nwhile(token != NULL) {\n    printf(\"%s\\n\", token);\n    token = strtok(NULL, del);\n}\n```\n\n\n\n```\nzheng-ji\nis\nso\nstupid\n```\n\n### save_ptr\n\n```c\nstatic char *olds;\nchar * strtok (char *sconst char *delim{\n    char *token;\n    if (s == NULL) s = olds;\n    /*delim*/\n    s += strspn (s, delim); \n    if (*s == '\\0') {\n        olds = s;\n        return NULL;\n    }\n    /*delims*/\n    token = s;\n    s = strpbrk (token, delim);\n    if (s == NULL)\n        olds = __rawmemchr (token, '\\0');\n    else {\n        /*old */\n        *s = '\\0';\n        olds = s + 1;\n    }\n    return token;\n}\n```\n\n:\n\n+ SAVE_PTR( static char * olds)\n+ \n+ sNULLolds \n+ \n+ .\n","source":"_posts/2014-02-05-shen-ru-strtokhan-shu.markdown","raw":"---\nlayout: post\ntitle: \" strtok \"\ndate: 2014-02-05 16:35\ncomments: true\ncategories: Program\nkeywords: strtok\ndescription: strtok\n---\n\n strtok , ,  C++ manual,, , \n\n### Man strtok\n```c\nstrtok:\nchar *strtok(char *s, char *delim)\n```\n delim s\nsNULL SAVE_PTR \n save_ptr \ns\nNULLNULL\n\n### How to use?\n```c\nchar s[100] = \" zheng-ji is so stupid\";\nchar *del = \" \";\nchar *token ;\ntoken = strtok(s, del);\nwhile(token != NULL) {\n    printf(\"%s\\n\", token);\n    token = strtok(NULL, del);\n}\n```\n\n\n\n```\nzheng-ji\nis\nso\nstupid\n```\n\n### save_ptr\n\n```c\nstatic char *olds;\nchar * strtok (char *sconst char *delim{\n    char *token;\n    if (s == NULL) s = olds;\n    /*delim*/\n    s += strspn (s, delim); \n    if (*s == '\\0') {\n        olds = s;\n        return NULL;\n    }\n    /*delims*/\n    token = s;\n    s = strpbrk (token, delim);\n    if (s == NULL)\n        olds = __rawmemchr (token, '\\0');\n    else {\n        /*old */\n        *s = '\\0';\n        olds = s + 1;\n    }\n    return token;\n}\n```\n\n:\n\n+ SAVE_PTR( static char * olds)\n+ \n+ sNULLolds \n+ \n+ .\n","slug":"2014-02-05-shen-ru-strtokhan-shu","published":1,"updated":"2018-07-01T05:55:01.000Z","photos":[],"link":"","_id":"cjv8xui4p001um1tjo9esjf7i","content":"<p> strtok , ,  C++ manual,, , </p>\n<h3 id=\"Man-strtok\"><a href=\"#Man-strtok\" class=\"headerlink\" title=\"Man strtok\"></a>Man strtok</h3><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">strtok:</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">char</span> *<span class=\"title\">strtok</span><span class=\"params\">(<span class=\"keyword\">char</span> *s, <span class=\"keyword\">char</span> *delim)</span></span></span><br></pre></td></tr></table></figure>\n<p> delim s<br>sNULL SAVE_PTR <br> save_ptr <br>s<br>NULLNULL</p>\n<h3 id=\"How-to-use\"><a href=\"#How-to-use\" class=\"headerlink\" title=\"How to use?\"></a>How to use?</h3><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">char</span> s[<span class=\"number\">100</span>] = <span class=\"string\">\" zheng-ji is so stupid\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">char</span> *del = <span class=\"string\">\" \"</span>;</span><br><span class=\"line\"><span class=\"keyword\">char</span> *token ;</span><br><span class=\"line\">token = strtok(s, del);</span><br><span class=\"line\"><span class=\"keyword\">while</span>(token != <span class=\"literal\">NULL</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"%s\\n\"</span>, token);</span><br><span class=\"line\">    token = strtok(<span class=\"literal\">NULL</span>, del);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zheng-ji</span><br><span class=\"line\">is</span><br><span class=\"line\">so</span><br><span class=\"line\">stupid</span><br></pre></td></tr></table></figure>\n<h3 id=\"save-ptr\"><a href=\"#save-ptr\" class=\"headerlink\" title=\"save_ptr\"></a>save_ptr</h3><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">char</span> *olds;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">char</span> * <span class=\"title\">strtok</span> <span class=\"params\">(<span class=\"keyword\">char</span> *s<span class=\"keyword\">const</span> <span class=\"keyword\">char</span> *delim&#123;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">    <span class=\"keyword\">char</span> *token;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">    <span class=\"keyword\">if</span> (s == <span class=\"literal\">NULL</span>)</span> s </span>= olds;</span><br><span class=\"line\">    <span class=\"comment\">/*delim*/</span></span><br><span class=\"line\">    s += <span class=\"built_in\">strspn</span> (s, delim); </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (*s == <span class=\"string\">'\\0'</span>) &#123;</span><br><span class=\"line\">        olds = s;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">/*delims*/</span></span><br><span class=\"line\">    token = s;</span><br><span class=\"line\">    s = <span class=\"built_in\">strpbrk</span> (token, delim);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (s == <span class=\"literal\">NULL</span>)</span><br><span class=\"line\">        olds = __rawmemchr (token, <span class=\"string\">'\\0'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">/*old */</span></span><br><span class=\"line\">        *s = <span class=\"string\">'\\0'</span>;</span><br><span class=\"line\">        olds = s + <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> token;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<ul>\n<li>SAVE_PTR( static char * olds)</li>\n<li></li>\n<li>sNULLolds </li>\n<li></li>\n<li>.</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p> strtok , ,  C++ manual,, , </p>\n<h3 id=\"Man-strtok\"><a href=\"#Man-strtok\" class=\"headerlink\" title=\"Man strtok\"></a>Man strtok</h3><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">strtok:</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">char</span> *<span class=\"title\">strtok</span><span class=\"params\">(<span class=\"keyword\">char</span> *s, <span class=\"keyword\">char</span> *delim)</span></span></span><br></pre></td></tr></table></figure>\n<p> delim s<br>sNULL SAVE_PTR <br> save_ptr <br>s<br>NULLNULL</p>\n<h3 id=\"How-to-use\"><a href=\"#How-to-use\" class=\"headerlink\" title=\"How to use?\"></a>How to use?</h3><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">char</span> s[<span class=\"number\">100</span>] = <span class=\"string\">\" zheng-ji is so stupid\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">char</span> *del = <span class=\"string\">\" \"</span>;</span><br><span class=\"line\"><span class=\"keyword\">char</span> *token ;</span><br><span class=\"line\">token = strtok(s, del);</span><br><span class=\"line\"><span class=\"keyword\">while</span>(token != <span class=\"literal\">NULL</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"%s\\n\"</span>, token);</span><br><span class=\"line\">    token = strtok(<span class=\"literal\">NULL</span>, del);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zheng-ji</span><br><span class=\"line\">is</span><br><span class=\"line\">so</span><br><span class=\"line\">stupid</span><br></pre></td></tr></table></figure>\n<h3 id=\"save-ptr\"><a href=\"#save-ptr\" class=\"headerlink\" title=\"save_ptr\"></a>save_ptr</h3><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">char</span> *olds;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">char</span> * <span class=\"title\">strtok</span> <span class=\"params\">(<span class=\"keyword\">char</span> *s<span class=\"keyword\">const</span> <span class=\"keyword\">char</span> *delim&#123;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">    <span class=\"keyword\">char</span> *token;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">    <span class=\"keyword\">if</span> (s == <span class=\"literal\">NULL</span>)</span> s </span>= olds;</span><br><span class=\"line\">    <span class=\"comment\">/*delim*/</span></span><br><span class=\"line\">    s += <span class=\"built_in\">strspn</span> (s, delim); </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (*s == <span class=\"string\">'\\0'</span>) &#123;</span><br><span class=\"line\">        olds = s;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">/*delims*/</span></span><br><span class=\"line\">    token = s;</span><br><span class=\"line\">    s = <span class=\"built_in\">strpbrk</span> (token, delim);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (s == <span class=\"literal\">NULL</span>)</span><br><span class=\"line\">        olds = __rawmemchr (token, <span class=\"string\">'\\0'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">/*old */</span></span><br><span class=\"line\">        *s = <span class=\"string\">'\\0'</span>;</span><br><span class=\"line\">        olds = s + <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> token;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<ul>\n<li>SAVE_PTR( static char * olds)</li>\n<li></li>\n<li>sNULLolds </li>\n<li></li>\n<li>.</li>\n</ul>\n"},{"layout":"post","title":"SkipList","date":"2014-02-01T02:21:00.000Z","comments":1,"keywords":"skiplist","description":"skiplist, leveldb","_content":"\n@huangSir Golang\"B\".,Leveldb,memtable\n\n* [](#)\n* [](#)\n* [](#)\n\n<h3 id=\"\"></h3>\n\n{% img /images/2014/01/skiplist.png %}\n\n[Skip List](http://zh.wikipedia.org/wiki/%E8%B7%B3%E8%B7%83%E5%88%97%E8%A1%A8)\n\n* \n* O(log n)\n* \n* \n\n<h3 id=\"\"></h3>\n\n* skiplist\n\n```c\nstruct node {\n    int key;\n    int value;   \n    node *next[1];  \n}\n```\n\nnodec * next[1] \n\n* skiplist\n\n```c\nstruct skiplist\n{\n    int level; //\n    node *header;\n};\n```\n\n\n\n\n* \n\nNULLMAX_LEVEL\n\n```c\nnode *createNode(int level, int key, int value) {\n    node *ns = (node *) malloc(sizeof(node) + level * sizeof(node*));\n    ns->key = key;\n    ns->value = value;\n    return ns;\n}\n\nskiplist* createSkiplist() {\n    skiplist *sl = (skiplist *)malloc(sizeof(skiplist));\n    sl->level = 0;\n    sl->header = createNode(MAX_LEVEL-1,0,0);\n    for(int i=0; i<MAX_LEVEL; i++) {\n        sl->header->next[i] = NULL;\n    }\n    return sl;\n}\n```\n\n* \n\n :\n\n- \n- \n- .\n\n```\nbool insert(skiplist *sl,int key,int value) {\n    node *update[MAX_LEVEL];\n    node *p, *q = NULL;\n    p = sl->header;\n    int k = sl->level;\n    for(int i = k-1; i >= 0; i--) {\n        while((q = p->next[i]) && (q->key<key)) {\n            p = q;\n        }\n        update[i]=p;\n    }\n    if(q && q->key == key) return false;\n    //K,q, \n    k = randomLevel();\n    //level\n    if(k > (sl->level)) {\n        for(int i = sl->level; i < k; i++){\n            update[i] = sl->header;\n        }\n        sl->level = k;\n    }\n    q = createNode(k, key, value);\n    //\n    for(int i = 0;i<k;i++)\n    {\n        q->next[i] = update[i]->next[i];\n        update[i]->next[i] = q;\n    }\n    return true;\n}\n```\n\n* \n\nupdatelevel\n\n```c\nbool deleteSL(skiplist *sl,int key) {\n    node *update[MAX_LEVEL];\n    node *p,*q = NULL;\n    p = sl->header;\n    //\n    int k=sl->level;\n    for(int i = k-1; i >= 0; i--){\n        while((q = p->next[i]) && (q->key<key)) {\n            p = q;\n        }\n        update[i] = p;\n    }\n    if(q && q->key == key) {\n        //\n        for(int i = 0; i<sl->level; i++){\n            if(update[i]->next[i] == q){\n                update[i]->next[i] = q->next[i];\n            }\n        }\n        free(q);\n        //\n        for(int i=sl->level-1; i >= 0; i--){\n            if(sl->header->forward[i]==NULL){\n                sl->level--;\n            }\n        }\n        return true;\n    }\n    else\n        return false;\n}\n```\n\n* \n\n \n\n```c\nint search(skiplist * sl, int key) {\n    node * p, *q = NULL;\n    p = sl->header;\n    int k = sl->level;\n    for (int i = k-1; i >= 0; i--) {\n        while ((q = p->forward[i]) && q->key <= key) {\n            if (q->key == key) {\n                return q->value;\n            }\n            p = q;\n        }\n    }\n    return NULL;\n}\n```\n\n<h3 id=\"\"></h3>\nleveldbmemtable.c RedisKVskiplistleveldbkey-val, (),O(logn)\n\n<h3></h3>\n- [wikipedia](http://zh.wikipedia.org/wiki/%E8%B7%B3%E8%B7%83%E5%88%97%E8%A1%A8) \n- [skiplist](http://blog.csdn.net/ict2014/article/details/17394259)\n- [source code](https://github.com/zheng-ji/ToyCollection/skiplist)\n\n\n","source":"_posts/2014-02-01-tiao-biao-skiplist.markdown","raw":"---\nlayout: post\ntitle: \"SkipList\"\ndate: 2014-02-01 10:21\ncomments: true\ncategories: Program\nkeywords: skiplist\ndescription: skiplist, leveldb\n---\n\n@huangSir Golang\"B\".,Leveldb,memtable\n\n* [](#)\n* [](#)\n* [](#)\n\n<h3 id=\"\"></h3>\n\n{% img /images/2014/01/skiplist.png %}\n\n[Skip List](http://zh.wikipedia.org/wiki/%E8%B7%B3%E8%B7%83%E5%88%97%E8%A1%A8)\n\n* \n* O(log n)\n* \n* \n\n<h3 id=\"\"></h3>\n\n* skiplist\n\n```c\nstruct node {\n    int key;\n    int value;   \n    node *next[1];  \n}\n```\n\nnodec * next[1] \n\n* skiplist\n\n```c\nstruct skiplist\n{\n    int level; //\n    node *header;\n};\n```\n\n\n\n\n* \n\nNULLMAX_LEVEL\n\n```c\nnode *createNode(int level, int key, int value) {\n    node *ns = (node *) malloc(sizeof(node) + level * sizeof(node*));\n    ns->key = key;\n    ns->value = value;\n    return ns;\n}\n\nskiplist* createSkiplist() {\n    skiplist *sl = (skiplist *)malloc(sizeof(skiplist));\n    sl->level = 0;\n    sl->header = createNode(MAX_LEVEL-1,0,0);\n    for(int i=0; i<MAX_LEVEL; i++) {\n        sl->header->next[i] = NULL;\n    }\n    return sl;\n}\n```\n\n* \n\n :\n\n- \n- \n- .\n\n```\nbool insert(skiplist *sl,int key,int value) {\n    node *update[MAX_LEVEL];\n    node *p, *q = NULL;\n    p = sl->header;\n    int k = sl->level;\n    for(int i = k-1; i >= 0; i--) {\n        while((q = p->next[i]) && (q->key<key)) {\n            p = q;\n        }\n        update[i]=p;\n    }\n    if(q && q->key == key) return false;\n    //K,q, \n    k = randomLevel();\n    //level\n    if(k > (sl->level)) {\n        for(int i = sl->level; i < k; i++){\n            update[i] = sl->header;\n        }\n        sl->level = k;\n    }\n    q = createNode(k, key, value);\n    //\n    for(int i = 0;i<k;i++)\n    {\n        q->next[i] = update[i]->next[i];\n        update[i]->next[i] = q;\n    }\n    return true;\n}\n```\n\n* \n\nupdatelevel\n\n```c\nbool deleteSL(skiplist *sl,int key) {\n    node *update[MAX_LEVEL];\n    node *p,*q = NULL;\n    p = sl->header;\n    //\n    int k=sl->level;\n    for(int i = k-1; i >= 0; i--){\n        while((q = p->next[i]) && (q->key<key)) {\n            p = q;\n        }\n        update[i] = p;\n    }\n    if(q && q->key == key) {\n        //\n        for(int i = 0; i<sl->level; i++){\n            if(update[i]->next[i] == q){\n                update[i]->next[i] = q->next[i];\n            }\n        }\n        free(q);\n        //\n        for(int i=sl->level-1; i >= 0; i--){\n            if(sl->header->forward[i]==NULL){\n                sl->level--;\n            }\n        }\n        return true;\n    }\n    else\n        return false;\n}\n```\n\n* \n\n \n\n```c\nint search(skiplist * sl, int key) {\n    node * p, *q = NULL;\n    p = sl->header;\n    int k = sl->level;\n    for (int i = k-1; i >= 0; i--) {\n        while ((q = p->forward[i]) && q->key <= key) {\n            if (q->key == key) {\n                return q->value;\n            }\n            p = q;\n        }\n    }\n    return NULL;\n}\n```\n\n<h3 id=\"\"></h3>\nleveldbmemtable.c RedisKVskiplistleveldbkey-val, (),O(logn)\n\n<h3></h3>\n- [wikipedia](http://zh.wikipedia.org/wiki/%E8%B7%B3%E8%B7%83%E5%88%97%E8%A1%A8) \n- [skiplist](http://blog.csdn.net/ict2014/article/details/17394259)\n- [source code](https://github.com/zheng-ji/ToyCollection/skiplist)\n\n\n","slug":"2014-02-01-tiao-biao-skiplist","published":1,"updated":"2018-07-01T05:54:54.000Z","photos":[],"link":"","_id":"cjv8xui4q001wm1tj76uqx7cg","content":"<p>@huangSir GolangB.,Leveldb,memtable</p>\n<ul>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<img src=\"/images/2014/01/skiplist.png\">\n<p><a href=\"http://zh.wikipedia.org/wiki/%E8%B7%B3%E8%B7%83%E5%88%97%E8%A1%A8\" target=\"_blank\" rel=\"noopener\">Skip List</a></p>\n<ul>\n<li></li>\n<li>O(log n)</li>\n<li></li>\n<li></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<ul>\n<li>skiplist</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">node</span> &#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> key;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> value;   </span><br><span class=\"line\">    node *next[<span class=\"number\">1</span>];  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>nodec * next[1] </p>\n<ul>\n<li>skiplist</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">skiplist</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> level; <span class=\"comment\">//</span></span><br><span class=\"line\">    node *header;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li></li>\n</ul>\n<p>NULLMAX_LEVEL</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">node *<span class=\"title\">createNode</span><span class=\"params\">(<span class=\"keyword\">int</span> level, <span class=\"keyword\">int</span> key, <span class=\"keyword\">int</span> value)</span> </span>&#123;</span><br><span class=\"line\">    node *ns = (node *) <span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(node) + level * <span class=\"keyword\">sizeof</span>(node*));</span><br><span class=\"line\">    ns-&gt;key = key;</span><br><span class=\"line\">    ns-&gt;value = value;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ns;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">skiplist* <span class=\"title\">createSkiplist</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    skiplist *sl = (skiplist *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(skiplist));</span><br><span class=\"line\">    sl-&gt;level = <span class=\"number\">0</span>;</span><br><span class=\"line\">    sl-&gt;header = createNode(MAX_LEVEL<span class=\"number\">-1</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>; i&lt;MAX_LEVEL; i++) &#123;</span><br><span class=\"line\">        sl-&gt;header-&gt;next[i] = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sl;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p> :</p>\n<ul>\n<li></li>\n<li></li>\n<li>.</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bool insert(skiplist *sl,int key,int value) &#123;</span><br><span class=\"line\">    node *update[MAX_LEVEL];</span><br><span class=\"line\">    node *p, *q = NULL;</span><br><span class=\"line\">    p = sl-&gt;header;</span><br><span class=\"line\">    int k = sl-&gt;level;</span><br><span class=\"line\">    for(int i = k-1; i &gt;= 0; i--) &#123;</span><br><span class=\"line\">        while((q = p-&gt;next[i]) &amp;&amp; (q-&gt;key&lt;key)) &#123;</span><br><span class=\"line\">            p = q;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        update[i]=p;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    if(q &amp;&amp; q-&gt;key == key) return false;</span><br><span class=\"line\">    //K,q, </span><br><span class=\"line\">    k = randomLevel();</span><br><span class=\"line\">    //level</span><br><span class=\"line\">    if(k &gt; (sl-&gt;level)) &#123;</span><br><span class=\"line\">        for(int i = sl-&gt;level; i &lt; k; i++)&#123;</span><br><span class=\"line\">            update[i] = sl-&gt;header;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        sl-&gt;level = k;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    q = createNode(k, key, value);</span><br><span class=\"line\">    //</span><br><span class=\"line\">    for(int i = 0;i&lt;k;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        q-&gt;next[i] = update[i]-&gt;next[i];</span><br><span class=\"line\">        update[i]-&gt;next[i] = q;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return true;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p>updatelevel</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">deleteSL</span><span class=\"params\">(skiplist *sl,<span class=\"keyword\">int</span> key)</span> </span>&#123;</span><br><span class=\"line\">    node *update[MAX_LEVEL];</span><br><span class=\"line\">    node *p,*q = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    p = sl-&gt;header;</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> k=sl-&gt;level;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = k<span class=\"number\">-1</span>; i &gt;= <span class=\"number\">0</span>; i--)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>((q = p-&gt;next[i]) &amp;&amp; (q-&gt;key&lt;key)) &#123;</span><br><span class=\"line\">            p = q;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        update[i] = p;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(q &amp;&amp; q-&gt;key == key) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i&lt;sl-&gt;level; i++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(update[i]-&gt;next[i] == q)&#123;</span><br><span class=\"line\">                update[i]-&gt;next[i] = q-&gt;next[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">free</span>(q);</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=sl-&gt;level<span class=\"number\">-1</span>; i &gt;= <span class=\"number\">0</span>; i--)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(sl-&gt;header-&gt;forward[i]==<span class=\"literal\">NULL</span>)&#123;</span><br><span class=\"line\">                sl-&gt;level--;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p> </p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">search</span><span class=\"params\">(skiplist * sl, <span class=\"keyword\">int</span> key)</span> </span>&#123;</span><br><span class=\"line\">    node * p, *q = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    p = sl-&gt;header;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> k = sl-&gt;level;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = k<span class=\"number\">-1</span>; i &gt;= <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> ((q = p-&gt;forward[i]) &amp;&amp; q-&gt;key &lt;= key) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (q-&gt;key == key) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> q-&gt;value;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            p = q;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p><h3 id=\"\"></h3><br>leveldbmemtable.c RedisKVskiplistleveldbkey-val, (),O(logn)<p></p>\n<p></p><h3></h3><p></p>\n<ul>\n<li><a href=\"http://zh.wikipedia.org/wiki/%E8%B7%B3%E8%B7%83%E5%88%97%E8%A1%A8\" target=\"_blank\" rel=\"noopener\">wikipedia</a> </li>\n<li><a href=\"http://blog.csdn.net/ict2014/article/details/17394259\" target=\"_blank\" rel=\"noopener\">skiplist</a></li>\n<li><a href=\"https://github.com/zheng-ji/ToyCollection/skiplist\" target=\"_blank\" rel=\"noopener\">source code</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>@huangSir GolangB.,Leveldb,memtable</p>\n<ul>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<img src=\"/images/2014/01/skiplist.png\">\n<p><a href=\"http://zh.wikipedia.org/wiki/%E8%B7%B3%E8%B7%83%E5%88%97%E8%A1%A8\" target=\"_blank\" rel=\"noopener\">Skip List</a></p>\n<ul>\n<li></li>\n<li>O(log n)</li>\n<li></li>\n<li></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<ul>\n<li>skiplist</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">node</span> &#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> key;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> value;   </span><br><span class=\"line\">    node *next[<span class=\"number\">1</span>];  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>nodec * next[1] </p>\n<ul>\n<li>skiplist</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">skiplist</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> level; <span class=\"comment\">//</span></span><br><span class=\"line\">    node *header;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li></li>\n</ul>\n<p>NULLMAX_LEVEL</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">node *<span class=\"title\">createNode</span><span class=\"params\">(<span class=\"keyword\">int</span> level, <span class=\"keyword\">int</span> key, <span class=\"keyword\">int</span> value)</span> </span>&#123;</span><br><span class=\"line\">    node *ns = (node *) <span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(node) + level * <span class=\"keyword\">sizeof</span>(node*));</span><br><span class=\"line\">    ns-&gt;key = key;</span><br><span class=\"line\">    ns-&gt;value = value;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ns;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">skiplist* <span class=\"title\">createSkiplist</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    skiplist *sl = (skiplist *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(skiplist));</span><br><span class=\"line\">    sl-&gt;level = <span class=\"number\">0</span>;</span><br><span class=\"line\">    sl-&gt;header = createNode(MAX_LEVEL<span class=\"number\">-1</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>; i&lt;MAX_LEVEL; i++) &#123;</span><br><span class=\"line\">        sl-&gt;header-&gt;next[i] = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sl;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p> :</p>\n<ul>\n<li></li>\n<li></li>\n<li>.</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bool insert(skiplist *sl,int key,int value) &#123;</span><br><span class=\"line\">    node *update[MAX_LEVEL];</span><br><span class=\"line\">    node *p, *q = NULL;</span><br><span class=\"line\">    p = sl-&gt;header;</span><br><span class=\"line\">    int k = sl-&gt;level;</span><br><span class=\"line\">    for(int i = k-1; i &gt;= 0; i--) &#123;</span><br><span class=\"line\">        while((q = p-&gt;next[i]) &amp;&amp; (q-&gt;key&lt;key)) &#123;</span><br><span class=\"line\">            p = q;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        update[i]=p;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    if(q &amp;&amp; q-&gt;key == key) return false;</span><br><span class=\"line\">    //K,q, </span><br><span class=\"line\">    k = randomLevel();</span><br><span class=\"line\">    //level</span><br><span class=\"line\">    if(k &gt; (sl-&gt;level)) &#123;</span><br><span class=\"line\">        for(int i = sl-&gt;level; i &lt; k; i++)&#123;</span><br><span class=\"line\">            update[i] = sl-&gt;header;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        sl-&gt;level = k;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    q = createNode(k, key, value);</span><br><span class=\"line\">    //</span><br><span class=\"line\">    for(int i = 0;i&lt;k;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        q-&gt;next[i] = update[i]-&gt;next[i];</span><br><span class=\"line\">        update[i]-&gt;next[i] = q;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return true;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p>updatelevel</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">deleteSL</span><span class=\"params\">(skiplist *sl,<span class=\"keyword\">int</span> key)</span> </span>&#123;</span><br><span class=\"line\">    node *update[MAX_LEVEL];</span><br><span class=\"line\">    node *p,*q = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    p = sl-&gt;header;</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> k=sl-&gt;level;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = k<span class=\"number\">-1</span>; i &gt;= <span class=\"number\">0</span>; i--)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>((q = p-&gt;next[i]) &amp;&amp; (q-&gt;key&lt;key)) &#123;</span><br><span class=\"line\">            p = q;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        update[i] = p;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(q &amp;&amp; q-&gt;key == key) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i&lt;sl-&gt;level; i++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(update[i]-&gt;next[i] == q)&#123;</span><br><span class=\"line\">                update[i]-&gt;next[i] = q-&gt;next[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">free</span>(q);</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=sl-&gt;level<span class=\"number\">-1</span>; i &gt;= <span class=\"number\">0</span>; i--)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(sl-&gt;header-&gt;forward[i]==<span class=\"literal\">NULL</span>)&#123;</span><br><span class=\"line\">                sl-&gt;level--;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p> </p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">search</span><span class=\"params\">(skiplist * sl, <span class=\"keyword\">int</span> key)</span> </span>&#123;</span><br><span class=\"line\">    node * p, *q = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    p = sl-&gt;header;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> k = sl-&gt;level;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = k<span class=\"number\">-1</span>; i &gt;= <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> ((q = p-&gt;forward[i]) &amp;&amp; q-&gt;key &lt;= key) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (q-&gt;key == key) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> q-&gt;value;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            p = q;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p><h3 id=\"\"></h3><br>leveldbmemtable.c RedisKVskiplistleveldbkey-val, (),O(logn)<p></p>\n<p></p><h3></h3><p></p>\n<ul>\n<li><a href=\"http://zh.wikipedia.org/wiki/%E8%B7%B3%E8%B7%83%E5%88%97%E8%A1%A8\" target=\"_blank\" rel=\"noopener\">wikipedia</a> </li>\n<li><a href=\"http://blog.csdn.net/ict2014/article/details/17394259\" target=\"_blank\" rel=\"noopener\">skiplist</a></li>\n<li><a href=\"https://github.com/zheng-ji/ToyCollection/skiplist\" target=\"_blank\" rel=\"noopener\">source code</a></li>\n</ul>\n"},{"layout":"post","title":"socketYY","date":"2014-02-24T15:11:00.000Z","comments":1,"keywords":"socket ","description":"socket ","_content":", socket, ,  , \n\nsocket debug , \n\n Google \n\n### \n TCP . (PS: HTTP 1.1keep aliveHTTP  Cookie Session , HTTP   TCP)\n\n****, \n\n****: \n\n### \n\n+  TCP TCP ()\n\n+ TCP, \n\n### \nSocket8k , SetSockOpt \n\nTCP/UDP  IP ,   UDP ,  \n\n\n Header  Body Header . \n\n ++ ()\n\n### \n\n\n+ TCP  \n+ UDP   \n\n TCP   epoll  UDP  WSAEMSGSIZE  \n\nTCPUDP\n\n### \n\n\nTCP    UDP UDP () \n\n#### \n\nABTCP   TCP  B  UDP B TCP , \n\n YY, ,  YY\n\n,, \n\n","source":"_posts/2014-02-24-socketnian-bao.markdown","raw":"---\nlayout: post\ntitle: \"socketYY\"\ndate: 2014-02-24 23:11\ncomments: true\ncategories: NetWork \nkeywords: socket \ndescription: socket  \n---\n, socket, ,  , \n\nsocket debug , \n\n Google \n\n### \n TCP . (PS: HTTP 1.1keep aliveHTTP  Cookie Session , HTTP   TCP)\n\n****, \n\n****: \n\n### \n\n+  TCP TCP ()\n\n+ TCP, \n\n### \nSocket8k , SetSockOpt \n\nTCP/UDP  IP ,   UDP ,  \n\n\n Header  Body Header . \n\n ++ ()\n\n### \n\n\n+ TCP  \n+ UDP   \n\n TCP   epoll  UDP  WSAEMSGSIZE  \n\nTCPUDP\n\n### \n\n\nTCP    UDP UDP () \n\n#### \n\nABTCP   TCP  B  UDP B TCP , \n\n YY, ,  YY\n\n,, \n\n","slug":"2014-02-24-socketnian-bao","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui4r001ym1tjetrt9wyf","content":"<p>, socket, ,  , </p>\n<p>socket debug , </p>\n<p> Google </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> TCP . (PS: HTTP 1.1keep aliveHTTP  Cookie Session , HTTP   TCP)</p>\n<p><strong></strong>, </p>\n<p><strong></strong>: </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p> TCP TCP ()</p>\n</li>\n<li><p>TCP, </p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Socket8k , SetSockOpt </p>\n<p>TCP/UDP  IP ,   UDP ,  </p>\n<p><br> Header  Body Header . </p>\n<p> ++ ()</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<ul>\n<li>TCP  </li>\n<li>UDP   </li>\n</ul>\n<p> TCP   epoll  UDP  WSAEMSGSIZE  </p>\n<p>TCPUDP</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>TCP    UDP UDP () </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>ABTCP   TCP  B  UDP B TCP , </p>\n<p> YY, ,  YY</p>\n<p>,, </p>\n","site":{"data":{}},"excerpt":"","more":"<p>, socket, ,  , </p>\n<p>socket debug , </p>\n<p> Google </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> TCP . (PS: HTTP 1.1keep aliveHTTP  Cookie Session , HTTP   TCP)</p>\n<p><strong></strong>, </p>\n<p><strong></strong>: </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p> TCP TCP ()</p>\n</li>\n<li><p>TCP, </p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Socket8k , SetSockOpt </p>\n<p>TCP/UDP  IP ,   UDP ,  </p>\n<p><br> Header  Body Header . </p>\n<p> ++ ()</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<ul>\n<li>TCP  </li>\n<li>UDP   </li>\n</ul>\n<p> TCP   epoll  UDP  WSAEMSGSIZE  </p>\n<p>TCPUDP</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>TCP    UDP UDP () </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>ABTCP   TCP  B  UDP B TCP , </p>\n<p> YY, ,  YY</p>\n<p>,, </p>\n"},{"layout":"post","title":" Expect ","date":"2014-03-13T15:05:00.000Z","comments":1,"keywords":"expect","description":"expect","_content":"\n`linux`  *scp*, *telnet* \n\n *expect* \n\n###\n> Expect (Expect [is a] software suite for automating interactive tools)\n\nexpect  [Don Libes](http://en.wikipedia.org/wiki/Don_Libes) , expect-send\n\nexpect\n\n-------------------------------------------------\n\n helloworld, exp `#!/usr/bin/expect`\n\n```sh\n#!/usr/bin/expect\nsend_user \"hello world\"\n```\n\n send_user  echo \n\n### \n\n```\nset i 0    \nset user [lindex $argv 0]\nset timeout 300\nset i 0\nwhile { $i < 10 } {\n    puts $i;\n    incr i;\n}\n```\n\n:\n\n+ 0i;\n+ user;\n+ 300\n+ \n\n-------------------------\n\n expect,  spawn  expect  send , in short \n\n+ expect\n+ send\n+ expect eofspawn\n+ expect {}{, } switch\n\n \n\n```sh\n#!/usr/bin/expect\n  \nset timeout 10\nset host [lindex $argv 0]\nset username [lindex $argv 1]\nset password [lindex $argv 2]\n \nspawn ssh $username@$host\nexpect {\n    \"(yes/no)?\" {\n        send \"yes\\n\"\n        expect \"*assword:\" { send \"$password\\n\" }\n    }\n    \"*assword:\" {\n        send \"$password\\n\"\n    }\n}\n\nexpect \"$\"\nexpect eof\n```\n\n, .  `expect`  \"*assword:\",  `$password` ,  `$` spawn \n\n```\n./autosh.exp xxx(ip) xxx() xxx()\n```\n\n-----------------------------\n\n, \nHappy Hacking :-)\n\n\n","source":"_posts/2014-03-13-expect-yu-xi-tong-zi-dong-jiao-hu.markdown","raw":"---\nlayout: post\ntitle: \" Expect \"\ndate: 2014-03-13 23:05\ncomments: true\ncategories: Program\nkeywords: expect\ndescription: expect\n---\n\n`linux`  *scp*, *telnet* \n\n *expect* \n\n###\n> Expect (Expect [is a] software suite for automating interactive tools)\n\nexpect  [Don Libes](http://en.wikipedia.org/wiki/Don_Libes) , expect-send\n\nexpect\n\n-------------------------------------------------\n\n helloworld, exp `#!/usr/bin/expect`\n\n```sh\n#!/usr/bin/expect\nsend_user \"hello world\"\n```\n\n send_user  echo \n\n### \n\n```\nset i 0    \nset user [lindex $argv 0]\nset timeout 300\nset i 0\nwhile { $i < 10 } {\n    puts $i;\n    incr i;\n}\n```\n\n:\n\n+ 0i;\n+ user;\n+ 300\n+ \n\n-------------------------\n\n expect,  spawn  expect  send , in short \n\n+ expect\n+ send\n+ expect eofspawn\n+ expect {}{, } switch\n\n \n\n```sh\n#!/usr/bin/expect\n  \nset timeout 10\nset host [lindex $argv 0]\nset username [lindex $argv 1]\nset password [lindex $argv 2]\n \nspawn ssh $username@$host\nexpect {\n    \"(yes/no)?\" {\n        send \"yes\\n\"\n        expect \"*assword:\" { send \"$password\\n\" }\n    }\n    \"*assword:\" {\n        send \"$password\\n\"\n    }\n}\n\nexpect \"$\"\nexpect eof\n```\n\n, .  `expect`  \"*assword:\",  `$password` ,  `$` spawn \n\n```\n./autosh.exp xxx(ip) xxx() xxx()\n```\n\n-----------------------------\n\n, \nHappy Hacking :-)\n\n\n","slug":"2014-03-13-expect-yu-xi-tong-zi-dong-jiao-hu","published":1,"updated":"2018-07-01T05:55:10.000Z","photos":[],"link":"","_id":"cjv8xui4t0020m1tjds219qi2","content":"<p><code>linux</code>  <em>scp</em>, <em>telnet</em> </p>\n<p> <em>expect</em> </p>\n<p>###</p>\n<blockquote>\n<p>Expect (Expect [is a] software suite for automating interactive tools)</p>\n</blockquote>\n<p>expect  <a href=\"http://en.wikipedia.org/wiki/Don_Libes\" target=\"_blank\" rel=\"noopener\">Don Libes</a> , expect-send</p>\n<p>expect</p>\n<hr>\n<p> helloworld, exp <code>#!/usr/bin/expect</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/expect</span></span><br><span class=\"line\">send_user <span class=\"string\">\"hello world\"</span></span><br></pre></td></tr></table></figure>\n<p> send_user  echo </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set i 0    </span><br><span class=\"line\">set user [lindex $argv 0]</span><br><span class=\"line\">set timeout 300</span><br><span class=\"line\">set i 0</span><br><span class=\"line\">while &#123; $i &lt; 10 &#125; &#123;</span><br><span class=\"line\">    puts $i;</span><br><span class=\"line\">    incr i;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<ul>\n<li>0i;</li>\n<li>user;</li>\n<li>300</li>\n<li></li>\n</ul>\n<hr>\n<p> expect,  spawn  expect  send , in short </p>\n<ul>\n<li>expect</li>\n<li>send</li>\n<li>expect eofspawn</li>\n<li>expect {}{, } switch</li>\n</ul>\n<p> </p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/expect</span></span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"built_in\">set</span> timeout 10</span><br><span class=\"line\"><span class=\"built_in\">set</span> host [lindex <span class=\"variable\">$argv</span> 0]</span><br><span class=\"line\"><span class=\"built_in\">set</span> username [lindex <span class=\"variable\">$argv</span> 1]</span><br><span class=\"line\"><span class=\"built_in\">set</span> password [lindex <span class=\"variable\">$argv</span> 2]</span><br><span class=\"line\"> </span><br><span class=\"line\">spawn ssh <span class=\"variable\">$username</span>@<span class=\"variable\">$host</span></span><br><span class=\"line\">expect &#123;</span><br><span class=\"line\">    <span class=\"string\">\"(yes/no)?\"</span> &#123;</span><br><span class=\"line\">        send <span class=\"string\">\"yes\\n\"</span></span><br><span class=\"line\">        expect <span class=\"string\">\"*assword:\"</span> &#123; send <span class=\"string\">\"<span class=\"variable\">$password</span>\\n\"</span> &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"string\">\"*assword:\"</span> &#123;</span><br><span class=\"line\">        send <span class=\"string\">\"<span class=\"variable\">$password</span>\\n\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">expect <span class=\"string\">\"$\"</span></span><br><span class=\"line\">expect eof</span><br></pre></td></tr></table></figure>\n<p>, .  <code>expect</code>  *assword:,  <code>$password</code> ,  <code>$</code> spawn </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./autosh.exp xxx(ip) xxx() xxx()</span><br></pre></td></tr></table></figure>\n<hr>\n<p>, <br>Happy Hacking :-)</p>\n","site":{"data":{}},"excerpt":"","more":"<p><code>linux</code>  <em>scp</em>, <em>telnet</em> </p>\n<p> <em>expect</em> </p>\n<p>###</p>\n<blockquote>\n<p>Expect (Expect [is a] software suite for automating interactive tools)</p>\n</blockquote>\n<p>expect  <a href=\"http://en.wikipedia.org/wiki/Don_Libes\" target=\"_blank\" rel=\"noopener\">Don Libes</a> , expect-send</p>\n<p>expect</p>\n<hr>\n<p> helloworld, exp <code>#!/usr/bin/expect</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/expect</span></span><br><span class=\"line\">send_user <span class=\"string\">\"hello world\"</span></span><br></pre></td></tr></table></figure>\n<p> send_user  echo </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set i 0    </span><br><span class=\"line\">set user [lindex $argv 0]</span><br><span class=\"line\">set timeout 300</span><br><span class=\"line\">set i 0</span><br><span class=\"line\">while &#123; $i &lt; 10 &#125; &#123;</span><br><span class=\"line\">    puts $i;</span><br><span class=\"line\">    incr i;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<ul>\n<li>0i;</li>\n<li>user;</li>\n<li>300</li>\n<li></li>\n</ul>\n<hr>\n<p> expect,  spawn  expect  send , in short </p>\n<ul>\n<li>expect</li>\n<li>send</li>\n<li>expect eofspawn</li>\n<li>expect {}{, } switch</li>\n</ul>\n<p> </p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/expect</span></span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"built_in\">set</span> timeout 10</span><br><span class=\"line\"><span class=\"built_in\">set</span> host [lindex <span class=\"variable\">$argv</span> 0]</span><br><span class=\"line\"><span class=\"built_in\">set</span> username [lindex <span class=\"variable\">$argv</span> 1]</span><br><span class=\"line\"><span class=\"built_in\">set</span> password [lindex <span class=\"variable\">$argv</span> 2]</span><br><span class=\"line\"> </span><br><span class=\"line\">spawn ssh <span class=\"variable\">$username</span>@<span class=\"variable\">$host</span></span><br><span class=\"line\">expect &#123;</span><br><span class=\"line\">    <span class=\"string\">\"(yes/no)?\"</span> &#123;</span><br><span class=\"line\">        send <span class=\"string\">\"yes\\n\"</span></span><br><span class=\"line\">        expect <span class=\"string\">\"*assword:\"</span> &#123; send <span class=\"string\">\"<span class=\"variable\">$password</span>\\n\"</span> &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"string\">\"*assword:\"</span> &#123;</span><br><span class=\"line\">        send <span class=\"string\">\"<span class=\"variable\">$password</span>\\n\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">expect <span class=\"string\">\"$\"</span></span><br><span class=\"line\">expect eof</span><br></pre></td></tr></table></figure>\n<p>, .  <code>expect</code>  *assword:,  <code>$password</code> ,  <code>$</code> spawn </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./autosh.exp xxx(ip) xxx() xxx()</span><br></pre></td></tr></table></figure>\n<hr>\n<p>, <br>Happy Hacking :-)</p>\n"},{"layout":"post","title":"","date":"2014-04-22T11:32:00.000Z","comments":1,"description":"","_content":"  \n\n   Team \n\n   leader \n\n\n### \n   C++10\n   \n\n   * UIphpmyadmin;\n   * ;\n   * ;\n   * trace ;\n   * crontab;\n   * ,;\n\n   \n\n\n### \n\n   `` ()  (), KPI  `markdown`  markdown \n\n\n###something\n   \n\n   C++CGIPM \n\n   \n\n----\n\n\n","source":"_posts/2014-04-22-liu-xia-liao-xie-dong-xi.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2014-04-22 19:32\ncomments: true\ncategories: Product \ndescription:   \n---\n  \n\n   Team \n\n   leader \n\n\n### \n   C++10\n   \n\n   * UIphpmyadmin;\n   * ;\n   * ;\n   * trace ;\n   * crontab;\n   * ,;\n\n   \n\n\n### \n\n   `` ()  (), KPI  `markdown`  markdown \n\n\n###something\n   \n\n   C++CGIPM \n\n   \n\n----\n\n\n","slug":"2014-04-22-liu-xia-liao-xie-dong-xi","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui4u0022m1tj0t497ro1","content":"<p>  </p>\n<p>   Team </p>\n<p>   leader </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>   C++10<br>   </p>\n<ul>\n<li>UIphpmyadmin;</li>\n<li>;</li>\n<li>;</li>\n<li>trace ;</li>\n<li>crontab;</li>\n<li><p>,;</p>\n<p></p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>   <code></code> ()  (), KPI  <code>markdown</code>  markdown </p>\n<p>###something<br>   </p>\n<p>   C++CGIPM </p>\n<p>   </p>\n<hr>\n<p></p>\n","site":{"data":{}},"excerpt":"","more":"<p>  </p>\n<p>   Team </p>\n<p>   leader </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>   C++10<br>   </p>\n<ul>\n<li>UIphpmyadmin;</li>\n<li>;</li>\n<li>;</li>\n<li>trace ;</li>\n<li>crontab;</li>\n<li><p>,;</p>\n<p></p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>   <code></code> ()  (), KPI  <code>markdown</code>  markdown </p>\n<p>###something<br>   </p>\n<p>   C++CGIPM </p>\n<p>   </p>\n<hr>\n<p></p>\n"},{"layout":"post","title":"","date":"2014-04-28T04:18:00.000Z","comments":1,"_content":"\"\n\nuc,jh20135\n\n*2013-06-20* [](http://www.youku.com/playlist_show/id_6096855.html)\n\n#### ####\n\n,\n\n* \n* \n* \n* \n\n`53231323`353231323 C-Am-G-E-DmBm7-F \n\n\n4/4,\n\n####  #####\n, ,112 \n = =\n\n\n#### ####\n\n\nRSS\n\n#### ####\nucjazz [](http://www.daweijita.com/?p=1958) \n\njh\n\n#### solo###\n\n\n\n\n> * \n> * \n> * \n> * \n> * \n> * \n> * \n> * \n> * \n> * \n> * \n> * ..........\n\n\n\n**Practice make Perfect, **\n\nAPP\n\n,3.4w RMB .~~\n{% img /images/2014/04/guitar.jpg %}\n\n---\n,\n\n,\n\n,\n\n SB \n\n2014-04-28 \n\n","source":"_posts/2014-04-28-wei-wen-yi-lu.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2014-04-28 12:18\ncomments: true\ncategories: Life\n---\n\"\n\nuc,jh20135\n\n*2013-06-20* [](http://www.youku.com/playlist_show/id_6096855.html)\n\n#### ####\n\n,\n\n* \n* \n* \n* \n\n`53231323`353231323 C-Am-G-E-DmBm7-F \n\n\n4/4,\n\n####  #####\n, ,112 \n = =\n\n\n#### ####\n\n\nRSS\n\n#### ####\nucjazz [](http://www.daweijita.com/?p=1958) \n\njh\n\n#### solo###\n\n\n\n\n> * \n> * \n> * \n> * \n> * \n> * \n> * \n> * \n> * \n> * \n> * \n> * ..........\n\n\n\n**Practice make Perfect, **\n\nAPP\n\n,3.4w RMB .~~\n{% img /images/2014/04/guitar.jpg %}\n\n---\n,\n\n,\n\n,\n\n SB \n\n2014-04-28 \n\n","slug":"2014-04-28-wei-wen-yi-lu","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui4v0024m1tj92v4coxc","content":"<p></p>\n<p>uc,jh20135</p>\n<p><em>2013-06-20</em> <a href=\"http://www.youku.com/playlist_show/id_6096855.html\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>#### ####</p>\n<p>,</p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p><code>53231323</code>353231323 C-Am-G-E-DmBm7-F </p>\n<p>4/4,</p>\n<p>####  #####<br>, ,112<br> = =</p>\n<p>#### ####<br></p>\n<p>RSS</p>\n<p>#### ####<br>ucjazz <a href=\"http://www.daweijita.com/?p=1958\" target=\"_blank\" rel=\"noopener\"></a> </p>\n<p>jh</p>\n<p>#### solo###<br></p>\n<p></p>\n<blockquote>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>.</li>\n</ul>\n</blockquote>\n<p></p>\n<p><strong>Practice make Perfect, </strong></p>\n<p>APP</p>\n<p>,3.4w RMB .~~<br><img src=\"/images/2014/04/guitar.jpg\"></p>\n<hr>\n<p>,</p>\n<p>,</p>\n<p>,</p>\n<p> SB </p>\n<p>2014-04-28 </p>\n","site":{"data":{}},"excerpt":"","more":"<p></p>\n<p>uc,jh20135</p>\n<p><em>2013-06-20</em> <a href=\"http://www.youku.com/playlist_show/id_6096855.html\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>#### ####</p>\n<p>,</p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p><code>53231323</code>353231323 C-Am-G-E-DmBm7-F </p>\n<p>4/4,</p>\n<p>####  #####<br>, ,112<br> = =</p>\n<p>#### ####<br></p>\n<p>RSS</p>\n<p>#### ####<br>ucjazz <a href=\"http://www.daweijita.com/?p=1958\" target=\"_blank\" rel=\"noopener\"></a> </p>\n<p>jh</p>\n<p>#### solo###<br></p>\n<p></p>\n<blockquote>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>.</li>\n</ul>\n</blockquote>\n<p></p>\n<p><strong>Practice make Perfect, </strong></p>\n<p>APP</p>\n<p>,3.4w RMB .~~<br><img src=\"/images/2014/04/guitar.jpg\"></p>\n<hr>\n<p>,</p>\n<p>,</p>\n<p>,</p>\n<p> SB </p>\n<p>2014-04-28 </p>\n"},{"layout":"post","title":"Mac  Go","date":"2014-05-03T01:32:00.000Z","comments":1,"description":"mac golang","_content":"\n `~.zshrc`, \n\n```\nexport GOROOT=$HOME/go\nexport GOBIN=$GOROOT/bin\nexport PATH=$PATH:$GOBIN\nexport GOPATH=/Users/zj/workspace/gocode\n```\n\n\n,\n hg, ,  \n\n```\nsudo easy_install mercurial\nhg clone -u release https://code.google.com/p/go\ncd go/src\n./all.bash\n```\n\n,  go ,  Usage \n\n","source":"_posts/2014-05-03-mac-an-zhuang-go.markdown","raw":"---\nlayout: post\ntitle: \"Mac  Go\"\ndate: 2014-05-03 09:32\ncomments: true\ncategories: Program\ndescription: mac golang\n---\n\n `~.zshrc`, \n\n```\nexport GOROOT=$HOME/go\nexport GOBIN=$GOROOT/bin\nexport PATH=$PATH:$GOBIN\nexport GOPATH=/Users/zj/workspace/gocode\n```\n\n\n,\n hg, ,  \n\n```\nsudo easy_install mercurial\nhg clone -u release https://code.google.com/p/go\ncd go/src\n./all.bash\n```\n\n,  go ,  Usage \n\n","slug":"2014-05-03-mac-an-zhuang-go","published":1,"updated":"2018-07-01T05:55:25.000Z","photos":[],"link":"","_id":"cjv8xui4w0026m1tjs0e0khms","content":"<p> <code>~.zshrc</code>, </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export GOROOT=$HOME/go</span><br><span class=\"line\">export GOBIN=$GOROOT/bin</span><br><span class=\"line\">export PATH=$PATH:$GOBIN</span><br><span class=\"line\">export GOPATH=/Users/zj/workspace/gocode</span><br></pre></td></tr></table></figure>\n<p>,<br> hg, ,  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo easy_install mercurial</span><br><span class=\"line\">hg clone -u release https://code.google.com/p/go</span><br><span class=\"line\">cd go/src</span><br><span class=\"line\">./all.bash</span><br></pre></td></tr></table></figure>\n<p>,  go ,  Usage </p>\n","site":{"data":{}},"excerpt":"","more":"<p> <code>~.zshrc</code>, </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export GOROOT=$HOME/go</span><br><span class=\"line\">export GOBIN=$GOROOT/bin</span><br><span class=\"line\">export PATH=$PATH:$GOBIN</span><br><span class=\"line\">export GOPATH=/Users/zj/workspace/gocode</span><br></pre></td></tr></table></figure>\n<p>,<br> hg, ,  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo easy_install mercurial</span><br><span class=\"line\">hg clone -u release https://code.google.com/p/go</span><br><span class=\"line\">cd go/src</span><br><span class=\"line\">./all.bash</span><br></pre></td></tr></table></figure>\n<p>,  go ,  Usage </p>\n"},{"layout":"post","title":" setup.py","date":"2014-05-03T03:52:00.000Z","comments":1,"description":"python setuptool","_content":"\n Python Module  setuptools \n\n### \n\n demo \n\n```\nmkdir hacker\nvim foo.py\n```\n\n foo.py \n\n```python\nclass Hacker():\n    def __init__(self):\n        self.motto = \"No evil, Be Hacker\"\n    def printMotto(self):\n        print self.motto\n```\n\n setup.py, \n\n```python\nfrom distutils.core import setup\nsetup(name='Hacker',\n        version='1.0',\n        description='be hake or be hacked',\n        author='zheng-ji',\n        author_email='zhengji91@gmail.com',\n        url='http://zheng-ji.info',\n        py_modules=['foo'],\n        install_requires=[\"requests\"]\n     )\n```\n\n,\n\n```\nsudo python setup.py install\n```\n\n `/usr/lib/python2.7/` .  import foo, \n\n### \n\n```\npython setup.py install --record files.txt\ncat files.txt | xargs rm -rf\n```\n\n\n\n\n\n\n","source":"_posts/2014-05-03-make-setup-dot-py.markdown","raw":"---\nlayout: post\ntitle: \" setup.py\"\ndate: 2014-05-03 11:52\ncomments: true\ncategories: Program\ndescription: python setuptool\n---\n\n Python Module  setuptools \n\n### \n\n demo \n\n```\nmkdir hacker\nvim foo.py\n```\n\n foo.py \n\n```python\nclass Hacker():\n    def __init__(self):\n        self.motto = \"No evil, Be Hacker\"\n    def printMotto(self):\n        print self.motto\n```\n\n setup.py, \n\n```python\nfrom distutils.core import setup\nsetup(name='Hacker',\n        version='1.0',\n        description='be hake or be hacked',\n        author='zheng-ji',\n        author_email='zhengji91@gmail.com',\n        url='http://zheng-ji.info',\n        py_modules=['foo'],\n        install_requires=[\"requests\"]\n     )\n```\n\n,\n\n```\nsudo python setup.py install\n```\n\n `/usr/lib/python2.7/` .  import foo, \n\n### \n\n```\npython setup.py install --record files.txt\ncat files.txt | xargs rm -rf\n```\n\n\n\n\n\n\n","slug":"2014-05-03-make-setup-dot-py","published":1,"updated":"2018-07-01T05:55:34.000Z","photos":[],"link":"","_id":"cjv8xui4x0028m1tj9vhjj5jm","content":"<p> Python Module  setuptools </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> demo </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir hacker</span><br><span class=\"line\">vim foo.py</span><br></pre></td></tr></table></figure>\n<p> foo.py </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Hacker</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        self.motto = <span class=\"string\">\"No evil, Be Hacker\"</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">printMotto</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">print</span> self.motto</span><br></pre></td></tr></table></figure>\n<p> setup.py, </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> distutils.core <span class=\"keyword\">import</span> setup</span><br><span class=\"line\">setup(name=<span class=\"string\">'Hacker'</span>,</span><br><span class=\"line\">        version=<span class=\"string\">'1.0'</span>,</span><br><span class=\"line\">        description=<span class=\"string\">'be hake or be hacked'</span>,</span><br><span class=\"line\">        author=<span class=\"string\">'zheng-ji'</span>,</span><br><span class=\"line\">        author_email=<span class=\"string\">'zhengji91@gmail.com'</span>,</span><br><span class=\"line\">        url=<span class=\"string\">'http://zheng-ji.info'</span>,</span><br><span class=\"line\">        py_modules=[<span class=\"string\">'foo'</span>],</span><br><span class=\"line\">        install_requires=[<span class=\"string\">\"requests\"</span>]</span><br><span class=\"line\">     )</span><br></pre></td></tr></table></figure>\n<p>,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo python setup.py install</span><br></pre></td></tr></table></figure>\n<p> <code>/usr/lib/python2.7/</code> .  import foo, </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python setup.py install --record files.txt</span><br><span class=\"line\">cat files.txt | xargs rm -rf</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p> Python Module  setuptools </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> demo </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir hacker</span><br><span class=\"line\">vim foo.py</span><br></pre></td></tr></table></figure>\n<p> foo.py </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Hacker</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        self.motto = <span class=\"string\">\"No evil, Be Hacker\"</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">printMotto</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">print</span> self.motto</span><br></pre></td></tr></table></figure>\n<p> setup.py, </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> distutils.core <span class=\"keyword\">import</span> setup</span><br><span class=\"line\">setup(name=<span class=\"string\">'Hacker'</span>,</span><br><span class=\"line\">        version=<span class=\"string\">'1.0'</span>,</span><br><span class=\"line\">        description=<span class=\"string\">'be hake or be hacked'</span>,</span><br><span class=\"line\">        author=<span class=\"string\">'zheng-ji'</span>,</span><br><span class=\"line\">        author_email=<span class=\"string\">'zhengji91@gmail.com'</span>,</span><br><span class=\"line\">        url=<span class=\"string\">'http://zheng-ji.info'</span>,</span><br><span class=\"line\">        py_modules=[<span class=\"string\">'foo'</span>],</span><br><span class=\"line\">        install_requires=[<span class=\"string\">\"requests\"</span>]</span><br><span class=\"line\">     )</span><br></pre></td></tr></table></figure>\n<p>,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo python setup.py install</span><br></pre></td></tr></table></figure>\n<p> <code>/usr/lib/python2.7/</code> .  import foo, </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python setup.py install --record files.txt</span><br><span class=\"line\">cat files.txt | xargs rm -rf</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"","date":"2014-06-21T08:05:00.000Z","comments":1,"_content":"\n  , \n\n\n  Twitter [wiki](http://wiki.zheng-ji.info)\n\n\n  \n Powerful\n\n\n  \n\n\n   uc,jh 10\n\n\n  \n\n\n \n\n\n\n\n","source":"_posts/2014-06-21-da-mo-de-qing-chun.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2014-06-21 16:05\ncomments: true\ncategories: Life  \n---\n\n  , \n\n\n  Twitter [wiki](http://wiki.zheng-ji.info)\n\n\n  \n Powerful\n\n\n  \n\n\n   uc,jh 10\n\n\n  \n\n\n \n\n\n\n\n","slug":"2014-06-21-da-mo-de-qing-chun","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui4y002am1tj4i24foab","content":"<p>  , </p>\n<p>  Twitter <a href=\"http://wiki.zheng-ji.info\" target=\"_blank\" rel=\"noopener\">wiki</a></p>\n<p>  <br> Powerful</p>\n<p>  </p>\n<p>   uc,jh 10</p>\n<p>  </p>\n<p> </p>\n<p></p>\n","site":{"data":{}},"excerpt":"","more":"<p>  , </p>\n<p>  Twitter <a href=\"http://wiki.zheng-ji.info\" target=\"_blank\" rel=\"noopener\">wiki</a></p>\n<p>  <br> Powerful</p>\n<p>  </p>\n<p>   uc,jh 10</p>\n<p>  </p>\n<p> </p>\n<p></p>\n"},{"layout":"post","title":"Go Protobuf","date":"2014-07-12T09:39:00.000Z","comments":1,"_content":"\nprotobuf \n\n\n* \n* \n\n, \n\n### \n\n,\n\n```\ngo get code.google.com/p/goprotobuf/{proto, protoc-gen-go}\n\ngo install code.google.com/p/goprotobuf/proto\n\nsudo apt-get install protobuf-compiler\n```\n\n### \n\nproto., \n\n```\nprotoc --go_out=. xxx.proto\n```\n\n","source":"_posts/2014-07-12-goan-zhuang-protobuf.markdown","raw":"---\nlayout: post\ntitle: \"Go Protobuf\"\ndate: 2014-07-12 17:39\ncomments: true\ncategories: Program\n---\n\nprotobuf \n\n\n* \n* \n\n, \n\n### \n\n,\n\n```\ngo get code.google.com/p/goprotobuf/{proto, protoc-gen-go}\n\ngo install code.google.com/p/goprotobuf/proto\n\nsudo apt-get install protobuf-compiler\n```\n\n### \n\nproto., \n\n```\nprotoc --go_out=. xxx.proto\n```\n\n","slug":"2014-07-12-goan-zhuang-protobuf","published":1,"updated":"2018-07-01T05:55:50.000Z","photos":[],"link":"","_id":"cjv8xui4z002cm1tjoldjo4de","content":"<p>protobuf <br></p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<p>, </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">go get code.google.com/p/goprotobuf/&#123;proto, protoc-gen-go&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">go install code.google.com/p/goprotobuf/proto</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-get install protobuf-compiler</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>proto., </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protoc --go_out=. xxx.proto</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>protobuf <br></p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<p>, </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">go get code.google.com/p/goprotobuf/&#123;proto, protoc-gen-go&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">go install code.google.com/p/goprotobuf/proto</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-get install protobuf-compiler</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>proto., </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protoc --go_out=. xxx.proto</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":" Docker","date":"2014-07-16T12:20:00.000Z","comments":1,"description":"ubuntu docker","_content":"\n  1 [docker](http://docs.docker.com/) Golang  \n\n### \n\n  Docker  Linux \n\n### \n\n* Docker server daemon\n* Docker \n* Docker  docker [](https://index.docker.io/)\n\n\n### docker?\n  virtualbox , CPU \n\n  Docker ,vagrant\n\n### \ndocker  ubuntu 12.04  `ubuntu:12.04`, ubuntu.\n\n```\nzj@zheng-ji:~$ sudo apt-get install docker.io\nzj@zheng-ji:~$ sudo docker pull ubuntu:12.04 \n```\n\n\n\n```\nzj@zheng-ji:~$ sudo docker images\n```\n\n bash docker\n\n```\nzj@zheng-ji:~$ sudo docker run -t -i -p 3000 ubuntu:12.04 /bin/bash\n```\n\n, \n\n```\nzj@zheng-ji:~$ mkdir /home/zj/test\n```\n\n [](https://registry.hub.docker.com/u/)  github  \n\n```\nsudo docker ps \n\n//commit  zhengji/helloworld\nzj@zheng-ji:~$ docker ps\nCONTAINER ID        IMAGE                       COMMAND             CREATED             STATUS              PORTS                     NAMES\n8dad3aa4451f        zhengji/helloworld:latest   bin/bash            27 minutes ago      Up 27 minutes       0.0.0.0:49156->3000/tcp   high_galileo      \n```\n\n CONTAINER ID\n\n\n\n```\nzj@zheng-ji:~$ sudo docker commit 8dad3aa4451f zhengji/helloworld -m \"test\"\n61f9527f368395ee228af07062b3f1a26fa7143ba2721c4f9755ae93d588358e\n\nzj@zheng-ji:~$ sudo docker push zhengji/helloworld\n```\n\npull \n\n```\nsudo docker pull zhengji/helloworld\n```\n\n----------\n\n### \n\n*  /etc/default/docker.io , DNS\n\n```\nDOCKER_OPTS = \"-dns 8.8.8.8\"\n```\n\n*  ufw \n\n```\nvim /etc/default/ufw\nDEFAULT_FORWARD_POLICY = \"ACCEPT\"\n```\n\n\n### \n\n* [docker ](http://www.docker.org.cn/book/docker.html)\n* [docker](http://www.docker.org.cn/book/docker.html)\n* [Docker](http://segmentfault.com/a/1190000000366923)\n\n\n","source":"_posts/2014-07-16-zhe-teng-docker.markdown","raw":"---\nlayout: post\ntitle: \" Docker\"\ndate: 2014-07-16 20:20\ncomments: true\ncategories: Server \ndescription: ubuntu docker\n---\n\n  1 [docker](http://docs.docker.com/) Golang  \n\n### \n\n  Docker  Linux \n\n### \n\n* Docker server daemon\n* Docker \n* Docker  docker [](https://index.docker.io/)\n\n\n### docker?\n  virtualbox , CPU \n\n  Docker ,vagrant\n\n### \ndocker  ubuntu 12.04  `ubuntu:12.04`, ubuntu.\n\n```\nzj@zheng-ji:~$ sudo apt-get install docker.io\nzj@zheng-ji:~$ sudo docker pull ubuntu:12.04 \n```\n\n\n\n```\nzj@zheng-ji:~$ sudo docker images\n```\n\n bash docker\n\n```\nzj@zheng-ji:~$ sudo docker run -t -i -p 3000 ubuntu:12.04 /bin/bash\n```\n\n, \n\n```\nzj@zheng-ji:~$ mkdir /home/zj/test\n```\n\n [](https://registry.hub.docker.com/u/)  github  \n\n```\nsudo docker ps \n\n//commit  zhengji/helloworld\nzj@zheng-ji:~$ docker ps\nCONTAINER ID        IMAGE                       COMMAND             CREATED             STATUS              PORTS                     NAMES\n8dad3aa4451f        zhengji/helloworld:latest   bin/bash            27 minutes ago      Up 27 minutes       0.0.0.0:49156->3000/tcp   high_galileo      \n```\n\n CONTAINER ID\n\n\n\n```\nzj@zheng-ji:~$ sudo docker commit 8dad3aa4451f zhengji/helloworld -m \"test\"\n61f9527f368395ee228af07062b3f1a26fa7143ba2721c4f9755ae93d588358e\n\nzj@zheng-ji:~$ sudo docker push zhengji/helloworld\n```\n\npull \n\n```\nsudo docker pull zhengji/helloworld\n```\n\n----------\n\n### \n\n*  /etc/default/docker.io , DNS\n\n```\nDOCKER_OPTS = \"-dns 8.8.8.8\"\n```\n\n*  ufw \n\n```\nvim /etc/default/ufw\nDEFAULT_FORWARD_POLICY = \"ACCEPT\"\n```\n\n\n### \n\n* [docker ](http://www.docker.org.cn/book/docker.html)\n* [docker](http://www.docker.org.cn/book/docker.html)\n* [Docker](http://segmentfault.com/a/1190000000366923)\n\n\n","slug":"2014-07-16-zhe-teng-docker","published":1,"updated":"2018-07-01T05:55:56.000Z","photos":[],"link":"","_id":"cjv8xui51002em1tj8ebjj4sb","content":"<p>  1 <a href=\"http://docs.docker.com/\" target=\"_blank\" rel=\"noopener\">docker</a> Golang  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  Docker  Linux </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>Docker server daemon</li>\n<li>Docker </li>\n<li>Docker  docker <a href=\"https://index.docker.io/\" target=\"_blank\" rel=\"noopener\"></a></li>\n</ul>\n<h3 id=\"docker\"><a href=\"#docker\" class=\"headerlink\" title=\"docker?\"></a>docker?</h3><p>  virtualbox , CPU </p>\n<p>  Docker ,vagrant</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>docker  ubuntu 12.04  <code>ubuntu:12.04</code>, ubuntu.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@zheng-ji:~$ sudo apt-get install docker.io</span><br><span class=\"line\">zj@zheng-ji:~$ sudo docker pull ubuntu:12.04</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@zheng-ji:~$ sudo docker images</span><br></pre></td></tr></table></figure>\n<p> bash docker</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@zheng-ji:~$ sudo docker run -t -i -p 3000 ubuntu:12.04 /bin/bash</span><br></pre></td></tr></table></figure>\n<p>, </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@zheng-ji:~$ mkdir /home/zj/test</span><br></pre></td></tr></table></figure>\n<p> <a href=\"https://registry.hub.docker.com/u/\" target=\"_blank\" rel=\"noopener\"></a>  github  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker ps </span><br><span class=\"line\"></span><br><span class=\"line\">//commit  zhengji/helloworld</span><br><span class=\"line\">zj@zheng-ji:~$ docker ps</span><br><span class=\"line\">CONTAINER ID        IMAGE                       COMMAND             CREATED             STATUS              PORTS                     NAMES</span><br><span class=\"line\">8dad3aa4451f        zhengji/helloworld:latest   bin/bash            27 minutes ago      Up 27 minutes       0.0.0.0:49156-&gt;3000/tcp   high_galileo</span><br></pre></td></tr></table></figure>\n<p> CONTAINER ID</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@zheng-ji:~$ sudo docker commit 8dad3aa4451f zhengji/helloworld -m &quot;test&quot;</span><br><span class=\"line\">61f9527f368395ee228af07062b3f1a26fa7143ba2721c4f9755ae93d588358e</span><br><span class=\"line\"></span><br><span class=\"line\">zj@zheng-ji:~$ sudo docker push zhengji/helloworld</span><br></pre></td></tr></table></figure>\n<p>pull </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker pull zhengji/helloworld</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li> /etc/default/docker.io , DNS</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DOCKER_OPTS = &quot;-dns 8.8.8.8&quot;</span><br></pre></td></tr></table></figure>\n<ul>\n<li> ufw </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/default/ufw</span><br><span class=\"line\">DEFAULT_FORWARD_POLICY = &quot;ACCEPT&quot;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><a href=\"http://www.docker.org.cn/book/docker.html\" target=\"_blank\" rel=\"noopener\">docker </a></li>\n<li><a href=\"http://www.docker.org.cn/book/docker.html\" target=\"_blank\" rel=\"noopener\">docker</a></li>\n<li><a href=\"http://segmentfault.com/a/1190000000366923\" target=\"_blank\" rel=\"noopener\">Docker</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>  1 <a href=\"http://docs.docker.com/\" target=\"_blank\" rel=\"noopener\">docker</a> Golang  </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  Docker  Linux </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>Docker server daemon</li>\n<li>Docker </li>\n<li>Docker  docker <a href=\"https://index.docker.io/\" target=\"_blank\" rel=\"noopener\"></a></li>\n</ul>\n<h3 id=\"docker\"><a href=\"#docker\" class=\"headerlink\" title=\"docker?\"></a>docker?</h3><p>  virtualbox , CPU </p>\n<p>  Docker ,vagrant</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>docker  ubuntu 12.04  <code>ubuntu:12.04</code>, ubuntu.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@zheng-ji:~$ sudo apt-get install docker.io</span><br><span class=\"line\">zj@zheng-ji:~$ sudo docker pull ubuntu:12.04</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@zheng-ji:~$ sudo docker images</span><br></pre></td></tr></table></figure>\n<p> bash docker</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@zheng-ji:~$ sudo docker run -t -i -p 3000 ubuntu:12.04 /bin/bash</span><br></pre></td></tr></table></figure>\n<p>, </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@zheng-ji:~$ mkdir /home/zj/test</span><br></pre></td></tr></table></figure>\n<p> <a href=\"https://registry.hub.docker.com/u/\" target=\"_blank\" rel=\"noopener\"></a>  github  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker ps </span><br><span class=\"line\"></span><br><span class=\"line\">//commit  zhengji/helloworld</span><br><span class=\"line\">zj@zheng-ji:~$ docker ps</span><br><span class=\"line\">CONTAINER ID        IMAGE                       COMMAND             CREATED             STATUS              PORTS                     NAMES</span><br><span class=\"line\">8dad3aa4451f        zhengji/helloworld:latest   bin/bash            27 minutes ago      Up 27 minutes       0.0.0.0:49156-&gt;3000/tcp   high_galileo</span><br></pre></td></tr></table></figure>\n<p> CONTAINER ID</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@zheng-ji:~$ sudo docker commit 8dad3aa4451f zhengji/helloworld -m &quot;test&quot;</span><br><span class=\"line\">61f9527f368395ee228af07062b3f1a26fa7143ba2721c4f9755ae93d588358e</span><br><span class=\"line\"></span><br><span class=\"line\">zj@zheng-ji:~$ sudo docker push zhengji/helloworld</span><br></pre></td></tr></table></figure>\n<p>pull </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker pull zhengji/helloworld</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li> /etc/default/docker.io , DNS</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DOCKER_OPTS = &quot;-dns 8.8.8.8&quot;</span><br></pre></td></tr></table></figure>\n<ul>\n<li> ufw </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/default/ufw</span><br><span class=\"line\">DEFAULT_FORWARD_POLICY = &quot;ACCEPT&quot;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><a href=\"http://www.docker.org.cn/book/docker.html\" target=\"_blank\" rel=\"noopener\">docker </a></li>\n<li><a href=\"http://www.docker.org.cn/book/docker.html\" target=\"_blank\" rel=\"noopener\">docker</a></li>\n<li><a href=\"http://segmentfault.com/a/1190000000366923\" target=\"_blank\" rel=\"noopener\">Docker</a></li>\n</ul>\n"},{"layout":"post","title":"Percona Server ","date":"2014-09-07T07:31:00.000Z","comments":1,"description":"Mysql ","_content":"\n:\n\n+  \n+ \n\n mysql  Percona Server \n\n[](http://www.percona.com/doc/percona-server/5.5/installation/apt_repo.html)\n\n `/var/lib/mysql`, `/data/mysql/data` log  `/data/mysql/log` \n\n\n```\nsudo chown mysql:mysql  -R /data/mysql\n sudo mysql_install_db \n```\n\n\n `sudo service mysql stop`  [](http://serverfault.com/questions/32692/cant-start-stop-mysql-service/420222#420222)\n\n\n\n+  (Binary Log) \n+ \n+ \n\n\n\n\n+  CHANGE MASTER TO \n+ mysqlhotcopy,rsync\n+  CHANGE MASTER TO .\n+ `Percona Xtrabackup`    [](http://www.percona.com/doc/percona-xtrabackup/2.1/howtos/setting_up_replication.html)\n\n----\n\n### \n\n+ \n\n```\ninnobackupex --user=root --password=xxx /home/zj/backup\n```\n/home/zj/backup2014-08-21_10-11-4` \n\n+ `scp`(~/tmp`)data, \n\n```\nmv /data/mysql/data /data/mysql/data_bak\nmv ~/tmp/2014-08-21_10-11-46  /data/mysql/data\nchown mysql:mysql -R /data/mysql/data\n```\n\n+ \n\n```\nGRANT REPLICATION SLAVE ON *.*  TO 'repl'@'$slaveip' IDENTIFIED BY ''slavepass\n```\n\n+ ,\n\n```\nserver-id=2\n```\n\n+ \n\n\n\n```\ncat /data/mysql/data/xtrabackup_binlog_info\nlog-bin.000001     481\n```\n\n+  \n\n```\nmysql> CHANGE MASTER TO MASTER_HOST='$masterip',\n       MASTER_USER='repl',\n       MASTER_PASSWORD='$slavepass',\n       MASTER_LOG_FILE='log-bin.000001',\n       MASTER_LOG_POS=481;\nmysql> START SLAVE;\nmysql> SHOW SLAVE STATUS \\G\n ```\n\n-----\n\n \n\n[ mysql](http://book.douban.com/subject/23008813/)\n \n","source":"_posts/2014-09-07-percona-server-zuo-zhu-cong.markdown","raw":"---\nlayout: post\ntitle: \"Percona Server \"\ndate: 2014-09-07 15:31\ncomments: true\ndescription: Mysql \ncategories: DataBase\n---\n\n:\n\n+  \n+ \n\n mysql  Percona Server \n\n[](http://www.percona.com/doc/percona-server/5.5/installation/apt_repo.html)\n\n `/var/lib/mysql`, `/data/mysql/data` log  `/data/mysql/log` \n\n\n```\nsudo chown mysql:mysql  -R /data/mysql\n sudo mysql_install_db \n```\n\n\n `sudo service mysql stop`  [](http://serverfault.com/questions/32692/cant-start-stop-mysql-service/420222#420222)\n\n\n\n+  (Binary Log) \n+ \n+ \n\n\n\n\n+  CHANGE MASTER TO \n+ mysqlhotcopy,rsync\n+  CHANGE MASTER TO .\n+ `Percona Xtrabackup`    [](http://www.percona.com/doc/percona-xtrabackup/2.1/howtos/setting_up_replication.html)\n\n----\n\n### \n\n+ \n\n```\ninnobackupex --user=root --password=xxx /home/zj/backup\n```\n/home/zj/backup2014-08-21_10-11-4` \n\n+ `scp`(~/tmp`)data, \n\n```\nmv /data/mysql/data /data/mysql/data_bak\nmv ~/tmp/2014-08-21_10-11-46  /data/mysql/data\nchown mysql:mysql -R /data/mysql/data\n```\n\n+ \n\n```\nGRANT REPLICATION SLAVE ON *.*  TO 'repl'@'$slaveip' IDENTIFIED BY ''slavepass\n```\n\n+ ,\n\n```\nserver-id=2\n```\n\n+ \n\n\n\n```\ncat /data/mysql/data/xtrabackup_binlog_info\nlog-bin.000001     481\n```\n\n+  \n\n```\nmysql> CHANGE MASTER TO MASTER_HOST='$masterip',\n       MASTER_USER='repl',\n       MASTER_PASSWORD='$slavepass',\n       MASTER_LOG_FILE='log-bin.000001',\n       MASTER_LOG_POS=481;\nmysql> START SLAVE;\nmysql> SHOW SLAVE STATUS \\G\n ```\n\n-----\n\n \n\n[ mysql](http://book.douban.com/subject/23008813/)\n \n","slug":"2014-09-07-percona-server-zuo-zhu-cong","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui52002gm1tj8iqn4565","content":"<p>:</p>\n<ul>\n<li> </li>\n<li></li>\n</ul>\n<p> mysql  Percona Server </p>\n<p><a href=\"http://www.percona.com/doc/percona-server/5.5/installation/apt_repo.html\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p> <code>/var/lib/mysql</code>, <code>/data/mysql/data</code> log  <code>/data/mysql/log</code><br></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chown mysql:mysql  -R /data/mysql</span><br><span class=\"line\"> sudo mysql_install_db</span><br></pre></td></tr></table></figure>\n<p> <code>sudo service mysql stop</code>  <a href=\"http://serverfault.com/questions/32692/cant-start-stop-mysql-service/420222#420222\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p></p>\n<ul>\n<li> (Binary Log) </li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<ul>\n<li> CHANGE MASTER TO </li>\n<li>mysqlhotcopy,rsync</li>\n<li> CHANGE MASTER TO .</li>\n<li><code>Percona Xtrabackup</code>    <a href=\"http://www.percona.com/doc/percona-xtrabackup/2.1/howtos/setting_up_replication.html\" target=\"_blank\" rel=\"noopener\"></a></li>\n</ul>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">innobackupex --user=root --password=xxx /home/zj/backup</span><br></pre></td></tr></table></figure>\n<p>/home/zj/backup2014-08-21_10-11-4` </p>\n<ul>\n<li><code>scp</code>(~/tmp`)data, </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv /data/mysql/data /data/mysql/data_bak</span><br><span class=\"line\">mv ~/tmp/2014-08-21_10-11-46  /data/mysql/data</span><br><span class=\"line\">chown mysql:mysql -R /data/mysql/data</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GRANT REPLICATION SLAVE ON *.*  TO &apos;repl&apos;@&apos;$slaveip&apos; IDENTIFIED BY &apos;&apos;slavepass</span><br></pre></td></tr></table></figure>\n<ul>\n<li>,</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server-id=2</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /data/mysql/data/xtrabackup_binlog_info</span><br><span class=\"line\">log-bin.000001     481</span><br></pre></td></tr></table></figure>\n<ul>\n<li> </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; CHANGE MASTER TO MASTER_HOST=&apos;$masterip&apos;,</span><br><span class=\"line\">       MASTER_USER=&apos;repl&apos;,</span><br><span class=\"line\">       MASTER_PASSWORD=&apos;$slavepass&apos;,</span><br><span class=\"line\">       MASTER_LOG_FILE=&apos;log-bin.000001&apos;,</span><br><span class=\"line\">       MASTER_LOG_POS=481;</span><br><span class=\"line\">mysql&gt; START SLAVE;</span><br><span class=\"line\">mysql&gt; SHOW SLAVE STATUS \\G</span><br></pre></td></tr></table></figure>\n<hr>\n<p> </p>\n<p><a href=\"http://book.douban.com/subject/23008813/\" target=\"_blank\" rel=\"noopener\"> mysql</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>:</p>\n<ul>\n<li> </li>\n<li></li>\n</ul>\n<p> mysql  Percona Server </p>\n<p><a href=\"http://www.percona.com/doc/percona-server/5.5/installation/apt_repo.html\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p> <code>/var/lib/mysql</code>, <code>/data/mysql/data</code> log  <code>/data/mysql/log</code><br></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chown mysql:mysql  -R /data/mysql</span><br><span class=\"line\"> sudo mysql_install_db</span><br></pre></td></tr></table></figure>\n<p> <code>sudo service mysql stop</code>  <a href=\"http://serverfault.com/questions/32692/cant-start-stop-mysql-service/420222#420222\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p></p>\n<ul>\n<li> (Binary Log) </li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<ul>\n<li> CHANGE MASTER TO </li>\n<li>mysqlhotcopy,rsync</li>\n<li> CHANGE MASTER TO .</li>\n<li><code>Percona Xtrabackup</code>    <a href=\"http://www.percona.com/doc/percona-xtrabackup/2.1/howtos/setting_up_replication.html\" target=\"_blank\" rel=\"noopener\"></a></li>\n</ul>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">innobackupex --user=root --password=xxx /home/zj/backup</span><br></pre></td></tr></table></figure>\n<p>/home/zj/backup2014-08-21_10-11-4` </p>\n<ul>\n<li><code>scp</code>(~/tmp`)data, </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv /data/mysql/data /data/mysql/data_bak</span><br><span class=\"line\">mv ~/tmp/2014-08-21_10-11-46  /data/mysql/data</span><br><span class=\"line\">chown mysql:mysql -R /data/mysql/data</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GRANT REPLICATION SLAVE ON *.*  TO &apos;repl&apos;@&apos;$slaveip&apos; IDENTIFIED BY &apos;&apos;slavepass</span><br></pre></td></tr></table></figure>\n<ul>\n<li>,</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server-id=2</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /data/mysql/data/xtrabackup_binlog_info</span><br><span class=\"line\">log-bin.000001     481</span><br></pre></td></tr></table></figure>\n<ul>\n<li> </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; CHANGE MASTER TO MASTER_HOST=&apos;$masterip&apos;,</span><br><span class=\"line\">       MASTER_USER=&apos;repl&apos;,</span><br><span class=\"line\">       MASTER_PASSWORD=&apos;$slavepass&apos;,</span><br><span class=\"line\">       MASTER_LOG_FILE=&apos;log-bin.000001&apos;,</span><br><span class=\"line\">       MASTER_LOG_POS=481;</span><br><span class=\"line\">mysql&gt; START SLAVE;</span><br><span class=\"line\">mysql&gt; SHOW SLAVE STATUS \\G</span><br></pre></td></tr></table></figure>\n<hr>\n<p> </p>\n<p><a href=\"http://book.douban.com/subject/23008813/\" target=\"_blank\" rel=\"noopener\"> mysql</a></p>\n"},{"layout":"post","title":"rsyslog ","date":"2014-07-27T06:26:00.000Z","comments":1,"keywords":"rsyslog ","description":"rsyslog ","_content":"\nRsyslog \n\n, ubuntu\n\n```\nvim /etc/default/rsyslog\nRSYSLOGD_OPTIONS=\"-c5 -r -x\"\n```\n\n,`rsyslog.conf`\n\n```\nvim /etc/rsyslog.conf\n$ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat\n$template DynFile, \"/data/log/%$year%%$month%%$day%/%$year%%$month%%$day%%$hour%.log\"\n$template dotalogformat, \"%msg%\\n\"\n```\n\n,  `/etc/rsysconf.d/your_business.conf`\n\n```\n# \n$ModLoad imtcp\n$InputTCPServerRun 1514\n\n# \nif $msg contains \"xx\" then ?DynFile;dotalogformat\n\n# syslog.log \n:msg, contains, \"xx\" ~\n```\n\n\n\n```\nsudo service rsyslog start\n```\n\n","source":"_posts/2014-07-27-rsyslog-jie-shou-yuan-cheng-ri-zhi.markdown","raw":"---\nlayout: post\ntitle: \"rsyslog \"\ndate: 2014-07-27 14:26\ncomments: true\nkeywords: rsyslog \ndescription: rsyslog \ncategories: Server\n---\n\nRsyslog \n\n, ubuntu\n\n```\nvim /etc/default/rsyslog\nRSYSLOGD_OPTIONS=\"-c5 -r -x\"\n```\n\n,`rsyslog.conf`\n\n```\nvim /etc/rsyslog.conf\n$ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat\n$template DynFile, \"/data/log/%$year%%$month%%$day%/%$year%%$month%%$day%%$hour%.log\"\n$template dotalogformat, \"%msg%\\n\"\n```\n\n,  `/etc/rsysconf.d/your_business.conf`\n\n```\n# \n$ModLoad imtcp\n$InputTCPServerRun 1514\n\n# \nif $msg contains \"xx\" then ?DynFile;dotalogformat\n\n# syslog.log \n:msg, contains, \"xx\" ~\n```\n\n\n\n```\nsudo service rsyslog start\n```\n\n","slug":"2014-07-27-rsyslog-jie-shou-yuan-cheng-ri-zhi","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui53002im1tj1r593y7q","content":"<p>Rsyslog </p>\n<p>, ubuntu</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/default/rsyslog</span><br><span class=\"line\">RSYSLOGD_OPTIONS=&quot;-c5 -r -x&quot;</span><br></pre></td></tr></table></figure>\n<p>,<code>rsyslog.conf</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/rsyslog.conf</span><br><span class=\"line\">$ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat</span><br><span class=\"line\">$template DynFile, &quot;/data/log/%$year%%$month%%$day%/%$year%%$month%%$day%%$hour%.log&quot;</span><br><span class=\"line\">$template dotalogformat, &quot;%msg%\\n&quot;</span><br></pre></td></tr></table></figure>\n<p>,  <code>/etc/rsysconf.d/your_business.conf</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># </span><br><span class=\"line\">$ModLoad imtcp</span><br><span class=\"line\">$InputTCPServerRun 1514</span><br><span class=\"line\"></span><br><span class=\"line\"># </span><br><span class=\"line\">if $msg contains &quot;xx&quot; then ?DynFile;dotalogformat</span><br><span class=\"line\"></span><br><span class=\"line\"># syslog.log </span><br><span class=\"line\">:msg, contains, &quot;xx&quot; ~</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service rsyslog start</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>Rsyslog </p>\n<p>, ubuntu</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/default/rsyslog</span><br><span class=\"line\">RSYSLOGD_OPTIONS=&quot;-c5 -r -x&quot;</span><br></pre></td></tr></table></figure>\n<p>,<code>rsyslog.conf</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/rsyslog.conf</span><br><span class=\"line\">$ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat</span><br><span class=\"line\">$template DynFile, &quot;/data/log/%$year%%$month%%$day%/%$year%%$month%%$day%%$hour%.log&quot;</span><br><span class=\"line\">$template dotalogformat, &quot;%msg%\\n&quot;</span><br></pre></td></tr></table></figure>\n<p>,  <code>/etc/rsysconf.d/your_business.conf</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># </span><br><span class=\"line\">$ModLoad imtcp</span><br><span class=\"line\">$InputTCPServerRun 1514</span><br><span class=\"line\"></span><br><span class=\"line\"># </span><br><span class=\"line\">if $msg contains &quot;xx&quot; then ?DynFile;dotalogformat</span><br><span class=\"line\"></span><br><span class=\"line\"># syslog.log </span><br><span class=\"line\">:msg, contains, &quot;xx&quot; ~</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service rsyslog start</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"","date":"2014-10-13T13:20:00.000Z","comments":1,"keywords":" Top","description":"","_content":"\n######\n\ntop 16G 12G, \n{% img /images/2014/10/top.png %}\n, 900+\n{% img /images/2014/10/nestat.png %}\n7.8G, 816G4G?\n\n.   `free -m` \n{% img /images/2014/10/free.png %}\n\n### Mem  ### \n+ total : 15875 , total = used + free\n+ used : 11900\n+ free : 3975\n+ shared 0\n+ buffers: Buffer Cache: 145\n+ cached: Page Cache: 5561\n\n### -/+ buffers/cache ####\n+ -buffers/cache : 6193 (1 used - buffers - cached), \n+ +buffers/cache : 9682 (1 free + buffers + cached), \n\n### cache ###\ncpu , Linux, Cache, , Cache I/O(read,write,getdents)\n\n+ Buffer Cache, \n+ Page Cacheinode\n\n###  ###\n\n1`(mem)used/free`2`(-/+ buffers/cache) used/free`:\n\n+ OSbuffers/cached 3975M,11900MB,,OS + + buffers + cached.\n+ 2buffers/cached buffer/cached\n\n```\n=free memory + buffers + cached.\n```\n12.2G7.9G 5.6(cache+buffer) +  4G free .\n\n :) \n","source":"_posts/2014-10-13-nei-cun-du-qu-na-er-la.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2014-10-13 21:20\ncomments: true\nkeywords:  Top\ndescription: \ncategories: System\n---\n\n######\n\ntop 16G 12G, \n{% img /images/2014/10/top.png %}\n, 900+\n{% img /images/2014/10/nestat.png %}\n7.8G, 816G4G?\n\n.   `free -m` \n{% img /images/2014/10/free.png %}\n\n### Mem  ### \n+ total : 15875 , total = used + free\n+ used : 11900\n+ free : 3975\n+ shared 0\n+ buffers: Buffer Cache: 145\n+ cached: Page Cache: 5561\n\n### -/+ buffers/cache ####\n+ -buffers/cache : 6193 (1 used - buffers - cached), \n+ +buffers/cache : 9682 (1 free + buffers + cached), \n\n### cache ###\ncpu , Linux, Cache, , Cache I/O(read,write,getdents)\n\n+ Buffer Cache, \n+ Page Cacheinode\n\n###  ###\n\n1`(mem)used/free`2`(-/+ buffers/cache) used/free`:\n\n+ OSbuffers/cached 3975M,11900MB,,OS + + buffers + cached.\n+ 2buffers/cached buffer/cached\n\n```\n=free memory + buffers + cached.\n```\n12.2G7.9G 5.6(cache+buffer) +  4G free .\n\n :) \n","slug":"2014-10-13-nei-cun-du-qu-na-er-la","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui54002km1tj4qpqnjr4","content":"<p>######</p>\n<p>top 16G 12G, <br><img src=\"/images/2014/10/top.png\"><br>, 900+<br><img src=\"/images/2014/10/nestat.png\"><br>7.8G, 816G4G?</p>\n<p>.   <code>free -m</code> <br><img src=\"/images/2014/10/free.png\"></p>\n<h3 id=\"Mem--\"><a href=\"#Mem--\" class=\"headerlink\" title=\"Mem  \"></a>Mem  </h3><ul>\n<li>total : 15875 , total = used + free</li>\n<li>used : 11900</li>\n<li>free : 3975</li>\n<li>shared 0</li>\n<li>buffers: Buffer Cache: 145</li>\n<li>cached: Page Cache: 5561</li>\n</ul>\n<h3 id=\"buffers-cache\"><a href=\"#buffers-cache\" class=\"headerlink\" title=\"-/+ buffers/cache\"></a>-/+ buffers/cache</h3><ul>\n<li>-buffers/cache : 6193 (1 used - buffers - cached), </li>\n<li>+buffers/cache : 9682 (1 free + buffers + cached), </li>\n</ul>\n<h3 id=\"cache\"><a href=\"#cache\" class=\"headerlink\" title=\"cache\"></a>cache</h3><p>cpu , Linux, Cache, , Cache I/O(read,write,getdents)</p>\n<ul>\n<li>Buffer Cache, </li>\n<li>Page Cacheinode</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>1<code>(mem)used/free</code>2<code>(-/+ buffers/cache) used/free</code>:</p>\n<ul>\n<li>OSbuffers/cached 3975M,11900MB,,OS + + buffers + cached.</li>\n<li>2buffers/cached buffer/cached</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=free memory + buffers + cached.</span><br></pre></td></tr></table></figure>\n<p>12.2G7.9G 5.6(cache+buffer) +  4G free .</p>\n<p> :) </p>\n","site":{"data":{}},"excerpt":"","more":"<p>######</p>\n<p>top 16G 12G, <br><img src=\"/images/2014/10/top.png\"><br>, 900+<br><img src=\"/images/2014/10/nestat.png\"><br>7.8G, 816G4G?</p>\n<p>.   <code>free -m</code> <br><img src=\"/images/2014/10/free.png\"></p>\n<h3 id=\"Mem--\"><a href=\"#Mem--\" class=\"headerlink\" title=\"Mem  \"></a>Mem  </h3><ul>\n<li>total : 15875 , total = used + free</li>\n<li>used : 11900</li>\n<li>free : 3975</li>\n<li>shared 0</li>\n<li>buffers: Buffer Cache: 145</li>\n<li>cached: Page Cache: 5561</li>\n</ul>\n<h3 id=\"buffers-cache\"><a href=\"#buffers-cache\" class=\"headerlink\" title=\"-/+ buffers/cache\"></a>-/+ buffers/cache</h3><ul>\n<li>-buffers/cache : 6193 (1 used - buffers - cached), </li>\n<li>+buffers/cache : 9682 (1 free + buffers + cached), </li>\n</ul>\n<h3 id=\"cache\"><a href=\"#cache\" class=\"headerlink\" title=\"cache\"></a>cache</h3><p>cpu , Linux, Cache, , Cache I/O(read,write,getdents)</p>\n<ul>\n<li>Buffer Cache, </li>\n<li>Page Cacheinode</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>1<code>(mem)used/free</code>2<code>(-/+ buffers/cache) used/free</code>:</p>\n<ul>\n<li>OSbuffers/cached 3975M,11900MB,,OS + + buffers + cached.</li>\n<li>2buffers/cached buffer/cached</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=free memory + buffers + cached.</span><br></pre></td></tr></table></figure>\n<p>12.2G7.9G 5.6(cache+buffer) +  4G free .</p>\n<p> :) </p>\n"},{"layout":"post","title":"redis ","date":"2014-10-04T14:28:00.000Z","comments":1,"description":"Redis slave","_content":"\nRedisRedis\n\n\n* A  redis \n* B  A  redis \n\n\n## \n\n B  redis :\n\n```\nslaveof  IP \n```\n\n B  master,\n\n```\nredis-in-b-host> slaveof no one\n```\n\nB\n\n## Tips;\n\n5 A \n\n```\nbgsave\n```\n dumps.rdb\n","source":"_posts/2014-10-04-redisre-bei.markdown","raw":"---\nlayout: post\ntitle: \"redis \"\ndate: 2014-10-04 22:28\ncomments: true\ndescription: Redis slave\ncategories: DataBase\n---\n\nRedisRedis\n\n\n* A  redis \n* B  A  redis \n\n\n## \n\n B  redis :\n\n```\nslaveof  IP \n```\n\n B  master,\n\n```\nredis-in-b-host> slaveof no one\n```\n\nB\n\n## Tips;\n\n5 A \n\n```\nbgsave\n```\n dumps.rdb\n","slug":"2014-10-04-redisre-bei","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui55002mm1tjvcadjcby","content":"<p>RedisRedis<br></p>\n<ul>\n<li>A  redis </li>\n<li>B  A  redis </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> B  redis :</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">slaveof  IP </span><br></pre></td></tr></table></figure>\n<p> B  master,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis-in-b-host&gt; slaveof no one</span><br></pre></td></tr></table></figure>\n<p>B</p>\n<h2 id=\"Tips\"><a href=\"#Tips\" class=\"headerlink\" title=\"Tips;\"></a>Tips;</h2><p>5 A </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bgsave</span><br></pre></td></tr></table></figure>\n<p> dumps.rdb</p>\n","site":{"data":{}},"excerpt":"","more":"<p>RedisRedis<br></p>\n<ul>\n<li>A  redis </li>\n<li>B  A  redis </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> B  redis :</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">slaveof  IP </span><br></pre></td></tr></table></figure>\n<p> B  master,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis-in-b-host&gt; slaveof no one</span><br></pre></td></tr></table></figure>\n<p>B</p>\n<h2 id=\"Tips\"><a href=\"#Tips\" class=\"headerlink\" title=\"Tips;\"></a>Tips;</h2><p>5 A </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bgsave</span><br></pre></td></tr></table></figure>\n<p> dumps.rdb</p>\n"},{"layout":"post","title":"iptable  NAT ","date":"2014-10-29T14:38:00.000Z","comments":1,"keywords":"NAT iptables","description":"NAT iptables","_content":"\n:\n\n2, (ServerA),IP,(ServerB),  ServerB \n\n* ServerA \n\n```\nvi /etc/sysctl.conf\nnet.ipv4.ip_forward = 1\niptables -t nat -A POSTROUTING -s 10.4.0.0/16 -j MASQUERADE\n```\n\n\nServerB\n\n /etc/network/interface\ngateway  ServerA  IP\n\n```\nsudo ifdown eth0; sudo ifup eth0 ``` \nServerB \n","source":"_posts/2014-10-29-iptablezuo-natzhuan-fa.markdown","raw":"---\nlayout: post\ntitle: \"iptable  NAT \"\ndate: 2014-10-29 22:38\ncomments: true\nkeywords: NAT iptables\ndescription: NAT iptables\ncategories: System\n---\n\n:\n\n2, (ServerA),IP,(ServerB),  ServerB \n\n* ServerA \n\n```\nvi /etc/sysctl.conf\nnet.ipv4.ip_forward = 1\niptables -t nat -A POSTROUTING -s 10.4.0.0/16 -j MASQUERADE\n```\n\n\nServerB\n\n /etc/network/interface\ngateway  ServerA  IP\n\n```\nsudo ifdown eth0; sudo ifup eth0 ``` \nServerB \n","slug":"2014-10-29-iptablezuo-natzhuan-fa","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui57002pm1tjt9tcw25t","content":"<p>:</p>\n<p>2, (ServerA),IP,(ServerB),  ServerB </p>\n<ul>\n<li>ServerA </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/sysctl.conf</span><br><span class=\"line\">net.ipv4.ip_forward = 1</span><br><span class=\"line\">iptables -t nat -A POSTROUTING -s 10.4.0.0/16 -j MASQUERADE</span><br></pre></td></tr></table></figure>\n<p>ServerB</p>\n<p> /etc/network/interface<br>gateway  ServerA  IP</p>\n<pre><code>sudo ifdown eth0; sudo ifup eth0\n</code></pre><p>ServerB </p>\n","site":{"data":{}},"excerpt":"","more":"<p>:</p>\n<p>2, (ServerA),IP,(ServerB),  ServerB </p>\n<ul>\n<li>ServerA </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/sysctl.conf</span><br><span class=\"line\">net.ipv4.ip_forward = 1</span><br><span class=\"line\">iptables -t nat -A POSTROUTING -s 10.4.0.0/16 -j MASQUERADE</span><br></pre></td></tr></table></figure>\n<p>ServerB</p>\n<p> /etc/network/interface<br>gateway  ServerA  IP</p>\n<pre><code>sudo ifdown eth0; sudo ifup eth0\n</code></pre><p>ServerB </p>\n"},{"layout":"post","title":"","date":"2014-10-23T15:18:00.000Z","comments":1,"keywords":"MySQL Index","description":"MySQL Index","_content":"\n,Unique Index, ,,, `Duplicated Key entry Error`,\n\n######\n\n\n `UNIQUE INDEX(cuid, aid)`, , \n\n```\nselect cuid,aid from (\n    select cuid, aid,count(1) as num\n    from register_chn \n    group by cuid,aid having num > 1\n) t;\n```\n\n8,,, SQL ,\n\n```\ndelete from register_chn where (cuid,aid) in (\n    select cuid,aid from (\n        select cuid, aid,count(1) as num\n        from register_chn\n        group by cuid,aid having num > 1\n    ) t\n);\n```\n.., \n\n```\nBEGIN;\ndelete from register_chn where (cuid,aid) in (\n    select cuid,aid from (\n        select cuid, aid,count(1) as num\n        from register_chn\n        group by cuid,aid having num > 1\n    ) t\n);\nalter table register_chn add unique index(cuid, aid);\nCOMMINT;\n```\n\n######\n\n, , ,, SQL:\n\n```\nalter ignore table register_chn add unique index(cuid, aid)\n```\n\n, MySQL 5.0 5.6 bugPercona 5.5, \n\n\n```\nset session old_alter_table = on;\nalter ignore table register_chn add unique index(cuid, aid);\n```\n\n,\n\n```\nset session sql_log_bin=off. \n```\n, \n\n\n","source":"_posts/2014-10-24-mysql-unique-index.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2014-10-23 23:18\ncomments: true\nkeywords: MySQL Index\ndescription: MySQL Index\ncategories: DataBase\n---\n\n,Unique Index, ,,, `Duplicated Key entry Error`,\n\n######\n\n\n `UNIQUE INDEX(cuid, aid)`, , \n\n```\nselect cuid,aid from (\n    select cuid, aid,count(1) as num\n    from register_chn \n    group by cuid,aid having num > 1\n) t;\n```\n\n8,,, SQL ,\n\n```\ndelete from register_chn where (cuid,aid) in (\n    select cuid,aid from (\n        select cuid, aid,count(1) as num\n        from register_chn\n        group by cuid,aid having num > 1\n    ) t\n);\n```\n.., \n\n```\nBEGIN;\ndelete from register_chn where (cuid,aid) in (\n    select cuid,aid from (\n        select cuid, aid,count(1) as num\n        from register_chn\n        group by cuid,aid having num > 1\n    ) t\n);\nalter table register_chn add unique index(cuid, aid);\nCOMMINT;\n```\n\n######\n\n, , ,, SQL:\n\n```\nalter ignore table register_chn add unique index(cuid, aid)\n```\n\n, MySQL 5.0 5.6 bugPercona 5.5, \n\n\n```\nset session old_alter_table = on;\nalter ignore table register_chn add unique index(cuid, aid);\n```\n\n,\n\n```\nset session sql_log_bin=off. \n```\n, \n\n\n","slug":"2014-10-24-mysql-unique-index","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui5a002rm1tjrxydlxa3","content":"<p>,Unique Index, ,,, <code>Duplicated Key entry Error</code>,</p>\n<p>######</p>\n<p> <code>UNIQUE INDEX(cuid, aid)</code>, , </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select cuid,aid from (</span><br><span class=\"line\">    select cuid, aid,count(1) as num</span><br><span class=\"line\">    from register_chn </span><br><span class=\"line\">    group by cuid,aid having num &gt; 1</span><br><span class=\"line\">) t;</span><br></pre></td></tr></table></figure>\n<p>8,,, SQL ,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">delete from register_chn where (cuid,aid) in (</span><br><span class=\"line\">    select cuid,aid from (</span><br><span class=\"line\">        select cuid, aid,count(1) as num</span><br><span class=\"line\">        from register_chn</span><br><span class=\"line\">        group by cuid,aid having num &gt; 1</span><br><span class=\"line\">    ) t</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>.., </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">BEGIN;</span><br><span class=\"line\">delete from register_chn where (cuid,aid) in (</span><br><span class=\"line\">    select cuid,aid from (</span><br><span class=\"line\">        select cuid, aid,count(1) as num</span><br><span class=\"line\">        from register_chn</span><br><span class=\"line\">        group by cuid,aid having num &gt; 1</span><br><span class=\"line\">    ) t</span><br><span class=\"line\">);</span><br><span class=\"line\">alter table register_chn add unique index(cuid, aid);</span><br><span class=\"line\">COMMINT;</span><br></pre></td></tr></table></figure>\n<p>######</p>\n<p>, , ,, SQL:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter ignore table register_chn add unique index(cuid, aid)</span><br></pre></td></tr></table></figure>\n<p>, MySQL 5.0 5.6 bugPercona 5.5, <br></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set session old_alter_table = on;</span><br><span class=\"line\">alter ignore table register_chn add unique index(cuid, aid);</span><br></pre></td></tr></table></figure>\n<p>,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set session sql_log_bin=off.</span><br></pre></td></tr></table></figure>\n<p>, </p>\n","site":{"data":{}},"excerpt":"","more":"<p>,Unique Index, ,,, <code>Duplicated Key entry Error</code>,</p>\n<p>######</p>\n<p> <code>UNIQUE INDEX(cuid, aid)</code>, , </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select cuid,aid from (</span><br><span class=\"line\">    select cuid, aid,count(1) as num</span><br><span class=\"line\">    from register_chn </span><br><span class=\"line\">    group by cuid,aid having num &gt; 1</span><br><span class=\"line\">) t;</span><br></pre></td></tr></table></figure>\n<p>8,,, SQL ,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">delete from register_chn where (cuid,aid) in (</span><br><span class=\"line\">    select cuid,aid from (</span><br><span class=\"line\">        select cuid, aid,count(1) as num</span><br><span class=\"line\">        from register_chn</span><br><span class=\"line\">        group by cuid,aid having num &gt; 1</span><br><span class=\"line\">    ) t</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>.., </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">BEGIN;</span><br><span class=\"line\">delete from register_chn where (cuid,aid) in (</span><br><span class=\"line\">    select cuid,aid from (</span><br><span class=\"line\">        select cuid, aid,count(1) as num</span><br><span class=\"line\">        from register_chn</span><br><span class=\"line\">        group by cuid,aid having num &gt; 1</span><br><span class=\"line\">    ) t</span><br><span class=\"line\">);</span><br><span class=\"line\">alter table register_chn add unique index(cuid, aid);</span><br><span class=\"line\">COMMINT;</span><br></pre></td></tr></table></figure>\n<p>######</p>\n<p>, , ,, SQL:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter ignore table register_chn add unique index(cuid, aid)</span><br></pre></td></tr></table></figure>\n<p>, MySQL 5.0 5.6 bugPercona 5.5, <br></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set session old_alter_table = on;</span><br><span class=\"line\">alter ignore table register_chn add unique index(cuid, aid);</span><br></pre></td></tr></table></figure>\n<p>,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set session sql_log_bin=off.</span><br></pre></td></tr></table></figure>\n<p>, </p>\n"},{"layout":"post","title":"Nginxphp-fpm","date":"2014-11-02T07:46:00.000Z","comments":1,"keywords":"Nginx  PHP ","description":"Nginx  PHP ","_content":"\n, , ,  8core 8GCentos  php-fpm  NGINX\n\n###php-fpm ### \n\n php-fpm ,Ubuntu `/etc/php5/fpm/pool.d`, Centos`/etc/php-fpm.d``www.conf`\n\n```\nlisten = /var/run/php5-fpm.sock\nlisten.backlog = -1 (on FreeBSD -1 unlimit)\npm = static # \npm.max_children = 128\nrequest_terminate_timeout = 8s #workkill\n```\n\n `/etc/default/php5-fpm`\n\n```\nulimit -n 655360\n```\n\n###Nginx ###\n\n* irqbalance\n\nirqbalanceirqbalance CPU  CPU CPU \n\n```\nshell> yum -y install irqbalance\nshell> service irqbalance start\ncat /proc/irqbalance #\n```\n\n* nginx  cpu\n\n```\nworker_rlimit_nofile 300000;\nworker_processes  8;\nworker_cpu_affinity 00000001 00000010 00000100 00001000 00010000 00100000 01000000 10000000;\n```\n\n* \n\nnginx php-fpm socket\n\n```\nvi /etc/sysctl.conf \nfs.file-max = 6553600\n\nvim /etc/security/limits.conf\n* soft nofile 655360\n* hard nofile 655360\n\nvim /etc/nginx/nginx.conf\n\nworker_rlimit_nofile 300000;\nevents {\n    worker_connections 300000;\n    use epoll;\n}\nhttp {\n    keepalive_timeout  0; #keepalive_timeout, \n}\n```\n\n 8   = `worker_processes * worker_connections / 8`\n","source":"_posts/2014-11-02-nginxyu-phpxi-tong-can-shu-pei-zhi.markdown","raw":"---\nlayout: post\ntitle: \"Nginxphp-fpm\"\ndate: 2014-11-02 15:46\ncomments: true\nkeywords: Nginx  PHP \ndescription: Nginx  PHP \ncategories: System\n---\n\n, , ,  8core 8GCentos  php-fpm  NGINX\n\n###php-fpm ### \n\n php-fpm ,Ubuntu `/etc/php5/fpm/pool.d`, Centos`/etc/php-fpm.d``www.conf`\n\n```\nlisten = /var/run/php5-fpm.sock\nlisten.backlog = -1 (on FreeBSD -1 unlimit)\npm = static # \npm.max_children = 128\nrequest_terminate_timeout = 8s #workkill\n```\n\n `/etc/default/php5-fpm`\n\n```\nulimit -n 655360\n```\n\n###Nginx ###\n\n* irqbalance\n\nirqbalanceirqbalance CPU  CPU CPU \n\n```\nshell> yum -y install irqbalance\nshell> service irqbalance start\ncat /proc/irqbalance #\n```\n\n* nginx  cpu\n\n```\nworker_rlimit_nofile 300000;\nworker_processes  8;\nworker_cpu_affinity 00000001 00000010 00000100 00001000 00010000 00100000 01000000 10000000;\n```\n\n* \n\nnginx php-fpm socket\n\n```\nvi /etc/sysctl.conf \nfs.file-max = 6553600\n\nvim /etc/security/limits.conf\n* soft nofile 655360\n* hard nofile 655360\n\nvim /etc/nginx/nginx.conf\n\nworker_rlimit_nofile 300000;\nevents {\n    worker_connections 300000;\n    use epoll;\n}\nhttp {\n    keepalive_timeout  0; #keepalive_timeout, \n}\n```\n\n 8   = `worker_processes * worker_connections / 8`\n","slug":"2014-11-02-nginxyu-phpxi-tong-can-shu-pei-zhi","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui5b002tm1tjapxbhguc","content":"<p>, , ,  8core 8GCentos  php-fpm  NGINX</p>\n<p>###php-fpm ### </p>\n<p> php-fpm ,Ubuntu <code>/etc/php5/fpm/pool.d</code>, Centos<code>/etc/php-fpm.d</code><code>www.conf</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">listen = /var/run/php5-fpm.sock</span><br><span class=\"line\">listen.backlog = -1 (on FreeBSD -1 unlimit)</span><br><span class=\"line\">pm = static # </span><br><span class=\"line\">pm.max_children = 128</span><br><span class=\"line\">request_terminate_timeout = 8s #workkill</span><br></pre></td></tr></table></figure>\n<p> <code>/etc/default/php5-fpm</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ulimit -n 655360</span><br></pre></td></tr></table></figure>\n<p>###Nginx ###</p>\n<ul>\n<li>irqbalance</li>\n</ul>\n<p>irqbalanceirqbalance CPU  CPU CPU </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">shell&gt; yum -y install irqbalance</span><br><span class=\"line\">shell&gt; service irqbalance start</span><br><span class=\"line\">cat /proc/irqbalance #</span><br></pre></td></tr></table></figure>\n<ul>\n<li>nginx  cpu</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">worker_rlimit_nofile 300000;</span><br><span class=\"line\">worker_processes  8;</span><br><span class=\"line\">worker_cpu_affinity 00000001 00000010 00000100 00001000 00010000 00100000 01000000 10000000;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p>nginx php-fpm socket</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/sysctl.conf </span><br><span class=\"line\">fs.file-max = 6553600</span><br><span class=\"line\"></span><br><span class=\"line\">vim /etc/security/limits.conf</span><br><span class=\"line\">* soft nofile 655360</span><br><span class=\"line\">* hard nofile 655360</span><br><span class=\"line\"></span><br><span class=\"line\">vim /etc/nginx/nginx.conf</span><br><span class=\"line\"></span><br><span class=\"line\">worker_rlimit_nofile 300000;</span><br><span class=\"line\">events &#123;</span><br><span class=\"line\">    worker_connections 300000;</span><br><span class=\"line\">    use epoll;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">http &#123;</span><br><span class=\"line\">    keepalive_timeout  0; #keepalive_timeout, </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> 8   = <code>worker_processes * worker_connections / 8</code></p>\n","site":{"data":{}},"excerpt":"","more":"<p>, , ,  8core 8GCentos  php-fpm  NGINX</p>\n<p>###php-fpm ### </p>\n<p> php-fpm ,Ubuntu <code>/etc/php5/fpm/pool.d</code>, Centos<code>/etc/php-fpm.d</code><code>www.conf</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">listen = /var/run/php5-fpm.sock</span><br><span class=\"line\">listen.backlog = -1 (on FreeBSD -1 unlimit)</span><br><span class=\"line\">pm = static # </span><br><span class=\"line\">pm.max_children = 128</span><br><span class=\"line\">request_terminate_timeout = 8s #workkill</span><br></pre></td></tr></table></figure>\n<p> <code>/etc/default/php5-fpm</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ulimit -n 655360</span><br></pre></td></tr></table></figure>\n<p>###Nginx ###</p>\n<ul>\n<li>irqbalance</li>\n</ul>\n<p>irqbalanceirqbalance CPU  CPU CPU </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">shell&gt; yum -y install irqbalance</span><br><span class=\"line\">shell&gt; service irqbalance start</span><br><span class=\"line\">cat /proc/irqbalance #</span><br></pre></td></tr></table></figure>\n<ul>\n<li>nginx  cpu</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">worker_rlimit_nofile 300000;</span><br><span class=\"line\">worker_processes  8;</span><br><span class=\"line\">worker_cpu_affinity 00000001 00000010 00000100 00001000 00010000 00100000 01000000 10000000;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p>nginx php-fpm socket</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/sysctl.conf </span><br><span class=\"line\">fs.file-max = 6553600</span><br><span class=\"line\"></span><br><span class=\"line\">vim /etc/security/limits.conf</span><br><span class=\"line\">* soft nofile 655360</span><br><span class=\"line\">* hard nofile 655360</span><br><span class=\"line\"></span><br><span class=\"line\">vim /etc/nginx/nginx.conf</span><br><span class=\"line\"></span><br><span class=\"line\">worker_rlimit_nofile 300000;</span><br><span class=\"line\">events &#123;</span><br><span class=\"line\">    worker_connections 300000;</span><br><span class=\"line\">    use epoll;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">http &#123;</span><br><span class=\"line\">    keepalive_timeout  0; #keepalive_timeout, </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> 8   = <code>worker_processes * worker_connections / 8</code></p>\n"},{"layout":"post","title":"","date":"2014-11-25T14:20:00.000Z","comments":1,"_content":"\n,30.,\n\n,\n\n, EvertNote \n\n, ,, ,, , \n\n Everet , \n\n\n","source":"_posts/2014-11-25-tired.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2014-11-25 22:20\ncomments: true\ncategories: Life\n---\n\n,30.,\n\n,\n\n, EvertNote \n\n, ,, ,, , \n\n Everet , \n\n\n","slug":"2014-11-25-tired","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui5d002wm1tjk59ebgd8","content":"<p>,30.,</p>\n<p>,</p>\n<p>, EvertNote </p>\n<p>, ,, ,, , </p>\n<p> Everet , </p>\n<p></p>\n","site":{"data":{}},"excerpt":"","more":"<p>,30.,</p>\n<p>,</p>\n<p>, EvertNote </p>\n<p>, ,, ,, , </p>\n<p> Everet , </p>\n<p></p>\n"},{"layout":"post","title":"Tcpdump","date":"2014-11-29T06:15:00.000Z","comments":1,"_content":"\n`tcpdump`\n TcpDump\n\n```\ntcpdump -i eth0 -Xxn port 80 -s 0 -c 1024 \n```\n\nmanual  \n\n```\n-i \n-Xxn XAscii16n  ip \n-s 0 \n-c 1024 \n```\n\n `-w trace.cap`\n `wireshark`\n\nTcpdump  flag \n\n* PSH \n* RST RST=1\n* SYNC \n* FIN \n\n wireshark \n","source":"_posts/2014-11-29-yong-dao-de-tcpdump.markdown","raw":"---\nlayout: post\ntitle: \"Tcpdump\"\ndate: 2014-11-29 14:15\ncomments: true\ncategories: System\n---\n\n`tcpdump`\n TcpDump\n\n```\ntcpdump -i eth0 -Xxn port 80 -s 0 -c 1024 \n```\n\nmanual  \n\n```\n-i \n-Xxn XAscii16n  ip \n-s 0 \n-c 1024 \n```\n\n `-w trace.cap`\n `wireshark`\n\nTcpdump  flag \n\n* PSH \n* RST RST=1\n* SYNC \n* FIN \n\n wireshark \n","slug":"2014-11-29-yong-dao-de-tcpdump","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui5e002ym1tjwwu8bgwx","content":"<p><code>tcpdump</code><br> TcpDump</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tcpdump -i eth0 -Xxn port 80 -s 0 -c 1024</span><br></pre></td></tr></table></figure>\n<p>manual  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-i </span><br><span class=\"line\">-Xxn XAscii16n  ip </span><br><span class=\"line\">-s 0 </span><br><span class=\"line\">-c 1024 </span><br></pre></td></tr></table></figure>\n<p> <code>-w trace.cap</code><br> <code>wireshark</code></p>\n<p>Tcpdump  flag </p>\n<ul>\n<li>PSH </li>\n<li>RST RST=1</li>\n<li>SYNC </li>\n<li>FIN </li>\n</ul>\n<p> wireshark </p>\n","site":{"data":{}},"excerpt":"","more":"<p><code>tcpdump</code><br> TcpDump</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tcpdump -i eth0 -Xxn port 80 -s 0 -c 1024</span><br></pre></td></tr></table></figure>\n<p>manual  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-i </span><br><span class=\"line\">-Xxn XAscii16n  ip </span><br><span class=\"line\">-s 0 </span><br><span class=\"line\">-c 1024 </span><br></pre></td></tr></table></figure>\n<p> <code>-w trace.cap</code><br> <code>wireshark</code></p>\n<p>Tcpdump  flag </p>\n<ul>\n<li>PSH </li>\n<li>RST RST=1</li>\n<li>SYNC </li>\n<li>FIN </li>\n</ul>\n<p> wireshark </p>\n"},{"layout":"post","title":"Nginx ","date":"2014-12-13T07:18:00.000Z","comments":1,"description":"Nginx ","_content":"\n`Nginx` `error log`\n\n error , \n\n* upstream prematurely closed connection\n\n>uri upstream \n\n* recv() failed (104: Connection reset by peer) \n\n>Down;\n\n* (111: Connection refused) while connecting to upstream \n\n> upstream \n\n* (111: Connection refused) while reading response header from upstream \n\n> upstream \n\n* (111: Connection refused) while sending request to upstream \n\n>Nginx  upstream  upstream \n\n* (110: Connection timed out) while connecting to upstream \n\n>nginx  upstream \n\n* (110: Connection timed out) while reading upstream \n\n>nginx  upstream  \n\n* (110: Connection timed out) while reading response header from upstream \n\n>nginx  upstream \n\n* (110: Connection timed out) while reading upstream \n\n>nginx upstream \n\n* (104: Connection reset by peer) while connecting to upstream \n\n>upstream RST\n\n* upstream sent invalid header while reading response header from upstream \n\n>upstream \n\n* upstream sent no valid HTTP/1.0 header while reading response header from upstream\n\n>upstream \n\n* client intended to send too large body \n\n>1Mclient  body \n\n* reopening logs \n\n>kill  -USR1\n\n* gracefully shutting down\n\n>kill  -WINCH\n\n* no live upstreams while connecting to upstream \n\n>upstream  server \n\n\n* SSL_do_handshake() failed\n\n>SSL\n\n* ngx_slab_alloc() failed: no memory in SSL session shared cache\n\n>ssl_session_cache\n\n* could not add new SSL session to the session cache while SSL handshaking\n\n>ssl_session_cache \n","source":"_posts/2014-12-13-nginxcuo-wu-ma.markdown","raw":"---\nlayout: post\ntitle: \"Nginx \"\ndate: 2014-12-13 15:18\ncomments: true\ncategories: System\ndescription: Nginx \n---\n\n`Nginx` `error log`\n\n error , \n\n* upstream prematurely closed connection\n\n>uri upstream \n\n* recv() failed (104: Connection reset by peer) \n\n>Down;\n\n* (111: Connection refused) while connecting to upstream \n\n> upstream \n\n* (111: Connection refused) while reading response header from upstream \n\n> upstream \n\n* (111: Connection refused) while sending request to upstream \n\n>Nginx  upstream  upstream \n\n* (110: Connection timed out) while connecting to upstream \n\n>nginx  upstream \n\n* (110: Connection timed out) while reading upstream \n\n>nginx  upstream  \n\n* (110: Connection timed out) while reading response header from upstream \n\n>nginx  upstream \n\n* (110: Connection timed out) while reading upstream \n\n>nginx upstream \n\n* (104: Connection reset by peer) while connecting to upstream \n\n>upstream RST\n\n* upstream sent invalid header while reading response header from upstream \n\n>upstream \n\n* upstream sent no valid HTTP/1.0 header while reading response header from upstream\n\n>upstream \n\n* client intended to send too large body \n\n>1Mclient  body \n\n* reopening logs \n\n>kill  -USR1\n\n* gracefully shutting down\n\n>kill  -WINCH\n\n* no live upstreams while connecting to upstream \n\n>upstream  server \n\n\n* SSL_do_handshake() failed\n\n>SSL\n\n* ngx_slab_alloc() failed: no memory in SSL session shared cache\n\n>ssl_session_cache\n\n* could not add new SSL session to the session cache while SSL handshaking\n\n>ssl_session_cache \n","slug":"2014-12-13-nginxcuo-wu-ma","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui5g0030m1tjbgpzeldo","content":"<p><code>Nginx</code> <code>error log</code></p>\n<p> error , </p>\n<ul>\n<li>upstream prematurely closed connection</li>\n</ul>\n<blockquote>\n<p>uri upstream </p>\n</blockquote>\n<ul>\n<li>recv() failed (104: Connection reset by peer) </li>\n</ul>\n<blockquote>\n<p>Down;</p>\n</blockquote>\n<ul>\n<li>(111: Connection refused) while connecting to upstream </li>\n</ul>\n<blockquote>\n<p> upstream </p>\n</blockquote>\n<ul>\n<li>(111: Connection refused) while reading response header from upstream </li>\n</ul>\n<blockquote>\n<p> upstream </p>\n</blockquote>\n<ul>\n<li>(111: Connection refused) while sending request to upstream </li>\n</ul>\n<blockquote>\n<p>Nginx  upstream  upstream </p>\n</blockquote>\n<ul>\n<li>(110: Connection timed out) while connecting to upstream </li>\n</ul>\n<blockquote>\n<p>nginx  upstream </p>\n</blockquote>\n<ul>\n<li>(110: Connection timed out) while reading upstream </li>\n</ul>\n<blockquote>\n<p>nginx  upstream  </p>\n</blockquote>\n<ul>\n<li>(110: Connection timed out) while reading response header from upstream </li>\n</ul>\n<blockquote>\n<p>nginx  upstream </p>\n</blockquote>\n<ul>\n<li>(110: Connection timed out) while reading upstream </li>\n</ul>\n<blockquote>\n<p>nginx upstream </p>\n</blockquote>\n<ul>\n<li>(104: Connection reset by peer) while connecting to upstream </li>\n</ul>\n<blockquote>\n<p>upstream RST</p>\n</blockquote>\n<ul>\n<li>upstream sent invalid header while reading response header from upstream </li>\n</ul>\n<blockquote>\n<p>upstream </p>\n</blockquote>\n<ul>\n<li>upstream sent no valid HTTP/1.0 header while reading response header from upstream</li>\n</ul>\n<blockquote>\n<p>upstream </p>\n</blockquote>\n<ul>\n<li>client intended to send too large body </li>\n</ul>\n<blockquote>\n<p>1Mclient  body </p>\n</blockquote>\n<ul>\n<li>reopening logs </li>\n</ul>\n<blockquote>\n<p>kill  -USR1</p>\n</blockquote>\n<ul>\n<li>gracefully shutting down</li>\n</ul>\n<blockquote>\n<p>kill  -WINCH</p>\n</blockquote>\n<ul>\n<li>no live upstreams while connecting to upstream </li>\n</ul>\n<blockquote>\n<p>upstream  server </p>\n</blockquote>\n<ul>\n<li>SSL_do_handshake() failed</li>\n</ul>\n<blockquote>\n<p>SSL</p>\n</blockquote>\n<ul>\n<li>ngx_slab_alloc() failed: no memory in SSL session shared cache</li>\n</ul>\n<blockquote>\n<p>ssl_session_cache</p>\n</blockquote>\n<ul>\n<li>could not add new SSL session to the session cache while SSL handshaking</li>\n</ul>\n<blockquote>\n<p>ssl_session_cache </p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p><code>Nginx</code> <code>error log</code></p>\n<p> error , </p>\n<ul>\n<li>upstream prematurely closed connection</li>\n</ul>\n<blockquote>\n<p>uri upstream </p>\n</blockquote>\n<ul>\n<li>recv() failed (104: Connection reset by peer) </li>\n</ul>\n<blockquote>\n<p>Down;</p>\n</blockquote>\n<ul>\n<li>(111: Connection refused) while connecting to upstream </li>\n</ul>\n<blockquote>\n<p> upstream </p>\n</blockquote>\n<ul>\n<li>(111: Connection refused) while reading response header from upstream </li>\n</ul>\n<blockquote>\n<p> upstream </p>\n</blockquote>\n<ul>\n<li>(111: Connection refused) while sending request to upstream </li>\n</ul>\n<blockquote>\n<p>Nginx  upstream  upstream </p>\n</blockquote>\n<ul>\n<li>(110: Connection timed out) while connecting to upstream </li>\n</ul>\n<blockquote>\n<p>nginx  upstream </p>\n</blockquote>\n<ul>\n<li>(110: Connection timed out) while reading upstream </li>\n</ul>\n<blockquote>\n<p>nginx  upstream  </p>\n</blockquote>\n<ul>\n<li>(110: Connection timed out) while reading response header from upstream </li>\n</ul>\n<blockquote>\n<p>nginx  upstream </p>\n</blockquote>\n<ul>\n<li>(110: Connection timed out) while reading upstream </li>\n</ul>\n<blockquote>\n<p>nginx upstream </p>\n</blockquote>\n<ul>\n<li>(104: Connection reset by peer) while connecting to upstream </li>\n</ul>\n<blockquote>\n<p>upstream RST</p>\n</blockquote>\n<ul>\n<li>upstream sent invalid header while reading response header from upstream </li>\n</ul>\n<blockquote>\n<p>upstream </p>\n</blockquote>\n<ul>\n<li>upstream sent no valid HTTP/1.0 header while reading response header from upstream</li>\n</ul>\n<blockquote>\n<p>upstream </p>\n</blockquote>\n<ul>\n<li>client intended to send too large body </li>\n</ul>\n<blockquote>\n<p>1Mclient  body </p>\n</blockquote>\n<ul>\n<li>reopening logs </li>\n</ul>\n<blockquote>\n<p>kill  -USR1</p>\n</blockquote>\n<ul>\n<li>gracefully shutting down</li>\n</ul>\n<blockquote>\n<p>kill  -WINCH</p>\n</blockquote>\n<ul>\n<li>no live upstreams while connecting to upstream </li>\n</ul>\n<blockquote>\n<p>upstream  server </p>\n</blockquote>\n<ul>\n<li>SSL_do_handshake() failed</li>\n</ul>\n<blockquote>\n<p>SSL</p>\n</blockquote>\n<ul>\n<li>ngx_slab_alloc() failed: no memory in SSL session shared cache</li>\n</ul>\n<blockquote>\n<p>ssl_session_cache</p>\n</blockquote>\n<ul>\n<li>could not add new SSL session to the session cache while SSL handshaking</li>\n</ul>\n<blockquote>\n<p>ssl_session_cache </p>\n</blockquote>\n"},{"layout":"post","title":"Percona pt-archiver","date":"2015-01-21T15:27:00.000Z","comments":1,"keywords":"MySQL pt-archiver","_content":"\n `Percona toolkit`  `MySqlDump` \n\n+ `MySqlDump` \n+  , \n+  ()\n\n`Percona Toolkit` DBA [pt-archiver](http://www.percona.com/doc/percona-toolkit/2.1/pt-archiver.html) \n\n## pt-archiver \n\nOTLP\n\n> The goal is a low-impact, forward-only job to nibble old data out of the table without impacting OLTP queries much\n\n, , \n\n## \n\n```\npt-archiver [OPTION...] --source DSN --where WHERE\n```\n\n load data infile  delete \n\n\n\n```\npt-archiver --ask-pass --progress 100000 --no-delete --no-check-charset --source h=localhost,u=root,D=blog,t=comment--file /home/ubuntu/tmp/comment--where 'time < \"2013-12-31h\"'\n```\n\n\n\n```\n--ask-pass        \n--progress num    num\n--source h,D,t    \n--no-delete       \n--dry-run         \n--where           \n--limit           archive\n```\n\n### \n\n   mysql  `general log`, pt-archiver commit 816G  1kw , 150  , \n\n  \n","source":"_posts/2015-01-21-percona-toolkitxiao-xiang-li-di-pt-archiver.markdown","raw":"---\nlayout: post\ntitle: \"Percona pt-archiver\"\ndate: 2015-01-21 23:27\ncomments: true\nkeywords: MySQL pt-archiver\ncategories: DataBase\n---\n\n `Percona toolkit`  `MySqlDump` \n\n+ `MySqlDump` \n+  , \n+  ()\n\n`Percona Toolkit` DBA [pt-archiver](http://www.percona.com/doc/percona-toolkit/2.1/pt-archiver.html) \n\n## pt-archiver \n\nOTLP\n\n> The goal is a low-impact, forward-only job to nibble old data out of the table without impacting OLTP queries much\n\n, , \n\n## \n\n```\npt-archiver [OPTION...] --source DSN --where WHERE\n```\n\n load data infile  delete \n\n\n\n```\npt-archiver --ask-pass --progress 100000 --no-delete --no-check-charset --source h=localhost,u=root,D=blog,t=comment--file /home/ubuntu/tmp/comment--where 'time < \"2013-12-31h\"'\n```\n\n\n\n```\n--ask-pass        \n--progress num    num\n--source h,D,t    \n--no-delete       \n--dry-run         \n--where           \n--limit           archive\n```\n\n### \n\n   mysql  `general log`, pt-archiver commit 816G  1kw , 150  , \n\n  \n","slug":"2015-01-21-percona-toolkitxiao-xiang-li-di-pt-archiver","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xui5h0032m1tjumn9qjue","content":"<p> <code>Percona toolkit</code>  <code>MySqlDump</code> </p>\n<ul>\n<li><code>MySqlDump</code> </li>\n<li>, </li>\n<li>()</li>\n</ul>\n<p><code>Percona Toolkit</code> DBA <a href=\"http://www.percona.com/doc/percona-toolkit/2.1/pt-archiver.html\" target=\"_blank\" rel=\"noopener\">pt-archiver</a> </p>\n<h2 id=\"pt-archiver-\"><a href=\"#pt-archiver-\" class=\"headerlink\" title=\"pt-archiver \"></a>pt-archiver </h2><p>OTLP</p>\n<blockquote>\n<p>The goal is a low-impact, forward-only job to nibble old data out of the table without impacting OLTP queries much</p>\n</blockquote>\n<p>, , </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pt-archiver [OPTION...] --source DSN --where WHERE</span><br></pre></td></tr></table></figure>\n<p> load data infile  delete </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pt-archiver --ask-pass --progress 100000 --no-delete --no-check-charset --source h=localhost,u=root,D=blog,t=comment--file /home/ubuntu/tmp/comment--where &apos;time &lt; &quot;2013-12-31h&quot;&apos;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">--ask-pass        </span><br><span class=\"line\">--progress num    num</span><br><span class=\"line\">--source h,D,t    </span><br><span class=\"line\">--no-delete       </span><br><span class=\"line\">--dry-run         </span><br><span class=\"line\">--where           </span><br><span class=\"line\">--limit           archive</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>   mysql  <code>general log</code>, pt-archiver commit 816G  1kw , 150  , </p>\n<p>  </p>\n","site":{"data":{}},"excerpt":"","more":"<p> <code>Percona toolkit</code>  <code>MySqlDump</code> </p>\n<ul>\n<li><code>MySqlDump</code> </li>\n<li>, </li>\n<li>()</li>\n</ul>\n<p><code>Percona Toolkit</code> DBA <a href=\"http://www.percona.com/doc/percona-toolkit/2.1/pt-archiver.html\" target=\"_blank\" rel=\"noopener\">pt-archiver</a> </p>\n<h2 id=\"pt-archiver-\"><a href=\"#pt-archiver-\" class=\"headerlink\" title=\"pt-archiver \"></a>pt-archiver </h2><p>OTLP</p>\n<blockquote>\n<p>The goal is a low-impact, forward-only job to nibble old data out of the table without impacting OLTP queries much</p>\n</blockquote>\n<p>, , </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pt-archiver [OPTION...] --source DSN --where WHERE</span><br></pre></td></tr></table></figure>\n<p> load data infile  delete </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pt-archiver --ask-pass --progress 100000 --no-delete --no-check-charset --source h=localhost,u=root,D=blog,t=comment--file /home/ubuntu/tmp/comment--where &apos;time &lt; &quot;2013-12-31h&quot;&apos;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">--ask-pass        </span><br><span class=\"line\">--progress num    num</span><br><span class=\"line\">--source h,D,t    </span><br><span class=\"line\">--no-delete       </span><br><span class=\"line\">--dry-run         </span><br><span class=\"line\">--where           </span><br><span class=\"line\">--limit           archive</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>   mysql  <code>general log</code>, pt-archiver commit 816G  1kw , 150  , </p>\n<p>  </p>\n"},{"layout":"post","title":"[]nginx pitfall","date":"2014-05-13T14:26:00.000Z","comments":1,"description":"Nginx pitfall","_content":"\n[Nginx Pitfall](http://wiki.nginx.org/Pitfalls),\n\n##Nginx ##\n\nnginxnginx #nginx channel on Freenode#\n\n###[]###\n\n\n\n\n###[Root Location]###\n\n\n\n```bash\nserver {\n  server_name www.domain.com;\n  location / {\n    root /var/www/nginx-default/;\n    [...]\n  }\n  location /foo {\n    root /var/www/nginx-default/;\n    [...]\n  }\n  location /bar {\n    root /var/www/nginx-default/;\n    [...]\n  }\n}\n```\n\n root  locationlocationloaction  root location , root ,\n\n```\nserver {\n  server_name www.domain.com;\n  root /var/www/nginx-default/;\n  location / {\n    [...]\n  }\n  location /foo {\n    [...]\n  }\n  location /bar {\n    [...]\n  }\n}\n```\n\n###[ index ]###\n\n\n\n```\nhttp {\n  index index.php index.htm index.html;\n  server {\n    server_name www.domain.com;\n    location / {\n      index index.php index.htm index.html;\n      [...]\n    }\n  }\n  server {\n    server_name domain.com;\n    location / {\n      index index.php index.htm index.html;\n      [...]\n    }\n    location /foo {\n      index index.php;\n      [...]\n    }\n  }\n}\n```\n\n index  `http{}` \n\n\n\n```\nhttp {\n  index index.php index.htm index.html;\n  server {\n    server_name www.domain.com;\n    location / {\n      [...]\n    }\n  }\n  server {\n    server_name domain.com;\n    location / {\n      [...]\n    }\n    location /foo {\n      [...]\n    }\n  }\n```\n\n###[if]###\n`if`  \n\n\n\n```\nserver {\n  server_name domain.com *.domain.com;\n  if ($host ~* ^www\\.(.+)) {\n    set $raw_domain $1;\n    rewrite ^/(.*)$ $raw_domain/$1 permanent;\n    [...]\n  }\n}\n```\n `if` ,  [](http://wiki.nginx.org/IfIsEvil)\n\nif nginx  server \n\n\n\n```\nserver {\n  server_name www.domain.com;\n  return 301 $scheme://domain.com$request_uri;\n}\nserver {\n  server_name domain.com;\n  [...]\n}\n```\n\n nginx `if` `$scheme`  URI scheme  http  https .\n\n###[]###\n\n `if`  nginx `try_files` \n\n\n\n```\nserver {\n  root /var/www/domain.com;\n  location / {\n    if (!-f $request_filename) {\n      break;\n    }\n  }\n}\n```\n\n\n\n```\nserver {\n  root /var/www/domain.com;\n  location / {\n    try_files $uri $uri/ /index.html;\n  }\n}\n```\n\n`if` `try_files`,`$uri` `$uri/`  `index.html`\n\n$uri `index.html``index.html`\n\n###[]###\n\n PHP  Drupal, Joomla \n\n```\ntry_files $uri $uri/ /index.php?q=$uri&$args;\n```\n\n - \n\n* `q`Drupal, Joomla, WordPress\n* `page` CMS Made Simple\n\n`REQUEST_URI`WordPress\n\n```\ntry_files $uri $uri/ /index.php;\n```\n\n \n\n, `$uri/`\n\n###[PHP]###\n PHP web  Nginx URI`.php` PHP PHP\n\n\n\n```\nlocation ~* \\.php$ {\n  fastcgi_pass backend;\n  ...\n}\n```\n\n.php `FastCGI` PHP,\n\n `/forum/avatar/1232.jpg/file.php` PHP  `forum/avatar/1232.jpg`php\n\n\n\n*  php.ini  `cgi.fix_pathinfo=0` php \n*  nginx php\n\n```\nlocation ~* (file_a|file_b|file_c)\\.php$ {\n  fastcgi_pass backend;\n  ...\n}\n```\n* php \n\n```\nlocation /uploaddir {\n  location ~ \\.php$ {return 403;}\n  ...\n}\n```\n\n*  `try_files`\n\n```\nlocation ~* \\.php$ {\n  try_files $uri =404;\n  fastcgi_pass backend;\n  ...\n}\n```\n\n* \n\n```\nlocation ~* \\.php$ {\n  location ~ \\..*/.*\\.php$ {return 404;}\n  fastcgi_pass backend;\n  ...\n}\n\n```\n\n###[ FastCGI ]###\nPHP nginx, \"include fastcgi_params\", nginx  /etc/nginx \n\n\n\n```\nfastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;\n```\n\n\n\n```\nfastcgi_param  SCRIPT_FILENAME    /var/www/yoursite.com/$fastcgi_script_name;\n```\n\n`$document_root` `server``root``root`   ``\n\n\n###[]###\n\n\n\n\n```\nrewrite ^/(.*)$ http://domain.com/$1 permanent;\n```\n\n\n\n```\nrewrite ^ http://domain.com$request_uri? permanent;\n```\n\n\n\n```\nreturn 301 http://domain.com$request_uri;\n```\n\nOKURI `$request_uri` ,,\n\n\n###[`http://`]###\nnginx\n\n\n\n```\n rewrite ^/blog(/.*)$ blog.domain.com$1 permanent;\n```\n\n\n\n```\nrewrite ^/blog(/.*)$ http://blog.domain.com$1 permanent;\n```\n\n`http://`\n\n###[]###\n\n\n\n```\nserver {\n    server_name example.org;\n    root /var/www/site;\n \n    location / {\n        include fastcgi_params;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        fastcgi_pass unix:/tmp/phpcgi.socket;\n    }\n}\n```\n\nphp, apache  nginx `try_files`nginxphpphpphpphp1MB1\n\n\n\n```\nserver {\n    server_name example.org;\n    root /var/www/site;\n \n    location / {\n        try_files $uri $uri/ @proxy;\n    }\n \n    location @proxy {\n        include fastcgi.conf;\n        fastcgi_pass unix:/tmp/php-fpm.sock;\n    }\n}\n```\n\n\n\n```\nserver {\n    server_name example.org;\n    root /var/www/site;\n \n    location / {\n        try_files $uri $uri/ /index.php;\n    }\n \n    location ~ \\.php$ {\n        include fastcgi.conf;\n        fastcgi_pass unix:/tmp/php-fpm.sock;\n    }\n}\n```\n\n\n URI  nginx index index `index.php`nginx\n\ncssjavascript,\n\n\n###[]###\n\n `types{}`\n\n\n\n[1]  `Ctrl+Shift+Delet` ,\n\nURI`about:config`, `browser.cache.check_doc_frequency` 1\n\n[2]  `curl`\n`vritualbox`  nginx, `sendfile()`  sendfile  `off`,`nginx.conf`\n\n```\nsendfile off\n```\n\n###[HTTP]###\n\n \n\n```\n underscores_in_headers on\n```\n\nnginx httphttpCGI\n","source":"_posts/2014-05-13-nginx-pitfall.markdown","raw":"---\nlayout: post\ntitle: \"[]nginx pitfall\"\ndate: 2014-05-13 22:26\ncomments: true\ncategories: Server\ndescription: Nginx pitfall\n---\n\n[Nginx Pitfall](http://wiki.nginx.org/Pitfalls),\n\n##Nginx ##\n\nnginxnginx #nginx channel on Freenode#\n\n###[]###\n\n\n\n\n###[Root Location]###\n\n\n\n```bash\nserver {\n  server_name www.domain.com;\n  location / {\n    root /var/www/nginx-default/;\n    [...]\n  }\n  location /foo {\n    root /var/www/nginx-default/;\n    [...]\n  }\n  location /bar {\n    root /var/www/nginx-default/;\n    [...]\n  }\n}\n```\n\n root  locationlocationloaction  root location , root ,\n\n```\nserver {\n  server_name www.domain.com;\n  root /var/www/nginx-default/;\n  location / {\n    [...]\n  }\n  location /foo {\n    [...]\n  }\n  location /bar {\n    [...]\n  }\n}\n```\n\n###[ index ]###\n\n\n\n```\nhttp {\n  index index.php index.htm index.html;\n  server {\n    server_name www.domain.com;\n    location / {\n      index index.php index.htm index.html;\n      [...]\n    }\n  }\n  server {\n    server_name domain.com;\n    location / {\n      index index.php index.htm index.html;\n      [...]\n    }\n    location /foo {\n      index index.php;\n      [...]\n    }\n  }\n}\n```\n\n index  `http{}` \n\n\n\n```\nhttp {\n  index index.php index.htm index.html;\n  server {\n    server_name www.domain.com;\n    location / {\n      [...]\n    }\n  }\n  server {\n    server_name domain.com;\n    location / {\n      [...]\n    }\n    location /foo {\n      [...]\n    }\n  }\n```\n\n###[if]###\n`if`  \n\n\n\n```\nserver {\n  server_name domain.com *.domain.com;\n  if ($host ~* ^www\\.(.+)) {\n    set $raw_domain $1;\n    rewrite ^/(.*)$ $raw_domain/$1 permanent;\n    [...]\n  }\n}\n```\n `if` ,  [](http://wiki.nginx.org/IfIsEvil)\n\nif nginx  server \n\n\n\n```\nserver {\n  server_name www.domain.com;\n  return 301 $scheme://domain.com$request_uri;\n}\nserver {\n  server_name domain.com;\n  [...]\n}\n```\n\n nginx `if` `$scheme`  URI scheme  http  https .\n\n###[]###\n\n `if`  nginx `try_files` \n\n\n\n```\nserver {\n  root /var/www/domain.com;\n  location / {\n    if (!-f $request_filename) {\n      break;\n    }\n  }\n}\n```\n\n\n\n```\nserver {\n  root /var/www/domain.com;\n  location / {\n    try_files $uri $uri/ /index.html;\n  }\n}\n```\n\n`if` `try_files`,`$uri` `$uri/`  `index.html`\n\n$uri `index.html``index.html`\n\n###[]###\n\n PHP  Drupal, Joomla \n\n```\ntry_files $uri $uri/ /index.php?q=$uri&$args;\n```\n\n - \n\n* `q`Drupal, Joomla, WordPress\n* `page` CMS Made Simple\n\n`REQUEST_URI`WordPress\n\n```\ntry_files $uri $uri/ /index.php;\n```\n\n \n\n, `$uri/`\n\n###[PHP]###\n PHP web  Nginx URI`.php` PHP PHP\n\n\n\n```\nlocation ~* \\.php$ {\n  fastcgi_pass backend;\n  ...\n}\n```\n\n.php `FastCGI` PHP,\n\n `/forum/avatar/1232.jpg/file.php` PHP  `forum/avatar/1232.jpg`php\n\n\n\n*  php.ini  `cgi.fix_pathinfo=0` php \n*  nginx php\n\n```\nlocation ~* (file_a|file_b|file_c)\\.php$ {\n  fastcgi_pass backend;\n  ...\n}\n```\n* php \n\n```\nlocation /uploaddir {\n  location ~ \\.php$ {return 403;}\n  ...\n}\n```\n\n*  `try_files`\n\n```\nlocation ~* \\.php$ {\n  try_files $uri =404;\n  fastcgi_pass backend;\n  ...\n}\n```\n\n* \n\n```\nlocation ~* \\.php$ {\n  location ~ \\..*/.*\\.php$ {return 404;}\n  fastcgi_pass backend;\n  ...\n}\n\n```\n\n###[ FastCGI ]###\nPHP nginx, \"include fastcgi_params\", nginx  /etc/nginx \n\n\n\n```\nfastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;\n```\n\n\n\n```\nfastcgi_param  SCRIPT_FILENAME    /var/www/yoursite.com/$fastcgi_script_name;\n```\n\n`$document_root` `server``root``root`   ``\n\n\n###[]###\n\n\n\n\n```\nrewrite ^/(.*)$ http://domain.com/$1 permanent;\n```\n\n\n\n```\nrewrite ^ http://domain.com$request_uri? permanent;\n```\n\n\n\n```\nreturn 301 http://domain.com$request_uri;\n```\n\nOKURI `$request_uri` ,,\n\n\n###[`http://`]###\nnginx\n\n\n\n```\n rewrite ^/blog(/.*)$ blog.domain.com$1 permanent;\n```\n\n\n\n```\nrewrite ^/blog(/.*)$ http://blog.domain.com$1 permanent;\n```\n\n`http://`\n\n###[]###\n\n\n\n```\nserver {\n    server_name example.org;\n    root /var/www/site;\n \n    location / {\n        include fastcgi_params;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        fastcgi_pass unix:/tmp/phpcgi.socket;\n    }\n}\n```\n\nphp, apache  nginx `try_files`nginxphpphpphpphp1MB1\n\n\n\n```\nserver {\n    server_name example.org;\n    root /var/www/site;\n \n    location / {\n        try_files $uri $uri/ @proxy;\n    }\n \n    location @proxy {\n        include fastcgi.conf;\n        fastcgi_pass unix:/tmp/php-fpm.sock;\n    }\n}\n```\n\n\n\n```\nserver {\n    server_name example.org;\n    root /var/www/site;\n \n    location / {\n        try_files $uri $uri/ /index.php;\n    }\n \n    location ~ \\.php$ {\n        include fastcgi.conf;\n        fastcgi_pass unix:/tmp/php-fpm.sock;\n    }\n}\n```\n\n\n URI  nginx index index `index.php`nginx\n\ncssjavascript,\n\n\n###[]###\n\n `types{}`\n\n\n\n[1]  `Ctrl+Shift+Delet` ,\n\nURI`about:config`, `browser.cache.check_doc_frequency` 1\n\n[2]  `curl`\n`vritualbox`  nginx, `sendfile()`  sendfile  `off`,`nginx.conf`\n\n```\nsendfile off\n```\n\n###[HTTP]###\n\n \n\n```\n underscores_in_headers on\n```\n\nnginx httphttpCGI\n","slug":"2014-05-13-nginx-pitfall","published":1,"updated":"2018-07-01T05:55:41.000Z","photos":[],"link":"","_id":"cjv8xuib8003bm1tju6wxau9q","content":"<p><a href=\"http://wiki.nginx.org/Pitfalls\" target=\"_blank\" rel=\"noopener\">Nginx Pitfall</a>,</p>\n<p>##Nginx ##</p>\n<p>nginxnginx #nginx channel on Freenode#</p>\n<p>###[]###</p>\n<p></p>\n<p>###[Root Location]###</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">  server_name www.domain.com;</span><br><span class=\"line\">  location / &#123;</span><br><span class=\"line\">    root /var/www/nginx-default/;</span><br><span class=\"line\">    [...]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  location /foo &#123;</span><br><span class=\"line\">    root /var/www/nginx-default/;</span><br><span class=\"line\">    [...]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  location /bar &#123;</span><br><span class=\"line\">    root /var/www/nginx-default/;</span><br><span class=\"line\">    [...]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> root  locationlocationloaction  root location , root ,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">  server_name www.domain.com;</span><br><span class=\"line\">  root /var/www/nginx-default/;</span><br><span class=\"line\">  location / &#123;</span><br><span class=\"line\">    [...]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  location /foo &#123;</span><br><span class=\"line\">    [...]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  location /bar &#123;</span><br><span class=\"line\">    [...]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>###[ index ]###</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http &#123;</span><br><span class=\"line\">  index index.php index.htm index.html;</span><br><span class=\"line\">  server &#123;</span><br><span class=\"line\">    server_name www.domain.com;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">      index index.php index.htm index.html;</span><br><span class=\"line\">      [...]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  server &#123;</span><br><span class=\"line\">    server_name domain.com;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">      index index.php index.htm index.html;</span><br><span class=\"line\">      [...]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    location /foo &#123;</span><br><span class=\"line\">      index index.php;</span><br><span class=\"line\">      [...]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> index  <code>http{}</code> </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http &#123;</span><br><span class=\"line\">  index index.php index.htm index.html;</span><br><span class=\"line\">  server &#123;</span><br><span class=\"line\">    server_name www.domain.com;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">      [...]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  server &#123;</span><br><span class=\"line\">    server_name domain.com;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">      [...]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    location /foo &#123;</span><br><span class=\"line\">      [...]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p>###[if]###<br><code>if</code>  </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">  server_name domain.com *.domain.com;</span><br><span class=\"line\">  if ($host ~* ^www\\.(.+)) &#123;</span><br><span class=\"line\">    set $raw_domain $1;</span><br><span class=\"line\">    rewrite ^/(.*)$ $raw_domain/$1 permanent;</span><br><span class=\"line\">    [...]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <code>if</code> ,  <a href=\"http://wiki.nginx.org/IfIsEvil\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>if nginx  server </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">  server_name www.domain.com;</span><br><span class=\"line\">  return 301 $scheme://domain.com$request_uri;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">  server_name domain.com;</span><br><span class=\"line\">  [...]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> nginx <code>if</code> <code>$scheme</code>  URI scheme  http  https .</p>\n<p>###[]###</p>\n<p> <code>if</code>  nginx <code>try_files</code> </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">  root /var/www/domain.com;</span><br><span class=\"line\">  location / &#123;</span><br><span class=\"line\">    if (!-f $request_filename) &#123;</span><br><span class=\"line\">      break;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">  root /var/www/domain.com;</span><br><span class=\"line\">  location / &#123;</span><br><span class=\"line\">    try_files $uri $uri/ /index.html;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>if</code> <code>try_files</code>,<code>$uri</code> <code>$uri/</code>  <code>index.html</code></p>\n<p>$uri <code>index.html</code><code>index.html</code></p>\n<p>###[]###</p>\n<p> PHP  Drupal, Joomla </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">try_files $uri $uri/ /index.php?q=$uri&amp;$args;</span><br></pre></td></tr></table></figure>\n<p> - </p>\n<ul>\n<li><code>q</code>Drupal, Joomla, WordPress</li>\n<li><code>page</code> CMS Made Simple</li>\n</ul>\n<p><code>REQUEST_URI</code>WordPress</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">try_files $uri $uri/ /index.php;</span><br></pre></td></tr></table></figure>\n<p> </p>\n<p>, <code>$uri/</code></p>\n<p>###[PHP]###<br> PHP web  Nginx URI<code>.php</code> PHP PHP</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location ~* \\.php$ &#123;</span><br><span class=\"line\">  fastcgi_pass backend;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>.php <code>FastCGI</code> PHP,</p>\n<p> <code>/forum/avatar/1232.jpg/file.php</code> PHP  <code>forum/avatar/1232.jpg</code>php</p>\n<p></p>\n<ul>\n<li> php.ini  <code>cgi.fix_pathinfo=0</code> php </li>\n<li> nginx php</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location ~* (file_a|file_b|file_c)\\.php$ &#123;</span><br><span class=\"line\">  fastcgi_pass backend;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>php </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location /uploaddir &#123;</span><br><span class=\"line\">  location ~ \\.php$ &#123;return 403;&#125;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li> <code>try_files</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location ~* \\.php$ &#123;</span><br><span class=\"line\">  try_files $uri =404;</span><br><span class=\"line\">  fastcgi_pass backend;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location ~* \\.php$ &#123;</span><br><span class=\"line\">  location ~ \\..*/.*\\.php$ &#123;return 404;&#125;</span><br><span class=\"line\">  fastcgi_pass backend;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>###[ FastCGI ]###<br>PHP nginx, include fastcgi_params, nginx  /etc/nginx </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastcgi_param  SCRIPT_FILENAME    /var/www/yoursite.com/$fastcgi_script_name;</span><br></pre></td></tr></table></figure>\n<p><code>$document_root</code> <code>server</code><code>root</code><code>root</code>   <code></code></p>\n<p>###[]###<br></p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rewrite ^/(.*)$ http://domain.com/$1 permanent;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rewrite ^ http://domain.com$request_uri? permanent;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">return 301 http://domain.com$request_uri;</span><br></pre></td></tr></table></figure>\n<p>OKURI <code>$request_uri</code> ,,</p>\n<p>###[<code>http://</code>]###<br>nginx</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rewrite ^/blog(/.*)$ blog.domain.com$1 permanent;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rewrite ^/blog(/.*)$ http://blog.domain.com$1 permanent;</span><br></pre></td></tr></table></figure>\n<p><code>http://</code></p>\n<p>###[]###</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    server_name example.org;</span><br><span class=\"line\">    root /var/www/site;</span><br><span class=\"line\"> </span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        include fastcgi_params;</span><br><span class=\"line\">        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class=\"line\">        fastcgi_pass unix:/tmp/phpcgi.socket;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>php, apache  nginx <code>try_files</code>nginxphpphpphpphp1MB1</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    server_name example.org;</span><br><span class=\"line\">    root /var/www/site;</span><br><span class=\"line\"> </span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        try_files $uri $uri/ @proxy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    location @proxy &#123;</span><br><span class=\"line\">        include fastcgi.conf;</span><br><span class=\"line\">        fastcgi_pass unix:/tmp/php-fpm.sock;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    server_name example.org;</span><br><span class=\"line\">    root /var/www/site;</span><br><span class=\"line\"> </span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        try_files $uri $uri/ /index.php;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    location ~ \\.php$ &#123;</span><br><span class=\"line\">        include fastcgi.conf;</span><br><span class=\"line\">        fastcgi_pass unix:/tmp/php-fpm.sock;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> URI  nginx index index <code>index.php</code>nginx</p>\n<p>cssjavascript,</p>\n<p>###[]###</p>\n<p> <code>types{}</code></p>\n<p></p>\n<p>[1]  <code>Ctrl+Shift+Delet</code> ,</p>\n<p>URI<code>about:config</code>, <code>browser.cache.check_doc_frequency</code> 1</p>\n<p>[2]  <code>curl</code><br><code>vritualbox</code>  nginx, <code>sendfile()</code>  sendfile  <code>off</code>,<code>nginx.conf</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sendfile off</span><br></pre></td></tr></table></figure>\n<p>###[HTTP]###</p>\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">underscores_in_headers on</span><br></pre></td></tr></table></figure>\n<p>nginx httphttpCGI</p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"http://wiki.nginx.org/Pitfalls\" target=\"_blank\" rel=\"noopener\">Nginx Pitfall</a>,</p>\n<p>##Nginx ##</p>\n<p>nginxnginx #nginx channel on Freenode#</p>\n<p>###[]###</p>\n<p></p>\n<p>###[Root Location]###</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">  server_name www.domain.com;</span><br><span class=\"line\">  location / &#123;</span><br><span class=\"line\">    root /var/www/nginx-default/;</span><br><span class=\"line\">    [...]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  location /foo &#123;</span><br><span class=\"line\">    root /var/www/nginx-default/;</span><br><span class=\"line\">    [...]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  location /bar &#123;</span><br><span class=\"line\">    root /var/www/nginx-default/;</span><br><span class=\"line\">    [...]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> root  locationlocationloaction  root location , root ,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">  server_name www.domain.com;</span><br><span class=\"line\">  root /var/www/nginx-default/;</span><br><span class=\"line\">  location / &#123;</span><br><span class=\"line\">    [...]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  location /foo &#123;</span><br><span class=\"line\">    [...]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  location /bar &#123;</span><br><span class=\"line\">    [...]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>###[ index ]###</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http &#123;</span><br><span class=\"line\">  index index.php index.htm index.html;</span><br><span class=\"line\">  server &#123;</span><br><span class=\"line\">    server_name www.domain.com;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">      index index.php index.htm index.html;</span><br><span class=\"line\">      [...]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  server &#123;</span><br><span class=\"line\">    server_name domain.com;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">      index index.php index.htm index.html;</span><br><span class=\"line\">      [...]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    location /foo &#123;</span><br><span class=\"line\">      index index.php;</span><br><span class=\"line\">      [...]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> index  <code>http{}</code> </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http &#123;</span><br><span class=\"line\">  index index.php index.htm index.html;</span><br><span class=\"line\">  server &#123;</span><br><span class=\"line\">    server_name www.domain.com;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">      [...]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  server &#123;</span><br><span class=\"line\">    server_name domain.com;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">      [...]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    location /foo &#123;</span><br><span class=\"line\">      [...]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p>###[if]###<br><code>if</code>  </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">  server_name domain.com *.domain.com;</span><br><span class=\"line\">  if ($host ~* ^www\\.(.+)) &#123;</span><br><span class=\"line\">    set $raw_domain $1;</span><br><span class=\"line\">    rewrite ^/(.*)$ $raw_domain/$1 permanent;</span><br><span class=\"line\">    [...]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <code>if</code> ,  <a href=\"http://wiki.nginx.org/IfIsEvil\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>if nginx  server </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">  server_name www.domain.com;</span><br><span class=\"line\">  return 301 $scheme://domain.com$request_uri;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">  server_name domain.com;</span><br><span class=\"line\">  [...]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> nginx <code>if</code> <code>$scheme</code>  URI scheme  http  https .</p>\n<p>###[]###</p>\n<p> <code>if</code>  nginx <code>try_files</code> </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">  root /var/www/domain.com;</span><br><span class=\"line\">  location / &#123;</span><br><span class=\"line\">    if (!-f $request_filename) &#123;</span><br><span class=\"line\">      break;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">  root /var/www/domain.com;</span><br><span class=\"line\">  location / &#123;</span><br><span class=\"line\">    try_files $uri $uri/ /index.html;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>if</code> <code>try_files</code>,<code>$uri</code> <code>$uri/</code>  <code>index.html</code></p>\n<p>$uri <code>index.html</code><code>index.html</code></p>\n<p>###[]###</p>\n<p> PHP  Drupal, Joomla </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">try_files $uri $uri/ /index.php?q=$uri&amp;$args;</span><br></pre></td></tr></table></figure>\n<p> - </p>\n<ul>\n<li><code>q</code>Drupal, Joomla, WordPress</li>\n<li><code>page</code> CMS Made Simple</li>\n</ul>\n<p><code>REQUEST_URI</code>WordPress</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">try_files $uri $uri/ /index.php;</span><br></pre></td></tr></table></figure>\n<p> </p>\n<p>, <code>$uri/</code></p>\n<p>###[PHP]###<br> PHP web  Nginx URI<code>.php</code> PHP PHP</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location ~* \\.php$ &#123;</span><br><span class=\"line\">  fastcgi_pass backend;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>.php <code>FastCGI</code> PHP,</p>\n<p> <code>/forum/avatar/1232.jpg/file.php</code> PHP  <code>forum/avatar/1232.jpg</code>php</p>\n<p></p>\n<ul>\n<li> php.ini  <code>cgi.fix_pathinfo=0</code> php </li>\n<li> nginx php</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location ~* (file_a|file_b|file_c)\\.php$ &#123;</span><br><span class=\"line\">  fastcgi_pass backend;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>php </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location /uploaddir &#123;</span><br><span class=\"line\">  location ~ \\.php$ &#123;return 403;&#125;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li> <code>try_files</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location ~* \\.php$ &#123;</span><br><span class=\"line\">  try_files $uri =404;</span><br><span class=\"line\">  fastcgi_pass backend;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location ~* \\.php$ &#123;</span><br><span class=\"line\">  location ~ \\..*/.*\\.php$ &#123;return 404;&#125;</span><br><span class=\"line\">  fastcgi_pass backend;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>###[ FastCGI ]###<br>PHP nginx, include fastcgi_params, nginx  /etc/nginx </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastcgi_param  SCRIPT_FILENAME    /var/www/yoursite.com/$fastcgi_script_name;</span><br></pre></td></tr></table></figure>\n<p><code>$document_root</code> <code>server</code><code>root</code><code>root</code>   <code></code></p>\n<p>###[]###<br></p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rewrite ^/(.*)$ http://domain.com/$1 permanent;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rewrite ^ http://domain.com$request_uri? permanent;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">return 301 http://domain.com$request_uri;</span><br></pre></td></tr></table></figure>\n<p>OKURI <code>$request_uri</code> ,,</p>\n<p>###[<code>http://</code>]###<br>nginx</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rewrite ^/blog(/.*)$ blog.domain.com$1 permanent;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rewrite ^/blog(/.*)$ http://blog.domain.com$1 permanent;</span><br></pre></td></tr></table></figure>\n<p><code>http://</code></p>\n<p>###[]###</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    server_name example.org;</span><br><span class=\"line\">    root /var/www/site;</span><br><span class=\"line\"> </span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        include fastcgi_params;</span><br><span class=\"line\">        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class=\"line\">        fastcgi_pass unix:/tmp/phpcgi.socket;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>php, apache  nginx <code>try_files</code>nginxphpphpphpphp1MB1</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    server_name example.org;</span><br><span class=\"line\">    root /var/www/site;</span><br><span class=\"line\"> </span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        try_files $uri $uri/ @proxy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    location @proxy &#123;</span><br><span class=\"line\">        include fastcgi.conf;</span><br><span class=\"line\">        fastcgi_pass unix:/tmp/php-fpm.sock;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    server_name example.org;</span><br><span class=\"line\">    root /var/www/site;</span><br><span class=\"line\"> </span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        try_files $uri $uri/ /index.php;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    location ~ \\.php$ &#123;</span><br><span class=\"line\">        include fastcgi.conf;</span><br><span class=\"line\">        fastcgi_pass unix:/tmp/php-fpm.sock;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> URI  nginx index index <code>index.php</code>nginx</p>\n<p>cssjavascript,</p>\n<p>###[]###</p>\n<p> <code>types{}</code></p>\n<p></p>\n<p>[1]  <code>Ctrl+Shift+Delet</code> ,</p>\n<p>URI<code>about:config</code>, <code>browser.cache.check_doc_frequency</code> 1</p>\n<p>[2]  <code>curl</code><br><code>vritualbox</code>  nginx, <code>sendfile()</code>  sendfile  <code>off</code>,<code>nginx.conf</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sendfile off</span><br></pre></td></tr></table></figure>\n<p>###[HTTP]###</p>\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">underscores_in_headers on</span><br></pre></td></tr></table></figure>\n<p>nginx httphttpCGI</p>\n"},{"layout":"post","title":"","date":"2015-02-08T05:40:00.000Z","comments":1,"description":"golang trie","_content":"\n3.\n\n\n\n{% img /images/2015/02/suggest.png %}\n\nidea\n\n: `GitLab``close`, \n\n\n\n* hash,key2Byte1kw110200M\n* ,O(N^N),Trie  O(1)\n* Radix Tree linux cache\n\n\n### `trie`\n\n{% img /images/2015/02/triestruct.png %}\n\n* \n* \n* \n* \n\n\n\n```\ntype Node struct {\n    Link     map[string]*Node  #\n    Key      string                     #\n    IsLeaf   bool                       # \n    Weight   float64                    #\n    LongWord string                     #\n}\n```\n\n\n\n\n### \n Go  []rune,1Trie\n\n```\npackage main\nimport \"fmt\"\n\nfunc main () {\n    m_str := \"\"\n    fmt.Println(\"fmt:\", m_str)\n    m_str_rune := []rune(m_str)\n    fmt.Println(\"fmt:\", m_str_rune)\n    m_str_byte := []byte(m_str)\n    fmt.Println(\"fmt:\", m_str_byte)\n}\n\n$ ./test_rune\nfmt: \nfmt: [32534 31243]\nfmt: [231 188 150 231 168 139]\n```\n\n### \n100W,1ms4G0.3%\n\n---\n\n\n\n\n[](https://github.com/zheng-ji/trietips)\n","source":"_posts/2015-02-08-trie-suggestion.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2015-02-08 13:40\ncomments: true\ndescription: golang trie\ncategories: Program\n---\n\n3.\n\n\n\n{% img /images/2015/02/suggest.png %}\n\nidea\n\n: `GitLab``close`, \n\n\n\n* hash,key2Byte1kw110200M\n* ,O(N^N),Trie  O(1)\n* Radix Tree linux cache\n\n\n### `trie`\n\n{% img /images/2015/02/triestruct.png %}\n\n* \n* \n* \n* \n\n\n\n```\ntype Node struct {\n    Link     map[string]*Node  #\n    Key      string                     #\n    IsLeaf   bool                       # \n    Weight   float64                    #\n    LongWord string                     #\n}\n```\n\n\n\n\n### \n Go  []rune,1Trie\n\n```\npackage main\nimport \"fmt\"\n\nfunc main () {\n    m_str := \"\"\n    fmt.Println(\"fmt:\", m_str)\n    m_str_rune := []rune(m_str)\n    fmt.Println(\"fmt:\", m_str_rune)\n    m_str_byte := []byte(m_str)\n    fmt.Println(\"fmt:\", m_str_byte)\n}\n\n$ ./test_rune\nfmt: \nfmt: [32534 31243]\nfmt: [231 188 150 231 168 139]\n```\n\n### \n100W,1ms4G0.3%\n\n---\n\n\n\n\n[](https://github.com/zheng-ji/trietips)\n","slug":"2015-02-08-trie-suggestion","published":1,"updated":"2018-07-01T05:56:38.000Z","photos":[],"link":"","_id":"cjv8xuiba003dm1tj6m9iamjo","content":"<p>3.</p>\n<p></p>\n<img src=\"/images/2015/02/suggest.png\">\n<p>idea</p>\n<p>: <code>GitLab</code><code>close</code>, </p>\n<p></p>\n<ul>\n<li>hash,key2Byte1kw110200M</li>\n<li>,O(N^N),Trie  O(1)</li>\n<li>Radix Tree linux cache</li>\n</ul>\n<h3 id=\"trie\"><a href=\"#trie\" class=\"headerlink\" title=\"trie\"></a><code>trie</code></h3><img src=\"/images/2015/02/triestruct.png\">\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">type Node struct &#123;</span><br><span class=\"line\">    Link     map[string]*Node  #</span><br><span class=\"line\">    Key      string                     #</span><br><span class=\"line\">    IsLeaf   bool                       # </span><br><span class=\"line\">    Weight   float64                    #</span><br><span class=\"line\">    LongWord string                     #</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Go  []rune,1Trie</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package main</span><br><span class=\"line\">import &quot;fmt&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">func main () &#123;</span><br><span class=\"line\">    m_str := &quot;&quot;</span><br><span class=\"line\">    fmt.Println(&quot;fmt:&quot;, m_str)</span><br><span class=\"line\">    m_str_rune := []rune(m_str)</span><br><span class=\"line\">    fmt.Println(&quot;fmt:&quot;, m_str_rune)</span><br><span class=\"line\">    m_str_byte := []byte(m_str)</span><br><span class=\"line\">    fmt.Println(&quot;fmt:&quot;, m_str_byte)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$ ./test_rune</span><br><span class=\"line\">fmt: </span><br><span class=\"line\">fmt: [32534 31243]</span><br><span class=\"line\">fmt: [231 188 150 231 168 139]</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>100W,1ms4G0.3%</p>\n<hr>\n<p></p>\n<p><a href=\"https://github.com/zheng-ji/trietips\" target=\"_blank\" rel=\"noopener\"></a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>3.</p>\n<p></p>\n<img src=\"/images/2015/02/suggest.png\">\n<p>idea</p>\n<p>: <code>GitLab</code><code>close</code>, </p>\n<p></p>\n<ul>\n<li>hash,key2Byte1kw110200M</li>\n<li>,O(N^N),Trie  O(1)</li>\n<li>Radix Tree linux cache</li>\n</ul>\n<h3 id=\"trie\"><a href=\"#trie\" class=\"headerlink\" title=\"trie\"></a><code>trie</code></h3><img src=\"/images/2015/02/triestruct.png\">\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">type Node struct &#123;</span><br><span class=\"line\">    Link     map[string]*Node  #</span><br><span class=\"line\">    Key      string                     #</span><br><span class=\"line\">    IsLeaf   bool                       # </span><br><span class=\"line\">    Weight   float64                    #</span><br><span class=\"line\">    LongWord string                     #</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Go  []rune,1Trie</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package main</span><br><span class=\"line\">import &quot;fmt&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">func main () &#123;</span><br><span class=\"line\">    m_str := &quot;&quot;</span><br><span class=\"line\">    fmt.Println(&quot;fmt:&quot;, m_str)</span><br><span class=\"line\">    m_str_rune := []rune(m_str)</span><br><span class=\"line\">    fmt.Println(&quot;fmt:&quot;, m_str_rune)</span><br><span class=\"line\">    m_str_byte := []byte(m_str)</span><br><span class=\"line\">    fmt.Println(&quot;fmt:&quot;, m_str_byte)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$ ./test_rune</span><br><span class=\"line\">fmt: </span><br><span class=\"line\">fmt: [32534 31243]</span><br><span class=\"line\">fmt: [231 188 150 231 168 139]</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>100W,1ms4G0.3%</p>\n<hr>\n<p></p>\n<p><a href=\"https://github.com/zheng-ji/trietips\" target=\"_blank\" rel=\"noopener\"></a></p>\n"},{"layout":"post","title":" Docker","date":"2015-04-05T12:24:00.000Z","comments":1,"description":"Docker, ","_content":"\nDocker \n\n`Python` [virtualenv](http://wiki.zheng-ji.info/Python/virtualenv-py.html), \n `Golang` `C++` \n`Docker`\n\n\n KafkServer  Docker . \n\n\n###  Docker \n\n```\nzj@zheng-ji:~/workspace/gocode/src/kafconsumer/docker$ tree\n.\n Dockerfile\n kafConsumer\n    consumer\n    etc\n       config.yml\n       logger.xml\n    script\n        start.sh\n kafConsumer.tar.gz\n```\n\n `Docker` \n\n* `Dockerfile`,\n* `kafCounsumer`()\n*  `kafConsumer.tar.gz`\n\n---\n\n### Dockerfile \n\n\n```\nFROM ubuntu:14.04                                                         \nMAINTAINER zheng-ji <zheng-ji.info>                                     \nRUN echo Asia/Shanghai > /etc/timezone                   \nRUN sed -i \"s/archive\\.ubuntu/mirrors.163/\" /etc/apt/sources.list          \nRUN apt-get update                                                         \nCOPY kafConsumer.tar.gz /                                                  \nRUN tar xvf kafConsumer.tar.gz                                         \nVOLUME /data                   \nWORKDIR /kafConsumer                                                   \nENTRYPOINT [\"./script/start.sh\"]\n```\n\n`Dockerfile` `makefile` Docker .\n\n```\nsudo docker -t build Server/KafConsumer .\n```\n\n`Tag`  `Server/KafConsumer` \n\n\n `Dockerfile` :\n\n>\n>* ubuntu 14:04\n>* \n>* \n>* \n>* \n>* \n>* \n>* /data\n>* \n>* Dockerstart.sh\n\n---\n\n\n### \n\n```\n#!/bin/bash\nulimit -a\nif [ ! -d /data/ad ];  then\n    mkdir /data/ad\nfi\nexec ./consumer -c=etc/config.yml\n```\n\nshell #!/bin/bash, exec \n\n\n---\n\n### \n\n```\nsudo docker run -i -t  -v /path/to/data:/data Server/kafConsumer\n```\n-v .\n\n###\n\n```\nsudo docker ps -a\n\n Docker \n\nCONTAINER ID    IMAGE           COMMAND                CREATED        STATUS        PORTS    NAMES\n5b39d0d5cb85    Server/kafkaconsumer:latest   \"./script/start.sh\"    3 hours ago    tender_bohr \n```\n\n\n\n```\nsudo docker start tender_bohr\nsudo docker stop tender_bohr\n```\n\n---\n\n### Daocloud  \n\n Daocloud ,\n\n```\ncat /etc/default/docker\nDOCKER_OPTS=\"$DOCKER_OPTS --registry-mirror=http://xxxxxx.m.daocloud.io\"\n```\n","source":"_posts/2015-04-05-yong-bao-docker.markdown","raw":"---\nlayout: post\ntitle: \" Docker\"\ndate: 2015-04-05 20:24\ncomments: true\ncategories: Server\ndescription: Docker, \n---\n\nDocker \n\n`Python` [virtualenv](http://wiki.zheng-ji.info/Python/virtualenv-py.html), \n `Golang` `C++` \n`Docker`\n\n\n KafkServer  Docker . \n\n\n###  Docker \n\n```\nzj@zheng-ji:~/workspace/gocode/src/kafconsumer/docker$ tree\n.\n Dockerfile\n kafConsumer\n    consumer\n    etc\n       config.yml\n       logger.xml\n    script\n        start.sh\n kafConsumer.tar.gz\n```\n\n `Docker` \n\n* `Dockerfile`,\n* `kafCounsumer`()\n*  `kafConsumer.tar.gz`\n\n---\n\n### Dockerfile \n\n\n```\nFROM ubuntu:14.04                                                         \nMAINTAINER zheng-ji <zheng-ji.info>                                     \nRUN echo Asia/Shanghai > /etc/timezone                   \nRUN sed -i \"s/archive\\.ubuntu/mirrors.163/\" /etc/apt/sources.list          \nRUN apt-get update                                                         \nCOPY kafConsumer.tar.gz /                                                  \nRUN tar xvf kafConsumer.tar.gz                                         \nVOLUME /data                   \nWORKDIR /kafConsumer                                                   \nENTRYPOINT [\"./script/start.sh\"]\n```\n\n`Dockerfile` `makefile` Docker .\n\n```\nsudo docker -t build Server/KafConsumer .\n```\n\n`Tag`  `Server/KafConsumer` \n\n\n `Dockerfile` :\n\n>\n>* ubuntu 14:04\n>* \n>* \n>* \n>* \n>* \n>* \n>* /data\n>* \n>* Dockerstart.sh\n\n---\n\n\n### \n\n```\n#!/bin/bash\nulimit -a\nif [ ! -d /data/ad ];  then\n    mkdir /data/ad\nfi\nexec ./consumer -c=etc/config.yml\n```\n\nshell #!/bin/bash, exec \n\n\n---\n\n### \n\n```\nsudo docker run -i -t  -v /path/to/data:/data Server/kafConsumer\n```\n-v .\n\n###\n\n```\nsudo docker ps -a\n\n Docker \n\nCONTAINER ID    IMAGE           COMMAND                CREATED        STATUS        PORTS    NAMES\n5b39d0d5cb85    Server/kafkaconsumer:latest   \"./script/start.sh\"    3 hours ago    tender_bohr \n```\n\n\n\n```\nsudo docker start tender_bohr\nsudo docker stop tender_bohr\n```\n\n---\n\n### Daocloud  \n\n Daocloud ,\n\n```\ncat /etc/default/docker\nDOCKER_OPTS=\"$DOCKER_OPTS --registry-mirror=http://xxxxxx.m.daocloud.io\"\n```\n","slug":"2015-04-05-yong-bao-docker","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuibd003fm1tja5sajp60","content":"<p>Docker </p>\n<p><code>Python</code> <a href=\"http://wiki.zheng-ji.info/Python/virtualenv-py.html\" target=\"_blank\" rel=\"noopener\">virtualenv</a>,<br> <code>Golang</code> <code>C++</code> <br><code>Docker</code></p>\n<p> KafkServer  Docker . </p>\n<h3 id=\"-Docker-\"><a href=\"#-Docker-\" class=\"headerlink\" title=\" Docker \"></a> Docker </h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@zheng-ji:~/workspace/gocode/src/kafconsumer/docker$ tree</span><br><span class=\"line\">.</span><br><span class=\"line\"> Dockerfile</span><br><span class=\"line\"> kafConsumer</span><br><span class=\"line\">    consumer</span><br><span class=\"line\">    etc</span><br><span class=\"line\">       config.yml</span><br><span class=\"line\">       logger.xml</span><br><span class=\"line\">    script</span><br><span class=\"line\">        start.sh</span><br><span class=\"line\"> kafConsumer.tar.gz</span><br></pre></td></tr></table></figure>\n<p> <code>Docker</code> </p>\n<ul>\n<li><code>Dockerfile</code>,</li>\n<li><code>kafCounsumer</code>()</li>\n<li> <code>kafConsumer.tar.gz</code></li>\n</ul>\n<hr>\n<h3 id=\"Dockerfile-\"><a href=\"#Dockerfile-\" class=\"headerlink\" title=\"Dockerfile \"></a>Dockerfile </h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM ubuntu:14.04                                                         </span><br><span class=\"line\">MAINTAINER zheng-ji &lt;zheng-ji.info&gt;                                     </span><br><span class=\"line\">RUN echo Asia/Shanghai &gt; /etc/timezone                   </span><br><span class=\"line\">RUN sed -i &quot;s/archive\\.ubuntu/mirrors.163/&quot; /etc/apt/sources.list          </span><br><span class=\"line\">RUN apt-get update                                                         </span><br><span class=\"line\">COPY kafConsumer.tar.gz /                                                  </span><br><span class=\"line\">RUN tar xvf kafConsumer.tar.gz                                         </span><br><span class=\"line\">VOLUME /data                   </span><br><span class=\"line\">WORKDIR /kafConsumer                                                   </span><br><span class=\"line\">ENTRYPOINT [&quot;./script/start.sh&quot;]</span><br></pre></td></tr></table></figure>\n<p><code>Dockerfile</code> <code>makefile</code> Docker .</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker -t build Server/KafConsumer .</span><br></pre></td></tr></table></figure>\n<p><code>Tag</code>  <code>Server/KafConsumer</code> </p>\n<p> <code>Dockerfile</code> :</p>\n<blockquote>\n<ul>\n<li>ubuntu 14:04</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>/data</li>\n<li></li>\n<li>Dockerstart.sh</li>\n</ul>\n</blockquote>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!/bin/bash</span><br><span class=\"line\">ulimit -a</span><br><span class=\"line\">if [ ! -d /data/ad ];  then</span><br><span class=\"line\">    mkdir /data/ad</span><br><span class=\"line\">fi</span><br><span class=\"line\">exec ./consumer -c=etc/config.yml</span><br></pre></td></tr></table></figure>\n<p>shell #!/bin/bash, exec </p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker run -i -t  -v /path/to/data:/data Server/kafConsumer</span><br></pre></td></tr></table></figure>\n<p>-v .</p>\n<p>###</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker ps -a</span><br><span class=\"line\"></span><br><span class=\"line\"> Docker </span><br><span class=\"line\"></span><br><span class=\"line\">CONTAINER ID    IMAGE           COMMAND                CREATED        STATUS        PORTS    NAMES</span><br><span class=\"line\">5b39d0d5cb85    Server/kafkaconsumer:latest   &quot;./script/start.sh&quot;    3 hours ago    tender_bohr</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker start tender_bohr</span><br><span class=\"line\">sudo docker stop tender_bohr</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Daocloud-\"><a href=\"#Daocloud-\" class=\"headerlink\" title=\"Daocloud  \"></a>Daocloud  </h3><p> Daocloud ,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /etc/default/docker</span><br><span class=\"line\">DOCKER_OPTS=&quot;$DOCKER_OPTS --registry-mirror=http://xxxxxx.m.daocloud.io&quot;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>Docker </p>\n<p><code>Python</code> <a href=\"http://wiki.zheng-ji.info/Python/virtualenv-py.html\" target=\"_blank\" rel=\"noopener\">virtualenv</a>,<br> <code>Golang</code> <code>C++</code> <br><code>Docker</code></p>\n<p> KafkServer  Docker . </p>\n<h3 id=\"-Docker-\"><a href=\"#-Docker-\" class=\"headerlink\" title=\" Docker \"></a> Docker </h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@zheng-ji:~/workspace/gocode/src/kafconsumer/docker$ tree</span><br><span class=\"line\">.</span><br><span class=\"line\"> Dockerfile</span><br><span class=\"line\"> kafConsumer</span><br><span class=\"line\">    consumer</span><br><span class=\"line\">    etc</span><br><span class=\"line\">       config.yml</span><br><span class=\"line\">       logger.xml</span><br><span class=\"line\">    script</span><br><span class=\"line\">        start.sh</span><br><span class=\"line\"> kafConsumer.tar.gz</span><br></pre></td></tr></table></figure>\n<p> <code>Docker</code> </p>\n<ul>\n<li><code>Dockerfile</code>,</li>\n<li><code>kafCounsumer</code>()</li>\n<li> <code>kafConsumer.tar.gz</code></li>\n</ul>\n<hr>\n<h3 id=\"Dockerfile-\"><a href=\"#Dockerfile-\" class=\"headerlink\" title=\"Dockerfile \"></a>Dockerfile </h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM ubuntu:14.04                                                         </span><br><span class=\"line\">MAINTAINER zheng-ji &lt;zheng-ji.info&gt;                                     </span><br><span class=\"line\">RUN echo Asia/Shanghai &gt; /etc/timezone                   </span><br><span class=\"line\">RUN sed -i &quot;s/archive\\.ubuntu/mirrors.163/&quot; /etc/apt/sources.list          </span><br><span class=\"line\">RUN apt-get update                                                         </span><br><span class=\"line\">COPY kafConsumer.tar.gz /                                                  </span><br><span class=\"line\">RUN tar xvf kafConsumer.tar.gz                                         </span><br><span class=\"line\">VOLUME /data                   </span><br><span class=\"line\">WORKDIR /kafConsumer                                                   </span><br><span class=\"line\">ENTRYPOINT [&quot;./script/start.sh&quot;]</span><br></pre></td></tr></table></figure>\n<p><code>Dockerfile</code> <code>makefile</code> Docker .</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker -t build Server/KafConsumer .</span><br></pre></td></tr></table></figure>\n<p><code>Tag</code>  <code>Server/KafConsumer</code> </p>\n<p> <code>Dockerfile</code> :</p>\n<blockquote>\n<ul>\n<li>ubuntu 14:04</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>/data</li>\n<li></li>\n<li>Dockerstart.sh</li>\n</ul>\n</blockquote>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!/bin/bash</span><br><span class=\"line\">ulimit -a</span><br><span class=\"line\">if [ ! -d /data/ad ];  then</span><br><span class=\"line\">    mkdir /data/ad</span><br><span class=\"line\">fi</span><br><span class=\"line\">exec ./consumer -c=etc/config.yml</span><br></pre></td></tr></table></figure>\n<p>shell #!/bin/bash, exec </p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker run -i -t  -v /path/to/data:/data Server/kafConsumer</span><br></pre></td></tr></table></figure>\n<p>-v .</p>\n<p>###</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker ps -a</span><br><span class=\"line\"></span><br><span class=\"line\"> Docker </span><br><span class=\"line\"></span><br><span class=\"line\">CONTAINER ID    IMAGE           COMMAND                CREATED        STATUS        PORTS    NAMES</span><br><span class=\"line\">5b39d0d5cb85    Server/kafkaconsumer:latest   &quot;./script/start.sh&quot;    3 hours ago    tender_bohr</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker start tender_bohr</span><br><span class=\"line\">sudo docker stop tender_bohr</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Daocloud-\"><a href=\"#Daocloud-\" class=\"headerlink\" title=\"Daocloud  \"></a>Daocloud  </h3><p> Daocloud ,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /etc/default/docker</span><br><span class=\"line\">DOCKER_OPTS=&quot;$DOCKER_OPTS --registry-mirror=http://xxxxxx.m.daocloud.io&quot;</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":" Postfix","date":"2015-05-16T16:25:00.000Z","comments":1,"description":"Postfix","_content":"\nPostfix, \n `IP1.2.3.4` `Postfix`\n\n###  ### \n\n```\nsudo apt-get install postfix\n```\n\n###  ### \n\n `/etc/postfix/main.cnf`\n\n```\nsmtpd_banner = $myhostname ESMTP $mail_name (Ubuntu)\nbiff = no\nappend_dot_mydomain = no\nreadme_directory = no\nsmtpd_tls_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem\nsmtpd_tls_key_file=/etc/ssl/private/ssl-cert-snakeoil.key\nsmtpd_use_tls=yes\nsmtpd_tls_session_cache_database = btree:${data_directory}/smtpd_scache\nsmtp_tls_session_cache_database = btree:${data_directory}/smtp_scache\nmyhostname = mail.zheng-ji.info \nalias_maps = hash:/etc/aliases\nalias_database = hash:/etc/aliases\nmyorigin = $myhostname\nmydestination = mail.zheng-ji.info, localhost.localdomain, localhost\nmynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128, hash:/etc/postfix/access \nrelay_domains = $mydestination\ninet_interfaces = all\ninet_protocols = all\n```\n\n###  ### \n\n DNS\n\n```\nA  1.2.3.4\nMX  1.2.3.4\nTXT  v=spf1 ip4:1.2.3.4 ~all\n```\n\n\n\nPostfix access,\n/etc/postfix/access,  `IP:5.6.7.8` \n\n```\n5.6.7.8  OK\n```\n\n\n\n```\nsudo service postfix restart\npostmap access\n```\n","source":"_posts/2015-05-17-da-jian-postfix.markdown","raw":"---\nlayout: post\ntitle: \" Postfix\"\ndate: 2015-05-17 00:25\ncomments: true\ncategories: System\ndescription: Postfix\n---\n\nPostfix, \n `IP1.2.3.4` `Postfix`\n\n###  ### \n\n```\nsudo apt-get install postfix\n```\n\n###  ### \n\n `/etc/postfix/main.cnf`\n\n```\nsmtpd_banner = $myhostname ESMTP $mail_name (Ubuntu)\nbiff = no\nappend_dot_mydomain = no\nreadme_directory = no\nsmtpd_tls_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem\nsmtpd_tls_key_file=/etc/ssl/private/ssl-cert-snakeoil.key\nsmtpd_use_tls=yes\nsmtpd_tls_session_cache_database = btree:${data_directory}/smtpd_scache\nsmtp_tls_session_cache_database = btree:${data_directory}/smtp_scache\nmyhostname = mail.zheng-ji.info \nalias_maps = hash:/etc/aliases\nalias_database = hash:/etc/aliases\nmyorigin = $myhostname\nmydestination = mail.zheng-ji.info, localhost.localdomain, localhost\nmynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128, hash:/etc/postfix/access \nrelay_domains = $mydestination\ninet_interfaces = all\ninet_protocols = all\n```\n\n###  ### \n\n DNS\n\n```\nA  1.2.3.4\nMX  1.2.3.4\nTXT  v=spf1 ip4:1.2.3.4 ~all\n```\n\n\n\nPostfix access,\n/etc/postfix/access,  `IP:5.6.7.8` \n\n```\n5.6.7.8  OK\n```\n\n\n\n```\nsudo service postfix restart\npostmap access\n```\n","slug":"2015-05-17-da-jian-postfix","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuibf003gm1tjic5h6hhc","content":"<p>Postfix, <br> <code>IP1.2.3.4</code> <code>Postfix</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install postfix</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <code>/etc/postfix/main.cnf</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">smtpd_banner = $myhostname ESMTP $mail_name (Ubuntu)</span><br><span class=\"line\">biff = no</span><br><span class=\"line\">append_dot_mydomain = no</span><br><span class=\"line\">readme_directory = no</span><br><span class=\"line\">smtpd_tls_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem</span><br><span class=\"line\">smtpd_tls_key_file=/etc/ssl/private/ssl-cert-snakeoil.key</span><br><span class=\"line\">smtpd_use_tls=yes</span><br><span class=\"line\">smtpd_tls_session_cache_database = btree:$&#123;data_directory&#125;/smtpd_scache</span><br><span class=\"line\">smtp_tls_session_cache_database = btree:$&#123;data_directory&#125;/smtp_scache</span><br><span class=\"line\">myhostname = mail.zheng-ji.info </span><br><span class=\"line\">alias_maps = hash:/etc/aliases</span><br><span class=\"line\">alias_database = hash:/etc/aliases</span><br><span class=\"line\">myorigin = $myhostname</span><br><span class=\"line\">mydestination = mail.zheng-ji.info, localhost.localdomain, localhost</span><br><span class=\"line\">mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128, hash:/etc/postfix/access </span><br><span class=\"line\">relay_domains = $mydestination</span><br><span class=\"line\">inet_interfaces = all</span><br><span class=\"line\">inet_protocols = all</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> DNS</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A  1.2.3.4</span><br><span class=\"line\">MX  1.2.3.4</span><br><span class=\"line\">TXT  v=spf1 ip4:1.2.3.4 ~all</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>Postfix access,<br>/etc/postfix/access,  <code>IP:5.6.7.8</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">5.6.7.8  OK</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service postfix restart</span><br><span class=\"line\">postmap access</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>Postfix, <br> <code>IP1.2.3.4</code> <code>Postfix</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install postfix</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <code>/etc/postfix/main.cnf</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">smtpd_banner = $myhostname ESMTP $mail_name (Ubuntu)</span><br><span class=\"line\">biff = no</span><br><span class=\"line\">append_dot_mydomain = no</span><br><span class=\"line\">readme_directory = no</span><br><span class=\"line\">smtpd_tls_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem</span><br><span class=\"line\">smtpd_tls_key_file=/etc/ssl/private/ssl-cert-snakeoil.key</span><br><span class=\"line\">smtpd_use_tls=yes</span><br><span class=\"line\">smtpd_tls_session_cache_database = btree:$&#123;data_directory&#125;/smtpd_scache</span><br><span class=\"line\">smtp_tls_session_cache_database = btree:$&#123;data_directory&#125;/smtp_scache</span><br><span class=\"line\">myhostname = mail.zheng-ji.info </span><br><span class=\"line\">alias_maps = hash:/etc/aliases</span><br><span class=\"line\">alias_database = hash:/etc/aliases</span><br><span class=\"line\">myorigin = $myhostname</span><br><span class=\"line\">mydestination = mail.zheng-ji.info, localhost.localdomain, localhost</span><br><span class=\"line\">mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128, hash:/etc/postfix/access </span><br><span class=\"line\">relay_domains = $mydestination</span><br><span class=\"line\">inet_interfaces = all</span><br><span class=\"line\">inet_protocols = all</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> DNS</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A  1.2.3.4</span><br><span class=\"line\">MX  1.2.3.4</span><br><span class=\"line\">TXT  v=spf1 ip4:1.2.3.4 ~all</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>Postfix access,<br>/etc/postfix/access,  <code>IP:5.6.7.8</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">5.6.7.8  OK</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service postfix restart</span><br><span class=\"line\">postmap access</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"elasticsearchkibana","date":"2015-01-31T04:52:00.000Z","comments":1,"keywords":"elasticsearch kibana","_content":"\nElasticSearchLuceneRESTful,\nKibana  web \n\n \n### \n\n+ openJDK\n+  [elasticsearch-1.4.2.deb](http://www.elasticsearch.org/overview/elkdownloads/)\n+  [kibana-4.0.0-beta3.tar.gz](http://www.elasticsearch.org/overview/elkdownloads/)\n\n### \n elasticsearch \n\n```\nsudo service elasticsearch restart\n```\n\n*  [supervisor](http://wiki.zheng-ji.info/Sys/supervisor.html)  kibana, \n*  [monit](http://wiki.zheng-ji.info/Sys/monit.html) elasticsearch \n\n/etc/defaut/elasticsearch log 50% \n\nNginx kibananeleasticsearch 5601\n\n```\nserver {\n        listen 80;\n        #auth_basic_user_file /home/ymserver/auth/kibana-user;\n        error_log /home/ymserver/log/nginx/kibana.err.log;\n        location / {\n            proxy_pass http://127.0.0.1:5601$request_uri;\n            proxy_set_header Host $http_host;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; \n            proxy_set_header X-Forwarded-Proto $scheme;\n        }\n}\n```\n \n\n### \nPython elasticsearch  [elasticsearch-py](https://github.com/elasticsearch/elasticsearch-py)\nelasticsearch,\n\nrestful[](http://www.elasticsearch.org/guide/en/elasticsearch/reference/) \n'2014-12-18'q_all\n\n```\ncurl -XGET 'http://localhost:9200/2014-12-18/_search/?q=name:861160022835011'\ncurl -XGET 'http://localhost:9200/_all/_search/?q=name:861160022835011'\ncurl -XGET localhost:9200/_search -d '\n{\n    \"query\": {\n        \"bool\": {\n            \"must\": [\n            {\n                \"term\": {\n                    \"field1\": \"X\"\n                }\n            },\n            {\n                \"term\": {\n                    \"field3\": \"Z\"\n                }\n            }\n            ],\n            \"must_not\": {\n                \"term\": {\n                    \"field2\": \"Y\"\n                }\n            }\n        }\n    }\n}'\n```\n\n### \n14.2G316elasticsearch 6.7G 1s\n","source":"_posts/2015-01-31-da-jian-elasticsearchyu-kibana.markdown","raw":"---\nlayout: post\ntitle: \"elasticsearchkibana\"\ndate: 2015-01-31 12:52\ncomments: true\nkeywords: elasticsearch kibana\ncategories: DataBase\n---\n\nElasticSearchLuceneRESTful,\nKibana  web \n\n \n### \n\n+ openJDK\n+  [elasticsearch-1.4.2.deb](http://www.elasticsearch.org/overview/elkdownloads/)\n+  [kibana-4.0.0-beta3.tar.gz](http://www.elasticsearch.org/overview/elkdownloads/)\n\n### \n elasticsearch \n\n```\nsudo service elasticsearch restart\n```\n\n*  [supervisor](http://wiki.zheng-ji.info/Sys/supervisor.html)  kibana, \n*  [monit](http://wiki.zheng-ji.info/Sys/monit.html) elasticsearch \n\n/etc/defaut/elasticsearch log 50% \n\nNginx kibananeleasticsearch 5601\n\n```\nserver {\n        listen 80;\n        #auth_basic_user_file /home/ymserver/auth/kibana-user;\n        error_log /home/ymserver/log/nginx/kibana.err.log;\n        location / {\n            proxy_pass http://127.0.0.1:5601$request_uri;\n            proxy_set_header Host $http_host;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; \n            proxy_set_header X-Forwarded-Proto $scheme;\n        }\n}\n```\n \n\n### \nPython elasticsearch  [elasticsearch-py](https://github.com/elasticsearch/elasticsearch-py)\nelasticsearch,\n\nrestful[](http://www.elasticsearch.org/guide/en/elasticsearch/reference/) \n'2014-12-18'q_all\n\n```\ncurl -XGET 'http://localhost:9200/2014-12-18/_search/?q=name:861160022835011'\ncurl -XGET 'http://localhost:9200/_all/_search/?q=name:861160022835011'\ncurl -XGET localhost:9200/_search -d '\n{\n    \"query\": {\n        \"bool\": {\n            \"must\": [\n            {\n                \"term\": {\n                    \"field1\": \"X\"\n                }\n            },\n            {\n                \"term\": {\n                    \"field3\": \"Z\"\n                }\n            }\n            ],\n            \"must_not\": {\n                \"term\": {\n                    \"field2\": \"Y\"\n                }\n            }\n        }\n    }\n}'\n```\n\n### \n14.2G316elasticsearch 6.7G 1s\n","slug":"2015-01-31-da-jian-elasticsearchyu-kibana","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuibg003im1tjtkiuwybv","content":"<p>ElasticSearchLuceneRESTful,<br>Kibana  web </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>openJDK</li>\n<li> <a href=\"http://www.elasticsearch.org/overview/elkdownloads/\" target=\"_blank\" rel=\"noopener\">elasticsearch-1.4.2.deb</a></li>\n<li> <a href=\"http://www.elasticsearch.org/overview/elkdownloads/\" target=\"_blank\" rel=\"noopener\">kibana-4.0.0-beta3.tar.gz</a></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> elasticsearch </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service elasticsearch restart</span><br></pre></td></tr></table></figure>\n<ul>\n<li> <a href=\"http://wiki.zheng-ji.info/Sys/supervisor.html\" target=\"_blank\" rel=\"noopener\">supervisor</a>  kibana, </li>\n<li> <a href=\"http://wiki.zheng-ji.info/Sys/monit.html\" target=\"_blank\" rel=\"noopener\">monit</a> elasticsearch </li>\n</ul>\n<p>/etc/defaut/elasticsearch log 50% </p>\n<p>Nginx kibananeleasticsearch 5601</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">        listen 80;</span><br><span class=\"line\">        #auth_basic_user_file /home/ymserver/auth/kibana-user;</span><br><span class=\"line\">        error_log /home/ymserver/log/nginx/kibana.err.log;</span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">            proxy_pass http://127.0.0.1:5601$request_uri;</span><br><span class=\"line\">            proxy_set_header Host $http_host;</span><br><span class=\"line\">            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; </span><br><span class=\"line\">            proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Python elasticsearch  <a href=\"https://github.com/elasticsearch/elasticsearch-py\" target=\"_blank\" rel=\"noopener\">elasticsearch-py</a><br>elasticsearch,</p>\n<p>restful<a href=\"http://www.elasticsearch.org/guide/en/elasticsearch/reference/\" target=\"_blank\" rel=\"noopener\"></a><br>2014-12-18q_all</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -XGET &apos;http://localhost:9200/2014-12-18/_search/?q=name:861160022835011&apos;</span><br><span class=\"line\">curl -XGET &apos;http://localhost:9200/_all/_search/?q=name:861160022835011&apos;</span><br><span class=\"line\">curl -XGET localhost:9200/_search -d &apos;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;query&quot;: &#123;</span><br><span class=\"line\">        &quot;bool&quot;: &#123;</span><br><span class=\"line\">            &quot;must&quot;: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;term&quot;: &#123;</span><br><span class=\"line\">                    &quot;field1&quot;: &quot;X&quot;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;term&quot;: &#123;</span><br><span class=\"line\">                    &quot;field3&quot;: &quot;Z&quot;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;must_not&quot;: &#123;</span><br><span class=\"line\">                &quot;term&quot;: &#123;</span><br><span class=\"line\">                    &quot;field2&quot;: &quot;Y&quot;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;&apos;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>14.2G316elasticsearch 6.7G 1s</p>\n","site":{"data":{}},"excerpt":"","more":"<p>ElasticSearchLuceneRESTful,<br>Kibana  web </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>openJDK</li>\n<li> <a href=\"http://www.elasticsearch.org/overview/elkdownloads/\" target=\"_blank\" rel=\"noopener\">elasticsearch-1.4.2.deb</a></li>\n<li> <a href=\"http://www.elasticsearch.org/overview/elkdownloads/\" target=\"_blank\" rel=\"noopener\">kibana-4.0.0-beta3.tar.gz</a></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> elasticsearch </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service elasticsearch restart</span><br></pre></td></tr></table></figure>\n<ul>\n<li> <a href=\"http://wiki.zheng-ji.info/Sys/supervisor.html\" target=\"_blank\" rel=\"noopener\">supervisor</a>  kibana, </li>\n<li> <a href=\"http://wiki.zheng-ji.info/Sys/monit.html\" target=\"_blank\" rel=\"noopener\">monit</a> elasticsearch </li>\n</ul>\n<p>/etc/defaut/elasticsearch log 50% </p>\n<p>Nginx kibananeleasticsearch 5601</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">        listen 80;</span><br><span class=\"line\">        #auth_basic_user_file /home/ymserver/auth/kibana-user;</span><br><span class=\"line\">        error_log /home/ymserver/log/nginx/kibana.err.log;</span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">            proxy_pass http://127.0.0.1:5601$request_uri;</span><br><span class=\"line\">            proxy_set_header Host $http_host;</span><br><span class=\"line\">            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; </span><br><span class=\"line\">            proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Python elasticsearch  <a href=\"https://github.com/elasticsearch/elasticsearch-py\" target=\"_blank\" rel=\"noopener\">elasticsearch-py</a><br>elasticsearch,</p>\n<p>restful<a href=\"http://www.elasticsearch.org/guide/en/elasticsearch/reference/\" target=\"_blank\" rel=\"noopener\"></a><br>2014-12-18q_all</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -XGET &apos;http://localhost:9200/2014-12-18/_search/?q=name:861160022835011&apos;</span><br><span class=\"line\">curl -XGET &apos;http://localhost:9200/_all/_search/?q=name:861160022835011&apos;</span><br><span class=\"line\">curl -XGET localhost:9200/_search -d &apos;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;query&quot;: &#123;</span><br><span class=\"line\">        &quot;bool&quot;: &#123;</span><br><span class=\"line\">            &quot;must&quot;: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;term&quot;: &#123;</span><br><span class=\"line\">                    &quot;field1&quot;: &quot;X&quot;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;term&quot;: &#123;</span><br><span class=\"line\">                    &quot;field3&quot;: &quot;Z&quot;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;must_not&quot;: &#123;</span><br><span class=\"line\">                &quot;term&quot;: &#123;</span><br><span class=\"line\">                    &quot;field2&quot;: &quot;Y&quot;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;&apos;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>14.2G316elasticsearch 6.7G 1s</p>\n"},{"layout":"post","title":"haproxy - MySQl ","date":"2015-02-03T15:17:00.000Z","keywords":"haproxy","description":"haproxy mysql","_content":"\nPHP n , 100 * m PHP \n\n, \n\n+ [Atlas](https://github.com/Qihoo360/Atlas), [OneProxy](http://weibo.com/dbatools), MySQL-Proxy;\n+ Haproxy \n\n,  Haproxy .\n\n----\n\n### \n\n[](http://www.sysads.co.uk/2014/08/install-haproxy-1-5-6-on-ubuntu-14-04/):\n\n\n\n```\nlisten mysql-cluster\n    bind 127.0.0.1:3306  # 3306 DB\n    mode tcp\n    option mysql-check user haproxy_check # haproxy_check haproxy\n    balance roundrobin\n    server mysql-1 10.0.0.1:3306 check # DB\n    server mysql-2 10.0.0.2:3306 check # DB\n\nlisten 0.0.0.0:8080 # \n    mode http\n    stats enable\n    stats uri /\n    stats realm Strictly\\ Private\n    stats auth A_Username:YourPassword\n    stats auth Another_User:passwd\n```\n\nDB  haproxy_check,\n\n```\nip 192.168.1.5\ncreate user 'haproxy_check'@'192.168.1.5' identified by 'xxx';\nflush privileges;\n```\n haproxy \n\n```\nmysql -h127.0.0.1 -uusername -p\nlost connection to mysql server at 'reading initial communication packet'\n```\n\n digitalocean \n\n```\nINSERT INTO mysql.user (Host,User) values ('192.168.1.5','haproxy_check');\nflush privileges;\n```\n\n., \n\n\n\n\n\n\n\n","source":"_posts/2015-02-03-haproxy-plus-mysql.markdown","raw":"---\nlayout: post\ntitle: \"haproxy - MySQl \"\ndate: 2015-02-03 23:17\nkeywords: haproxy\ndescription: haproxy mysql \ncategories: DataBase\n---\n\nPHP n , 100 * m PHP \n\n, \n\n+ [Atlas](https://github.com/Qihoo360/Atlas), [OneProxy](http://weibo.com/dbatools), MySQL-Proxy;\n+ Haproxy \n\n,  Haproxy .\n\n----\n\n### \n\n[](http://www.sysads.co.uk/2014/08/install-haproxy-1-5-6-on-ubuntu-14-04/):\n\n\n\n```\nlisten mysql-cluster\n    bind 127.0.0.1:3306  # 3306 DB\n    mode tcp\n    option mysql-check user haproxy_check # haproxy_check haproxy\n    balance roundrobin\n    server mysql-1 10.0.0.1:3306 check # DB\n    server mysql-2 10.0.0.2:3306 check # DB\n\nlisten 0.0.0.0:8080 # \n    mode http\n    stats enable\n    stats uri /\n    stats realm Strictly\\ Private\n    stats auth A_Username:YourPassword\n    stats auth Another_User:passwd\n```\n\nDB  haproxy_check,\n\n```\nip 192.168.1.5\ncreate user 'haproxy_check'@'192.168.1.5' identified by 'xxx';\nflush privileges;\n```\n haproxy \n\n```\nmysql -h127.0.0.1 -uusername -p\nlost connection to mysql server at 'reading initial communication packet'\n```\n\n digitalocean \n\n```\nINSERT INTO mysql.user (Host,User) values ('192.168.1.5','haproxy_check');\nflush privileges;\n```\n\n., \n\n\n\n\n\n\n\n","slug":"2015-02-03-haproxy-plus-mysql","published":1,"updated":"2018-06-17T10:38:56.000Z","comments":1,"photos":[],"link":"","_id":"cjv8xuibh003km1tj7k6ryp8u","content":"<p>PHP n , 100 * m PHP </p>\n<p>, </p>\n<ul>\n<li><a href=\"https://github.com/Qihoo360/Atlas\" target=\"_blank\" rel=\"noopener\">Atlas</a>, <a href=\"http://weibo.com/dbatools\" target=\"_blank\" rel=\"noopener\">OneProxy</a>, MySQL-Proxy;</li>\n<li>Haproxy </li>\n</ul>\n<p>,  Haproxy .</p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://www.sysads.co.uk/2014/08/install-haproxy-1-5-6-on-ubuntu-14-04/\" target=\"_blank\" rel=\"noopener\"></a>:</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">listen mysql-cluster</span><br><span class=\"line\">    bind 127.0.0.1:3306  # 3306 DB</span><br><span class=\"line\">    mode tcp</span><br><span class=\"line\">    option mysql-check user haproxy_check # haproxy_check haproxy</span><br><span class=\"line\">    balance roundrobin</span><br><span class=\"line\">    server mysql-1 10.0.0.1:3306 check # DB</span><br><span class=\"line\">    server mysql-2 10.0.0.2:3306 check # DB</span><br><span class=\"line\"></span><br><span class=\"line\">listen 0.0.0.0:8080 # </span><br><span class=\"line\">    mode http</span><br><span class=\"line\">    stats enable</span><br><span class=\"line\">    stats uri /</span><br><span class=\"line\">    stats realm Strictly\\ Private</span><br><span class=\"line\">    stats auth A_Username:YourPassword</span><br><span class=\"line\">    stats auth Another_User:passwd</span><br></pre></td></tr></table></figure>\n<p>DB  haproxy_check,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ip 192.168.1.5</span><br><span class=\"line\">create user &apos;haproxy_check&apos;@&apos;192.168.1.5&apos; identified by &apos;xxx&apos;;</span><br><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure>\n<p> haproxy </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -h127.0.0.1 -uusername -p</span><br><span class=\"line\">lost connection to mysql server at &apos;reading initial communication packet&apos;</span><br></pre></td></tr></table></figure>\n<p> digitalocean </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INSERT INTO mysql.user (Host,User) values (&apos;192.168.1.5&apos;,&apos;haproxy_check&apos;);</span><br><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure>\n<p>., </p>\n","site":{"data":{}},"excerpt":"","more":"<p>PHP n , 100 * m PHP </p>\n<p>, </p>\n<ul>\n<li><a href=\"https://github.com/Qihoo360/Atlas\" target=\"_blank\" rel=\"noopener\">Atlas</a>, <a href=\"http://weibo.com/dbatools\" target=\"_blank\" rel=\"noopener\">OneProxy</a>, MySQL-Proxy;</li>\n<li>Haproxy </li>\n</ul>\n<p>,  Haproxy .</p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://www.sysads.co.uk/2014/08/install-haproxy-1-5-6-on-ubuntu-14-04/\" target=\"_blank\" rel=\"noopener\"></a>:</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">listen mysql-cluster</span><br><span class=\"line\">    bind 127.0.0.1:3306  # 3306 DB</span><br><span class=\"line\">    mode tcp</span><br><span class=\"line\">    option mysql-check user haproxy_check # haproxy_check haproxy</span><br><span class=\"line\">    balance roundrobin</span><br><span class=\"line\">    server mysql-1 10.0.0.1:3306 check # DB</span><br><span class=\"line\">    server mysql-2 10.0.0.2:3306 check # DB</span><br><span class=\"line\"></span><br><span class=\"line\">listen 0.0.0.0:8080 # </span><br><span class=\"line\">    mode http</span><br><span class=\"line\">    stats enable</span><br><span class=\"line\">    stats uri /</span><br><span class=\"line\">    stats realm Strictly\\ Private</span><br><span class=\"line\">    stats auth A_Username:YourPassword</span><br><span class=\"line\">    stats auth Another_User:passwd</span><br></pre></td></tr></table></figure>\n<p>DB  haproxy_check,</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ip 192.168.1.5</span><br><span class=\"line\">create user &apos;haproxy_check&apos;@&apos;192.168.1.5&apos; identified by &apos;xxx&apos;;</span><br><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure>\n<p> haproxy </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -h127.0.0.1 -uusername -p</span><br><span class=\"line\">lost connection to mysql server at &apos;reading initial communication packet&apos;</span><br></pre></td></tr></table></figure>\n<p> digitalocean </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INSERT INTO mysql.user (Host,User) values (&apos;192.168.1.5&apos;,&apos;haproxy_check&apos;);</span><br><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure>\n<p>., </p>\n"},{"layout":"post","title":"MySQL Slave Relay log Corrupt ","date":"2015-05-10T12:02:00.000Z","comments":1,"description":"mys1l slave relay log","_content":"\n###  ### \n `ganglia` , \n\n```\nMySQL_Slave_SQL is 0.00\n```\n\n\n```\nshow slave status\\G;\n```\n\n\n\n```\nSlave_IO_State: Waiting for master to send event\n   Master_Host: xxx.xxx.xxx\n   Master_User: replication\n   Master_Port: 3306\n   Connect_Retry: 60\n   Master_Log_File: mysql-bin.000028\n   ad_Master_Log_Pos: 982714864\n   Relay_Log_File: relay-bin.000143\n   Relay_Master_Log_File: mysql-bin.000028\n   Slave_IO_Running: Yes\n   Slave_SQL_Running: No\n   Replicate_Do_DB:\n Replicate_Ignore_DB:\n Replicate_Do_Table:\n Replicate_Ignore_Table:\n Replicate_Wild_Do_Table:\n Replicate_Wild_Ignore_Table:\n Last_Errno: 1594\n Last_Error: Relay log read failure: Could not parse relay log event entry. The possible reasons are: the master's binary log is corrupted (you can check this by running 'mysqlbinlog' on the binary log), the slave's relay log is corrupted (you can check this by running 'mysqlbinlog' on the relay log), a network problem, or a bug in the master's or slave's MySQL code. If you want to check the master's binary log or slave's relay log, you will be able to know their names by issuing 'SHOW SLAVE STATUS' on this slave.\n Skip_Counter: 3\n Exec_Master_Log_Pos: 974999870\n Relay_Log_Space: 399910514\n Until_Condition: None\n```\n \n relay log ,  MySQL mysqld_safe \n\n###  ###\n\n\n\n```\nRelay_Master_Log_File: mysql-bin.000028\nExec_Master_Log_Pos: 974999870\n```\n\n\n\n```\nmysql> stop slave ;\nmysql> change master to master_log_file='mysql-bin.000028',master_log_pos=974999870;\nmysql> start slave;\n```\n                                                                                  \n MySQL \n","source":"_posts/2015-05-10-mysql-slave-relay-log-corrupt-chu-li-he-hui-fu.markdown","raw":"---\nlayout: post\ntitle: \"MySQL Slave Relay log Corrupt \"\ndate: 2015-05-10 20:02\ncomments: true\ncategories: DataBase\ndescription: mys1l slave relay log\n---\n\n###  ### \n `ganglia` , \n\n```\nMySQL_Slave_SQL is 0.00\n```\n\n\n```\nshow slave status\\G;\n```\n\n\n\n```\nSlave_IO_State: Waiting for master to send event\n   Master_Host: xxx.xxx.xxx\n   Master_User: replication\n   Master_Port: 3306\n   Connect_Retry: 60\n   Master_Log_File: mysql-bin.000028\n   ad_Master_Log_Pos: 982714864\n   Relay_Log_File: relay-bin.000143\n   Relay_Master_Log_File: mysql-bin.000028\n   Slave_IO_Running: Yes\n   Slave_SQL_Running: No\n   Replicate_Do_DB:\n Replicate_Ignore_DB:\n Replicate_Do_Table:\n Replicate_Ignore_Table:\n Replicate_Wild_Do_Table:\n Replicate_Wild_Ignore_Table:\n Last_Errno: 1594\n Last_Error: Relay log read failure: Could not parse relay log event entry. The possible reasons are: the master's binary log is corrupted (you can check this by running 'mysqlbinlog' on the binary log), the slave's relay log is corrupted (you can check this by running 'mysqlbinlog' on the relay log), a network problem, or a bug in the master's or slave's MySQL code. If you want to check the master's binary log or slave's relay log, you will be able to know their names by issuing 'SHOW SLAVE STATUS' on this slave.\n Skip_Counter: 3\n Exec_Master_Log_Pos: 974999870\n Relay_Log_Space: 399910514\n Until_Condition: None\n```\n \n relay log ,  MySQL mysqld_safe \n\n###  ###\n\n\n\n```\nRelay_Master_Log_File: mysql-bin.000028\nExec_Master_Log_Pos: 974999870\n```\n\n\n\n```\nmysql> stop slave ;\nmysql> change master to master_log_file='mysql-bin.000028',master_log_pos=974999870;\nmysql> start slave;\n```\n                                                                                  \n MySQL \n","slug":"2015-05-10-mysql-slave-relay-log-corrupt-chu-li-he-hui-fu","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuibi003mm1tjc5xcxcf7","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <code>ganglia</code> , </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MySQL_Slave_SQL is 0.00</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show slave status\\G;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Slave_IO_State: Waiting for master to send event</span><br><span class=\"line\">   Master_Host: xxx.xxx.xxx</span><br><span class=\"line\">   Master_User: replication</span><br><span class=\"line\">   Master_Port: 3306</span><br><span class=\"line\">   Connect_Retry: 60</span><br><span class=\"line\">   Master_Log_File: mysql-bin.000028</span><br><span class=\"line\">   ad_Master_Log_Pos: 982714864</span><br><span class=\"line\">   Relay_Log_File: relay-bin.000143</span><br><span class=\"line\">   Relay_Master_Log_File: mysql-bin.000028</span><br><span class=\"line\">   Slave_IO_Running: Yes</span><br><span class=\"line\">   Slave_SQL_Running: No</span><br><span class=\"line\">   Replicate_Do_DB:</span><br><span class=\"line\"> Replicate_Ignore_DB:</span><br><span class=\"line\"> Replicate_Do_Table:</span><br><span class=\"line\"> Replicate_Ignore_Table:</span><br><span class=\"line\"> Replicate_Wild_Do_Table:</span><br><span class=\"line\"> Replicate_Wild_Ignore_Table:</span><br><span class=\"line\"> Last_Errno: 1594</span><br><span class=\"line\"> Last_Error: Relay log read failure: Could not parse relay log event entry. The possible reasons are: the master&apos;s binary log is corrupted (you can check this by running &apos;mysqlbinlog&apos; on the binary log), the slave&apos;s relay log is corrupted (you can check this by running &apos;mysqlbinlog&apos; on the relay log), a network problem, or a bug in the master&apos;s or slave&apos;s MySQL code. If you want to check the master&apos;s binary log or slave&apos;s relay log, you will be able to know their names by issuing &apos;SHOW SLAVE STATUS&apos; on this slave.</span><br><span class=\"line\"> Skip_Counter: 3</span><br><span class=\"line\"> Exec_Master_Log_Pos: 974999870</span><br><span class=\"line\"> Relay_Log_Space: 399910514</span><br><span class=\"line\"> Until_Condition: None</span><br></pre></td></tr></table></figure>\n<p> relay log ,  MySQL mysqld_safe </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Relay_Master_Log_File: mysql-bin.000028</span><br><span class=\"line\">Exec_Master_Log_Pos: 974999870</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; stop slave ;</span><br><span class=\"line\">mysql&gt; change master to master_log_file=&apos;mysql-bin.000028&apos;,master_log_pos=974999870;</span><br><span class=\"line\">mysql&gt; start slave;</span><br></pre></td></tr></table></figure>\n<p> MySQL </p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <code>ganglia</code> , </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MySQL_Slave_SQL is 0.00</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show slave status\\G;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Slave_IO_State: Waiting for master to send event</span><br><span class=\"line\">   Master_Host: xxx.xxx.xxx</span><br><span class=\"line\">   Master_User: replication</span><br><span class=\"line\">   Master_Port: 3306</span><br><span class=\"line\">   Connect_Retry: 60</span><br><span class=\"line\">   Master_Log_File: mysql-bin.000028</span><br><span class=\"line\">   ad_Master_Log_Pos: 982714864</span><br><span class=\"line\">   Relay_Log_File: relay-bin.000143</span><br><span class=\"line\">   Relay_Master_Log_File: mysql-bin.000028</span><br><span class=\"line\">   Slave_IO_Running: Yes</span><br><span class=\"line\">   Slave_SQL_Running: No</span><br><span class=\"line\">   Replicate_Do_DB:</span><br><span class=\"line\"> Replicate_Ignore_DB:</span><br><span class=\"line\"> Replicate_Do_Table:</span><br><span class=\"line\"> Replicate_Ignore_Table:</span><br><span class=\"line\"> Replicate_Wild_Do_Table:</span><br><span class=\"line\"> Replicate_Wild_Ignore_Table:</span><br><span class=\"line\"> Last_Errno: 1594</span><br><span class=\"line\"> Last_Error: Relay log read failure: Could not parse relay log event entry. The possible reasons are: the master&apos;s binary log is corrupted (you can check this by running &apos;mysqlbinlog&apos; on the binary log), the slave&apos;s relay log is corrupted (you can check this by running &apos;mysqlbinlog&apos; on the relay log), a network problem, or a bug in the master&apos;s or slave&apos;s MySQL code. If you want to check the master&apos;s binary log or slave&apos;s relay log, you will be able to know their names by issuing &apos;SHOW SLAVE STATUS&apos; on this slave.</span><br><span class=\"line\"> Skip_Counter: 3</span><br><span class=\"line\"> Exec_Master_Log_Pos: 974999870</span><br><span class=\"line\"> Relay_Log_Space: 399910514</span><br><span class=\"line\"> Until_Condition: None</span><br></pre></td></tr></table></figure>\n<p> relay log ,  MySQL mysqld_safe </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Relay_Master_Log_File: mysql-bin.000028</span><br><span class=\"line\">Exec_Master_Log_Pos: 974999870</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; stop slave ;</span><br><span class=\"line\">mysql&gt; change master to master_log_file=&apos;mysql-bin.000028&apos;,master_log_pos=974999870;</span><br><span class=\"line\">mysql&gt; start slave;</span><br></pre></td></tr></table></figure>\n<p> MySQL </p>\n"},{"layout":"post","title":" btmp ","date":"2015-07-24T15:06:00.000Z","comments":1,"description":"linux","_content":"\n `/var/log/btmp` \n\n ssh\n `lastb` \n\nIP\n\n```\nsudo lastb | awk '{ print $3}' | awk '{++S[$NF]} END {for(a in S) print a, S[a]}' | sort -rk2 |head\n```\n\nIP\n\n```\niptables -A INPUT -i eth0 -s *.*.*.0/24 -j DROP\n```\n","source":"_posts/2015-07-24-ji-lu-cuo-wu-deng-lu-de-btmpwen-jian.markdown","raw":"---\nlayout: post\ntitle: \" btmp \"\ndate: 2015-07-24 23:06\ncomments: true\ncategories: System\ndescription: linux\n---\n\n `/var/log/btmp` \n\n ssh\n `lastb` \n\nIP\n\n```\nsudo lastb | awk '{ print $3}' | awk '{++S[$NF]} END {for(a in S) print a, S[a]}' | sort -rk2 |head\n```\n\nIP\n\n```\niptables -A INPUT -i eth0 -s *.*.*.0/24 -j DROP\n```\n","slug":"2015-07-24-ji-lu-cuo-wu-deng-lu-de-btmpwen-jian","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuibk003om1tjy2olal2t","content":"<p> <code>/var/log/btmp</code> </p>\n<p> ssh<br> <code>lastb</code> </p>\n<p>IP</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo lastb | awk &apos;&#123; print $3&#125;&apos; | awk &apos;&#123;++S[$NF]&#125; END &#123;for(a in S) print a, S[a]&#125;&apos; | sort -rk2 |head</span><br></pre></td></tr></table></figure>\n<p>IP</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iptables -A INPUT -i eth0 -s *.*.*.0/24 -j DROP</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p> <code>/var/log/btmp</code> </p>\n<p> ssh<br> <code>lastb</code> </p>\n<p>IP</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo lastb | awk &apos;&#123; print $3&#125;&apos; | awk &apos;&#123;++S[$NF]&#125; END &#123;for(a in S) print a, S[a]&#125;&apos; | sort -rk2 |head</span><br></pre></td></tr></table></figure>\n<p>IP</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iptables -A INPUT -i eth0 -s *.*.*.0/24 -j DROP</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"","date":"2015-06-11T15:14:00.000Z","comments":1,"description":"Redis bitset","_content":"\n##  ##\n\n Cookie UV\n5CookieUV\n\n\n IP+UserAgent  UV\n\n####\n\n* Plan A\n\n `IP+UA`  Redis  Set \n200WUV1`IP+UA`150300MB\n\n \n\n* Plan B:\n\n `IP+UA`  Redis  BitSet `UV`\n\n```\nconn = redis()\nindex = hash(UA+IP)\nkey = \"xxx_2015-05-10\"\nconn.do('SETBIT', key, index, 1) # hash1\n\nrealtime_uv = conn.do('BITCOUNT', key) # uv\n```\n\nhash200W2M\n Plan B\n\n\n##  ##\n\n* [Redis Set](https://redis.readthedocs.org/en/2.4/set.html)\n* [Redis BitSet](http://redis.io/commands/SETBIT)\n* [NoSQLFan ](http://blog.nosqlfan.com/html/3501.html)\n\n","source":"_posts/2015-06-11-qing-qiao-shi-shi-tong-ji-yong-hu-shu.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2015-06-11 23:14\ncomments: true\ncategories: Program\ndescription: Redis bitset\n---\n\n##  ##\n\n Cookie UV\n5CookieUV\n\n\n IP+UserAgent  UV\n\n####\n\n* Plan A\n\n `IP+UA`  Redis  Set \n200WUV1`IP+UA`150300MB\n\n \n\n* Plan B:\n\n `IP+UA`  Redis  BitSet `UV`\n\n```\nconn = redis()\nindex = hash(UA+IP)\nkey = \"xxx_2015-05-10\"\nconn.do('SETBIT', key, index, 1) # hash1\n\nrealtime_uv = conn.do('BITCOUNT', key) # uv\n```\n\nhash200W2M\n Plan B\n\n\n##  ##\n\n* [Redis Set](https://redis.readthedocs.org/en/2.4/set.html)\n* [Redis BitSet](http://redis.io/commands/SETBIT)\n* [NoSQLFan ](http://blog.nosqlfan.com/html/3501.html)\n\n","slug":"2015-06-11-qing-qiao-shi-shi-tong-ji-yong-hu-shu","published":1,"updated":"2018-07-01T05:56:53.000Z","photos":[],"link":"","_id":"cjv8xuibl003qm1tjczmuqgdj","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Cookie UV<br>5CookieUV<br></p>\n<p> IP+UserAgent  UV</p>\n<p>####</p>\n<ul>\n<li>Plan A</li>\n</ul>\n<p> <code>IP+UA</code>  Redis  Set <br>200WUV1<code>IP+UA</code>150300MB</p>\n<p> </p>\n<ul>\n<li>Plan B:</li>\n</ul>\n<p> <code>IP+UA</code>  Redis  BitSet <code>UV</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conn = redis()</span><br><span class=\"line\">index = hash(UA+IP)</span><br><span class=\"line\">key = &quot;xxx_2015-05-10&quot;</span><br><span class=\"line\">conn.do(&apos;SETBIT&apos;, key, index, 1) # hash1</span><br><span class=\"line\"></span><br><span class=\"line\">realtime_uv = conn.do(&apos;BITCOUNT&apos;, key) # uv</span><br></pre></td></tr></table></figure>\n<p>hash200W2M<br> Plan B</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://redis.readthedocs.org/en/2.4/set.html\" target=\"_blank\" rel=\"noopener\">Redis Set</a></li>\n<li><a href=\"http://redis.io/commands/SETBIT\" target=\"_blank\" rel=\"noopener\">Redis BitSet</a></li>\n<li><a href=\"http://blog.nosqlfan.com/html/3501.html\" target=\"_blank\" rel=\"noopener\">NoSQLFan </a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Cookie UV<br>5CookieUV<br></p>\n<p> IP+UserAgent  UV</p>\n<p>####</p>\n<ul>\n<li>Plan A</li>\n</ul>\n<p> <code>IP+UA</code>  Redis  Set <br>200WUV1<code>IP+UA</code>150300MB</p>\n<p> </p>\n<ul>\n<li>Plan B:</li>\n</ul>\n<p> <code>IP+UA</code>  Redis  BitSet <code>UV</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conn = redis()</span><br><span class=\"line\">index = hash(UA+IP)</span><br><span class=\"line\">key = &quot;xxx_2015-05-10&quot;</span><br><span class=\"line\">conn.do(&apos;SETBIT&apos;, key, index, 1) # hash1</span><br><span class=\"line\"></span><br><span class=\"line\">realtime_uv = conn.do(&apos;BITCOUNT&apos;, key) # uv</span><br></pre></td></tr></table></figure>\n<p>hash200W2M<br> Plan B</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://redis.readthedocs.org/en/2.4/set.html\" target=\"_blank\" rel=\"noopener\">Redis Set</a></li>\n<li><a href=\"http://redis.io/commands/SETBIT\" target=\"_blank\" rel=\"noopener\">Redis BitSet</a></li>\n<li><a href=\"http://blog.nosqlfan.com/html/3501.html\" target=\"_blank\" rel=\"noopener\">NoSQLFan </a></li>\n</ul>\n"},{"layout":"post","title":"","date":"2015-08-10T14:24:00.000Z","comments":1,"_content":"\n, \n    \n, [](http://pact.im) \n\n* ; \n* v\n* w\n\n, ``, , , , ,  , .  .\n\n{% img /images/2015/08/teammate.png %}\n\n","source":"_posts/2015-08-10-hackthon.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2015-08-10 22:24\ncomments: true\ncategories: Product\n---\n\n, \n    \n, [](http://pact.im) \n\n* ; \n* v\n* w\n\n, ``, , , , ,  , .  .\n\n{% img /images/2015/08/teammate.png %}\n\n","slug":"2015-08-10-hackthon","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuibm003sm1tjl0wmmb0y","content":"<p>, </p>\n<p>, <a href=\"http://pact.im\" target=\"_blank\" rel=\"noopener\"></a> </p>\n<ul>\n<li>; </li>\n<li>v</li>\n<li>w</li>\n</ul>\n<p>, <code></code>, , , , ,  , .  .</p>\n<img src=\"/images/2015/08/teammate.png\">\n","site":{"data":{}},"excerpt":"","more":"<p>, </p>\n<p>, <a href=\"http://pact.im\" target=\"_blank\" rel=\"noopener\"></a> </p>\n<ul>\n<li>; </li>\n<li>v</li>\n<li>w</li>\n</ul>\n<p>, <code></code>, , , , ,  , .  .</p>\n<img src=\"/images/2015/08/teammate.png\">\n"},{"layout":"post","title":"my.cnf ","date":"2015-07-12T00:35:00.000Z","comments":1,"description":"MySQL my.cnf","_content":"\n[](http://book.douban.com/subject/6873681/)  `MySQL` \n\n* [](#)\n* [innodb_pool_buffer ](#)\n* [](#)\n* [](#)\n* [](#)\n* [](#)\n\n\n<h3 id=\"\"></h3>\n\n```\nskip-name-resolve:\n```\n\n MySQL  DNS  , MySQL DNS IP\n\n```\nback_log=512\n```\n\n MySQL \n\n```\nkey_buffer_size\n```\n\n 4G  256MB\n\n```\nmax_allowed_packet=4M\n```\n\n\n```\nthread_stack=256k\n```\n\n\n```\ntable_cache=614k\n```\nmysqlopen_tablesopen_cachetable_cacheopen_Tabletable_cache\n\n```\nsort_buffer_size=6M\n```\n100100*6=600M\nread_buffer_size,join_buffer_size \n\n```\nthread_cache_size=64\n```\n,4GB64\n\n```\nquery_cache_size=64M\n```\n\n\n\n```\ntmp_table_size\n```\n\n1kB-4GB\n\n```\nmax_connection\n```\n\n`too many connections`\n\n```\nmax_connect_errors\n```\nMySQLhostMySQL\n\n```\nwait_timeout = 120\n```\n\n\n```\nthread_concurrency=8\n```\nCPU * 2\n\n```\nskip-networking\n```\n\n\n```\ninnodb_flush_log_at_trx_commit = 1\n```\n0 innodb_log_buffer_size 1\n\n```\ninnodb_thread_concurrency = 8\n```\nCPU\n\n```\nread_rnd_buffer_Size = 16M\n```\n\n\n\n<h3 id=\"\">innodb_buffer_pool </h3>\n\ninnodb_buffer pool 50-80% \n\n```\nshow status like 'innodb_buffer_pool_%'\n\n\ninnodb_buffer_pool_pages_data;\ninnodb_buffer_pool_page_total;\ninnodb_buffer_pool_read_request;\ninnodb_buffer_pool_reads;\n```\n\n\n\n```\n (innodb_buffer_pool_read_request - innodb_buffer_pool_reads) / innodb_buffer_pool_read_request;\n innodb_buffer_pool_pages_data /innodb_buffer_pool_page_total;\n```\n95%\n\n\n<h3 id=\"\"></h3>\n\n```\nshow global status like 'open_files'\nshow variables like 'open_file_limit';\n```\n Open_files / open_files_limit * 100% <= 75;\n\n\n<h3 id=\"\"></h3>\n\n```\nshow global status like 'open%tables';\nshow variable like 'table_cache';\n```\n\n\n```\nopen_tables / opende_tables * 100 > 85%;\nopen_Tables / table_Cache* 100% < 95%\n```\n\n<h3 id=\"\"></h3>\n\n:\n\n```\nshow gloabl status like 'created_tmp5';\nCreated_tmp_disk_table / Created_tmp_tables * 100% <= 25 %\n```\n\n\n<h3 id=\"\"></h3>\n\n```\nshow global status like 'key_read%';\n```\nkey_cache_miss_rate = key_Read / key_read_request * 100%  1% \n1000\n","source":"_posts/2015-07-12-my-dot-cnfpei-zhi-yi-ju.markdown","raw":"---\nlayout: post\ntitle: \"my.cnf \"\ndate: 2015-07-12 08:35\ncomments: true\ncategories: DataBase\ndescription: MySQL my.cnf\n---\n\n[](http://book.douban.com/subject/6873681/)  `MySQL` \n\n* [](#)\n* [innodb_pool_buffer ](#)\n* [](#)\n* [](#)\n* [](#)\n* [](#)\n\n\n<h3 id=\"\"></h3>\n\n```\nskip-name-resolve:\n```\n\n MySQL  DNS  , MySQL DNS IP\n\n```\nback_log=512\n```\n\n MySQL \n\n```\nkey_buffer_size\n```\n\n 4G  256MB\n\n```\nmax_allowed_packet=4M\n```\n\n\n```\nthread_stack=256k\n```\n\n\n```\ntable_cache=614k\n```\nmysqlopen_tablesopen_cachetable_cacheopen_Tabletable_cache\n\n```\nsort_buffer_size=6M\n```\n100100*6=600M\nread_buffer_size,join_buffer_size \n\n```\nthread_cache_size=64\n```\n,4GB64\n\n```\nquery_cache_size=64M\n```\n\n\n\n```\ntmp_table_size\n```\n\n1kB-4GB\n\n```\nmax_connection\n```\n\n`too many connections`\n\n```\nmax_connect_errors\n```\nMySQLhostMySQL\n\n```\nwait_timeout = 120\n```\n\n\n```\nthread_concurrency=8\n```\nCPU * 2\n\n```\nskip-networking\n```\n\n\n```\ninnodb_flush_log_at_trx_commit = 1\n```\n0 innodb_log_buffer_size 1\n\n```\ninnodb_thread_concurrency = 8\n```\nCPU\n\n```\nread_rnd_buffer_Size = 16M\n```\n\n\n\n<h3 id=\"\">innodb_buffer_pool </h3>\n\ninnodb_buffer pool 50-80% \n\n```\nshow status like 'innodb_buffer_pool_%'\n\n\ninnodb_buffer_pool_pages_data;\ninnodb_buffer_pool_page_total;\ninnodb_buffer_pool_read_request;\ninnodb_buffer_pool_reads;\n```\n\n\n\n```\n (innodb_buffer_pool_read_request - innodb_buffer_pool_reads) / innodb_buffer_pool_read_request;\n innodb_buffer_pool_pages_data /innodb_buffer_pool_page_total;\n```\n95%\n\n\n<h3 id=\"\"></h3>\n\n```\nshow global status like 'open_files'\nshow variables like 'open_file_limit';\n```\n Open_files / open_files_limit * 100% <= 75;\n\n\n<h3 id=\"\"></h3>\n\n```\nshow global status like 'open%tables';\nshow variable like 'table_cache';\n```\n\n\n```\nopen_tables / opende_tables * 100 > 85%;\nopen_Tables / table_Cache* 100% < 95%\n```\n\n<h3 id=\"\"></h3>\n\n:\n\n```\nshow gloabl status like 'created_tmp5';\nCreated_tmp_disk_table / Created_tmp_tables * 100% <= 25 %\n```\n\n\n<h3 id=\"\"></h3>\n\n```\nshow global status like 'key_read%';\n```\nkey_cache_miss_rate = key_Read / key_read_request * 100%  1% \n1000\n","slug":"2015-07-12-my-dot-cnfpei-zhi-yi-ju","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuibo003um1tjwx6m42gq","content":"<p><a href=\"http://book.douban.com/subject/6873681/\" target=\"_blank\" rel=\"noopener\"></a>  <code>MySQL</code> </p>\n<ul>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\">innodb_pool_buffer </a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">skip-name-resolve:</span><br></pre></td></tr></table></figure>\n<p> MySQL  DNS  , MySQL DNS IP</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">back_log=512</span><br></pre></td></tr></table></figure>\n<p> MySQL </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">key_buffer_size</span><br></pre></td></tr></table></figure>\n<p> 4G  256MB</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">max_allowed_packet=4M</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">thread_stack=256k</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">table_cache=614k</span><br></pre></td></tr></table></figure>\n<p>mysqlopen_tablesopen_cachetable_cacheopen_Tabletable_cache</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sort_buffer_size=6M</span><br></pre></td></tr></table></figure>\n<p>100100*6=600M<br>read_buffer_size,join_buffer_size </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">thread_cache_size=64</span><br></pre></td></tr></table></figure>\n<p>,4GB64</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">query_cache_size=64M</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tmp_table_size</span><br></pre></td></tr></table></figure>\n<p>1kB-4GB</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">max_connection</span><br></pre></td></tr></table></figure>\n<p><code>too many connections</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">max_connect_errors</span><br></pre></td></tr></table></figure>\n<p>MySQLhostMySQL</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wait_timeout = 120</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">thread_concurrency=8</span><br></pre></td></tr></table></figure>\n<p>CPU * 2</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">skip-networking</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">innodb_flush_log_at_trx_commit = 1</span><br></pre></td></tr></table></figure>\n<p>0 innodb_log_buffer_size 1</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">innodb_thread_concurrency = 8</span><br></pre></td></tr></table></figure>\n<p>CPU</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">read_rnd_buffer_Size = 16M</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\">innodb_buffer_pool </h3>\n\n<p>innodb_buffer pool 50-80% </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show status like &apos;innodb_buffer_pool_%&apos;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">innodb_buffer_pool_pages_data;</span><br><span class=\"line\">innodb_buffer_pool_page_total;</span><br><span class=\"line\">innodb_buffer_pool_read_request;</span><br><span class=\"line\">innodb_buffer_pool_reads;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> (innodb_buffer_pool_read_request - innodb_buffer_pool_reads) / innodb_buffer_pool_read_request;</span><br><span class=\"line\"> innodb_buffer_pool_pages_data /innodb_buffer_pool_page_total;</span><br></pre></td></tr></table></figure>\n<p>95%</p>\n<h3 id=\"\"></h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show global status like &apos;open_files&apos;</span><br><span class=\"line\">show variables like &apos;open_file_limit&apos;;</span><br></pre></td></tr></table></figure>\n<p> Open_files / open_files_limit * 100% &lt;= 75;</p>\n<h3 id=\"\"></h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show global status like &apos;open%tables&apos;;</span><br><span class=\"line\">show variable like &apos;table_cache&apos;;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">open_tables / opende_tables * 100 &gt; 85%;</span><br><span class=\"line\">open_Tables / table_Cache* 100% &lt; 95%</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"></h3>\n\n<p>:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show gloabl status like &apos;created_tmp5&apos;;</span><br><span class=\"line\">Created_tmp_disk_table / Created_tmp_tables * 100% &lt;= 25 %</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"></h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show global status like &apos;key_read%&apos;;</span><br></pre></td></tr></table></figure>\n<p>key_cache_miss_rate = key_Read / key_read_request * 100%  1% <br>1000</p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"http://book.douban.com/subject/6873681/\" target=\"_blank\" rel=\"noopener\"></a>  <code>MySQL</code> </p>\n<ul>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\">innodb_pool_buffer </a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">skip-name-resolve:</span><br></pre></td></tr></table></figure>\n<p> MySQL  DNS  , MySQL DNS IP</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">back_log=512</span><br></pre></td></tr></table></figure>\n<p> MySQL </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">key_buffer_size</span><br></pre></td></tr></table></figure>\n<p> 4G  256MB</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">max_allowed_packet=4M</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">thread_stack=256k</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">table_cache=614k</span><br></pre></td></tr></table></figure>\n<p>mysqlopen_tablesopen_cachetable_cacheopen_Tabletable_cache</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sort_buffer_size=6M</span><br></pre></td></tr></table></figure>\n<p>100100*6=600M<br>read_buffer_size,join_buffer_size </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">thread_cache_size=64</span><br></pre></td></tr></table></figure>\n<p>,4GB64</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">query_cache_size=64M</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tmp_table_size</span><br></pre></td></tr></table></figure>\n<p>1kB-4GB</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">max_connection</span><br></pre></td></tr></table></figure>\n<p><code>too many connections</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">max_connect_errors</span><br></pre></td></tr></table></figure>\n<p>MySQLhostMySQL</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wait_timeout = 120</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">thread_concurrency=8</span><br></pre></td></tr></table></figure>\n<p>CPU * 2</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">skip-networking</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">innodb_flush_log_at_trx_commit = 1</span><br></pre></td></tr></table></figure>\n<p>0 innodb_log_buffer_size 1</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">innodb_thread_concurrency = 8</span><br></pre></td></tr></table></figure>\n<p>CPU</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">read_rnd_buffer_Size = 16M</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\">innodb_buffer_pool </h3>\n\n<p>innodb_buffer pool 50-80% </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show status like &apos;innodb_buffer_pool_%&apos;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">innodb_buffer_pool_pages_data;</span><br><span class=\"line\">innodb_buffer_pool_page_total;</span><br><span class=\"line\">innodb_buffer_pool_read_request;</span><br><span class=\"line\">innodb_buffer_pool_reads;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> (innodb_buffer_pool_read_request - innodb_buffer_pool_reads) / innodb_buffer_pool_read_request;</span><br><span class=\"line\"> innodb_buffer_pool_pages_data /innodb_buffer_pool_page_total;</span><br></pre></td></tr></table></figure>\n<p>95%</p>\n<h3 id=\"\"></h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show global status like &apos;open_files&apos;</span><br><span class=\"line\">show variables like &apos;open_file_limit&apos;;</span><br></pre></td></tr></table></figure>\n<p> Open_files / open_files_limit * 100% &lt;= 75;</p>\n<h3 id=\"\"></h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show global status like &apos;open%tables&apos;;</span><br><span class=\"line\">show variable like &apos;table_cache&apos;;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">open_tables / opende_tables * 100 &gt; 85%;</span><br><span class=\"line\">open_Tables / table_Cache* 100% &lt; 95%</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"></h3>\n\n<p>:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show gloabl status like &apos;created_tmp5&apos;;</span><br><span class=\"line\">Created_tmp_disk_table / Created_tmp_tables * 100% &lt;= 25 %</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"></h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show global status like &apos;key_read%&apos;;</span><br></pre></td></tr></table></figure>\n<p>key_cache_miss_rate = key_Read / key_read_request * 100%  1% <br>1000</p>\n"},{"layout":"post","title":"Supervisor ","date":"2015-08-21T08:36:00.000Z","comments":1,"description":"supervisor ","_content":"\n supervisor   `monit`,  supervisor \n\nsupervisor  `eventListener` \n\n supervisor `program`, `eventlistener`\n\n* supervisor ,\n\n```\ndef write_stdout(self, s):\n    sys.stdout.write(s)\n    sys.stdout.flush()\n\nwrite_stdout('READY\\n') //\nwrite_stdout('RESULT 2\\nOK') //\n```\n\n* ,\n\n```\nwhile 1:\n    self.write_stdout('READY\\n')\n    line = sys.stdin.readline()\n    do_some_thing()\n    self.write_stdout('RESULT 2\\nOK')\n```\n\n* supervisor \n\n```\n[eventlistener:alarm]\nuser=zj\ncommand=/usr/bin/python /home/ymserver/bin/alarm/main.py\nevents=PROCESS_STATE_EXITED,PROCESS_STATE_STOPPED,PROCESS_STATE_FATAL\n\n# \nstderr_logfile=/home/zj/log/supervisor/alarm.err.log\nstdout_logfile=/home/zj/log/supervisor/alarm.output.log\n```\n\n supervisor  supervisor \n supervisor  `FATAL`,`EXIT` \n\n----\n\n\n[](https://github.com/zheng-ji/ToyCollection/tree/master/supervisor-listener)\n\nHappy Hack!\n\n","source":"_posts/2015-08-21-supervisorjian-ting-qi.markdown","raw":"---\nlayout: post\ntitle: \"Supervisor \"\ndate: 2015-08-21 16:36\ncomments: true\ncategories: Server\ndescription: supervisor  \n---\n\n supervisor   `monit`,  supervisor \n\nsupervisor  `eventListener` \n\n supervisor `program`, `eventlistener`\n\n* supervisor ,\n\n```\ndef write_stdout(self, s):\n    sys.stdout.write(s)\n    sys.stdout.flush()\n\nwrite_stdout('READY\\n') //\nwrite_stdout('RESULT 2\\nOK') //\n```\n\n* ,\n\n```\nwhile 1:\n    self.write_stdout('READY\\n')\n    line = sys.stdin.readline()\n    do_some_thing()\n    self.write_stdout('RESULT 2\\nOK')\n```\n\n* supervisor \n\n```\n[eventlistener:alarm]\nuser=zj\ncommand=/usr/bin/python /home/ymserver/bin/alarm/main.py\nevents=PROCESS_STATE_EXITED,PROCESS_STATE_STOPPED,PROCESS_STATE_FATAL\n\n# \nstderr_logfile=/home/zj/log/supervisor/alarm.err.log\nstdout_logfile=/home/zj/log/supervisor/alarm.output.log\n```\n\n supervisor  supervisor \n supervisor  `FATAL`,`EXIT` \n\n----\n\n\n[](https://github.com/zheng-ji/ToyCollection/tree/master/supervisor-listener)\n\nHappy Hack!\n\n","slug":"2015-08-21-supervisorjian-ting-qi","published":1,"updated":"2018-06-17T11:10:52.000Z","photos":[],"link":"","_id":"cjv8xuibp003wm1tjs8k1fi2r","content":"<p> supervisor   <code>monit</code>,  supervisor </p>\n<p>supervisor  <code>eventListener</code> </p>\n<p> supervisor <code>program</code>, <code>eventlistener</code></p>\n<ul>\n<li>supervisor ,</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def write_stdout(self, s):</span><br><span class=\"line\">    sys.stdout.write(s)</span><br><span class=\"line\">    sys.stdout.flush()</span><br><span class=\"line\"></span><br><span class=\"line\">write_stdout(&apos;READY\\n&apos;) //</span><br><span class=\"line\">write_stdout(&apos;RESULT 2\\nOK&apos;) //</span><br></pre></td></tr></table></figure>\n<ul>\n<li>,</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">while 1:</span><br><span class=\"line\">    self.write_stdout(&apos;READY\\n&apos;)</span><br><span class=\"line\">    line = sys.stdin.readline()</span><br><span class=\"line\">    do_some_thing()</span><br><span class=\"line\">    self.write_stdout(&apos;RESULT 2\\nOK&apos;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>supervisor </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[eventlistener:alarm]</span><br><span class=\"line\">user=zj</span><br><span class=\"line\">command=/usr/bin/python /home/ymserver/bin/alarm/main.py</span><br><span class=\"line\">events=PROCESS_STATE_EXITED,PROCESS_STATE_STOPPED,PROCESS_STATE_FATAL</span><br><span class=\"line\"></span><br><span class=\"line\"># </span><br><span class=\"line\">stderr_logfile=/home/zj/log/supervisor/alarm.err.log</span><br><span class=\"line\">stdout_logfile=/home/zj/log/supervisor/alarm.output.log</span><br></pre></td></tr></table></figure>\n<p> supervisor  supervisor <br> supervisor  <code>FATAL</code>,<code>EXIT</code> </p>\n<hr>\n<p><a href=\"https://github.com/zheng-ji/ToyCollection/tree/master/supervisor-listener\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>Happy Hack!</p>\n","site":{"data":{}},"excerpt":"","more":"<p> supervisor   <code>monit</code>,  supervisor </p>\n<p>supervisor  <code>eventListener</code> </p>\n<p> supervisor <code>program</code>, <code>eventlistener</code></p>\n<ul>\n<li>supervisor ,</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def write_stdout(self, s):</span><br><span class=\"line\">    sys.stdout.write(s)</span><br><span class=\"line\">    sys.stdout.flush()</span><br><span class=\"line\"></span><br><span class=\"line\">write_stdout(&apos;READY\\n&apos;) //</span><br><span class=\"line\">write_stdout(&apos;RESULT 2\\nOK&apos;) //</span><br></pre></td></tr></table></figure>\n<ul>\n<li>,</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">while 1:</span><br><span class=\"line\">    self.write_stdout(&apos;READY\\n&apos;)</span><br><span class=\"line\">    line = sys.stdin.readline()</span><br><span class=\"line\">    do_some_thing()</span><br><span class=\"line\">    self.write_stdout(&apos;RESULT 2\\nOK&apos;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>supervisor </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[eventlistener:alarm]</span><br><span class=\"line\">user=zj</span><br><span class=\"line\">command=/usr/bin/python /home/ymserver/bin/alarm/main.py</span><br><span class=\"line\">events=PROCESS_STATE_EXITED,PROCESS_STATE_STOPPED,PROCESS_STATE_FATAL</span><br><span class=\"line\"></span><br><span class=\"line\"># </span><br><span class=\"line\">stderr_logfile=/home/zj/log/supervisor/alarm.err.log</span><br><span class=\"line\">stdout_logfile=/home/zj/log/supervisor/alarm.output.log</span><br></pre></td></tr></table></figure>\n<p> supervisor  supervisor <br> supervisor  <code>FATAL</code>,<code>EXIT</code> </p>\n<hr>\n<p><a href=\"https://github.com/zheng-ji/ToyCollection/tree/master/supervisor-listener\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>Happy Hack!</p>\n"},{"layout":"post","title":"Twemproxy  Redis ","date":"2015-08-16T04:11:00.000Z","comments":1,"description":"redis proxy twemproxy","_content":"\n Redis   Twitter  twemproxy   RedisCLuster \n\n: [](#)\n* [](#)\n* [](#)\n* [](#)\n* [](#)\n\n<h3 id=\"\"></h3>\n\n* Twitter  Redismemcached \n* 20%pipelineredispipeline\n* twemproxy  redis  FIFO   redis  pipeline redis\n\n<h3 id=\"\"></h3>\n\n* \n\n```\napt-get install automake\napt-get install libtool\ngit clone git://github.com/twitter/twemproxy.git\ncd twemproxy\nautoreconf -fvi\n./configure\nmake\nsudo make install\n```\n /usr/local/sbin/nutcracker\n\n*  /etc/nutcracker/nutcracker.yml\n\n```\nalpha:\n    listen: 127.0.0.1:8877\n    hash: fnv1a_64\n    distribution: ketama\n    auto_eject_hosts: true\n    redis: true\n    server_retry_timeout: 30000\n    server_failure_limit: 3\n    servers:\n        - 127.0.0.1:6379:1 master0  #redis-server\n        - 127.0.0.1:6380:1 master1\n```\n\n redis  auto_eject_hosts redis auto_eject_hosts,\n\n<h3 id=\"\"></h3>\n\n```\nkeys command: keys,migrate,move object,randomkey,rename,renamenx,\nsort strings command: bitop,mset,msetnx\nlist command: blpop,brpop,brpoplpush\nscripting command: script exists,script flush,script kill,script load\npub/sub command:()psubscribe,publish,punsubscribe,subscribe,unsubscribe\n```\n\n<h3 id=\"\"></h3>\n\n redis  redis-benchmark \n\n* n \n* r  key,\n* t \n\n```\nzj@zheng-ji.info:~$ redis-benchmark -p 6700 -t smembers,hexists,get,hget,lrange,ltrim,zcard,setex,sadd -n 1000000 -r 100000000\n\n====== GET ======\n1000000 requests completed in 12.95 seconds\n50 parallel clients\n3 bytes payload\nkeep alive: 1\n\n99.19% <= 1 milliseconds\n99.93% <= 2 milliseconds\n100.00% <= 2 milliseconds\n77220.08 requests per second\n\n====== SADD ======\n1000000 requests completed in 10.74 seconds\n50 parallel clients\n3 bytes payload\nkeep alive: 1\n\n99.88% <= 1 milliseconds\n99.95% <= 2 milliseconds\n99.97% <= 3 milliseconds\n99.99% <= 4 milliseconds\n100.00% <= 4 milliseconds\n93144.56 requests per second\n```\n\n, redis,twemproxy , \n\n\n<h3 id=\"\"></h3>\n\n*  Twemproxy  Redis  key \n*  Redis Twemproxy Twemproxy  Redis \n* Redis  Redis  Twemproxy \n*  RedisTwemproxy  Reblance\n*  Twemproxydistributionketama,modula key\n*  Twemproxy  Twemproxy Server  110-150%\n*  2  Redis 2  Redis Redis \n*  Twemproxy Twemproxy key\n\n------\n\n\n\n\n[](http://blog.jpush.cn/redis-twemproxy-benchmark/)\n","source":"_posts/2015-08-16-twemproxy.markdown","raw":"---\nlayout: post\ntitle: \"Twemproxy  Redis \"\ndate: 2015-08-16 12:11\ncomments: true\ncategories: Server\ndescription: redis proxy twemproxy \n---\n\n Redis   Twitter  twemproxy   RedisCLuster \n\n: [](#)\n* [](#)\n* [](#)\n* [](#)\n* [](#)\n\n<h3 id=\"\"></h3>\n\n* Twitter  Redismemcached \n* 20%pipelineredispipeline\n* twemproxy  redis  FIFO   redis  pipeline redis\n\n<h3 id=\"\"></h3>\n\n* \n\n```\napt-get install automake\napt-get install libtool\ngit clone git://github.com/twitter/twemproxy.git\ncd twemproxy\nautoreconf -fvi\n./configure\nmake\nsudo make install\n```\n /usr/local/sbin/nutcracker\n\n*  /etc/nutcracker/nutcracker.yml\n\n```\nalpha:\n    listen: 127.0.0.1:8877\n    hash: fnv1a_64\n    distribution: ketama\n    auto_eject_hosts: true\n    redis: true\n    server_retry_timeout: 30000\n    server_failure_limit: 3\n    servers:\n        - 127.0.0.1:6379:1 master0  #redis-server\n        - 127.0.0.1:6380:1 master1\n```\n\n redis  auto_eject_hosts redis auto_eject_hosts,\n\n<h3 id=\"\"></h3>\n\n```\nkeys command: keys,migrate,move object,randomkey,rename,renamenx,\nsort strings command: bitop,mset,msetnx\nlist command: blpop,brpop,brpoplpush\nscripting command: script exists,script flush,script kill,script load\npub/sub command:()psubscribe,publish,punsubscribe,subscribe,unsubscribe\n```\n\n<h3 id=\"\"></h3>\n\n redis  redis-benchmark \n\n* n \n* r  key,\n* t \n\n```\nzj@zheng-ji.info:~$ redis-benchmark -p 6700 -t smembers,hexists,get,hget,lrange,ltrim,zcard,setex,sadd -n 1000000 -r 100000000\n\n====== GET ======\n1000000 requests completed in 12.95 seconds\n50 parallel clients\n3 bytes payload\nkeep alive: 1\n\n99.19% <= 1 milliseconds\n99.93% <= 2 milliseconds\n100.00% <= 2 milliseconds\n77220.08 requests per second\n\n====== SADD ======\n1000000 requests completed in 10.74 seconds\n50 parallel clients\n3 bytes payload\nkeep alive: 1\n\n99.88% <= 1 milliseconds\n99.95% <= 2 milliseconds\n99.97% <= 3 milliseconds\n99.99% <= 4 milliseconds\n100.00% <= 4 milliseconds\n93144.56 requests per second\n```\n\n, redis,twemproxy , \n\n\n<h3 id=\"\"></h3>\n\n*  Twemproxy  Redis  key \n*  Redis Twemproxy Twemproxy  Redis \n* Redis  Redis  Twemproxy \n*  RedisTwemproxy  Reblance\n*  Twemproxydistributionketama,modula key\n*  Twemproxy  Twemproxy Server  110-150%\n*  2  Redis 2  Redis Redis \n*  Twemproxy Twemproxy key\n\n------\n\n\n\n\n[](http://blog.jpush.cn/redis-twemproxy-benchmark/)\n","slug":"2015-08-16-twemproxy","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuibs003ym1tjj33wyhnu","content":"<p> Redis   Twitter  twemproxy   RedisCLuster </p>\n<p>: <a href=\"#\"></a></p>\n<ul>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<ul>\n<li>Twitter  Redismemcached </li>\n<li>20%pipelineredispipeline</li>\n<li>twemproxy  redis  FIFO   redis  pipeline redis</li>\n</ul>\n<h3 id=\"\"></h3>\n\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install automake</span><br><span class=\"line\">apt-get install libtool</span><br><span class=\"line\">git clone git://github.com/twitter/twemproxy.git</span><br><span class=\"line\">cd twemproxy</span><br><span class=\"line\">autoreconf -fvi</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make</span><br><span class=\"line\">sudo make install</span><br></pre></td></tr></table></figure>\n<p> /usr/local/sbin/nutcracker</p>\n<ul>\n<li> /etc/nutcracker/nutcracker.yml</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alpha:</span><br><span class=\"line\">    listen: 127.0.0.1:8877</span><br><span class=\"line\">    hash: fnv1a_64</span><br><span class=\"line\">    distribution: ketama</span><br><span class=\"line\">    auto_eject_hosts: true</span><br><span class=\"line\">    redis: true</span><br><span class=\"line\">    server_retry_timeout: 30000</span><br><span class=\"line\">    server_failure_limit: 3</span><br><span class=\"line\">    servers:</span><br><span class=\"line\">        - 127.0.0.1:6379:1 master0  #redis-server</span><br><span class=\"line\">        - 127.0.0.1:6380:1 master1</span><br></pre></td></tr></table></figure>\n<p> redis  auto_eject_hosts redis auto_eject_hosts,</p>\n<h3 id=\"\"></h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keys command: keys,migrate,move object,randomkey,rename,renamenx,</span><br><span class=\"line\">sort strings command: bitop,mset,msetnx</span><br><span class=\"line\">list command: blpop,brpop,brpoplpush</span><br><span class=\"line\">scripting command: script exists,script flush,script kill,script load</span><br><span class=\"line\">pub/sub command:()psubscribe,publish,punsubscribe,subscribe,unsubscribe</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"></h3>\n\n<p> redis  redis-benchmark </p>\n<ul>\n<li>n </li>\n<li>r  key,</li>\n<li>t </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@zheng-ji.info:~$ redis-benchmark -p 6700 -t smembers,hexists,get,hget,lrange,ltrim,zcard,setex,sadd -n 1000000 -r 100000000</span><br><span class=\"line\"></span><br><span class=\"line\">====== GET ======</span><br><span class=\"line\">1000000 requests completed in 12.95 seconds</span><br><span class=\"line\">50 parallel clients</span><br><span class=\"line\">3 bytes payload</span><br><span class=\"line\">keep alive: 1</span><br><span class=\"line\"></span><br><span class=\"line\">99.19% &lt;= 1 milliseconds</span><br><span class=\"line\">99.93% &lt;= 2 milliseconds</span><br><span class=\"line\">100.00% &lt;= 2 milliseconds</span><br><span class=\"line\">77220.08 requests per second</span><br><span class=\"line\"></span><br><span class=\"line\">====== SADD ======</span><br><span class=\"line\">1000000 requests completed in 10.74 seconds</span><br><span class=\"line\">50 parallel clients</span><br><span class=\"line\">3 bytes payload</span><br><span class=\"line\">keep alive: 1</span><br><span class=\"line\"></span><br><span class=\"line\">99.88% &lt;= 1 milliseconds</span><br><span class=\"line\">99.95% &lt;= 2 milliseconds</span><br><span class=\"line\">99.97% &lt;= 3 milliseconds</span><br><span class=\"line\">99.99% &lt;= 4 milliseconds</span><br><span class=\"line\">100.00% &lt;= 4 milliseconds</span><br><span class=\"line\">93144.56 requests per second</span><br></pre></td></tr></table></figure>\n<p>, redis,twemproxy , </p>\n<h3 id=\"\"></h3>\n\n<ul>\n<li> Twemproxy  Redis  key </li>\n<li> Redis Twemproxy Twemproxy  Redis </li>\n<li>Redis  Redis  Twemproxy </li>\n<li> RedisTwemproxy  Reblance</li>\n<li> Twemproxydistributionketama,modula key</li>\n<li> Twemproxy  Twemproxy Server  110-150%</li>\n<li> 2  Redis 2  Redis Redis </li>\n<li> Twemproxy Twemproxy key</li>\n</ul>\n<hr>\n<p></p>\n<p><a href=\"http://blog.jpush.cn/redis-twemproxy-benchmark/\" target=\"_blank\" rel=\"noopener\"></a></p>\n","site":{"data":{}},"excerpt":"","more":"<p> Redis   Twitter  twemproxy   RedisCLuster </p>\n<p>: <a href=\"#\"></a></p>\n<ul>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<ul>\n<li>Twitter  Redismemcached </li>\n<li>20%pipelineredispipeline</li>\n<li>twemproxy  redis  FIFO   redis  pipeline redis</li>\n</ul>\n<h3 id=\"\"></h3>\n\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install automake</span><br><span class=\"line\">apt-get install libtool</span><br><span class=\"line\">git clone git://github.com/twitter/twemproxy.git</span><br><span class=\"line\">cd twemproxy</span><br><span class=\"line\">autoreconf -fvi</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make</span><br><span class=\"line\">sudo make install</span><br></pre></td></tr></table></figure>\n<p> /usr/local/sbin/nutcracker</p>\n<ul>\n<li> /etc/nutcracker/nutcracker.yml</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alpha:</span><br><span class=\"line\">    listen: 127.0.0.1:8877</span><br><span class=\"line\">    hash: fnv1a_64</span><br><span class=\"line\">    distribution: ketama</span><br><span class=\"line\">    auto_eject_hosts: true</span><br><span class=\"line\">    redis: true</span><br><span class=\"line\">    server_retry_timeout: 30000</span><br><span class=\"line\">    server_failure_limit: 3</span><br><span class=\"line\">    servers:</span><br><span class=\"line\">        - 127.0.0.1:6379:1 master0  #redis-server</span><br><span class=\"line\">        - 127.0.0.1:6380:1 master1</span><br></pre></td></tr></table></figure>\n<p> redis  auto_eject_hosts redis auto_eject_hosts,</p>\n<h3 id=\"\"></h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keys command: keys,migrate,move object,randomkey,rename,renamenx,</span><br><span class=\"line\">sort strings command: bitop,mset,msetnx</span><br><span class=\"line\">list command: blpop,brpop,brpoplpush</span><br><span class=\"line\">scripting command: script exists,script flush,script kill,script load</span><br><span class=\"line\">pub/sub command:()psubscribe,publish,punsubscribe,subscribe,unsubscribe</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"></h3>\n\n<p> redis  redis-benchmark </p>\n<ul>\n<li>n </li>\n<li>r  key,</li>\n<li>t </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zj@zheng-ji.info:~$ redis-benchmark -p 6700 -t smembers,hexists,get,hget,lrange,ltrim,zcard,setex,sadd -n 1000000 -r 100000000</span><br><span class=\"line\"></span><br><span class=\"line\">====== GET ======</span><br><span class=\"line\">1000000 requests completed in 12.95 seconds</span><br><span class=\"line\">50 parallel clients</span><br><span class=\"line\">3 bytes payload</span><br><span class=\"line\">keep alive: 1</span><br><span class=\"line\"></span><br><span class=\"line\">99.19% &lt;= 1 milliseconds</span><br><span class=\"line\">99.93% &lt;= 2 milliseconds</span><br><span class=\"line\">100.00% &lt;= 2 milliseconds</span><br><span class=\"line\">77220.08 requests per second</span><br><span class=\"line\"></span><br><span class=\"line\">====== SADD ======</span><br><span class=\"line\">1000000 requests completed in 10.74 seconds</span><br><span class=\"line\">50 parallel clients</span><br><span class=\"line\">3 bytes payload</span><br><span class=\"line\">keep alive: 1</span><br><span class=\"line\"></span><br><span class=\"line\">99.88% &lt;= 1 milliseconds</span><br><span class=\"line\">99.95% &lt;= 2 milliseconds</span><br><span class=\"line\">99.97% &lt;= 3 milliseconds</span><br><span class=\"line\">99.99% &lt;= 4 milliseconds</span><br><span class=\"line\">100.00% &lt;= 4 milliseconds</span><br><span class=\"line\">93144.56 requests per second</span><br></pre></td></tr></table></figure>\n<p>, redis,twemproxy , </p>\n<h3 id=\"\"></h3>\n\n<ul>\n<li> Twemproxy  Redis  key </li>\n<li> Redis Twemproxy Twemproxy  Redis </li>\n<li>Redis  Redis  Twemproxy </li>\n<li> RedisTwemproxy  Reblance</li>\n<li> Twemproxydistributionketama,modula key</li>\n<li> Twemproxy  Twemproxy Server  110-150%</li>\n<li> 2  Redis 2  Redis Redis </li>\n<li> Twemproxy Twemproxy key</li>\n</ul>\n<hr>\n<p></p>\n<p><a href=\"http://blog.jpush.cn/redis-twemproxy-benchmark/\" target=\"_blank\" rel=\"noopener\"></a></p>\n"},{"layout":"post","title":"Python  LDAP","date":"2015-10-01T01:49:00.000Z","comments":1,"description":"python ldap","_content":"\n## \n\n[pushover](http://pushover.net) Leader  IOS, Android \n\n `pushover` Android pushove \n\n LDAP  HTTPS  LDAP \n\n## LDAP \n\n[LDAP](https://zh.wikipedia.org/wiki/%E8%BD%BB%E5%9E%8B%E7%9B%AE%E5%BD%95%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE)\n\n\n\n, LDAP \n\n\n## virtualenv  python-ldap\n\n Python  python-ldap , \n\n```\napt-get install libsasl2-dev python-dev libldap2-dev libssl-dev\npip install python-ldap\n```\n\n## \n\n```\n# LDAP \nSERVER_NAME = 'xxxx'\nSERVER_PORT = xxx\ntry:\n    conn = ldap.open(SERVER_NAME, SERVER_PORT)  \n    conn.protocol_version = ldap.VERSION3 #ldap \n    username = \"user=xxx,dc=company,dc=com\" #\n    password = \"xxx\" #\n    conn.simple_bind_s(username,password) # \nexcept ldap.LDAPError, e: #\n    print e\n```\n\n## \n\n, \n,  , \n, \n,\n, :\n\n,  VP , \n\n","source":"_posts/2015-10-01-python-shi-yong-ldap.markdown","raw":"---\nlayout: post\ntitle: \"Python  LDAP\"\ndate: 2015-10-01 09:49\ncomments: true\ncategories: Program\ndescription: python ldap\n---\n\n## \n\n[pushover](http://pushover.net) Leader  IOS, Android \n\n `pushover` Android pushove \n\n LDAP  HTTPS  LDAP \n\n## LDAP \n\n[LDAP](https://zh.wikipedia.org/wiki/%E8%BD%BB%E5%9E%8B%E7%9B%AE%E5%BD%95%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE)\n\n\n\n, LDAP \n\n\n## virtualenv  python-ldap\n\n Python  python-ldap , \n\n```\napt-get install libsasl2-dev python-dev libldap2-dev libssl-dev\npip install python-ldap\n```\n\n## \n\n```\n# LDAP \nSERVER_NAME = 'xxxx'\nSERVER_PORT = xxx\ntry:\n    conn = ldap.open(SERVER_NAME, SERVER_PORT)  \n    conn.protocol_version = ldap.VERSION3 #ldap \n    username = \"user=xxx,dc=company,dc=com\" #\n    password = \"xxx\" #\n    conn.simple_bind_s(username,password) # \nexcept ldap.LDAPError, e: #\n    print e\n```\n\n## \n\n, \n,  , \n, \n,\n, :\n\n,  VP , \n\n","slug":"2015-10-01-python-shi-yong-ldap","published":1,"updated":"2018-07-01T05:57:19.000Z","photos":[],"link":"","_id":"cjv8xuibt0040m1tjqrei7q7b","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"http://pushover.net\" target=\"_blank\" rel=\"noopener\">pushover</a> Leader  IOS, Android </p>\n<p> <code>pushover</code> Android pushove </p>\n<p> LDAP  HTTPS  LDAP </p>\n<h2 id=\"LDAP-\"><a href=\"#LDAP-\" class=\"headerlink\" title=\"LDAP \"></a>LDAP </h2><p><a href=\"https://zh.wikipedia.org/wiki/%E8%BD%BB%E5%9E%8B%E7%9B%AE%E5%BD%95%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE\" target=\"_blank\" rel=\"noopener\">LDAP</a></p>\n<p></p>\n<p>, LDAP </p>\n<h2 id=\"virtualenv--python-ldap\"><a href=\"#virtualenv--python-ldap\" class=\"headerlink\" title=\"virtualenv  python-ldap\"></a>virtualenv  python-ldap</h2><p> Python  python-ldap , </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install libsasl2-dev python-dev libldap2-dev libssl-dev</span><br><span class=\"line\">pip install python-ldap</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># LDAP </span><br><span class=\"line\">SERVER_NAME = &apos;xxxx&apos;</span><br><span class=\"line\">SERVER_PORT = xxx</span><br><span class=\"line\">try:</span><br><span class=\"line\">    conn = ldap.open(SERVER_NAME, SERVER_PORT)  </span><br><span class=\"line\">    conn.protocol_version = ldap.VERSION3 #ldap </span><br><span class=\"line\">    username = &quot;user=xxx,dc=company,dc=com&quot; #</span><br><span class=\"line\">    password = &quot;xxx&quot; #</span><br><span class=\"line\">    conn.simple_bind_s(username,password) # </span><br><span class=\"line\">except ldap.LDAPError, e: #</span><br><span class=\"line\">    print e</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>, <br>,  , <br>, <br>,<br>, :</p>\n<p>,  VP , </p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"http://pushover.net\" target=\"_blank\" rel=\"noopener\">pushover</a> Leader  IOS, Android </p>\n<p> <code>pushover</code> Android pushove </p>\n<p> LDAP  HTTPS  LDAP </p>\n<h2 id=\"LDAP-\"><a href=\"#LDAP-\" class=\"headerlink\" title=\"LDAP \"></a>LDAP </h2><p><a href=\"https://zh.wikipedia.org/wiki/%E8%BD%BB%E5%9E%8B%E7%9B%AE%E5%BD%95%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE\" target=\"_blank\" rel=\"noopener\">LDAP</a></p>\n<p></p>\n<p>, LDAP </p>\n<h2 id=\"virtualenv--python-ldap\"><a href=\"#virtualenv--python-ldap\" class=\"headerlink\" title=\"virtualenv  python-ldap\"></a>virtualenv  python-ldap</h2><p> Python  python-ldap , </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install libsasl2-dev python-dev libldap2-dev libssl-dev</span><br><span class=\"line\">pip install python-ldap</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># LDAP </span><br><span class=\"line\">SERVER_NAME = &apos;xxxx&apos;</span><br><span class=\"line\">SERVER_PORT = xxx</span><br><span class=\"line\">try:</span><br><span class=\"line\">    conn = ldap.open(SERVER_NAME, SERVER_PORT)  </span><br><span class=\"line\">    conn.protocol_version = ldap.VERSION3 #ldap </span><br><span class=\"line\">    username = &quot;user=xxx,dc=company,dc=com&quot; #</span><br><span class=\"line\">    password = &quot;xxx&quot; #</span><br><span class=\"line\">    conn.simple_bind_s(username,password) # </span><br><span class=\"line\">except ldap.LDAPError, e: #</span><br><span class=\"line\">    print e</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>, <br>,  , <br>, <br>,<br>, :</p>\n<p>,  VP , </p>\n"},{"layout":"post","title":"Ansible ","date":"2015-09-05T10:09:00.000Z","comments":1,"description":"ansible role","_content":"\n\n10100 Ansible \n    \n Ansible ,[](http://wiki.zheng-ji.info/Sys/ansible.html), , , \n\n* [ ansible.cfg ](#)\n* [ ansible role ](#)\n* [files ](#)\n* [ tags ](#)\n* [ ansible roles  tasks ](#)\n* [ansible-play-book ](#)\n\n<h3 id=\"\"></h3>\n\n /etc/ansible/host,  \n\n```\n[web-cluster]\n<node-1-IP> ansible_ssh_port=<Your Port> ansible_ssh_user=zj\n<node-2-IP> ansible_ssh_port=<Your Port> ansible_ssh_user=zj\n```\n\n /etc/ansible/ansible.cfg \n ansible-role \n\n```\nroles_path    = /home/zj/my-ansible/roles\n```\n\n\n<h3 id=\"\"> ansible role </h3>\n\n ansible , \n\n\n```\ncd /home/zj/my-ansible/\nhaproxy\n     - entry.yaml\nroles\n     - haproxy\n        - files\n        - handlers\n        - vars\n        - tasks\n```\n\n haproxy \n roles  haproxy, ;\n\n* files ;\n* vars   main.yml , ansbile ;\n* handlers  main.yml, ;\n* tasks  main.yml ;\n\n>  ansible role \n\n ~/my-ansible/haproxy/entry.yml roles \nansible-playbook  /home/zj/my-ansible/roles/haproxy  tasks/main.yml \n\n```\n- hosts: web-cluster\n  roles:\n    - haproxy\n```\n\n<h3 id=\"\">files </h3>\n\n ~/my-ansible/roles/haproxy/tasks/main.yml\n\n```\n- name: copy haproxy conf\n  copy: src=haproxy.cfg dest=/etc/haproxy/haproxy.cfg owner=root group=root\n  sudo: yes\n```\n\n src=haproxy.cfg  ~/my-ansible/roles/haproxy/files/haproxy.cfg\n\n<h3 id=\"\"> tags </h3>\n\n```\n- name: install ppa\n  shell: add-apt-repository -y ppa:vbernat/haproxy-1.5\n  sudo: yes\n  tags:\n    - install-haproxy\n```\n\n tags \n\n```\ncd ~/my-ansible/haproxy\nansible-playbook entry.yml -v -K --tags \"install-haproxy\"\n```\n\n<h3 id=\"\"> ansible roles  tasks </h3>\n\ntasks  main.yml,  main.yml  include \n\ncat ~/my-ansible/roles/haproxy/tasks/main.yml\n\n```\n- include: 'install-haproxy.yml'\n```\n\ninclude  main.yml  yml \n\ncat ~/my-ansible/roles/haproxy/tasks/install-haproxy.yml\n\n```\n- name: copy haproxy conf\n  copy: src=haproxy.cfg dest=/etc/haproxy/haproxy.cfg owner=root group=root\n  sudo: yes\n  tags:\n     - install-haproxy\n```\ntags  yml \n\n<h3 id=\"\">ansible-play-book </h3>\n\n\n* -K  sudo \n* -v \n* --check \n* --tags  ansible-play-book  tags \n\nansible roles  handler, vars, \n\n----\n\n Github , \n[Link](https://github.com/zheng-ji/ToyCollection/tree/master/my-ansible) \n\n\n","source":"_posts/2015-09-05-ansiblede-shi-yong-jing-yan.markdown","raw":"---\nlayout: post\ntitle: \"Ansible \"\ndate: 2015-09-05 18:09\ncomments: true\ncategories: System\ndescription: ansible role\n---\n\n\n10100 Ansible \n    \n Ansible ,[](http://wiki.zheng-ji.info/Sys/ansible.html), , , \n\n* [ ansible.cfg ](#)\n* [ ansible role ](#)\n* [files ](#)\n* [ tags ](#)\n* [ ansible roles  tasks ](#)\n* [ansible-play-book ](#)\n\n<h3 id=\"\"></h3>\n\n /etc/ansible/host,  \n\n```\n[web-cluster]\n<node-1-IP> ansible_ssh_port=<Your Port> ansible_ssh_user=zj\n<node-2-IP> ansible_ssh_port=<Your Port> ansible_ssh_user=zj\n```\n\n /etc/ansible/ansible.cfg \n ansible-role \n\n```\nroles_path    = /home/zj/my-ansible/roles\n```\n\n\n<h3 id=\"\"> ansible role </h3>\n\n ansible , \n\n\n```\ncd /home/zj/my-ansible/\nhaproxy\n     - entry.yaml\nroles\n     - haproxy\n        - files\n        - handlers\n        - vars\n        - tasks\n```\n\n haproxy \n roles  haproxy, ;\n\n* files ;\n* vars   main.yml , ansbile ;\n* handlers  main.yml, ;\n* tasks  main.yml ;\n\n>  ansible role \n\n ~/my-ansible/haproxy/entry.yml roles \nansible-playbook  /home/zj/my-ansible/roles/haproxy  tasks/main.yml \n\n```\n- hosts: web-cluster\n  roles:\n    - haproxy\n```\n\n<h3 id=\"\">files </h3>\n\n ~/my-ansible/roles/haproxy/tasks/main.yml\n\n```\n- name: copy haproxy conf\n  copy: src=haproxy.cfg dest=/etc/haproxy/haproxy.cfg owner=root group=root\n  sudo: yes\n```\n\n src=haproxy.cfg  ~/my-ansible/roles/haproxy/files/haproxy.cfg\n\n<h3 id=\"\"> tags </h3>\n\n```\n- name: install ppa\n  shell: add-apt-repository -y ppa:vbernat/haproxy-1.5\n  sudo: yes\n  tags:\n    - install-haproxy\n```\n\n tags \n\n```\ncd ~/my-ansible/haproxy\nansible-playbook entry.yml -v -K --tags \"install-haproxy\"\n```\n\n<h3 id=\"\"> ansible roles  tasks </h3>\n\ntasks  main.yml,  main.yml  include \n\ncat ~/my-ansible/roles/haproxy/tasks/main.yml\n\n```\n- include: 'install-haproxy.yml'\n```\n\ninclude  main.yml  yml \n\ncat ~/my-ansible/roles/haproxy/tasks/install-haproxy.yml\n\n```\n- name: copy haproxy conf\n  copy: src=haproxy.cfg dest=/etc/haproxy/haproxy.cfg owner=root group=root\n  sudo: yes\n  tags:\n     - install-haproxy\n```\ntags  yml \n\n<h3 id=\"\">ansible-play-book </h3>\n\n\n* -K  sudo \n* -v \n* --check \n* --tags  ansible-play-book  tags \n\nansible roles  handler, vars, \n\n----\n\n Github , \n[Link](https://github.com/zheng-ji/ToyCollection/tree/master/my-ansible) \n\n\n","slug":"2015-09-05-ansiblede-shi-yong-jing-yan","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuibu0042m1tjvslqhsyr","content":"<p>10100 Ansible </p>\n<p> Ansible ,<a href=\"http://wiki.zheng-ji.info/Sys/ansible.html\" target=\"_blank\" rel=\"noopener\"></a>, , , </p>\n<ul>\n<li><a href=\"#\"> ansible.cfg </a></li>\n<li><a href=\"#\"> ansible role </a></li>\n<li><a href=\"#\">files </a></li>\n<li><a href=\"#\"> tags </a></li>\n<li><a href=\"#\"> ansible roles  tasks </a></li>\n<li><a href=\"#\">ansible-play-book </a></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<p> /etc/ansible/host,  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[web-cluster]</span><br><span class=\"line\">&lt;node-1-IP&gt; ansible_ssh_port=&lt;Your Port&gt; ansible_ssh_user=zj</span><br><span class=\"line\">&lt;node-2-IP&gt; ansible_ssh_port=&lt;Your Port&gt; ansible_ssh_user=zj</span><br></pre></td></tr></table></figure>\n<p> /etc/ansible/ansible.cfg <br> ansible-role </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">roles_path    = /home/zj/my-ansible/roles</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"> ansible role </h3>\n\n<p> ansible , </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /home/zj/my-ansible/</span><br><span class=\"line\">haproxy</span><br><span class=\"line\">     - entry.yaml</span><br><span class=\"line\">roles</span><br><span class=\"line\">     - haproxy</span><br><span class=\"line\">        - files</span><br><span class=\"line\">        - handlers</span><br><span class=\"line\">        - vars</span><br><span class=\"line\">        - tasks</span><br></pre></td></tr></table></figure>\n<p> haproxy <br> roles  haproxy, ;</p>\n<ul>\n<li>files ;</li>\n<li>vars   main.yml , ansbile ;</li>\n<li>handlers  main.yml, ;</li>\n<li>tasks  main.yml ;</li>\n</ul>\n<blockquote>\n<p> ansible role </p>\n</blockquote>\n<p> ~/my-ansible/haproxy/entry.yml roles<br>ansible-playbook  /home/zj/my-ansible/roles/haproxy  tasks/main.yml </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- hosts: web-cluster</span><br><span class=\"line\">  roles:</span><br><span class=\"line\">    - haproxy</span><br></pre></td></tr></table></figure>\n<h3 id=\"\">files </h3>\n\n<p> ~/my-ansible/roles/haproxy/tasks/main.yml</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- name: copy haproxy conf</span><br><span class=\"line\">  copy: src=haproxy.cfg dest=/etc/haproxy/haproxy.cfg owner=root group=root</span><br><span class=\"line\">  sudo: yes</span><br></pre></td></tr></table></figure>\n<p> src=haproxy.cfg  ~/my-ansible/roles/haproxy/files/haproxy.cfg</p>\n<h3 id=\"\"> tags </h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- name: install ppa</span><br><span class=\"line\">  shell: add-apt-repository -y ppa:vbernat/haproxy-1.5</span><br><span class=\"line\">  sudo: yes</span><br><span class=\"line\">  tags:</span><br><span class=\"line\">    - install-haproxy</span><br></pre></td></tr></table></figure>\n<p> tags </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~/my-ansible/haproxy</span><br><span class=\"line\">ansible-playbook entry.yml -v -K --tags &quot;install-haproxy&quot;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"> ansible roles  tasks </h3>\n\n<p>tasks  main.yml,  main.yml  include </p>\n<p>cat ~/my-ansible/roles/haproxy/tasks/main.yml</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- include: &apos;install-haproxy.yml&apos;</span><br></pre></td></tr></table></figure>\n<p>include  main.yml  yml </p>\n<p>cat ~/my-ansible/roles/haproxy/tasks/install-haproxy.yml</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- name: copy haproxy conf</span><br><span class=\"line\">  copy: src=haproxy.cfg dest=/etc/haproxy/haproxy.cfg owner=root group=root</span><br><span class=\"line\">  sudo: yes</span><br><span class=\"line\">  tags:</span><br><span class=\"line\">     - install-haproxy</span><br></pre></td></tr></table></figure>\n<p>tags  yml </p>\n<h3 id=\"\">ansible-play-book </h3>\n\n\n<ul>\n<li>-K  sudo </li>\n<li>-v </li>\n<li>check </li>\n<li>tags  ansible-play-book  tags </li>\n</ul>\n<p>ansible roles  handler, vars, </p>\n<hr>\n<p> Github , <br><a href=\"https://github.com/zheng-ji/ToyCollection/tree/master/my-ansible\" target=\"_blank\" rel=\"noopener\">Link</a> </p>\n","site":{"data":{}},"excerpt":"","more":"<p>10100 Ansible </p>\n<p> Ansible ,<a href=\"http://wiki.zheng-ji.info/Sys/ansible.html\" target=\"_blank\" rel=\"noopener\"></a>, , , </p>\n<ul>\n<li><a href=\"#\"> ansible.cfg </a></li>\n<li><a href=\"#\"> ansible role </a></li>\n<li><a href=\"#\">files </a></li>\n<li><a href=\"#\"> tags </a></li>\n<li><a href=\"#\"> ansible roles  tasks </a></li>\n<li><a href=\"#\">ansible-play-book </a></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<p> /etc/ansible/host,  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[web-cluster]</span><br><span class=\"line\">&lt;node-1-IP&gt; ansible_ssh_port=&lt;Your Port&gt; ansible_ssh_user=zj</span><br><span class=\"line\">&lt;node-2-IP&gt; ansible_ssh_port=&lt;Your Port&gt; ansible_ssh_user=zj</span><br></pre></td></tr></table></figure>\n<p> /etc/ansible/ansible.cfg <br> ansible-role </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">roles_path    = /home/zj/my-ansible/roles</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"> ansible role </h3>\n\n<p> ansible , </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /home/zj/my-ansible/</span><br><span class=\"line\">haproxy</span><br><span class=\"line\">     - entry.yaml</span><br><span class=\"line\">roles</span><br><span class=\"line\">     - haproxy</span><br><span class=\"line\">        - files</span><br><span class=\"line\">        - handlers</span><br><span class=\"line\">        - vars</span><br><span class=\"line\">        - tasks</span><br></pre></td></tr></table></figure>\n<p> haproxy <br> roles  haproxy, ;</p>\n<ul>\n<li>files ;</li>\n<li>vars   main.yml , ansbile ;</li>\n<li>handlers  main.yml, ;</li>\n<li>tasks  main.yml ;</li>\n</ul>\n<blockquote>\n<p> ansible role </p>\n</blockquote>\n<p> ~/my-ansible/haproxy/entry.yml roles<br>ansible-playbook  /home/zj/my-ansible/roles/haproxy  tasks/main.yml </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- hosts: web-cluster</span><br><span class=\"line\">  roles:</span><br><span class=\"line\">    - haproxy</span><br></pre></td></tr></table></figure>\n<h3 id=\"\">files </h3>\n\n<p> ~/my-ansible/roles/haproxy/tasks/main.yml</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- name: copy haproxy conf</span><br><span class=\"line\">  copy: src=haproxy.cfg dest=/etc/haproxy/haproxy.cfg owner=root group=root</span><br><span class=\"line\">  sudo: yes</span><br></pre></td></tr></table></figure>\n<p> src=haproxy.cfg  ~/my-ansible/roles/haproxy/files/haproxy.cfg</p>\n<h3 id=\"\"> tags </h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- name: install ppa</span><br><span class=\"line\">  shell: add-apt-repository -y ppa:vbernat/haproxy-1.5</span><br><span class=\"line\">  sudo: yes</span><br><span class=\"line\">  tags:</span><br><span class=\"line\">    - install-haproxy</span><br></pre></td></tr></table></figure>\n<p> tags </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~/my-ansible/haproxy</span><br><span class=\"line\">ansible-playbook entry.yml -v -K --tags &quot;install-haproxy&quot;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"> ansible roles  tasks </h3>\n\n<p>tasks  main.yml,  main.yml  include </p>\n<p>cat ~/my-ansible/roles/haproxy/tasks/main.yml</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- include: &apos;install-haproxy.yml&apos;</span><br></pre></td></tr></table></figure>\n<p>include  main.yml  yml </p>\n<p>cat ~/my-ansible/roles/haproxy/tasks/install-haproxy.yml</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- name: copy haproxy conf</span><br><span class=\"line\">  copy: src=haproxy.cfg dest=/etc/haproxy/haproxy.cfg owner=root group=root</span><br><span class=\"line\">  sudo: yes</span><br><span class=\"line\">  tags:</span><br><span class=\"line\">     - install-haproxy</span><br></pre></td></tr></table></figure>\n<p>tags  yml </p>\n<h3 id=\"\">ansible-play-book </h3>\n\n\n<ul>\n<li>-K  sudo </li>\n<li>-v </li>\n<li>check </li>\n<li>tags  ansible-play-book  tags </li>\n</ul>\n<p>ansible roles  handler, vars, </p>\n<hr>\n<p> Github , <br><a href=\"https://github.com/zheng-ji/ToyCollection/tree/master/my-ansible\" target=\"_blank\" rel=\"noopener\">Link</a> </p>\n"},{"layout":"post","title":" Flask ","date":"2015-10-06T05:21:00.000Z","comments":1,"description":"flask ","_content":"\n Flask  RestFul  Gevent \n\n* [](#)\n* [Flask ](#)\n* [ JinJia ](#)\n* [itsdangerous  Json ](#)\n* [](#)\n* [BluePrint ](#)\n* [Json ](#)\n* [](#)\n* [WTF ](#)\n\n\n<h3 id=\"\"></h3>\n\nFlask \n\n\n[](http://docs.jinkan.org/docs/flask/patterns/flashing.html)\n\n```\n# \nflash('your response message for user')\n\n# \nfor message in get_flashed_messages()\n\n```\n\n<h3 id=\"\">Flask </h3>\n\n\n\n* current_app \n* g: \n* request:  Http \n* session: \n\n<h3 id=\"\"> JinJia </h3>\n\n```\ndef reverse_filter(s):\n    return s[::-1]\n\napp.jinja_env.filters['reverse'] = reverse_filter\n```\n\n<h3 id=\"\">itsdangerous  Json </h3>\n\n```\nserialaizer = Serializer(SECRET_KEY, expires_in=EXPIRES)\ninfo = {'id':'xxx'}\nsession = serialaizer.dumps(info)\n\n#  session \ninfo = None\ntry:\n    info = serialaizer.loads(session)\nexcept Exception:\n    return jsonify(ERR_SESS_TIMEOUT)\n```\n\nAPI \n\n<h3 id=\"\"></h3>\n\n```\n app/\n     controlers/\n         admin/                    #\n             forms/                #\n                __init__.py\n                xx.py         # blueprint \n            __init__.py\n            administrator.py\n         api/                      # API \n            __init__.py\n         site/                     # \n            __init__.py             # blueprint \n            xx.py\n        __init__.py\n        error.py\n     models/         # SQLAlchemy \n     static/         # css, js, imgs\n     templates/#  controller \n         admin/\n         error/\n         site/\n     utilities/#  \n      __init__.py       #app redis, db, \nrun.py                  # main , app, app.run() \nsettings.py             #\n```\n\n<h3 id=\"\">BluePrint  </h3>\n\n Blueprint  Application, , , url_for,  Application  RestFul\n\n app (app/__init__.py) :\n\n```\nfrom app.controllers.site.console import console \napp.register_blueprint(console, url_prefix='/console')\n```\n\n (app/controllers/site/console.py):\n\n```\nconsole = BLueprint('console', __name__)\n```\n\n<h3 id=\"\">Json </h3>\n\n```\nfrom flask import jsonify\nreturn jsonify({'code': 0})\n```\n\n<h3 id=\"\"></h3>\n\n```\n@app.errorhandler(404)\ndef not_found(error):\n    return render_template('404.html'), 404\n\n@app.errorhandler(500)\ndef crash(error):\n    return render_template('5xx.html'), 500\n```\n\n<h3 id=\"\">WTF </h3>\n\nFlask-WTF , CSRF \n\n* app config  CSRF \n\n```\nCSRF_ENABLED = True\nSECRET_KEY = 'you-will-never-guess'\n```\n\n* \n\n```\nfrom flask.ext.wtf import Form, TextField, BooleanField\nfrom flask.ext.wtf import Required\nclass LoginForm(Form):\n    openid = TextField('openid', validators = [Required()])\n    remember_me = BooleanField('remember_me', default = False)\n```\n\n* \n\n```\n<form action=\"\" method=\"post\" name=\"login\">\n    form.hidden_tag()\n    <p> Please enter your OpenID:form.openid(size=80)<br></p>\n    <p>form.remember_me </p>\n    <p><input type=\"submit\" value=\"Sign In\"></p>\n</form>\n```\n\n* \n\n```\n@app.route('/login', methods = ['GET', 'POST'])\ndef login():\n    form = LoginForm()\n    if form.validate_on_submit():\n        flash('Login requested for OpenID=\"' + form.openid.data))\n        return redirect('/index')\n    return render_template('login.html', title = 'Sign In',form = form)\n```\n\nCSRF() form.hidden_tag() CSRF CSRF\n","source":"_posts/2015-10-06-ji-lu-shi-yong-flaskde-dian-di.markdown","raw":"---\nlayout: post\ntitle: \" Flask \"\ndate: 2015-10-06 13:21\ncomments: true\ncategories: Program\ndescription: flask \n---\n\n Flask  RestFul  Gevent \n\n* [](#)\n* [Flask ](#)\n* [ JinJia ](#)\n* [itsdangerous  Json ](#)\n* [](#)\n* [BluePrint ](#)\n* [Json ](#)\n* [](#)\n* [WTF ](#)\n\n\n<h3 id=\"\"></h3>\n\nFlask \n\n\n[](http://docs.jinkan.org/docs/flask/patterns/flashing.html)\n\n```\n# \nflash('your response message for user')\n\n# \nfor message in get_flashed_messages()\n\n```\n\n<h3 id=\"\">Flask </h3>\n\n\n\n* current_app \n* g: \n* request:  Http \n* session: \n\n<h3 id=\"\"> JinJia </h3>\n\n```\ndef reverse_filter(s):\n    return s[::-1]\n\napp.jinja_env.filters['reverse'] = reverse_filter\n```\n\n<h3 id=\"\">itsdangerous  Json </h3>\n\n```\nserialaizer = Serializer(SECRET_KEY, expires_in=EXPIRES)\ninfo = {'id':'xxx'}\nsession = serialaizer.dumps(info)\n\n#  session \ninfo = None\ntry:\n    info = serialaizer.loads(session)\nexcept Exception:\n    return jsonify(ERR_SESS_TIMEOUT)\n```\n\nAPI \n\n<h3 id=\"\"></h3>\n\n```\n app/\n     controlers/\n         admin/                    #\n             forms/                #\n                __init__.py\n                xx.py         # blueprint \n            __init__.py\n            administrator.py\n         api/                      # API \n            __init__.py\n         site/                     # \n            __init__.py             # blueprint \n            xx.py\n        __init__.py\n        error.py\n     models/         # SQLAlchemy \n     static/         # css, js, imgs\n     templates/#  controller \n         admin/\n         error/\n         site/\n     utilities/#  \n      __init__.py       #app redis, db, \nrun.py                  # main , app, app.run() \nsettings.py             #\n```\n\n<h3 id=\"\">BluePrint  </h3>\n\n Blueprint  Application, , , url_for,  Application  RestFul\n\n app (app/__init__.py) :\n\n```\nfrom app.controllers.site.console import console \napp.register_blueprint(console, url_prefix='/console')\n```\n\n (app/controllers/site/console.py):\n\n```\nconsole = BLueprint('console', __name__)\n```\n\n<h3 id=\"\">Json </h3>\n\n```\nfrom flask import jsonify\nreturn jsonify({'code': 0})\n```\n\n<h3 id=\"\"></h3>\n\n```\n@app.errorhandler(404)\ndef not_found(error):\n    return render_template('404.html'), 404\n\n@app.errorhandler(500)\ndef crash(error):\n    return render_template('5xx.html'), 500\n```\n\n<h3 id=\"\">WTF </h3>\n\nFlask-WTF , CSRF \n\n* app config  CSRF \n\n```\nCSRF_ENABLED = True\nSECRET_KEY = 'you-will-never-guess'\n```\n\n* \n\n```\nfrom flask.ext.wtf import Form, TextField, BooleanField\nfrom flask.ext.wtf import Required\nclass LoginForm(Form):\n    openid = TextField('openid', validators = [Required()])\n    remember_me = BooleanField('remember_me', default = False)\n```\n\n* \n\n```\n<form action=\"\" method=\"post\" name=\"login\">\n    form.hidden_tag()\n    <p> Please enter your OpenID:form.openid(size=80)<br></p>\n    <p>form.remember_me </p>\n    <p><input type=\"submit\" value=\"Sign In\"></p>\n</form>\n```\n\n* \n\n```\n@app.route('/login', methods = ['GET', 'POST'])\ndef login():\n    form = LoginForm()\n    if form.validate_on_submit():\n        flash('Login requested for OpenID=\"' + form.openid.data))\n        return redirect('/index')\n    return render_template('login.html', title = 'Sign In',form = form)\n```\n\nCSRF() form.hidden_tag() CSRF CSRF\n","slug":"2015-10-06-ji-lu-shi-yong-flaskde-dian-di","published":1,"updated":"2018-07-01T05:58:55.000Z","photos":[],"link":"","_id":"cjv8xuibv0044m1tjjvvydm27","content":"<p> Flask  RestFul  Gevent </p>\n<ul>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\">Flask </a></li>\n<li><a href=\"#\"> JinJia </a></li>\n<li><a href=\"#\">itsdangerous  Json </a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\">BluePrint </a></li>\n<li><a href=\"#\">Json </a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\">WTF </a></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<p>Flask <br></p>\n<p><a href=\"http://docs.jinkan.org/docs/flask/patterns/flashing.html\" target=\"_blank\" rel=\"noopener\"></a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># </span><br><span class=\"line\">flash(&apos;your response message for user&apos;)</span><br><span class=\"line\"></span><br><span class=\"line\"># </span><br><span class=\"line\">for message in get_flashed_messages()</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"\">Flask </h3>\n\n<p></p>\n<ul>\n<li>current_app </li>\n<li>g: </li>\n<li>request:  Http </li>\n<li>session: </li>\n</ul>\n<h3 id=\"\"> JinJia </h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def reverse_filter(s):</span><br><span class=\"line\">    return s[::-1]</span><br><span class=\"line\"></span><br><span class=\"line\">app.jinja_env.filters[&apos;reverse&apos;] = reverse_filter</span><br></pre></td></tr></table></figure>\n<h3 id=\"\">itsdangerous  Json </h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">serialaizer = Serializer(SECRET_KEY, expires_in=EXPIRES)</span><br><span class=\"line\">info = &#123;&apos;id&apos;:&apos;xxx&apos;&#125;</span><br><span class=\"line\">session = serialaizer.dumps(info)</span><br><span class=\"line\"></span><br><span class=\"line\">#  session </span><br><span class=\"line\">info = None</span><br><span class=\"line\">try:</span><br><span class=\"line\">    info = serialaizer.loads(session)</span><br><span class=\"line\">except Exception:</span><br><span class=\"line\">    return jsonify(ERR_SESS_TIMEOUT)</span><br></pre></td></tr></table></figure>\n<p>API </p>\n<h3 id=\"\"></h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> app/</span><br><span class=\"line\">     controlers/</span><br><span class=\"line\">         admin/                    #</span><br><span class=\"line\">             forms/                #</span><br><span class=\"line\">                __init__.py</span><br><span class=\"line\">                xx.py         # blueprint </span><br><span class=\"line\">            __init__.py</span><br><span class=\"line\">            administrator.py</span><br><span class=\"line\">         api/                      # API </span><br><span class=\"line\">            __init__.py</span><br><span class=\"line\">         site/                     # </span><br><span class=\"line\">            __init__.py             # blueprint </span><br><span class=\"line\">            xx.py</span><br><span class=\"line\">        __init__.py</span><br><span class=\"line\">        error.py</span><br><span class=\"line\">     models/         # SQLAlchemy </span><br><span class=\"line\">     static/         # css, js, imgs</span><br><span class=\"line\">     templates/#  controller </span><br><span class=\"line\">         admin/</span><br><span class=\"line\">         error/</span><br><span class=\"line\">         site/</span><br><span class=\"line\">     utilities/#  </span><br><span class=\"line\">      __init__.py       #app redis, db, </span><br><span class=\"line\">run.py                  # main , app, app.run() </span><br><span class=\"line\">settings.py             #</span><br></pre></td></tr></table></figure>\n<h3 id=\"\">BluePrint  </h3>\n\n<p> Blueprint  Application, , , url_for,  Application  RestFul</p>\n<p> app (app/<strong>init</strong>.py) :</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from app.controllers.site.console import console </span><br><span class=\"line\">app.register_blueprint(console, url_prefix=&apos;/console&apos;)</span><br></pre></td></tr></table></figure>\n<p> (app/controllers/site/console.py):</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">console = BLueprint(&apos;console&apos;, __name__)</span><br></pre></td></tr></table></figure>\n<h3 id=\"\">Json </h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from flask import jsonify</span><br><span class=\"line\">return jsonify(&#123;&apos;code&apos;: 0&#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"></h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@app.errorhandler(404)</span><br><span class=\"line\">def not_found(error):</span><br><span class=\"line\">    return render_template(&apos;404.html&apos;), 404</span><br><span class=\"line\"></span><br><span class=\"line\">@app.errorhandler(500)</span><br><span class=\"line\">def crash(error):</span><br><span class=\"line\">    return render_template(&apos;5xx.html&apos;), 500</span><br></pre></td></tr></table></figure>\n<h3 id=\"\">WTF </h3>\n\n<p>Flask-WTF , CSRF </p>\n<ul>\n<li>app config  CSRF </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CSRF_ENABLED = True</span><br><span class=\"line\">SECRET_KEY = &apos;you-will-never-guess&apos;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from flask.ext.wtf import Form, TextField, BooleanField</span><br><span class=\"line\">from flask.ext.wtf import Required</span><br><span class=\"line\">class LoginForm(Form):</span><br><span class=\"line\">    openid = TextField(&apos;openid&apos;, validators = [Required()])</span><br><span class=\"line\">    remember_me = BooleanField(&apos;remember_me&apos;, default = False)</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;form action=&quot;&quot; method=&quot;post&quot; name=&quot;login&quot;&gt;</span><br><span class=\"line\">    form.hidden_tag()</span><br><span class=\"line\">    &lt;p&gt; Please enter your OpenID:form.openid(size=80)&lt;br&gt;&lt;/p&gt;</span><br><span class=\"line\">    &lt;p&gt;form.remember_me &lt;/p&gt;</span><br><span class=\"line\">    &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;Sign In&quot;&gt;&lt;/p&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@app.route(&apos;/login&apos;, methods = [&apos;GET&apos;, &apos;POST&apos;])</span><br><span class=\"line\">def login():</span><br><span class=\"line\">    form = LoginForm()</span><br><span class=\"line\">    if form.validate_on_submit():</span><br><span class=\"line\">        flash(&apos;Login requested for OpenID=&quot;&apos; + form.openid.data))</span><br><span class=\"line\">        return redirect(&apos;/index&apos;)</span><br><span class=\"line\">    return render_template(&apos;login.html&apos;, title = &apos;Sign In&apos;,form = form)</span><br></pre></td></tr></table></figure>\n<p>CSRF() form.hidden_tag() CSRF CSRF</p>\n","site":{"data":{}},"excerpt":"","more":"<p> Flask  RestFul  Gevent </p>\n<ul>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\">Flask </a></li>\n<li><a href=\"#\"> JinJia </a></li>\n<li><a href=\"#\">itsdangerous  Json </a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\">BluePrint </a></li>\n<li><a href=\"#\">Json </a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\">WTF </a></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<p>Flask <br></p>\n<p><a href=\"http://docs.jinkan.org/docs/flask/patterns/flashing.html\" target=\"_blank\" rel=\"noopener\"></a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># </span><br><span class=\"line\">flash(&apos;your response message for user&apos;)</span><br><span class=\"line\"></span><br><span class=\"line\"># </span><br><span class=\"line\">for message in get_flashed_messages()</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"\">Flask </h3>\n\n<p></p>\n<ul>\n<li>current_app </li>\n<li>g: </li>\n<li>request:  Http </li>\n<li>session: </li>\n</ul>\n<h3 id=\"\"> JinJia </h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def reverse_filter(s):</span><br><span class=\"line\">    return s[::-1]</span><br><span class=\"line\"></span><br><span class=\"line\">app.jinja_env.filters[&apos;reverse&apos;] = reverse_filter</span><br></pre></td></tr></table></figure>\n<h3 id=\"\">itsdangerous  Json </h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">serialaizer = Serializer(SECRET_KEY, expires_in=EXPIRES)</span><br><span class=\"line\">info = &#123;&apos;id&apos;:&apos;xxx&apos;&#125;</span><br><span class=\"line\">session = serialaizer.dumps(info)</span><br><span class=\"line\"></span><br><span class=\"line\">#  session </span><br><span class=\"line\">info = None</span><br><span class=\"line\">try:</span><br><span class=\"line\">    info = serialaizer.loads(session)</span><br><span class=\"line\">except Exception:</span><br><span class=\"line\">    return jsonify(ERR_SESS_TIMEOUT)</span><br></pre></td></tr></table></figure>\n<p>API </p>\n<h3 id=\"\"></h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> app/</span><br><span class=\"line\">     controlers/</span><br><span class=\"line\">         admin/                    #</span><br><span class=\"line\">             forms/                #</span><br><span class=\"line\">                __init__.py</span><br><span class=\"line\">                xx.py         # blueprint </span><br><span class=\"line\">            __init__.py</span><br><span class=\"line\">            administrator.py</span><br><span class=\"line\">         api/                      # API </span><br><span class=\"line\">            __init__.py</span><br><span class=\"line\">         site/                     # </span><br><span class=\"line\">            __init__.py             # blueprint </span><br><span class=\"line\">            xx.py</span><br><span class=\"line\">        __init__.py</span><br><span class=\"line\">        error.py</span><br><span class=\"line\">     models/         # SQLAlchemy </span><br><span class=\"line\">     static/         # css, js, imgs</span><br><span class=\"line\">     templates/#  controller </span><br><span class=\"line\">         admin/</span><br><span class=\"line\">         error/</span><br><span class=\"line\">         site/</span><br><span class=\"line\">     utilities/#  </span><br><span class=\"line\">      __init__.py       #app redis, db, </span><br><span class=\"line\">run.py                  # main , app, app.run() </span><br><span class=\"line\">settings.py             #</span><br></pre></td></tr></table></figure>\n<h3 id=\"\">BluePrint  </h3>\n\n<p> Blueprint  Application, , , url_for,  Application  RestFul</p>\n<p> app (app/<strong>init</strong>.py) :</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from app.controllers.site.console import console </span><br><span class=\"line\">app.register_blueprint(console, url_prefix=&apos;/console&apos;)</span><br></pre></td></tr></table></figure>\n<p> (app/controllers/site/console.py):</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">console = BLueprint(&apos;console&apos;, __name__)</span><br></pre></td></tr></table></figure>\n<h3 id=\"\">Json </h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from flask import jsonify</span><br><span class=\"line\">return jsonify(&#123;&apos;code&apos;: 0&#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"></h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@app.errorhandler(404)</span><br><span class=\"line\">def not_found(error):</span><br><span class=\"line\">    return render_template(&apos;404.html&apos;), 404</span><br><span class=\"line\"></span><br><span class=\"line\">@app.errorhandler(500)</span><br><span class=\"line\">def crash(error):</span><br><span class=\"line\">    return render_template(&apos;5xx.html&apos;), 500</span><br></pre></td></tr></table></figure>\n<h3 id=\"\">WTF </h3>\n\n<p>Flask-WTF , CSRF </p>\n<ul>\n<li>app config  CSRF </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CSRF_ENABLED = True</span><br><span class=\"line\">SECRET_KEY = &apos;you-will-never-guess&apos;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from flask.ext.wtf import Form, TextField, BooleanField</span><br><span class=\"line\">from flask.ext.wtf import Required</span><br><span class=\"line\">class LoginForm(Form):</span><br><span class=\"line\">    openid = TextField(&apos;openid&apos;, validators = [Required()])</span><br><span class=\"line\">    remember_me = BooleanField(&apos;remember_me&apos;, default = False)</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;form action=&quot;&quot; method=&quot;post&quot; name=&quot;login&quot;&gt;</span><br><span class=\"line\">    form.hidden_tag()</span><br><span class=\"line\">    &lt;p&gt; Please enter your OpenID:form.openid(size=80)&lt;br&gt;&lt;/p&gt;</span><br><span class=\"line\">    &lt;p&gt;form.remember_me &lt;/p&gt;</span><br><span class=\"line\">    &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;Sign In&quot;&gt;&lt;/p&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@app.route(&apos;/login&apos;, methods = [&apos;GET&apos;, &apos;POST&apos;])</span><br><span class=\"line\">def login():</span><br><span class=\"line\">    form = LoginForm()</span><br><span class=\"line\">    if form.validate_on_submit():</span><br><span class=\"line\">        flash(&apos;Login requested for OpenID=&quot;&apos; + form.openid.data))</span><br><span class=\"line\">        return redirect(&apos;/index&apos;)</span><br><span class=\"line\">    return render_template(&apos;login.html&apos;, title = &apos;Sign In&apos;,form = form)</span><br></pre></td></tr></table></figure>\n<p>CSRF() form.hidden_tag() CSRF CSRF</p>\n"},{"layout":"post","title":"Sysdig ","date":"2015-09-10T15:10:00.000Z","comments":1,"description":"sysdig","_content":"\n,  ,  iftop, ifstat, netstat, tcpdump, iostatdstat , , , , Sysdig , , , , .\n\n* [](#)\n* [](#)\n* [](#)\n\n<h3 id=\"\"></h3>\n\n```\ncurl -s https://s3.amazonaws.com/download.draios.com/DRAIOS-GPG-KEY.public | apt-key add -\ncurl -s -o /etc/apt/sources.list.d/draios.list http://download.draios.com/stable/deb/draios.list\napt-get update\napt-get -y install sysdig\n```\n\n<h3 id=\"\"></h3>\n\nsysdig  chisel, chisel  , , sysdig  Lua \n\n*  chisel \n\n```\nsysdig -cl  \n```\n\n*  chisel \n\n```\nsysdig -i spy_logs\n```\n\n*  chisel\n\n```\nsysdig -c spy_logs\n```\n\n* , ,  \n`proc.name=foo` , \n,  \n\n```\nsysdig -l\n```\n\n* , \n\n```\nsysdig -w tracefile.cap\nsysdig -r tracefile.dump proc.name=sshd\n```\n\n<h3 id=\"\"></h3>\n\n* ,  DDOS \n\n```\nsudo sysdig -c topprocs_net\n```\n\n* IP,ASCII \n\n```\nsudo sysdig -s2000 -A -c echo_fds fd.cip=127.0.0.1\n```\n\n*  redis-server \n\n```\nsudo sysdig -p\"%proc.name %fd.name\" \"evt.type=accept and proc.name!=redis-server\"\n```\n\n*  GET \n\n```\nsudo sysdig -s 2000 -A -c echo_fds fd.port=80 and evt.buffer contains GET\n```\n\n*  SQL \n\n```\nsudo sysdig -s 2000 -A -c echo_fds evt.buffer contains SELECT\n```\n\n* \n\n```\nsysdig -c topprocs_file\n```\n\n* \n\n```\nsysdig -c topscalls_time\n```\n\n* \n\n```\nsysdig -A -c echo_fds \"fd.filename=syslog\"\n```\n\n*  IO  1ms \n\n```\nsudo sysdig -c fileslower 1\n```\n\n* , \n\n```\nsudo sysdig evt.type=open and fd.name contains /etc\n```\n\n---\n\n[Sysdig ](http://www.sysdig.org/wiki/)\n","source":"_posts/2015-09-10-sysdig-zhi-de-yong-you.markdown","raw":"---\nlayout: post\ntitle: \"Sysdig \"\ndate: 2015-09-10 23:10\ncomments: true\ncategories: System\ndescription: sysdig\n---\n\n,  ,  iftop, ifstat, netstat, tcpdump, iostatdstat , , , , Sysdig , , , , .\n\n* [](#)\n* [](#)\n* [](#)\n\n<h3 id=\"\"></h3>\n\n```\ncurl -s https://s3.amazonaws.com/download.draios.com/DRAIOS-GPG-KEY.public | apt-key add -\ncurl -s -o /etc/apt/sources.list.d/draios.list http://download.draios.com/stable/deb/draios.list\napt-get update\napt-get -y install sysdig\n```\n\n<h3 id=\"\"></h3>\n\nsysdig  chisel, chisel  , , sysdig  Lua \n\n*  chisel \n\n```\nsysdig -cl  \n```\n\n*  chisel \n\n```\nsysdig -i spy_logs\n```\n\n*  chisel\n\n```\nsysdig -c spy_logs\n```\n\n* , ,  \n`proc.name=foo` , \n,  \n\n```\nsysdig -l\n```\n\n* , \n\n```\nsysdig -w tracefile.cap\nsysdig -r tracefile.dump proc.name=sshd\n```\n\n<h3 id=\"\"></h3>\n\n* ,  DDOS \n\n```\nsudo sysdig -c topprocs_net\n```\n\n* IP,ASCII \n\n```\nsudo sysdig -s2000 -A -c echo_fds fd.cip=127.0.0.1\n```\n\n*  redis-server \n\n```\nsudo sysdig -p\"%proc.name %fd.name\" \"evt.type=accept and proc.name!=redis-server\"\n```\n\n*  GET \n\n```\nsudo sysdig -s 2000 -A -c echo_fds fd.port=80 and evt.buffer contains GET\n```\n\n*  SQL \n\n```\nsudo sysdig -s 2000 -A -c echo_fds evt.buffer contains SELECT\n```\n\n* \n\n```\nsysdig -c topprocs_file\n```\n\n* \n\n```\nsysdig -c topscalls_time\n```\n\n* \n\n```\nsysdig -A -c echo_fds \"fd.filename=syslog\"\n```\n\n*  IO  1ms \n\n```\nsudo sysdig -c fileslower 1\n```\n\n* , \n\n```\nsudo sysdig evt.type=open and fd.name contains /etc\n```\n\n---\n\n[Sysdig ](http://www.sysdig.org/wiki/)\n","slug":"2015-09-10-sysdig-zhi-de-yong-you","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuiby0046m1tjkpkyeoiy","content":"<p>,  ,  iftop, ifstat, netstat, tcpdump, iostatdstat , , , , Sysdig , , , , .</p>\n<ul>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -s https://s3.amazonaws.com/download.draios.com/DRAIOS-GPG-KEY.public | apt-key add -</span><br><span class=\"line\">curl -s -o /etc/apt/sources.list.d/draios.list http://download.draios.com/stable/deb/draios.list</span><br><span class=\"line\">apt-get update</span><br><span class=\"line\">apt-get -y install sysdig</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"></h3>\n\n<p>sysdig  chisel, chisel  , , sysdig  Lua </p>\n<ul>\n<li> chisel </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysdig -cl</span><br></pre></td></tr></table></figure>\n<ul>\n<li> chisel </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysdig -i spy_logs</span><br></pre></td></tr></table></figure>\n<ul>\n<li> chisel</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysdig -c spy_logs</span><br></pre></td></tr></table></figure>\n<ul>\n<li>, , <br><code>proc.name=foo</code> ,<br>,  </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysdig -l</span><br></pre></td></tr></table></figure>\n<ul>\n<li>, </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysdig -w tracefile.cap</span><br><span class=\"line\">sysdig -r tracefile.dump proc.name=sshd</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"></h3>\n\n<ul>\n<li>,  DDOS </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sysdig -c topprocs_net</span><br></pre></td></tr></table></figure>\n<ul>\n<li>IP,ASCII </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sysdig -s2000 -A -c echo_fds fd.cip=127.0.0.1</span><br></pre></td></tr></table></figure>\n<ul>\n<li> redis-server </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sysdig -p&quot;%proc.name %fd.name&quot; &quot;evt.type=accept and proc.name!=redis-server&quot;</span><br></pre></td></tr></table></figure>\n<ul>\n<li> GET </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sysdig -s 2000 -A -c echo_fds fd.port=80 and evt.buffer contains GET</span><br></pre></td></tr></table></figure>\n<ul>\n<li> SQL </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sysdig -s 2000 -A -c echo_fds evt.buffer contains SELECT</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysdig -c topprocs_file</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysdig -c topscalls_time</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysdig -A -c echo_fds &quot;fd.filename=syslog&quot;</span><br></pre></td></tr></table></figure>\n<ul>\n<li> IO  1ms </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sysdig -c fileslower 1</span><br></pre></td></tr></table></figure>\n<ul>\n<li>, </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sysdig evt.type=open and fd.name contains /etc</span><br></pre></td></tr></table></figure>\n<hr>\n<p><a href=\"http://www.sysdig.org/wiki/\" target=\"_blank\" rel=\"noopener\">Sysdig </a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>,  ,  iftop, ifstat, netstat, tcpdump, iostatdstat , , , , Sysdig , , , , .</p>\n<ul>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -s https://s3.amazonaws.com/download.draios.com/DRAIOS-GPG-KEY.public | apt-key add -</span><br><span class=\"line\">curl -s -o /etc/apt/sources.list.d/draios.list http://download.draios.com/stable/deb/draios.list</span><br><span class=\"line\">apt-get update</span><br><span class=\"line\">apt-get -y install sysdig</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"></h3>\n\n<p>sysdig  chisel, chisel  , , sysdig  Lua </p>\n<ul>\n<li> chisel </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysdig -cl</span><br></pre></td></tr></table></figure>\n<ul>\n<li> chisel </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysdig -i spy_logs</span><br></pre></td></tr></table></figure>\n<ul>\n<li> chisel</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysdig -c spy_logs</span><br></pre></td></tr></table></figure>\n<ul>\n<li>, , <br><code>proc.name=foo</code> ,<br>,  </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysdig -l</span><br></pre></td></tr></table></figure>\n<ul>\n<li>, </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysdig -w tracefile.cap</span><br><span class=\"line\">sysdig -r tracefile.dump proc.name=sshd</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"></h3>\n\n<ul>\n<li>,  DDOS </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sysdig -c topprocs_net</span><br></pre></td></tr></table></figure>\n<ul>\n<li>IP,ASCII </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sysdig -s2000 -A -c echo_fds fd.cip=127.0.0.1</span><br></pre></td></tr></table></figure>\n<ul>\n<li> redis-server </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sysdig -p&quot;%proc.name %fd.name&quot; &quot;evt.type=accept and proc.name!=redis-server&quot;</span><br></pre></td></tr></table></figure>\n<ul>\n<li> GET </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sysdig -s 2000 -A -c echo_fds fd.port=80 and evt.buffer contains GET</span><br></pre></td></tr></table></figure>\n<ul>\n<li> SQL </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sysdig -s 2000 -A -c echo_fds evt.buffer contains SELECT</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysdig -c topprocs_file</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysdig -c topscalls_time</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysdig -A -c echo_fds &quot;fd.filename=syslog&quot;</span><br></pre></td></tr></table></figure>\n<ul>\n<li> IO  1ms </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sysdig -c fileslower 1</span><br></pre></td></tr></table></figure>\n<ul>\n<li>, </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sysdig evt.type=open and fd.name contains /etc</span><br></pre></td></tr></table></figure>\n<hr>\n<p><a href=\"http://www.sysdig.org/wiki/\" target=\"_blank\" rel=\"noopener\">Sysdig </a></p>\n"},{"layout":"post","title":" Tengine  lua ","date":"2015-10-29T14:45:00.000Z","comments":1,"description":"Tengine, lua-nginx-module","_content":"\n\nTengine  Nginx,  webservice . \n agentzh, [lua-nginx-module](https://github.com/openresty/lua-nginx-module),  lua nginx,  Lua  ngx_lua;\n\n##  nginx_lua\n\nLuaJit,Lua(Just-In-Time Compiler)\n\n* \n\n```\nwget http://luajit.org/download/LuaJIT-2.0.4.tar.gz\ntar zxvf LuaJIT-2.0.4.tar.gz\ncd LuaJIT-2.0.4\nmake\nmake install\n```\n\n* \n\n```\nexport LUAJIT_LIB=/usr/local/lib\nexport LUAJIT_INC=/usr/local/include/luajit-2.0\n```\n\n\n* ngx-lua-module.so\n\n```\n/usr/local/share/dso_tool/ --path=/Path/To/Lua-Nginx-module\n```\n\n* \n\n```\n> echo \"/usr/local/lib\" > /etc/ld.so.conf.d/usr_local_lib.conf\n> ldconfig\n```\n\n###  Tengine \n\n`nginx.conf` \n\n```\ndso {\n    load ngx_load_module;\n}\n```\n\n nginx.conf \n\n```\nlua_code_cache on/off;\n```\n\n \"*.lua\"  nginx .\n\n\n###  ngx_lua_waf\n\n ngx lua ,  waf (web application firework)\n[ngx_lua_waf](https://github.com/loveshell/ngx_lua_waf) ngx_lua  web ,  ngx_lua_waf bug[Pull Request](https://github.com/loveshell/ngx_lua_waf/pull/70),  PR.\n\n\n----\n\n\n\n\n\n\n","source":"_posts/2015-10-29-gei-tengine-jia-shang-lua-tuo-zhan.markdown","raw":"---\nlayout: post\ntitle: \" Tengine  lua \"\ndate: 2015-10-29 22:45\ncomments: true\ncategories: System\ndescription: Tengine, lua-nginx-module\n---\n\n\nTengine  Nginx,  webservice . \n agentzh, [lua-nginx-module](https://github.com/openresty/lua-nginx-module),  lua nginx,  Lua  ngx_lua;\n\n##  nginx_lua\n\nLuaJit,Lua(Just-In-Time Compiler)\n\n* \n\n```\nwget http://luajit.org/download/LuaJIT-2.0.4.tar.gz\ntar zxvf LuaJIT-2.0.4.tar.gz\ncd LuaJIT-2.0.4\nmake\nmake install\n```\n\n* \n\n```\nexport LUAJIT_LIB=/usr/local/lib\nexport LUAJIT_INC=/usr/local/include/luajit-2.0\n```\n\n\n* ngx-lua-module.so\n\n```\n/usr/local/share/dso_tool/ --path=/Path/To/Lua-Nginx-module\n```\n\n* \n\n```\n> echo \"/usr/local/lib\" > /etc/ld.so.conf.d/usr_local_lib.conf\n> ldconfig\n```\n\n###  Tengine \n\n`nginx.conf` \n\n```\ndso {\n    load ngx_load_module;\n}\n```\n\n nginx.conf \n\n```\nlua_code_cache on/off;\n```\n\n \"*.lua\"  nginx .\n\n\n###  ngx_lua_waf\n\n ngx lua ,  waf (web application firework)\n[ngx_lua_waf](https://github.com/loveshell/ngx_lua_waf) ngx_lua  web ,  ngx_lua_waf bug[Pull Request](https://github.com/loveshell/ngx_lua_waf/pull/70),  PR.\n\n\n----\n\n\n\n\n\n\n","slug":"2015-10-29-gei-tengine-jia-shang-lua-tuo-zhan","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuibz0048m1tjni35uzm1","content":"<p>Tengine  Nginx,  webservice .<br> agentzh, <a href=\"https://github.com/openresty/lua-nginx-module\" target=\"_blank\" rel=\"noopener\">lua-nginx-module</a>,  lua nginx,  Lua  ngx_lua;</p>\n<h2 id=\"-nginx-lua\"><a href=\"#-nginx-lua\" class=\"headerlink\" title=\" nginx_lua\"></a> nginx_lua</h2><p>LuaJit,Lua(Just-In-Time Compiler)</p>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://luajit.org/download/LuaJIT-2.0.4.tar.gz</span><br><span class=\"line\">tar zxvf LuaJIT-2.0.4.tar.gz</span><br><span class=\"line\">cd LuaJIT-2.0.4</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export LUAJIT_LIB=/usr/local/lib</span><br><span class=\"line\">export LUAJIT_INC=/usr/local/include/luajit-2.0</span><br></pre></td></tr></table></figure>\n<ul>\n<li>ngx-lua-module.so</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/local/share/dso_tool/ --path=/Path/To/Lua-Nginx-module</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; echo &quot;/usr/local/lib&quot; &gt; /etc/ld.so.conf.d/usr_local_lib.conf</span><br><span class=\"line\">&gt; ldconfig</span><br></pre></td></tr></table></figure>\n<h3 id=\"-Tengine-\"><a href=\"#-Tengine-\" class=\"headerlink\" title=\" Tengine \"></a> Tengine </h3><p><code>nginx.conf</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dso &#123;</span><br><span class=\"line\">    load ngx_load_module;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> nginx.conf </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lua_code_cache on/off;</span><br></pre></td></tr></table></figure>\n<p> *.lua  nginx .</p>\n<h3 id=\"-ngx-lua-waf\"><a href=\"#-ngx-lua-waf\" class=\"headerlink\" title=\" ngx_lua_waf\"></a> ngx_lua_waf</h3><p> ngx lua ,  waf (web application firework)<br><a href=\"https://github.com/loveshell/ngx_lua_waf\" target=\"_blank\" rel=\"noopener\">ngx_lua_waf</a> ngx_lua  web ,  ngx_lua_waf bug<a href=\"https://github.com/loveshell/ngx_lua_waf/pull/70\" target=\"_blank\" rel=\"noopener\">Pull Request</a>,  PR.</p>\n<hr>\n<p><br></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Tengine  Nginx,  webservice .<br> agentzh, <a href=\"https://github.com/openresty/lua-nginx-module\" target=\"_blank\" rel=\"noopener\">lua-nginx-module</a>,  lua nginx,  Lua  ngx_lua;</p>\n<h2 id=\"-nginx-lua\"><a href=\"#-nginx-lua\" class=\"headerlink\" title=\" nginx_lua\"></a> nginx_lua</h2><p>LuaJit,Lua(Just-In-Time Compiler)</p>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://luajit.org/download/LuaJIT-2.0.4.tar.gz</span><br><span class=\"line\">tar zxvf LuaJIT-2.0.4.tar.gz</span><br><span class=\"line\">cd LuaJIT-2.0.4</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export LUAJIT_LIB=/usr/local/lib</span><br><span class=\"line\">export LUAJIT_INC=/usr/local/include/luajit-2.0</span><br></pre></td></tr></table></figure>\n<ul>\n<li>ngx-lua-module.so</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/local/share/dso_tool/ --path=/Path/To/Lua-Nginx-module</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; echo &quot;/usr/local/lib&quot; &gt; /etc/ld.so.conf.d/usr_local_lib.conf</span><br><span class=\"line\">&gt; ldconfig</span><br></pre></td></tr></table></figure>\n<h3 id=\"-Tengine-\"><a href=\"#-Tengine-\" class=\"headerlink\" title=\" Tengine \"></a> Tengine </h3><p><code>nginx.conf</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dso &#123;</span><br><span class=\"line\">    load ngx_load_module;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> nginx.conf </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lua_code_cache on/off;</span><br></pre></td></tr></table></figure>\n<p> *.lua  nginx .</p>\n<h3 id=\"-ngx-lua-waf\"><a href=\"#-ngx-lua-waf\" class=\"headerlink\" title=\" ngx_lua_waf\"></a> ngx_lua_waf</h3><p> ngx lua ,  waf (web application firework)<br><a href=\"https://github.com/loveshell/ngx_lua_waf\" target=\"_blank\" rel=\"noopener\">ngx_lua_waf</a> ngx_lua  web ,  ngx_lua_waf bug<a href=\"https://github.com/loveshell/ngx_lua_waf/pull/70\" target=\"_blank\" rel=\"noopener\">Pull Request</a>,  PR.</p>\n<hr>\n<p><br></p>\n"},{"layout":"post","title":"Gre  Keepalived","date":"2015-12-05T02:29:00.000Z","comments":1,"description":"keepalived","_content":"\n\n\n* [ Gre ](#)\n* [ Vrrp ](#)\n* [KeepAlived ](#)\n* [Keepalived ](#)\n* [](#)\n\n\n<h3 id=\"\"> Gre  </h3>\n\nGRE  IP-2-IP  IPv4/IPv6 Tunnel Tunnel Linux  GRE  ip_gre Pv4 \n\n2 GRE \n\n* $server_A_ip AIP\n* $server_B_ip B IP\n\n```\n#  A \n#  GRE  ,  IP\nsudo ip link add gretap1 type gretap local $server_a_ip remote $server_b_ip \nsudo ip link set dev gretap1 up  # \nsudo ip addr add dev gretap1 10.1.1.2/24 # \n\n#  B \n#  GRE  ,  IP\nsudo ip link add gretap1 type gretap local $server_b_ip remote $server_a_ip \nsudo ip link set dev gretap1 up  # \nsudo ip addr add dev gretap1 10.1.1.3/24 # \n```\n\n\n\n```\nip link set gretap1 down\nip tunnel del gretap1\n```\n\n\n\n\n<h3 id=\"\"> vrrp  </h3>\n\nVRRP(Virtual Router Redundancy Protocol), \n\nN master  backup IPvipIP  master  ARP  IP   master  backup  vrrp  master VRRPbackupmaster\n\n\n<h3 id=\"\"> Keepalived  </h3>\n\nKeepalived  VRRP IP\n\n* \n\nWEB2 Keepalived, IPIP\n\n\n<h3 id=\"\"> Keepalived</h3>\n\n* \n\n```\nsudo apt-get install keepalived\n```\n\n A, B  GRE  IP  $virtual_third_ip\n A \n\n* \n\n A, B  `/etc/keepalived/keepalived.conf`\n\n```\n\nglobal_defs {\n    router_id LVS_DEVEL\n}\n\nvrrp_instance VI_1 {\n    state MASTER\n    interface gretap1 # \n    virtual_router_id 51\n    # ,, A,B \n    priority 100          advert_int 1      # \n    authentication {  #  \n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        $virtual_third_ip dev eth0\n    }\n}\n```\n\n  A  Master,  B  Backup,  A $virtual_third_ip  B   Nginx Nginx \n\n\n<h3 id=\"\">  </h3>\n\n* [](http://linux.vbird.org/linux_server/0140networkcommand.php)\n* [GRE tuneling](http://www.tldp.org/HOWTO/Adv-Routing-HOWTO/lartc.tunnel.gre.html)\n* [VRRP](http://baike.baidu.com/link?url=N1-VGuzQC0PJ2bCnOzYn-XRTlN8eFGCvIJQlTI6KDL5Fx3EQxoRGTrxazb11jfZQqlfeA6q2Ka0VKRVEc0Kdu3GEyhqe1W_Ae2h0Tqu5NacIjOSaSnUVeOe-9QV5dB8q0Wv_uq8-vqdnQICt39UZFK)\n","source":"_posts/2015-12-05-gre-tuning-and-keepalived.markdown","raw":"---\nlayout: post\ntitle: \"Gre  Keepalived\"\ndate: 2015-12-05 10:29\ncomments: true\ncategories: System\ndescription: keepalived\n---\n\n\n\n* [ Gre ](#)\n* [ Vrrp ](#)\n* [KeepAlived ](#)\n* [Keepalived ](#)\n* [](#)\n\n\n<h3 id=\"\"> Gre  </h3>\n\nGRE  IP-2-IP  IPv4/IPv6 Tunnel Tunnel Linux  GRE  ip_gre Pv4 \n\n2 GRE \n\n* $server_A_ip AIP\n* $server_B_ip B IP\n\n```\n#  A \n#  GRE  ,  IP\nsudo ip link add gretap1 type gretap local $server_a_ip remote $server_b_ip \nsudo ip link set dev gretap1 up  # \nsudo ip addr add dev gretap1 10.1.1.2/24 # \n\n#  B \n#  GRE  ,  IP\nsudo ip link add gretap1 type gretap local $server_b_ip remote $server_a_ip \nsudo ip link set dev gretap1 up  # \nsudo ip addr add dev gretap1 10.1.1.3/24 # \n```\n\n\n\n```\nip link set gretap1 down\nip tunnel del gretap1\n```\n\n\n\n\n<h3 id=\"\"> vrrp  </h3>\n\nVRRP(Virtual Router Redundancy Protocol), \n\nN master  backup IPvipIP  master  ARP  IP   master  backup  vrrp  master VRRPbackupmaster\n\n\n<h3 id=\"\"> Keepalived  </h3>\n\nKeepalived  VRRP IP\n\n* \n\nWEB2 Keepalived, IPIP\n\n\n<h3 id=\"\"> Keepalived</h3>\n\n* \n\n```\nsudo apt-get install keepalived\n```\n\n A, B  GRE  IP  $virtual_third_ip\n A \n\n* \n\n A, B  `/etc/keepalived/keepalived.conf`\n\n```\n\nglobal_defs {\n    router_id LVS_DEVEL\n}\n\nvrrp_instance VI_1 {\n    state MASTER\n    interface gretap1 # \n    virtual_router_id 51\n    # ,, A,B \n    priority 100          advert_int 1      # \n    authentication {  #  \n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        $virtual_third_ip dev eth0\n    }\n}\n```\n\n  A  Master,  B  Backup,  A $virtual_third_ip  B   Nginx Nginx \n\n\n<h3 id=\"\">  </h3>\n\n* [](http://linux.vbird.org/linux_server/0140networkcommand.php)\n* [GRE tuneling](http://www.tldp.org/HOWTO/Adv-Routing-HOWTO/lartc.tunnel.gre.html)\n* [VRRP](http://baike.baidu.com/link?url=N1-VGuzQC0PJ2bCnOzYn-XRTlN8eFGCvIJQlTI6KDL5Fx3EQxoRGTrxazb11jfZQqlfeA6q2Ka0VKRVEc0Kdu3GEyhqe1W_Ae2h0Tqu5NacIjOSaSnUVeOe-9QV5dB8q0Wv_uq8-vqdnQICt39UZFK)\n","slug":"2015-12-05-gre-tuning-and-keepalived","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuic0004am1tjsv3txfus","content":"<p></p>\n<ul>\n<li><a href=\"#\"> Gre </a></li>\n<li><a href=\"#\"> Vrrp </a></li>\n<li><a href=\"#\">KeepAlived </a></li>\n<li><a href=\"#\">Keepalived </a></li>\n<li><a href=\"#\"></a></li>\n</ul>\n<h3 id=\"\"> Gre  </h3>\n\n<p>GRE  IP-2-IP  IPv4/IPv6 Tunnel Tunnel Linux  GRE  ip_gre Pv4 </p>\n<p>2 GRE </p>\n<ul>\n<li>$server_A_ip AIP</li>\n<li>$server_B_ip B IP</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#  A </span><br><span class=\"line\">#  GRE  ,  IP</span><br><span class=\"line\">sudo ip link add gretap1 type gretap local $server_a_ip remote $server_b_ip </span><br><span class=\"line\">sudo ip link set dev gretap1 up  # </span><br><span class=\"line\">sudo ip addr add dev gretap1 10.1.1.2/24 # </span><br><span class=\"line\"></span><br><span class=\"line\">#  B </span><br><span class=\"line\">#  GRE  ,  IP</span><br><span class=\"line\">sudo ip link add gretap1 type gretap local $server_b_ip remote $server_a_ip </span><br><span class=\"line\">sudo ip link set dev gretap1 up  # </span><br><span class=\"line\">sudo ip addr add dev gretap1 10.1.1.3/24 # </span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ip link set gretap1 down</span><br><span class=\"line\">ip tunnel del gretap1</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"> vrrp  </h3>\n\n<p>VRRP(Virtual Router Redundancy Protocol), </p>\n<p>N master  backup IPvipIP  master  ARP  IP   master  backup  vrrp  master VRRPbackupmaster</p>\n<h3 id=\"\"> Keepalived  </h3>\n\n<p>Keepalived  VRRP IP</p>\n<ul>\n<li></li>\n</ul>\n<p>WEB2 Keepalived, IPIP</p>\n<h3 id=\"\"> Keepalived</h3>\n\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install keepalived</span><br></pre></td></tr></table></figure>\n<p> A, B  GRE  IP  $virtual_third_ip<br> A </p>\n<ul>\n<li></li>\n</ul>\n<p> A, B  <code>/etc/keepalived/keepalived.conf</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">global_defs &#123;</span><br><span class=\"line\">    router_id LVS_DEVEL</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">vrrp_instance VI_1 &#123;</span><br><span class=\"line\">    state MASTER</span><br><span class=\"line\">    interface gretap1 # </span><br><span class=\"line\">    virtual_router_id 51</span><br><span class=\"line\">    # ,, A,B </span><br><span class=\"line\">    priority 100          advert_int 1      # </span><br><span class=\"line\">    authentication &#123;  #  </span><br><span class=\"line\">        auth_type PASS</span><br><span class=\"line\">        auth_pass 1111</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    virtual_ipaddress &#123;</span><br><span class=\"line\">        $virtual_third_ip dev eth0</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>  A  Master,  B  Backup,  A $virtual_third_ip  B   Nginx Nginx </p>\n<h3 id=\"\">  </h3>\n\n<ul>\n<li><a href=\"http://linux.vbird.org/linux_server/0140networkcommand.php\" target=\"_blank\" rel=\"noopener\"></a></li>\n<li><a href=\"http://www.tldp.org/HOWTO/Adv-Routing-HOWTO/lartc.tunnel.gre.html\" target=\"_blank\" rel=\"noopener\">GRE tuneling</a></li>\n<li><a href=\"http://baike.baidu.com/link?url=N1-VGuzQC0PJ2bCnOzYn-XRTlN8eFGCvIJQlTI6KDL5Fx3EQxoRGTrxazb11jfZQqlfeA6q2Ka0VKRVEc0Kdu3GEyhqe1W_Ae2h0Tqu5NacIjOSaSnUVeOe-9QV5dB8q0Wv_uq8-vqdnQICt39UZFK\" target=\"_blank\" rel=\"noopener\">VRRP</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p></p>\n<ul>\n<li><a href=\"#\"> Gre </a></li>\n<li><a href=\"#\"> Vrrp </a></li>\n<li><a href=\"#\">KeepAlived </a></li>\n<li><a href=\"#\">Keepalived </a></li>\n<li><a href=\"#\"></a></li>\n</ul>\n<h3 id=\"\"> Gre  </h3>\n\n<p>GRE  IP-2-IP  IPv4/IPv6 Tunnel Tunnel Linux  GRE  ip_gre Pv4 </p>\n<p>2 GRE </p>\n<ul>\n<li>$server_A_ip AIP</li>\n<li>$server_B_ip B IP</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#  A </span><br><span class=\"line\">#  GRE  ,  IP</span><br><span class=\"line\">sudo ip link add gretap1 type gretap local $server_a_ip remote $server_b_ip </span><br><span class=\"line\">sudo ip link set dev gretap1 up  # </span><br><span class=\"line\">sudo ip addr add dev gretap1 10.1.1.2/24 # </span><br><span class=\"line\"></span><br><span class=\"line\">#  B </span><br><span class=\"line\">#  GRE  ,  IP</span><br><span class=\"line\">sudo ip link add gretap1 type gretap local $server_b_ip remote $server_a_ip </span><br><span class=\"line\">sudo ip link set dev gretap1 up  # </span><br><span class=\"line\">sudo ip addr add dev gretap1 10.1.1.3/24 # </span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ip link set gretap1 down</span><br><span class=\"line\">ip tunnel del gretap1</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"> vrrp  </h3>\n\n<p>VRRP(Virtual Router Redundancy Protocol), </p>\n<p>N master  backup IPvipIP  master  ARP  IP   master  backup  vrrp  master VRRPbackupmaster</p>\n<h3 id=\"\"> Keepalived  </h3>\n\n<p>Keepalived  VRRP IP</p>\n<ul>\n<li></li>\n</ul>\n<p>WEB2 Keepalived, IPIP</p>\n<h3 id=\"\"> Keepalived</h3>\n\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install keepalived</span><br></pre></td></tr></table></figure>\n<p> A, B  GRE  IP  $virtual_third_ip<br> A </p>\n<ul>\n<li></li>\n</ul>\n<p> A, B  <code>/etc/keepalived/keepalived.conf</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">global_defs &#123;</span><br><span class=\"line\">    router_id LVS_DEVEL</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">vrrp_instance VI_1 &#123;</span><br><span class=\"line\">    state MASTER</span><br><span class=\"line\">    interface gretap1 # </span><br><span class=\"line\">    virtual_router_id 51</span><br><span class=\"line\">    # ,, A,B </span><br><span class=\"line\">    priority 100          advert_int 1      # </span><br><span class=\"line\">    authentication &#123;  #  </span><br><span class=\"line\">        auth_type PASS</span><br><span class=\"line\">        auth_pass 1111</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    virtual_ipaddress &#123;</span><br><span class=\"line\">        $virtual_third_ip dev eth0</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>  A  Master,  B  Backup,  A $virtual_third_ip  B   Nginx Nginx </p>\n<h3 id=\"\">  </h3>\n\n<ul>\n<li><a href=\"http://linux.vbird.org/linux_server/0140networkcommand.php\" target=\"_blank\" rel=\"noopener\"></a></li>\n<li><a href=\"http://www.tldp.org/HOWTO/Adv-Routing-HOWTO/lartc.tunnel.gre.html\" target=\"_blank\" rel=\"noopener\">GRE tuneling</a></li>\n<li><a href=\"http://baike.baidu.com/link?url=N1-VGuzQC0PJ2bCnOzYn-XRTlN8eFGCvIJQlTI6KDL5Fx3EQxoRGTrxazb11jfZQqlfeA6q2Ka0VKRVEc0Kdu3GEyhqe1W_Ae2h0Tqu5NacIjOSaSnUVeOe-9QV5dB8q0Wv_uq8-vqdnQICt39UZFK\" target=\"_blank\" rel=\"noopener\">VRRP</a></li>\n</ul>\n"},{"layout":"post","title":"Nginx  GoAccess","date":"2015-12-10T15:28:00.000Z","comments":1,"description":"GoAccess Nginx","_content":"\n Nginx  shell, awk, python,  [GoAccess](https://github.com/allinurl/goaccess) , \n\n* \n GoAccess, \n \n```\n$ echo \"deb http://deb.goaccess.io $(lsb_release -cs) main\"|sudo tee -a /etc/apt/sources.list\n$ wget -O - http://deb.goaccess.io/gnugpg.key | sudo apt-key add -\n$ sudo apt-get update\n$ sudo apt-get install goaccess\n```\n \n* \n \n `/etc/goaccess.conf` \n\n```\ntime-format %T   #  0.0us \ndate-format %d/%b/%Y\nlog-format %h %^[%d:%t %^] \"%r\" %s %b \"%R\" \"%u\" %T\n```\n \n* \n\n IP, \n \n```\n\ngoaccess -f access.log \n \ntop ip, \ngoaccess -f access.log > report.html\n \n\nsed -n '/5\\/Dec\\/2015/,/10\\/Dec\\/2010/ p' access.log | goaccess -a\n \n\nzcat access.log.*.gz | goaccess\n```\n\n","source":"_posts/2015-12-10-fen-xi-nginxri-zhi-de-li-qi-goaccess.markdown","raw":"---\nlayout: post\ntitle: \"Nginx  GoAccess\"\ndate: 2015-12-10 23:28\ncomments: true\ncategories: System\ndescription: GoAccess Nginx\n---\n\n Nginx  shell, awk, python,  [GoAccess](https://github.com/allinurl/goaccess) , \n\n* \n GoAccess, \n \n```\n$ echo \"deb http://deb.goaccess.io $(lsb_release -cs) main\"|sudo tee -a /etc/apt/sources.list\n$ wget -O - http://deb.goaccess.io/gnugpg.key | sudo apt-key add -\n$ sudo apt-get update\n$ sudo apt-get install goaccess\n```\n \n* \n \n `/etc/goaccess.conf` \n\n```\ntime-format %T   #  0.0us \ndate-format %d/%b/%Y\nlog-format %h %^[%d:%t %^] \"%r\" %s %b \"%R\" \"%u\" %T\n```\n \n* \n\n IP, \n \n```\n\ngoaccess -f access.log \n \ntop ip, \ngoaccess -f access.log > report.html\n \n\nsed -n '/5\\/Dec\\/2015/,/10\\/Dec\\/2010/ p' access.log | goaccess -a\n \n\nzcat access.log.*.gz | goaccess\n```\n\n","slug":"2015-12-10-fen-xi-nginxri-zhi-de-li-qi-goaccess","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuic2004cm1tjuibg3jm2","content":"<p> Nginx  shell, awk, python,  <a href=\"https://github.com/allinurl/goaccess\" target=\"_blank\" rel=\"noopener\">GoAccess</a> , </p>\n<ul>\n<li><br> GoAccess, </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ echo &quot;deb http://deb.goaccess.io $(lsb_release -cs) main&quot;|sudo tee -a /etc/apt/sources.list</span><br><span class=\"line\">$ wget -O - http://deb.goaccess.io/gnugpg.key | sudo apt-key add -</span><br><span class=\"line\">$ sudo apt-get update</span><br><span class=\"line\">$ sudo apt-get install goaccess</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p> <code>/etc/goaccess.conf</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">time-format %T   #  0.0us </span><br><span class=\"line\">date-format %d/%b/%Y</span><br><span class=\"line\">log-format %h %^[%d:%t %^] &quot;%r&quot; %s %b &quot;%R&quot; &quot;%u&quot; %T</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p> IP, </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">goaccess -f access.log </span><br><span class=\"line\"> </span><br><span class=\"line\">top ip, </span><br><span class=\"line\">goaccess -f access.log &gt; report.html</span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\">sed -n &apos;/5\\/Dec\\/2015/,/10\\/Dec\\/2010/ p&apos; access.log | goaccess -a</span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\">zcat access.log.*.gz | goaccess</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p> Nginx  shell, awk, python,  <a href=\"https://github.com/allinurl/goaccess\" target=\"_blank\" rel=\"noopener\">GoAccess</a> , </p>\n<ul>\n<li><br> GoAccess, </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ echo &quot;deb http://deb.goaccess.io $(lsb_release -cs) main&quot;|sudo tee -a /etc/apt/sources.list</span><br><span class=\"line\">$ wget -O - http://deb.goaccess.io/gnugpg.key | sudo apt-key add -</span><br><span class=\"line\">$ sudo apt-get update</span><br><span class=\"line\">$ sudo apt-get install goaccess</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p> <code>/etc/goaccess.conf</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">time-format %T   #  0.0us </span><br><span class=\"line\">date-format %d/%b/%Y</span><br><span class=\"line\">log-format %h %^[%d:%t %^] &quot;%r&quot; %s %b &quot;%R&quot; &quot;%u&quot; %T</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p> IP, </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">goaccess -f access.log </span><br><span class=\"line\"> </span><br><span class=\"line\">top ip, </span><br><span class=\"line\">goaccess -f access.log &gt; report.html</span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\">sed -n &apos;/5\\/Dec\\/2015/,/10\\/Dec\\/2010/ p&apos; access.log | goaccess -a</span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\">zcat access.log.*.gz | goaccess</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"  nginx qps ","date":"2016-01-07T04:59:00.000Z","comments":1,"description":"Nginx lua","_content":"\n ngx lua , [GitHub](https://github.com/zheng-ji/ngx_lua_reqstatus):\n\n- [x]  qps\n- [x]  5xx \n- [x]  \n- [x]  Ganglia \n\n## \n\n*   `nginx.conf`\n\n```\nhttp {\n    ...\n    ...\n\n    lua_shared_dict statics_dict    1M; # \n    lua_package_path \"/etc/nginx/ngx_lua_reqstatus/?.lua\";  #\n    log_by_lua_file \"/etc/nginx/ngx_lua_reqstatus/hook.lua\"; # \n\n    server {\n        listen 80;\n        server_name  justforfun.com; \n\n        location /{\n            ...\n        }\n    }\n    # \n    server {\n        listen 127.0.0.1:6080;\n        location /{\n            access_by_lua_file \"/etc/nginx/ngx_lua_reqstatus/status.lua\";\n        }\n    }\n}\n```\n\n* \n\n```\ncurl localhost:6080/?domain=justforfun.com\n```\n\n* \n\n```\nServer Name:    justforfun.com\nSeconds SinceLast:   1.4399998188019 secs\nRequest Count:      1\nAverage Req Time:   0 secs\nRequests Per Secs:  0.69444453182781\n5xx num:    0\n```\n\n\n","source":"_posts/2016-01-07-shi-shi-jian-kong-nginx-qps-de-tuo-zhan.markdown","raw":"---\nlayout: post\ntitle: \"  nginx qps \"\ndate: 2016-01-07 12:59\ncomments: true\ncategories: System\ndescription: Nginx lua\n---\n\n ngx lua , [GitHub](https://github.com/zheng-ji/ngx_lua_reqstatus):\n\n- [x]  qps\n- [x]  5xx \n- [x]  \n- [x]  Ganglia \n\n## \n\n*   `nginx.conf`\n\n```\nhttp {\n    ...\n    ...\n\n    lua_shared_dict statics_dict    1M; # \n    lua_package_path \"/etc/nginx/ngx_lua_reqstatus/?.lua\";  #\n    log_by_lua_file \"/etc/nginx/ngx_lua_reqstatus/hook.lua\"; # \n\n    server {\n        listen 80;\n        server_name  justforfun.com; \n\n        location /{\n            ...\n        }\n    }\n    # \n    server {\n        listen 127.0.0.1:6080;\n        location /{\n            access_by_lua_file \"/etc/nginx/ngx_lua_reqstatus/status.lua\";\n        }\n    }\n}\n```\n\n* \n\n```\ncurl localhost:6080/?domain=justforfun.com\n```\n\n* \n\n```\nServer Name:    justforfun.com\nSeconds SinceLast:   1.4399998188019 secs\nRequest Count:      1\nAverage Req Time:   0 secs\nRequests Per Secs:  0.69444453182781\n5xx num:    0\n```\n\n\n","slug":"2016-01-07-shi-shi-jian-kong-nginx-qps-de-tuo-zhan","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuic3004em1tjubxqnqzc","content":"<p> ngx lua , <a href=\"https://github.com/zheng-ji/ngx_lua_reqstatus\" target=\"_blank\" rel=\"noopener\">GitHub</a>:</p>\n<ul>\n<li style=\"list-style: none\"><input type=\"checkbox\" checked>  qps</li>\n<li style=\"list-style: none\"><input type=\"checkbox\" checked>  5xx </li>\n<li style=\"list-style: none\"><input type=\"checkbox\" checked>  </li>\n<li style=\"list-style: none\"><input type=\"checkbox\" checked>  Ganglia </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li> <code>nginx.conf</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    lua_shared_dict statics_dict    1M; # </span><br><span class=\"line\">    lua_package_path &quot;/etc/nginx/ngx_lua_reqstatus/?.lua&quot;;  #</span><br><span class=\"line\">    log_by_lua_file &quot;/etc/nginx/ngx_lua_reqstatus/hook.lua&quot;; # </span><br><span class=\"line\"></span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen 80;</span><br><span class=\"line\">        server_name  justforfun.com; </span><br><span class=\"line\"></span><br><span class=\"line\">        location /&#123;</span><br><span class=\"line\">            ...</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    # </span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen 127.0.0.1:6080;</span><br><span class=\"line\">        location /&#123;</span><br><span class=\"line\">            access_by_lua_file &quot;/etc/nginx/ngx_lua_reqstatus/status.lua&quot;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl localhost:6080/?domain=justforfun.com</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Server Name:    justforfun.com</span><br><span class=\"line\">Seconds SinceLast:   1.4399998188019 secs</span><br><span class=\"line\">Request Count:      1</span><br><span class=\"line\">Average Req Time:   0 secs</span><br><span class=\"line\">Requests Per Secs:  0.69444453182781</span><br><span class=\"line\">5xx num:    0</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p> ngx lua , <a href=\"https://github.com/zheng-ji/ngx_lua_reqstatus\" target=\"_blank\" rel=\"noopener\">GitHub</a>:</p>\n<ul>\n<li style=\"list-style: none\"><input type=\"checkbox\" checked>  qps</li>\n<li style=\"list-style: none\"><input type=\"checkbox\" checked>  5xx </li>\n<li style=\"list-style: none\"><input type=\"checkbox\" checked>  </li>\n<li style=\"list-style: none\"><input type=\"checkbox\" checked>  Ganglia </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li> <code>nginx.conf</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    lua_shared_dict statics_dict    1M; # </span><br><span class=\"line\">    lua_package_path &quot;/etc/nginx/ngx_lua_reqstatus/?.lua&quot;;  #</span><br><span class=\"line\">    log_by_lua_file &quot;/etc/nginx/ngx_lua_reqstatus/hook.lua&quot;; # </span><br><span class=\"line\"></span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen 80;</span><br><span class=\"line\">        server_name  justforfun.com; </span><br><span class=\"line\"></span><br><span class=\"line\">        location /&#123;</span><br><span class=\"line\">            ...</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    # </span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen 127.0.0.1:6080;</span><br><span class=\"line\">        location /&#123;</span><br><span class=\"line\">            access_by_lua_file &quot;/etc/nginx/ngx_lua_reqstatus/status.lua&quot;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl localhost:6080/?domain=justforfun.com</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Server Name:    justforfun.com</span><br><span class=\"line\">Seconds SinceLast:   1.4399998188019 secs</span><br><span class=\"line\">Request Count:      1</span><br><span class=\"line\">Average Req Time:   0 secs</span><br><span class=\"line\">Requests Per Secs:  0.69444453182781</span><br><span class=\"line\">5xx num:    0</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"Flume  Nginx ","date":"2016-04-23T01:13:00.000Z","comments":1,"description":"flume","_content":"\n\n RsyncScp \n\n\n Nginx Flume \n\n# Flume \n\n[**F**lume](https://flume.apache.org/) .\n\n\n- EventEvent  Flume flume \n- AgentAgent Sources, Channels, Sinks events\n- SourceSourceeventseventsChannels\n- ChannelChannel Source  Sink eventsSinkeventschanneleventsChannel\n- SinkSink  events eventschannel\n\n{% img /images/2016/04/flume.jpg %}\n\n\n- Source  Syslog Source, Kafka Source,HTTP Source, Exec Source Avro Source \n- Sink  Kafka Sink, Avro Sink, File Roll Sink, HDFS Sink \n- Channel  Memory Channel,File Channel \n\n Source, Sink, Channel,  Flume \n\n\n# \n\n, Nginx \n\n flume \n\n- Flume1  Exec Source -> Memory Channel -> Avro Sink,\n- Flume2  Avro Source -> Memory Channel -> FileRoll Sink\n\n{% img /images/2016/04/flume1toflume2.jpg %}\n\n# \n\n\n\n\n-  [Flume](https://flume.apache.org/download.html)\n-  JavaSDk, conf/flume-env.sh\n  \n```sh\n# oracle-java-8\nexport JAVA_HOME=/usr/lib/jvm/java-8-oracle/jre/\n```\n  \n- Flume1, tail2avro.conf  \n\n```\nagent.sources = s1\nagent.channels = c1\nagent.sinks = k1\n\nagent.sources.s1.type=exec\nagent.sources.s1.command=tail -F <Your File Path>\nagent.sources.s1.channels=c1\n\nagent.channels.c1.type=memory\nagent.channels.c1.capacity=10000\nagent.channels.c1.transactionCapacity=10000\n\nagent.sinks.k1.type = avro\nagent.sinks.k1.hostname = <Your Target Address>\nagent.sinks.k1.port = <Your Target Port>\nagent.sinks.k1.channel=c1\n```\n\nFlume2  avro2file.conf \n\n```\nagent.sources = s1\nagent.channels = c1\nagent.sinks = k1\n\nagent.sources.s1.type = avro\nagent.sources.s1.bind = <Your Address>\nagent.sources.s1.port = <Your Port>\nagent.sources.s1.channels = c1\n\nagent.sinks.k1.type = file_roll\nagent.sinks.k1.sink.directory = /data/log/ngxlog\n# \nagent.sinks.k1.sink.rollInterval = 86400\nagent.sinks.k1.channel = c1\n\nagent.channels.c1.type = memory\n#  Event \nagent.channels.c1.capacity = 10000\nagent.channels.c1.transactionCapacity = 10000\nagent.channels.c1.keep-alive = 60\n```\n\n- \n\n```\n# flume1\nbin/flume-ng agent -n agent -c conf -f conf/tail2avro.conf \\\n-Dflume.root.logger=WARN\n\n# flume2\nin/flume-ng agent -n agent -c conf -f conf/avro2file.conf \\\n-Dflume.root.logger=INFO\n```\n\n## \n\n- [FlumeUserGuide](https://flume.apache.org/FlumeUserGuide.html)  FlumeUserGuide\n","source":"_posts/2016-04-23-flume-shi-shi-shou-ji-nginx-ri-zhi.markdown","raw":"---\nlayout: post\ntitle: \"Flume  Nginx \"\ndate: 2016-04-23 09:13\ncomments: true\ncategories: System\ndescription: flume\n---\n\n\n RsyncScp \n\n\n Nginx Flume \n\n# Flume \n\n[**F**lume](https://flume.apache.org/) .\n\n\n- EventEvent  Flume flume \n- AgentAgent Sources, Channels, Sinks events\n- SourceSourceeventseventsChannels\n- ChannelChannel Source  Sink eventsSinkeventschanneleventsChannel\n- SinkSink  events eventschannel\n\n{% img /images/2016/04/flume.jpg %}\n\n\n- Source  Syslog Source, Kafka Source,HTTP Source, Exec Source Avro Source \n- Sink  Kafka Sink, Avro Sink, File Roll Sink, HDFS Sink \n- Channel  Memory Channel,File Channel \n\n Source, Sink, Channel,  Flume \n\n\n# \n\n, Nginx \n\n flume \n\n- Flume1  Exec Source -> Memory Channel -> Avro Sink,\n- Flume2  Avro Source -> Memory Channel -> FileRoll Sink\n\n{% img /images/2016/04/flume1toflume2.jpg %}\n\n# \n\n\n\n\n-  [Flume](https://flume.apache.org/download.html)\n-  JavaSDk, conf/flume-env.sh\n  \n```sh\n# oracle-java-8\nexport JAVA_HOME=/usr/lib/jvm/java-8-oracle/jre/\n```\n  \n- Flume1, tail2avro.conf  \n\n```\nagent.sources = s1\nagent.channels = c1\nagent.sinks = k1\n\nagent.sources.s1.type=exec\nagent.sources.s1.command=tail -F <Your File Path>\nagent.sources.s1.channels=c1\n\nagent.channels.c1.type=memory\nagent.channels.c1.capacity=10000\nagent.channels.c1.transactionCapacity=10000\n\nagent.sinks.k1.type = avro\nagent.sinks.k1.hostname = <Your Target Address>\nagent.sinks.k1.port = <Your Target Port>\nagent.sinks.k1.channel=c1\n```\n\nFlume2  avro2file.conf \n\n```\nagent.sources = s1\nagent.channels = c1\nagent.sinks = k1\n\nagent.sources.s1.type = avro\nagent.sources.s1.bind = <Your Address>\nagent.sources.s1.port = <Your Port>\nagent.sources.s1.channels = c1\n\nagent.sinks.k1.type = file_roll\nagent.sinks.k1.sink.directory = /data/log/ngxlog\n# \nagent.sinks.k1.sink.rollInterval = 86400\nagent.sinks.k1.channel = c1\n\nagent.channels.c1.type = memory\n#  Event \nagent.channels.c1.capacity = 10000\nagent.channels.c1.transactionCapacity = 10000\nagent.channels.c1.keep-alive = 60\n```\n\n- \n\n```\n# flume1\nbin/flume-ng agent -n agent -c conf -f conf/tail2avro.conf \\\n-Dflume.root.logger=WARN\n\n# flume2\nin/flume-ng agent -n agent -c conf -f conf/avro2file.conf \\\n-Dflume.root.logger=INFO\n```\n\n## \n\n- [FlumeUserGuide](https://flume.apache.org/FlumeUserGuide.html)  FlumeUserGuide\n","slug":"2016-04-23-flume-shi-shi-shou-ji-nginx-ri-zhi","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuic4004gm1tjjmij08nb","content":"<p> RsyncScp <br></p>\n<p> Nginx Flume </p>\n<h1 id=\"Flume-\"><a href=\"#Flume-\" class=\"headerlink\" title=\"Flume \"></a>Flume </h1><p><a href=\"https://flume.apache.org/\" target=\"_blank\" rel=\"noopener\"><strong>F</strong>lume</a> .<br></p>\n<ul>\n<li>EventEvent  Flume flume </li>\n<li>AgentAgent Sources, Channels, Sinks events</li>\n<li>SourceSourceeventseventsChannels</li>\n<li>ChannelChannel Source  Sink eventsSinkeventschanneleventsChannel</li>\n<li>SinkSink  events eventschannel</li>\n</ul>\n<img src=\"/images/2016/04/flume.jpg\">\n<ul>\n<li>Source  Syslog Source, Kafka Source,HTTP Source, Exec Source Avro Source </li>\n<li>Sink  Kafka Sink, Avro Sink, File Roll Sink, HDFS Sink </li>\n<li>Channel  Memory Channel,File Channel </li>\n</ul>\n<p> Source, Sink, Channel,  Flume </p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>, Nginx </p>\n<p> flume </p>\n<ul>\n<li>Flume1  Exec Source -&gt; Memory Channel -&gt; Avro Sink,</li>\n<li>Flume2  Avro Source -&gt; Memory Channel -&gt; FileRoll Sink</li>\n</ul>\n<img src=\"/images/2016/04/flume1toflume2.jpg\">\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n<ul>\n<li> <a href=\"https://flume.apache.org/download.html\" target=\"_blank\" rel=\"noopener\">Flume</a></li>\n<li> JavaSDk, conf/flume-env.sh</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># oracle-java-8</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/usr/lib/jvm/java-8-oracle/jre/</span><br></pre></td></tr></table></figure>\n<ul>\n<li>Flume1, tail2avro.conf  </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">agent.sources = s1</span><br><span class=\"line\">agent.channels = c1</span><br><span class=\"line\">agent.sinks = k1</span><br><span class=\"line\"></span><br><span class=\"line\">agent.sources.s1.type=exec</span><br><span class=\"line\">agent.sources.s1.command=tail -F &lt;Your File Path&gt;</span><br><span class=\"line\">agent.sources.s1.channels=c1</span><br><span class=\"line\"></span><br><span class=\"line\">agent.channels.c1.type=memory</span><br><span class=\"line\">agent.channels.c1.capacity=10000</span><br><span class=\"line\">agent.channels.c1.transactionCapacity=10000</span><br><span class=\"line\"></span><br><span class=\"line\">agent.sinks.k1.type = avro</span><br><span class=\"line\">agent.sinks.k1.hostname = &lt;Your Target Address&gt;</span><br><span class=\"line\">agent.sinks.k1.port = &lt;Your Target Port&gt;</span><br><span class=\"line\">agent.sinks.k1.channel=c1</span><br></pre></td></tr></table></figure>\n<p>Flume2  avro2file.conf </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">agent.sources = s1</span><br><span class=\"line\">agent.channels = c1</span><br><span class=\"line\">agent.sinks = k1</span><br><span class=\"line\"></span><br><span class=\"line\">agent.sources.s1.type = avro</span><br><span class=\"line\">agent.sources.s1.bind = &lt;Your Address&gt;</span><br><span class=\"line\">agent.sources.s1.port = &lt;Your Port&gt;</span><br><span class=\"line\">agent.sources.s1.channels = c1</span><br><span class=\"line\"></span><br><span class=\"line\">agent.sinks.k1.type = file_roll</span><br><span class=\"line\">agent.sinks.k1.sink.directory = /data/log/ngxlog</span><br><span class=\"line\"># </span><br><span class=\"line\">agent.sinks.k1.sink.rollInterval = 86400</span><br><span class=\"line\">agent.sinks.k1.channel = c1</span><br><span class=\"line\"></span><br><span class=\"line\">agent.channels.c1.type = memory</span><br><span class=\"line\">#  Event </span><br><span class=\"line\">agent.channels.c1.capacity = 10000</span><br><span class=\"line\">agent.channels.c1.transactionCapacity = 10000</span><br><span class=\"line\">agent.channels.c1.keep-alive = 60</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># flume1</span><br><span class=\"line\">bin/flume-ng agent -n agent -c conf -f conf/tail2avro.conf \\</span><br><span class=\"line\">-Dflume.root.logger=WARN</span><br><span class=\"line\"></span><br><span class=\"line\"># flume2</span><br><span class=\"line\">in/flume-ng agent -n agent -c conf -f conf/avro2file.conf \\</span><br><span class=\"line\">-Dflume.root.logger=INFO</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://flume.apache.org/FlumeUserGuide.html\" target=\"_blank\" rel=\"noopener\">FlumeUserGuide</a>  FlumeUserGuide</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p> RsyncScp <br></p>\n<p> Nginx Flume </p>\n<h1 id=\"Flume-\"><a href=\"#Flume-\" class=\"headerlink\" title=\"Flume \"></a>Flume </h1><p><a href=\"https://flume.apache.org/\" target=\"_blank\" rel=\"noopener\"><strong>F</strong>lume</a> .<br></p>\n<ul>\n<li>EventEvent  Flume flume </li>\n<li>AgentAgent Sources, Channels, Sinks events</li>\n<li>SourceSourceeventseventsChannels</li>\n<li>ChannelChannel Source  Sink eventsSinkeventschanneleventsChannel</li>\n<li>SinkSink  events eventschannel</li>\n</ul>\n<img src=\"/images/2016/04/flume.jpg\">\n<ul>\n<li>Source  Syslog Source, Kafka Source,HTTP Source, Exec Source Avro Source </li>\n<li>Sink  Kafka Sink, Avro Sink, File Roll Sink, HDFS Sink </li>\n<li>Channel  Memory Channel,File Channel </li>\n</ul>\n<p> Source, Sink, Channel,  Flume </p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>, Nginx </p>\n<p> flume </p>\n<ul>\n<li>Flume1  Exec Source -&gt; Memory Channel -&gt; Avro Sink,</li>\n<li>Flume2  Avro Source -&gt; Memory Channel -&gt; FileRoll Sink</li>\n</ul>\n<img src=\"/images/2016/04/flume1toflume2.jpg\">\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n<ul>\n<li> <a href=\"https://flume.apache.org/download.html\" target=\"_blank\" rel=\"noopener\">Flume</a></li>\n<li> JavaSDk, conf/flume-env.sh</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># oracle-java-8</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/usr/lib/jvm/java-8-oracle/jre/</span><br></pre></td></tr></table></figure>\n<ul>\n<li>Flume1, tail2avro.conf  </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">agent.sources = s1</span><br><span class=\"line\">agent.channels = c1</span><br><span class=\"line\">agent.sinks = k1</span><br><span class=\"line\"></span><br><span class=\"line\">agent.sources.s1.type=exec</span><br><span class=\"line\">agent.sources.s1.command=tail -F &lt;Your File Path&gt;</span><br><span class=\"line\">agent.sources.s1.channels=c1</span><br><span class=\"line\"></span><br><span class=\"line\">agent.channels.c1.type=memory</span><br><span class=\"line\">agent.channels.c1.capacity=10000</span><br><span class=\"line\">agent.channels.c1.transactionCapacity=10000</span><br><span class=\"line\"></span><br><span class=\"line\">agent.sinks.k1.type = avro</span><br><span class=\"line\">agent.sinks.k1.hostname = &lt;Your Target Address&gt;</span><br><span class=\"line\">agent.sinks.k1.port = &lt;Your Target Port&gt;</span><br><span class=\"line\">agent.sinks.k1.channel=c1</span><br></pre></td></tr></table></figure>\n<p>Flume2  avro2file.conf </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">agent.sources = s1</span><br><span class=\"line\">agent.channels = c1</span><br><span class=\"line\">agent.sinks = k1</span><br><span class=\"line\"></span><br><span class=\"line\">agent.sources.s1.type = avro</span><br><span class=\"line\">agent.sources.s1.bind = &lt;Your Address&gt;</span><br><span class=\"line\">agent.sources.s1.port = &lt;Your Port&gt;</span><br><span class=\"line\">agent.sources.s1.channels = c1</span><br><span class=\"line\"></span><br><span class=\"line\">agent.sinks.k1.type = file_roll</span><br><span class=\"line\">agent.sinks.k1.sink.directory = /data/log/ngxlog</span><br><span class=\"line\"># </span><br><span class=\"line\">agent.sinks.k1.sink.rollInterval = 86400</span><br><span class=\"line\">agent.sinks.k1.channel = c1</span><br><span class=\"line\"></span><br><span class=\"line\">agent.channels.c1.type = memory</span><br><span class=\"line\">#  Event </span><br><span class=\"line\">agent.channels.c1.capacity = 10000</span><br><span class=\"line\">agent.channels.c1.transactionCapacity = 10000</span><br><span class=\"line\">agent.channels.c1.keep-alive = 60</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># flume1</span><br><span class=\"line\">bin/flume-ng agent -n agent -c conf -f conf/tail2avro.conf \\</span><br><span class=\"line\">-Dflume.root.logger=WARN</span><br><span class=\"line\"></span><br><span class=\"line\"># flume2</span><br><span class=\"line\">in/flume-ng agent -n agent -c conf -f conf/avro2file.conf \\</span><br><span class=\"line\">-Dflume.root.logger=INFO</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://flume.apache.org/FlumeUserGuide.html\" target=\"_blank\" rel=\"noopener\">FlumeUserGuide</a>  FlumeUserGuide</li>\n</ul>\n"},{"layout":"post","title":"Ansible Dynamic Inventory","date":"2016-04-24T12:53:00.000Z","comments":1,"description":"ansible","_content":"\nAnsible  /etc/ansible/hosts IP  Ansible \n\n```\n[webservers]\n111.222.333.444 ansible_ssh_port=888\n```\n\nIPIP /etc/ansible/hosts  IP  /etc/ansible/hosts Ansible \n Ansible Dynamic Inventory IP\n\n### Dynamic Inventory \n\n* , json ;\n* Ansible  json ;\n\n```\nansible -i yourprogram.py -m raw  -a 'cd /home'\n```\n\nAnsible Dynamic Inventory  json \n\n```\n{\"devtest-asg\": {\"hosts\": [\"172.31.21.164\"], \"vars\": {\"ansible_ssh_port\": 12306}}}\n```\n\n  /etc/ansible/hosts :\n\n```\n[devtest-asg]\n172.31.21.164 ansible_ssh_port=12306\n```\n\n### \n\n Inventory    AWS  AutoScaling Group ASGASG IP Ansible Dynamic Inventory\n\n AWS  boto  ASG .(get_host.py) json \n\n```python\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\nimport json\nimport boto\nimport boto.ec2\nimport boto.ec2.autoscale\n\nAWS_REGION = 'BBB'\nAWS_ACCESS_KEY = 'xxxx'\nAWS_SECRET_KEY = 'yyy'\n\nresult = {}\ndef getData():\n    conn_as = boto.ec2.autoscale.connect_to_region(\n            'cn-north-1',\n            aws_access_key_id=AWS_ACCESS_KEY,\n            aws_secret_access_key=AWS_SECRET_KEY)\n    group = conn_as.get_all_groups(names=['devtest-asg'])[0]\n    conn_ec2 = boto.ec2.connect_to_region(\n            AWS_REGION,\n            aws_access_key_id=AWS_ACCESS_KEY,\n            aws_secret_access_key=AWS_SECRET_KEY)\n\n    instance_ids = [i.instance_id for i in group.instances]\n    reservations = conn_ec2.get_all_instances(instance_ids)\n    instances = [i for r in reservations for i in r.instances]\n\n    result['devtest-asg'] = {}\n    result['devtest-asg']['hosts'] = []\n    for r in reservations:\n        for i in r.instances:\n            result['devtest-asg']['hosts'].append('%s' % i.private_ip_address)\n            result['devtest-asg']['vars'] = {'ansible_ssh_port': 36000}\n\ndef getlists():\n    getData()\n    print json.dumps(result)\n\ngetlists()\n```\n\n Ansible  devtest-asg  ASG \n\n```\nansible -i get_host.py  devtest-asg -m raw -a 'ls /'\n```\n","source":"_posts/2016-04-24-ansible-dynamic-inventory.markdown","raw":"---\nlayout: post\ntitle: \"Ansible Dynamic Inventory\"\ndate: 2016-04-24 20:53\ncomments: true\ncategories: System\ndescription: ansible\n---\n\nAnsible  /etc/ansible/hosts IP  Ansible \n\n```\n[webservers]\n111.222.333.444 ansible_ssh_port=888\n```\n\nIPIP /etc/ansible/hosts  IP  /etc/ansible/hosts Ansible \n Ansible Dynamic Inventory IP\n\n### Dynamic Inventory \n\n* , json ;\n* Ansible  json ;\n\n```\nansible -i yourprogram.py -m raw  -a 'cd /home'\n```\n\nAnsible Dynamic Inventory  json \n\n```\n{\"devtest-asg\": {\"hosts\": [\"172.31.21.164\"], \"vars\": {\"ansible_ssh_port\": 12306}}}\n```\n\n  /etc/ansible/hosts :\n\n```\n[devtest-asg]\n172.31.21.164 ansible_ssh_port=12306\n```\n\n### \n\n Inventory    AWS  AutoScaling Group ASGASG IP Ansible Dynamic Inventory\n\n AWS  boto  ASG .(get_host.py) json \n\n```python\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\nimport json\nimport boto\nimport boto.ec2\nimport boto.ec2.autoscale\n\nAWS_REGION = 'BBB'\nAWS_ACCESS_KEY = 'xxxx'\nAWS_SECRET_KEY = 'yyy'\n\nresult = {}\ndef getData():\n    conn_as = boto.ec2.autoscale.connect_to_region(\n            'cn-north-1',\n            aws_access_key_id=AWS_ACCESS_KEY,\n            aws_secret_access_key=AWS_SECRET_KEY)\n    group = conn_as.get_all_groups(names=['devtest-asg'])[0]\n    conn_ec2 = boto.ec2.connect_to_region(\n            AWS_REGION,\n            aws_access_key_id=AWS_ACCESS_KEY,\n            aws_secret_access_key=AWS_SECRET_KEY)\n\n    instance_ids = [i.instance_id for i in group.instances]\n    reservations = conn_ec2.get_all_instances(instance_ids)\n    instances = [i for r in reservations for i in r.instances]\n\n    result['devtest-asg'] = {}\n    result['devtest-asg']['hosts'] = []\n    for r in reservations:\n        for i in r.instances:\n            result['devtest-asg']['hosts'].append('%s' % i.private_ip_address)\n            result['devtest-asg']['vars'] = {'ansible_ssh_port': 36000}\n\ndef getlists():\n    getData()\n    print json.dumps(result)\n\ngetlists()\n```\n\n Ansible  devtest-asg  ASG \n\n```\nansible -i get_host.py  devtest-asg -m raw -a 'ls /'\n```\n","slug":"2016-04-24-ansible-dynamic-inventory","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuic6004im1tj5dd38bwk","content":"<p>Ansible  /etc/ansible/hosts IP  Ansible </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[webservers]</span><br><span class=\"line\">111.222.333.444 ansible_ssh_port=888</span><br></pre></td></tr></table></figure>\n<p>IPIP /etc/ansible/hosts  IP  /etc/ansible/hosts Ansible <br> Ansible Dynamic Inventory IP</p>\n<h3 id=\"Dynamic-Inventory-\"><a href=\"#Dynamic-Inventory-\" class=\"headerlink\" title=\"Dynamic Inventory \"></a>Dynamic Inventory </h3><ul>\n<li>, json ;</li>\n<li>Ansible  json ;</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ansible -i yourprogram.py -m raw  -a &apos;cd /home&apos;</span><br></pre></td></tr></table></figure>\n<p>Ansible Dynamic Inventory  json </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&quot;devtest-asg&quot;: &#123;&quot;hosts&quot;: [&quot;172.31.21.164&quot;], &quot;vars&quot;: &#123;&quot;ansible_ssh_port&quot;: 12306&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>\n<p>  /etc/ansible/hosts :</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[devtest-asg]</span><br><span class=\"line\">172.31.21.164 ansible_ssh_port=12306</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Inventory    AWS  AutoScaling Group ASGASG IP Ansible Dynamic Inventory</p>\n<p> AWS  boto  ASG .(get_host.py) json </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"><span class=\"keyword\">import</span> boto</span><br><span class=\"line\"><span class=\"keyword\">import</span> boto.ec2</span><br><span class=\"line\"><span class=\"keyword\">import</span> boto.ec2.autoscale</span><br><span class=\"line\"></span><br><span class=\"line\">AWS_REGION = <span class=\"string\">'BBB'</span></span><br><span class=\"line\">AWS_ACCESS_KEY = <span class=\"string\">'xxxx'</span></span><br><span class=\"line\">AWS_SECRET_KEY = <span class=\"string\">'yyy'</span></span><br><span class=\"line\"></span><br><span class=\"line\">result = &#123;&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getData</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    conn_as = boto.ec2.autoscale.connect_to_region(</span><br><span class=\"line\">            <span class=\"string\">'cn-north-1'</span>,</span><br><span class=\"line\">            aws_access_key_id=AWS_ACCESS_KEY,</span><br><span class=\"line\">            aws_secret_access_key=AWS_SECRET_KEY)</span><br><span class=\"line\">    group = conn_as.get_all_groups(names=[<span class=\"string\">'devtest-asg'</span>])[<span class=\"number\">0</span>]</span><br><span class=\"line\">    conn_ec2 = boto.ec2.connect_to_region(</span><br><span class=\"line\">            AWS_REGION,</span><br><span class=\"line\">            aws_access_key_id=AWS_ACCESS_KEY,</span><br><span class=\"line\">            aws_secret_access_key=AWS_SECRET_KEY)</span><br><span class=\"line\"></span><br><span class=\"line\">    instance_ids = [i.instance_id <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> group.instances]</span><br><span class=\"line\">    reservations = conn_ec2.get_all_instances(instance_ids)</span><br><span class=\"line\">    instances = [i <span class=\"keyword\">for</span> r <span class=\"keyword\">in</span> reservations <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> r.instances]</span><br><span class=\"line\"></span><br><span class=\"line\">    result[<span class=\"string\">'devtest-asg'</span>] = &#123;&#125;</span><br><span class=\"line\">    result[<span class=\"string\">'devtest-asg'</span>][<span class=\"string\">'hosts'</span>] = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> r <span class=\"keyword\">in</span> reservations:</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> r.instances:</span><br><span class=\"line\">            result[<span class=\"string\">'devtest-asg'</span>][<span class=\"string\">'hosts'</span>].append(<span class=\"string\">'%s'</span> % i.private_ip_address)</span><br><span class=\"line\">            result[<span class=\"string\">'devtest-asg'</span>][<span class=\"string\">'vars'</span>] = &#123;<span class=\"string\">'ansible_ssh_port'</span>: <span class=\"number\">36000</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getlists</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    getData()</span><br><span class=\"line\">    <span class=\"keyword\">print</span> json.dumps(result)</span><br><span class=\"line\"></span><br><span class=\"line\">getlists()</span><br></pre></td></tr></table></figure>\n<p> Ansible  devtest-asg  ASG </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ansible -i get_host.py  devtest-asg -m raw -a &apos;ls /&apos;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>Ansible  /etc/ansible/hosts IP  Ansible </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[webservers]</span><br><span class=\"line\">111.222.333.444 ansible_ssh_port=888</span><br></pre></td></tr></table></figure>\n<p>IPIP /etc/ansible/hosts  IP  /etc/ansible/hosts Ansible <br> Ansible Dynamic Inventory IP</p>\n<h3 id=\"Dynamic-Inventory-\"><a href=\"#Dynamic-Inventory-\" class=\"headerlink\" title=\"Dynamic Inventory \"></a>Dynamic Inventory </h3><ul>\n<li>, json ;</li>\n<li>Ansible  json ;</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ansible -i yourprogram.py -m raw  -a &apos;cd /home&apos;</span><br></pre></td></tr></table></figure>\n<p>Ansible Dynamic Inventory  json </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&quot;devtest-asg&quot;: &#123;&quot;hosts&quot;: [&quot;172.31.21.164&quot;], &quot;vars&quot;: &#123;&quot;ansible_ssh_port&quot;: 12306&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>\n<p>  /etc/ansible/hosts :</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[devtest-asg]</span><br><span class=\"line\">172.31.21.164 ansible_ssh_port=12306</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Inventory    AWS  AutoScaling Group ASGASG IP Ansible Dynamic Inventory</p>\n<p> AWS  boto  ASG .(get_host.py) json </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"><span class=\"keyword\">import</span> boto</span><br><span class=\"line\"><span class=\"keyword\">import</span> boto.ec2</span><br><span class=\"line\"><span class=\"keyword\">import</span> boto.ec2.autoscale</span><br><span class=\"line\"></span><br><span class=\"line\">AWS_REGION = <span class=\"string\">'BBB'</span></span><br><span class=\"line\">AWS_ACCESS_KEY = <span class=\"string\">'xxxx'</span></span><br><span class=\"line\">AWS_SECRET_KEY = <span class=\"string\">'yyy'</span></span><br><span class=\"line\"></span><br><span class=\"line\">result = &#123;&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getData</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    conn_as = boto.ec2.autoscale.connect_to_region(</span><br><span class=\"line\">            <span class=\"string\">'cn-north-1'</span>,</span><br><span class=\"line\">            aws_access_key_id=AWS_ACCESS_KEY,</span><br><span class=\"line\">            aws_secret_access_key=AWS_SECRET_KEY)</span><br><span class=\"line\">    group = conn_as.get_all_groups(names=[<span class=\"string\">'devtest-asg'</span>])[<span class=\"number\">0</span>]</span><br><span class=\"line\">    conn_ec2 = boto.ec2.connect_to_region(</span><br><span class=\"line\">            AWS_REGION,</span><br><span class=\"line\">            aws_access_key_id=AWS_ACCESS_KEY,</span><br><span class=\"line\">            aws_secret_access_key=AWS_SECRET_KEY)</span><br><span class=\"line\"></span><br><span class=\"line\">    instance_ids = [i.instance_id <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> group.instances]</span><br><span class=\"line\">    reservations = conn_ec2.get_all_instances(instance_ids)</span><br><span class=\"line\">    instances = [i <span class=\"keyword\">for</span> r <span class=\"keyword\">in</span> reservations <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> r.instances]</span><br><span class=\"line\"></span><br><span class=\"line\">    result[<span class=\"string\">'devtest-asg'</span>] = &#123;&#125;</span><br><span class=\"line\">    result[<span class=\"string\">'devtest-asg'</span>][<span class=\"string\">'hosts'</span>] = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> r <span class=\"keyword\">in</span> reservations:</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> r.instances:</span><br><span class=\"line\">            result[<span class=\"string\">'devtest-asg'</span>][<span class=\"string\">'hosts'</span>].append(<span class=\"string\">'%s'</span> % i.private_ip_address)</span><br><span class=\"line\">            result[<span class=\"string\">'devtest-asg'</span>][<span class=\"string\">'vars'</span>] = &#123;<span class=\"string\">'ansible_ssh_port'</span>: <span class=\"number\">36000</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getlists</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    getData()</span><br><span class=\"line\">    <span class=\"keyword\">print</span> json.dumps(result)</span><br><span class=\"line\"></span><br><span class=\"line\">getlists()</span><br></pre></td></tr></table></figure>\n<p> Ansible  devtest-asg  ASG </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ansible -i get_host.py  devtest-asg -m raw -a &apos;ls /&apos;</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"Redis ","date":"2016-03-10T15:32:00.000Z","comments":1,"description":"Redsi AOF RDB","_content":"\n[](https://movie.douban.com/subject/1291843/)\n\nRedis  SnapShot  AOF \n\n* [ Snapshot](#)\n* [ AOF ](#)\n* [](#)\n\n\n<h3 id=\"\"> Snapshot</h3>\n\nSnapshot  rdb  copy-on-write 2 dump.rdb `redis-check-dump` \n\n RDB  snapshot server  rdb  \n\n save  bgsave  redis :\n\n* save ;\n* bgsave  fork ;\n\nRDB \n\n```\nsave \"\"\n```\n\n\n#### \n\n```\n# snapshotsave <seconds> <changes> 6002\nsave 600 2\n# snapshot  \nstop-writes-on-bgsave-error yes \n# rdb yes cpu  \nrdbcompression yes  \n# rdb  \ndbfilename dump.rdb  \n```\n\n\n<h3 id=\"\"> AOF</h3>\n\nAppend-only file ` + `  append   server   AOF  redis-check-aof \n\nAOF (set/del)AOFserverAOF  AOF ReWrite\n\n####  AOF Rewrite\n\n AOF Redis  Snapshot  `copy-on-write` aof  AOF Rewrite  Rewrite  AOF  \n\n\n#### \n\n```\n##yesaof/  \nappendonly no  \n  \n##aof  \nappendfilename appendonly.aof  \n  \n##aofalways everysec noeverysec  \nappendfsync everysec  \n\n##aof-rewriteappendfsync no yes no  \nno-appendfsync-on-rewrite no  \n  \n##aofrewrite aofrewrite64mb512mb  \nauto-aof-rewrite-min-size 64mb  \n  \n##rewriterewriteaof\nauto-aof-rewrite-percentage 100  \n```\n\n#### appendfsync \n\n* always aof IO \n* everysecredisaof\n* noredisbufferOS\n\n\n<h3 id=\"\"></h3>\n\n* AOFIOAOF \n* Snapshot master-slave \n\n#### \n\n*  master AOFslave  Snapshotmaster slave .\n*   master slave AOF master slave\n","source":"_posts/2016-03-10-gai-xuan-ze-na-chong-redischi-jiu-hua-pei-zhi.markdown","raw":"---\nlayout: post\ntitle: \"Redis \"\ndate: 2016-03-10 23:32\ncomments: true\ncategories: System\ndescription: Redsi AOF RDB\n---\n\n[](https://movie.douban.com/subject/1291843/)\n\nRedis  SnapShot  AOF \n\n* [ Snapshot](#)\n* [ AOF ](#)\n* [](#)\n\n\n<h3 id=\"\"> Snapshot</h3>\n\nSnapshot  rdb  copy-on-write 2 dump.rdb `redis-check-dump` \n\n RDB  snapshot server  rdb  \n\n save  bgsave  redis :\n\n* save ;\n* bgsave  fork ;\n\nRDB \n\n```\nsave \"\"\n```\n\n\n#### \n\n```\n# snapshotsave <seconds> <changes> 6002\nsave 600 2\n# snapshot  \nstop-writes-on-bgsave-error yes \n# rdb yes cpu  \nrdbcompression yes  \n# rdb  \ndbfilename dump.rdb  \n```\n\n\n<h3 id=\"\"> AOF</h3>\n\nAppend-only file ` + `  append   server   AOF  redis-check-aof \n\nAOF (set/del)AOFserverAOF  AOF ReWrite\n\n####  AOF Rewrite\n\n AOF Redis  Snapshot  `copy-on-write` aof  AOF Rewrite  Rewrite  AOF  \n\n\n#### \n\n```\n##yesaof/  \nappendonly no  \n  \n##aof  \nappendfilename appendonly.aof  \n  \n##aofalways everysec noeverysec  \nappendfsync everysec  \n\n##aof-rewriteappendfsync no yes no  \nno-appendfsync-on-rewrite no  \n  \n##aofrewrite aofrewrite64mb512mb  \nauto-aof-rewrite-min-size 64mb  \n  \n##rewriterewriteaof\nauto-aof-rewrite-percentage 100  \n```\n\n#### appendfsync \n\n* always aof IO \n* everysecredisaof\n* noredisbufferOS\n\n\n<h3 id=\"\"></h3>\n\n* AOFIOAOF \n* Snapshot master-slave \n\n#### \n\n*  master AOFslave  Snapshotmaster slave .\n*   master slave AOF master slave\n","slug":"2016-03-10-gai-xuan-ze-na-chong-redischi-jiu-hua-pei-zhi","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuic8004km1tjs33unflv","content":"<p><a href=\"https://movie.douban.com/subject/1291843/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>Redis  SnapShot  AOF </p>\n<ul>\n<li><a href=\"#\"> Snapshot</a></li>\n<li><a href=\"#\"> AOF </a></li>\n<li><a href=\"#\"></a></li>\n</ul>\n<h3 id=\"\"> Snapshot</h3>\n\n<p>Snapshot  rdb  copy-on-write 2 dump.rdb <code>redis-check-dump</code> </p>\n<p> RDB  snapshot server  rdb  </p>\n<p> save  bgsave  redis :</p>\n<ul>\n<li>save ;</li>\n<li>bgsave  fork ;</li>\n</ul>\n<p>RDB </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">save &quot;&quot;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># snapshotsave &lt;seconds&gt; &lt;changes&gt; 6002</span><br><span class=\"line\">save 600 2</span><br><span class=\"line\"># snapshot  </span><br><span class=\"line\">stop-writes-on-bgsave-error yes </span><br><span class=\"line\"># rdb yes cpu  </span><br><span class=\"line\">rdbcompression yes  </span><br><span class=\"line\"># rdb  </span><br><span class=\"line\">dbfilename dump.rdb</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"> AOF</h3>\n\n<p>Append-only file <code> + </code>  append   server   AOF  redis-check-aof </p>\n<p>AOF (set/del)AOFserverAOF  AOF ReWrite</p>\n<h4 id=\"-AOF-Rewrite\"><a href=\"#-AOF-Rewrite\" class=\"headerlink\" title=\" AOF Rewrite\"></a> AOF Rewrite</h4><p> AOF Redis  Snapshot  <code>copy-on-write</code> aof  AOF Rewrite  Rewrite  AOF  </p>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">##yesaof/  </span><br><span class=\"line\">appendonly no  </span><br><span class=\"line\">  </span><br><span class=\"line\">##aof  </span><br><span class=\"line\">appendfilename appendonly.aof  </span><br><span class=\"line\">  </span><br><span class=\"line\">##aofalways everysec noeverysec  </span><br><span class=\"line\">appendfsync everysec  </span><br><span class=\"line\"></span><br><span class=\"line\">##aof-rewriteappendfsync no yes no  </span><br><span class=\"line\">no-appendfsync-on-rewrite no  </span><br><span class=\"line\">  </span><br><span class=\"line\">##aofrewrite aofrewrite64mb512mb  </span><br><span class=\"line\">auto-aof-rewrite-min-size 64mb  </span><br><span class=\"line\">  </span><br><span class=\"line\">##rewriterewriteaof</span><br><span class=\"line\">auto-aof-rewrite-percentage 100</span><br></pre></td></tr></table></figure>\n<h4 id=\"appendfsync-\"><a href=\"#appendfsync-\" class=\"headerlink\" title=\"appendfsync \"></a>appendfsync </h4><ul>\n<li>always aof IO </li>\n<li>everysecredisaof</li>\n<li>noredisbufferOS</li>\n</ul>\n<h3 id=\"\"></h3>\n\n<ul>\n<li>AOFIOAOF </li>\n<li>Snapshot master-slave </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li> master AOFslave  Snapshotmaster slave .</li>\n<li>  master slave AOF master slave</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://movie.douban.com/subject/1291843/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>Redis  SnapShot  AOF </p>\n<ul>\n<li><a href=\"#\"> Snapshot</a></li>\n<li><a href=\"#\"> AOF </a></li>\n<li><a href=\"#\"></a></li>\n</ul>\n<h3 id=\"\"> Snapshot</h3>\n\n<p>Snapshot  rdb  copy-on-write 2 dump.rdb <code>redis-check-dump</code> </p>\n<p> RDB  snapshot server  rdb  </p>\n<p> save  bgsave  redis :</p>\n<ul>\n<li>save ;</li>\n<li>bgsave  fork ;</li>\n</ul>\n<p>RDB </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">save &quot;&quot;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># snapshotsave &lt;seconds&gt; &lt;changes&gt; 6002</span><br><span class=\"line\">save 600 2</span><br><span class=\"line\"># snapshot  </span><br><span class=\"line\">stop-writes-on-bgsave-error yes </span><br><span class=\"line\"># rdb yes cpu  </span><br><span class=\"line\">rdbcompression yes  </span><br><span class=\"line\"># rdb  </span><br><span class=\"line\">dbfilename dump.rdb</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"> AOF</h3>\n\n<p>Append-only file <code> + </code>  append   server   AOF  redis-check-aof </p>\n<p>AOF (set/del)AOFserverAOF  AOF ReWrite</p>\n<h4 id=\"-AOF-Rewrite\"><a href=\"#-AOF-Rewrite\" class=\"headerlink\" title=\" AOF Rewrite\"></a> AOF Rewrite</h4><p> AOF Redis  Snapshot  <code>copy-on-write</code> aof  AOF Rewrite  Rewrite  AOF  </p>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">##yesaof/  </span><br><span class=\"line\">appendonly no  </span><br><span class=\"line\">  </span><br><span class=\"line\">##aof  </span><br><span class=\"line\">appendfilename appendonly.aof  </span><br><span class=\"line\">  </span><br><span class=\"line\">##aofalways everysec noeverysec  </span><br><span class=\"line\">appendfsync everysec  </span><br><span class=\"line\"></span><br><span class=\"line\">##aof-rewriteappendfsync no yes no  </span><br><span class=\"line\">no-appendfsync-on-rewrite no  </span><br><span class=\"line\">  </span><br><span class=\"line\">##aofrewrite aofrewrite64mb512mb  </span><br><span class=\"line\">auto-aof-rewrite-min-size 64mb  </span><br><span class=\"line\">  </span><br><span class=\"line\">##rewriterewriteaof</span><br><span class=\"line\">auto-aof-rewrite-percentage 100</span><br></pre></td></tr></table></figure>\n<h4 id=\"appendfsync-\"><a href=\"#appendfsync-\" class=\"headerlink\" title=\"appendfsync \"></a>appendfsync </h4><ul>\n<li>always aof IO </li>\n<li>everysecredisaof</li>\n<li>noredisbufferOS</li>\n</ul>\n<h3 id=\"\"></h3>\n\n<ul>\n<li>AOFIOAOF </li>\n<li>Snapshot master-slave </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li> master AOFslave  Snapshotmaster slave .</li>\n<li>  master slave AOF master slave</li>\n</ul>\n"},{"layout":"post","title":" MySQL ","date":"2016-06-03T15:35:00.000Z","comments":1,"description":"mysql pt-heartbeat","_content":"\nMySQL  `Slave_IO_Running`,`Slave_SQL_Runing`  Yes  `Second_Behind_Master` 0\n\n```sql\nmysql> show slave status\\G;\n*************************** 1. row ***************************\nSlave_IO_State: Waiting for master to send event\n....\nSlave_IO_Running: Yes\nSlave_SQL_Running: Yes\nSeconds_Behind_Master: 0\n...\n```\n\n\n\n\nMySQL\n\n* IO thread  binlog relay log\n* SQL thead  relay log \n\n`Second_Behind_Master`(SBM)  SQL thread IO thread relay logrelay logeventSQL threadSBM \n\n SBM 0,SBM  SBM \n\n\n### pt-heartbeat \n\npt-heartbeat  percona-toolkit \n\n* \n\n```\n// heartbeat \npt-heartbeat --user=root --ask-pass \\\n            --host=localhost -D <YourDatabase> \\\n            --create-table --update \n\n//60s,\npt-heartbeat --user=root --ask-pass \\\n           --host=localhost -D <YourDatabase>\\\n           --interval=60 --update --replace --daemonize\n```\n heartbeat 60binlog \n\n```\n+----------------------------+-----------+------------------+-----------+-----------------------+---------------------+\n| ts                         | server_id | file             | position  | relay_master_log_file | exec_master_log_pos |\n+----------------------------+-----------+------------------+-----------+-----------------------+---------------------+\n| 2016-06-03T22:26:29.000720 |         6 | mysql-bin.004| 716| mysql-bin.002|           291330290 |\n+----------------------------+-----------+------------------+-----------+-----------------------+---------------------+\n```\n\n* ,\n\n```\npt-heartbeat --user=root --ask-pass \\\n     --host=localhost -D <YourDatabase> --interval=60 \\\n     --file=/tmp/output.txt --monitor --daemonize\n```\n\n\n\n```\n29.00s [ 30.20s,  6.04s,  2.01s ]\n```\n\n29s 30.20s 16.0452.0115\n","source":"_posts/2016-06-03-zhun-que-jian-ce-mysql-fu-zhi-yan-chi.markdown","raw":"---\nlayout: post\ntitle: \" MySQL \"\ndate: 2016-06-03 23:35\ncomments: true\ncategories: DataBase\ndescription: mysql pt-heartbeat\n---\n\nMySQL  `Slave_IO_Running`,`Slave_SQL_Runing`  Yes  `Second_Behind_Master` 0\n\n```sql\nmysql> show slave status\\G;\n*************************** 1. row ***************************\nSlave_IO_State: Waiting for master to send event\n....\nSlave_IO_Running: Yes\nSlave_SQL_Running: Yes\nSeconds_Behind_Master: 0\n...\n```\n\n\n\n\nMySQL\n\n* IO thread  binlog relay log\n* SQL thead  relay log \n\n`Second_Behind_Master`(SBM)  SQL thread IO thread relay logrelay logeventSQL threadSBM \n\n SBM 0,SBM  SBM \n\n\n### pt-heartbeat \n\npt-heartbeat  percona-toolkit \n\n* \n\n```\n// heartbeat \npt-heartbeat --user=root --ask-pass \\\n            --host=localhost -D <YourDatabase> \\\n            --create-table --update \n\n//60s,\npt-heartbeat --user=root --ask-pass \\\n           --host=localhost -D <YourDatabase>\\\n           --interval=60 --update --replace --daemonize\n```\n heartbeat 60binlog \n\n```\n+----------------------------+-----------+------------------+-----------+-----------------------+---------------------+\n| ts                         | server_id | file             | position  | relay_master_log_file | exec_master_log_pos |\n+----------------------------+-----------+------------------+-----------+-----------------------+---------------------+\n| 2016-06-03T22:26:29.000720 |         6 | mysql-bin.004| 716| mysql-bin.002|           291330290 |\n+----------------------------+-----------+------------------+-----------+-----------------------+---------------------+\n```\n\n* ,\n\n```\npt-heartbeat --user=root --ask-pass \\\n     --host=localhost -D <YourDatabase> --interval=60 \\\n     --file=/tmp/output.txt --monitor --daemonize\n```\n\n\n\n```\n29.00s [ 30.20s,  6.04s,  2.01s ]\n```\n\n29s 30.20s 16.0452.0115\n","slug":"2016-06-03-zhun-que-jian-ce-mysql-fu-zhi-yan-chi","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuic9004mm1tjool8mm5i","content":"<p>MySQL  <code>Slave_IO_Running</code>,<code>Slave_SQL_Runing</code>  Yes  <code>Second_Behind_Master</code> 0</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show slave status\\G;</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">Slave_IO_State: Waiting for master to send event</span><br><span class=\"line\">....</span><br><span class=\"line\">Slave_IO_Running: Yes</span><br><span class=\"line\">Slave_SQL_Running: Yes</span><br><span class=\"line\">Seconds_Behind_Master: 0</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>MySQL</p>\n<ul>\n<li>IO thread  binlog relay log</li>\n<li>SQL thead  relay log </li>\n</ul>\n<p><code>Second_Behind_Master</code>(SBM)  SQL thread IO thread relay logrelay logeventSQL threadSBM </p>\n<p> SBM 0,SBM  SBM </p>\n<h3 id=\"pt-heartbeat-\"><a href=\"#pt-heartbeat-\" class=\"headerlink\" title=\"pt-heartbeat \"></a>pt-heartbeat </h3><p>pt-heartbeat  percona-toolkit </p>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// heartbeat </span><br><span class=\"line\">pt-heartbeat --user=root --ask-pass \\</span><br><span class=\"line\">            --host=localhost -D &lt;YourDatabase&gt; \\</span><br><span class=\"line\">            --create-table --update </span><br><span class=\"line\"></span><br><span class=\"line\">//60s,</span><br><span class=\"line\">pt-heartbeat --user=root --ask-pass \\</span><br><span class=\"line\">           --host=localhost -D &lt;YourDatabase&gt;\\</span><br><span class=\"line\">           --interval=60 --update --replace --daemonize</span><br></pre></td></tr></table></figure>\n<p> heartbeat 60binlog </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+----------------------------+-----------+------------------+-----------+-----------------------+---------------------+</span><br><span class=\"line\">| ts                         | server_id | file             | position  | relay_master_log_file | exec_master_log_pos |</span><br><span class=\"line\">+----------------------------+-----------+------------------+-----------+-----------------------+---------------------+</span><br><span class=\"line\">| 2016-06-03T22:26:29.000720 |         6 | mysql-bin.004| 716| mysql-bin.002|           291330290 |</span><br><span class=\"line\">+----------------------------+-----------+------------------+-----------+-----------------------+---------------------+</span><br></pre></td></tr></table></figure>\n<ul>\n<li>,</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pt-heartbeat --user=root --ask-pass \\</span><br><span class=\"line\">     --host=localhost -D &lt;YourDatabase&gt; --interval=60 \\</span><br><span class=\"line\">     --file=/tmp/output.txt --monitor --daemonize</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">29.00s [ 30.20s,  6.04s,  2.01s ]</span><br></pre></td></tr></table></figure>\n<p>29s 30.20s 16.0452.0115</p>\n","site":{"data":{}},"excerpt":"","more":"<p>MySQL  <code>Slave_IO_Running</code>,<code>Slave_SQL_Runing</code>  Yes  <code>Second_Behind_Master</code> 0</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show slave status\\G;</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">Slave_IO_State: Waiting for master to send event</span><br><span class=\"line\">....</span><br><span class=\"line\">Slave_IO_Running: Yes</span><br><span class=\"line\">Slave_SQL_Running: Yes</span><br><span class=\"line\">Seconds_Behind_Master: 0</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>MySQL</p>\n<ul>\n<li>IO thread  binlog relay log</li>\n<li>SQL thead  relay log </li>\n</ul>\n<p><code>Second_Behind_Master</code>(SBM)  SQL thread IO thread relay logrelay logeventSQL threadSBM </p>\n<p> SBM 0,SBM  SBM </p>\n<h3 id=\"pt-heartbeat-\"><a href=\"#pt-heartbeat-\" class=\"headerlink\" title=\"pt-heartbeat \"></a>pt-heartbeat </h3><p>pt-heartbeat  percona-toolkit </p>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// heartbeat </span><br><span class=\"line\">pt-heartbeat --user=root --ask-pass \\</span><br><span class=\"line\">            --host=localhost -D &lt;YourDatabase&gt; \\</span><br><span class=\"line\">            --create-table --update </span><br><span class=\"line\"></span><br><span class=\"line\">//60s,</span><br><span class=\"line\">pt-heartbeat --user=root --ask-pass \\</span><br><span class=\"line\">           --host=localhost -D &lt;YourDatabase&gt;\\</span><br><span class=\"line\">           --interval=60 --update --replace --daemonize</span><br></pre></td></tr></table></figure>\n<p> heartbeat 60binlog </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+----------------------------+-----------+------------------+-----------+-----------------------+---------------------+</span><br><span class=\"line\">| ts                         | server_id | file             | position  | relay_master_log_file | exec_master_log_pos |</span><br><span class=\"line\">+----------------------------+-----------+------------------+-----------+-----------------------+---------------------+</span><br><span class=\"line\">| 2016-06-03T22:26:29.000720 |         6 | mysql-bin.004| 716| mysql-bin.002|           291330290 |</span><br><span class=\"line\">+----------------------------+-----------+------------------+-----------+-----------------------+---------------------+</span><br></pre></td></tr></table></figure>\n<ul>\n<li>,</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pt-heartbeat --user=root --ask-pass \\</span><br><span class=\"line\">     --host=localhost -D &lt;YourDatabase&gt; --interval=60 \\</span><br><span class=\"line\">     --file=/tmp/output.txt --monitor --daemonize</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">29.00s [ 30.20s,  6.04s,  2.01s ]</span><br></pre></td></tr></table></figure>\n<p>29s 30.20s 16.0452.0115</p>\n"},{"layout":"post","title":"CeleryCrontab","date":"2016-07-23T12:19:00.000Z","comments":1,"description":"celery crontab","_content":"\nCelery \n  \n Celery \n  \n `main.py` \n \n```python\nfrom celery import Celery\nfrom lib import distribute\nfrom celery.schedules import crontab\n\napp = distribute.app\napp.conf.update(\n    CELERYBEAT_SCHEDULE = {\n        'every-minute': {\n            'task': 'test_cron',\n            'schedule': crontab(minute=\"*\"),\n            'args': (16, 13),\n        }\n    },\n    CELERY_INCLUDE=(\"apps.tasks\",)\n)\nif __name__ == '__main__':\n    app.start()\n```\n\n, apps  `tasks.py` \n\n```py\nfrom lib.distribute import app\n@app.task(name=\"test_cron\")\ndef mul(x, y):\n    return x * y\n```\n\n Crontab ,\n  `--beat`  crontab \n\n```\npython main.py worker --beat -l info\n```\n\n, CELERY_QUEUES \n\n```python\napp.conf.update(\n    // \n    CELERY_QUEUES=(\n        Queue(\n          'test', Exchange('test_exchange'),\n           routing_key='test_queue'\n        ),\n    ),\n    CELERYBEAT_SCHEDULE = {\n        'every-minute': {\n            'task': 'test_cron',\n            'schedule': crontab(minute=\"*\"),\n            'args': (16, 13),\n        }\n    },\n    CELERY_INCLUDE=(\"apps.tasks\",)\n)\n```\n\nworker Crontab \n\n> celery beat and celery worker as separate services instead. \n\n Celery  Beat worker \n\n[](https://github.com/zheng-ji/ToyCollection/tree/master/celery_proj)\n","source":"_posts/2016-07-23-celeryde-crontabshi-jian.markdown","raw":"---\nlayout: post\ntitle: \"CeleryCrontab\"\ndate: 2016-07-23 20:19\ncomments: true\ncategories: Program\ndescription: celery crontab\n---\n\nCelery \n  \n Celery \n  \n `main.py` \n \n```python\nfrom celery import Celery\nfrom lib import distribute\nfrom celery.schedules import crontab\n\napp = distribute.app\napp.conf.update(\n    CELERYBEAT_SCHEDULE = {\n        'every-minute': {\n            'task': 'test_cron',\n            'schedule': crontab(minute=\"*\"),\n            'args': (16, 13),\n        }\n    },\n    CELERY_INCLUDE=(\"apps.tasks\",)\n)\nif __name__ == '__main__':\n    app.start()\n```\n\n, apps  `tasks.py` \n\n```py\nfrom lib.distribute import app\n@app.task(name=\"test_cron\")\ndef mul(x, y):\n    return x * y\n```\n\n Crontab ,\n  `--beat`  crontab \n\n```\npython main.py worker --beat -l info\n```\n\n, CELERY_QUEUES \n\n```python\napp.conf.update(\n    // \n    CELERY_QUEUES=(\n        Queue(\n          'test', Exchange('test_exchange'),\n           routing_key='test_queue'\n        ),\n    ),\n    CELERYBEAT_SCHEDULE = {\n        'every-minute': {\n            'task': 'test_cron',\n            'schedule': crontab(minute=\"*\"),\n            'args': (16, 13),\n        }\n    },\n    CELERY_INCLUDE=(\"apps.tasks\",)\n)\n```\n\nworker Crontab \n\n> celery beat and celery worker as separate services instead. \n\n Celery  Beat worker \n\n[](https://github.com/zheng-ji/ToyCollection/tree/master/celery_proj)\n","slug":"2016-07-23-celeryde-crontabshi-jian","published":1,"updated":"2018-07-01T05:57:57.000Z","photos":[],"link":"","_id":"cjv8xuica004om1tjk4otlnm7","content":"<p>Celery </p>\n<p> Celery </p>\n<p> <code>main.py</code> </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> celery <span class=\"keyword\">import</span> Celery</span><br><span class=\"line\"><span class=\"keyword\">from</span> lib <span class=\"keyword\">import</span> distribute</span><br><span class=\"line\"><span class=\"keyword\">from</span> celery.schedules <span class=\"keyword\">import</span> crontab</span><br><span class=\"line\"></span><br><span class=\"line\">app = distribute.app</span><br><span class=\"line\">app.conf.update(</span><br><span class=\"line\">    CELERYBEAT_SCHEDULE = &#123;</span><br><span class=\"line\">        <span class=\"string\">'every-minute'</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">'task'</span>: <span class=\"string\">'test_cron'</span>,</span><br><span class=\"line\">            <span class=\"string\">'schedule'</span>: crontab(minute=<span class=\"string\">\"*\"</span>),</span><br><span class=\"line\">            <span class=\"string\">'args'</span>: (<span class=\"number\">16</span>, <span class=\"number\">13</span>),</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    CELERY_INCLUDE=(<span class=\"string\">\"apps.tasks\"</span>,)</span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    app.start()</span><br></pre></td></tr></table></figure>\n<p>, apps  <code>tasks.py</code> </p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> lib.distribute <span class=\"keyword\">import</span> app</span><br><span class=\"line\"><span class=\"meta\">@app.task(name=\"test_cron\")</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">mul</span><span class=\"params\">(x, y)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> x * y</span><br></pre></td></tr></table></figure>\n<p> Crontab ,<br>  <code>--beat</code>  crontab </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python main.py worker --beat -l info</span><br></pre></td></tr></table></figure>\n<p>, CELERY_QUEUES </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.conf.update(</span><br><span class=\"line\">    // </span><br><span class=\"line\">    CELERY_QUEUES=(</span><br><span class=\"line\">        Queue(</span><br><span class=\"line\">          <span class=\"string\">'test'</span>, Exchange(<span class=\"string\">'test_exchange'</span>),</span><br><span class=\"line\">           routing_key=<span class=\"string\">'test_queue'</span></span><br><span class=\"line\">        ),</span><br><span class=\"line\">    ),</span><br><span class=\"line\">    CELERYBEAT_SCHEDULE = &#123;</span><br><span class=\"line\">        <span class=\"string\">'every-minute'</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">'task'</span>: <span class=\"string\">'test_cron'</span>,</span><br><span class=\"line\">            <span class=\"string\">'schedule'</span>: crontab(minute=<span class=\"string\">\"*\"</span>),</span><br><span class=\"line\">            <span class=\"string\">'args'</span>: (<span class=\"number\">16</span>, <span class=\"number\">13</span>),</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    CELERY_INCLUDE=(<span class=\"string\">\"apps.tasks\"</span>,)</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<p>worker Crontab </p>\n<blockquote>\n<p>celery beat and celery worker as separate services instead. </p>\n</blockquote>\n<p> Celery  Beat worker </p>\n<p><a href=\"https://github.com/zheng-ji/ToyCollection/tree/master/celery_proj\" target=\"_blank\" rel=\"noopener\"></a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Celery </p>\n<p> Celery </p>\n<p> <code>main.py</code> </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> celery <span class=\"keyword\">import</span> Celery</span><br><span class=\"line\"><span class=\"keyword\">from</span> lib <span class=\"keyword\">import</span> distribute</span><br><span class=\"line\"><span class=\"keyword\">from</span> celery.schedules <span class=\"keyword\">import</span> crontab</span><br><span class=\"line\"></span><br><span class=\"line\">app = distribute.app</span><br><span class=\"line\">app.conf.update(</span><br><span class=\"line\">    CELERYBEAT_SCHEDULE = &#123;</span><br><span class=\"line\">        <span class=\"string\">'every-minute'</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">'task'</span>: <span class=\"string\">'test_cron'</span>,</span><br><span class=\"line\">            <span class=\"string\">'schedule'</span>: crontab(minute=<span class=\"string\">\"*\"</span>),</span><br><span class=\"line\">            <span class=\"string\">'args'</span>: (<span class=\"number\">16</span>, <span class=\"number\">13</span>),</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    CELERY_INCLUDE=(<span class=\"string\">\"apps.tasks\"</span>,)</span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    app.start()</span><br></pre></td></tr></table></figure>\n<p>, apps  <code>tasks.py</code> </p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> lib.distribute <span class=\"keyword\">import</span> app</span><br><span class=\"line\"><span class=\"meta\">@app.task(name=\"test_cron\")</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">mul</span><span class=\"params\">(x, y)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> x * y</span><br></pre></td></tr></table></figure>\n<p> Crontab ,<br>  <code>--beat</code>  crontab </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python main.py worker --beat -l info</span><br></pre></td></tr></table></figure>\n<p>, CELERY_QUEUES </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.conf.update(</span><br><span class=\"line\">    // </span><br><span class=\"line\">    CELERY_QUEUES=(</span><br><span class=\"line\">        Queue(</span><br><span class=\"line\">          <span class=\"string\">'test'</span>, Exchange(<span class=\"string\">'test_exchange'</span>),</span><br><span class=\"line\">           routing_key=<span class=\"string\">'test_queue'</span></span><br><span class=\"line\">        ),</span><br><span class=\"line\">    ),</span><br><span class=\"line\">    CELERYBEAT_SCHEDULE = &#123;</span><br><span class=\"line\">        <span class=\"string\">'every-minute'</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">'task'</span>: <span class=\"string\">'test_cron'</span>,</span><br><span class=\"line\">            <span class=\"string\">'schedule'</span>: crontab(minute=<span class=\"string\">\"*\"</span>),</span><br><span class=\"line\">            <span class=\"string\">'args'</span>: (<span class=\"number\">16</span>, <span class=\"number\">13</span>),</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    CELERY_INCLUDE=(<span class=\"string\">\"apps.tasks\"</span>,)</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<p>worker Crontab </p>\n<blockquote>\n<p>celery beat and celery worker as separate services instead. </p>\n</blockquote>\n<p> Celery  Beat worker </p>\n<p><a href=\"https://github.com/zheng-ji/ToyCollection/tree/master/celery_proj\" target=\"_blank\" rel=\"noopener\"></a></p>\n"},{"layout":"post","title":"","date":"2016-07-16T03:35:00.000Z","comments":1,"description":"ssh","_content":"\n* [](#)\n* [SSH ](#)\n\n<h3 id=\"\"></h3>\n\n\n\n1. login shell:  ssh shell \n2. interactive: \n\n* interactive + login shell\n\n shell  /etc/profile\n\n```\n~/.bash_profile\n~/.bash_login\n~/.profile\n```\n\n bourne shell  C shell .bash_login .bash_profile \n\n* noninteractive + login shell\n\nbash -l script.sh `-l` shelllogin shell\n\n* interactive + non-login shell\n\nshellbashshelllogin shell shell \n\n```\n/etc/bash.bashrc\n~/.bashrc \n```\n\n* non-interactive + non-login shell\n\n bash script.sh  ssh user@remote commandshellBASH_ENV\n\n\n\n```\n+----------------+--------+-----------+---------------+\n|                | login  |interactive|non-interactive|\n|                |        |non-login  |non-login      |\n+----------------+--------+-----------+---------------+\n|/etc/profile    |   A    |           |               |\n+----------------+--------+-----------+---------------+\n|/etc/bash.bashrc|        |    A      |               |\n+----------------+--------+-----------+---------------+\n|~/.bashrc       |        |    B      |               |\n+----------------+--------+-----------+---------------+\n|~/.bash_profile |   B1   |           |               |\n+----------------+--------+-----------+---------------+\n|~/.bash_login   |   B2   |           |               |\n+----------------+--------+-----------+---------------+\n|~/.profile      |   B3   |           |               |\n+----------------+--------+-----------+---------------+\n|BASH_ENV        |        |           |       A       |\n+----------------+--------+-----------+---------------+\n```\n----\n\n<h3 id=\"\"></h3>\n\n $VARNAME\n\n `/etc/ssh_config`  \n\n```\nSendEnv VARNAME\n```\n\n `/etc/sshd_config` \n\n``` \nAcceptEnv VARNAME\n```\n\n $VARNAME  ssh .\n\n---\n\n### \n\n[ssh](http://feihu.me/blog/2014/env-problem-when-ssh-executing-command-on-remote/)\n","source":"_posts/2016-07-16-bash-jia-zai-shun-xu.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2016-07-16 11:35\ncomments: true\ncategories: System\ndescription: ssh\n---\n\n* [](#)\n* [SSH ](#)\n\n<h3 id=\"\"></h3>\n\n\n\n1. login shell:  ssh shell \n2. interactive: \n\n* interactive + login shell\n\n shell  /etc/profile\n\n```\n~/.bash_profile\n~/.bash_login\n~/.profile\n```\n\n bourne shell  C shell .bash_login .bash_profile \n\n* noninteractive + login shell\n\nbash -l script.sh `-l` shelllogin shell\n\n* interactive + non-login shell\n\nshellbashshelllogin shell shell \n\n```\n/etc/bash.bashrc\n~/.bashrc \n```\n\n* non-interactive + non-login shell\n\n bash script.sh  ssh user@remote commandshellBASH_ENV\n\n\n\n```\n+----------------+--------+-----------+---------------+\n|                | login  |interactive|non-interactive|\n|                |        |non-login  |non-login      |\n+----------------+--------+-----------+---------------+\n|/etc/profile    |   A    |           |               |\n+----------------+--------+-----------+---------------+\n|/etc/bash.bashrc|        |    A      |               |\n+----------------+--------+-----------+---------------+\n|~/.bashrc       |        |    B      |               |\n+----------------+--------+-----------+---------------+\n|~/.bash_profile |   B1   |           |               |\n+----------------+--------+-----------+---------------+\n|~/.bash_login   |   B2   |           |               |\n+----------------+--------+-----------+---------------+\n|~/.profile      |   B3   |           |               |\n+----------------+--------+-----------+---------------+\n|BASH_ENV        |        |           |       A       |\n+----------------+--------+-----------+---------------+\n```\n----\n\n<h3 id=\"\"></h3>\n\n $VARNAME\n\n `/etc/ssh_config`  \n\n```\nSendEnv VARNAME\n```\n\n `/etc/sshd_config` \n\n``` \nAcceptEnv VARNAME\n```\n\n $VARNAME  ssh .\n\n---\n\n### \n\n[ssh](http://feihu.me/blog/2014/env-problem-when-ssh-executing-command-on-remote/)\n","slug":"2016-07-16-bash-jia-zai-shun-xu","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuicb004qm1tj9dacr3ox","content":"<ul>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\">SSH </a></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<p></p>\n<ol>\n<li>login shell:  ssh shell </li>\n<li>interactive: </li>\n</ol>\n<ul>\n<li>interactive + login shell</li>\n</ul>\n<p> shell  /etc/profile</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~/.bash_profile</span><br><span class=\"line\">~/.bash_login</span><br><span class=\"line\">~/.profile</span><br></pre></td></tr></table></figure>\n<p> bourne shell  C shell .bash_login .bash_profile </p>\n<ul>\n<li>noninteractive + login shell</li>\n</ul>\n<p>bash -l script.sh <code>-l</code> shelllogin shell</p>\n<ul>\n<li>interactive + non-login shell</li>\n</ul>\n<p>shellbashshelllogin shell shell </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/bash.bashrc</span><br><span class=\"line\">~/.bashrc</span><br></pre></td></tr></table></figure>\n<ul>\n<li>non-interactive + non-login shell</li>\n</ul>\n<p> bash script.sh  ssh user@remote commandshellBASH_ENV</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|                | login  |interactive|non-interactive|</span><br><span class=\"line\">|                |        |non-login  |non-login      |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|/etc/profile    |   A    |           |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|/etc/bash.bashrc|        |    A      |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|~/.bashrc       |        |    B      |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|~/.bash_profile |   B1   |           |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|~/.bash_login   |   B2   |           |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|~/.profile      |   B3   |           |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|BASH_ENV        |        |           |       A       |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"\"></h3>\n\n<p> $VARNAME</p>\n<p> <code>/etc/ssh_config</code>  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SendEnv VARNAME</span><br></pre></td></tr></table></figure>\n<p> <code>/etc/sshd_config</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AcceptEnv VARNAME</span><br></pre></td></tr></table></figure>\n<p> $VARNAME  ssh .</p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://feihu.me/blog/2014/env-problem-when-ssh-executing-command-on-remote/\" target=\"_blank\" rel=\"noopener\">ssh</a></p>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\">SSH </a></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<p></p>\n<ol>\n<li>login shell:  ssh shell </li>\n<li>interactive: </li>\n</ol>\n<ul>\n<li>interactive + login shell</li>\n</ul>\n<p> shell  /etc/profile</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~/.bash_profile</span><br><span class=\"line\">~/.bash_login</span><br><span class=\"line\">~/.profile</span><br></pre></td></tr></table></figure>\n<p> bourne shell  C shell .bash_login .bash_profile </p>\n<ul>\n<li>noninteractive + login shell</li>\n</ul>\n<p>bash -l script.sh <code>-l</code> shelllogin shell</p>\n<ul>\n<li>interactive + non-login shell</li>\n</ul>\n<p>shellbashshelllogin shell shell </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/bash.bashrc</span><br><span class=\"line\">~/.bashrc</span><br></pre></td></tr></table></figure>\n<ul>\n<li>non-interactive + non-login shell</li>\n</ul>\n<p> bash script.sh  ssh user@remote commandshellBASH_ENV</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|                | login  |interactive|non-interactive|</span><br><span class=\"line\">|                |        |non-login  |non-login      |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|/etc/profile    |   A    |           |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|/etc/bash.bashrc|        |    A      |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|~/.bashrc       |        |    B      |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|~/.bash_profile |   B1   |           |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|~/.bash_login   |   B2   |           |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|~/.profile      |   B3   |           |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|BASH_ENV        |        |           |       A       |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"\"></h3>\n\n<p> $VARNAME</p>\n<p> <code>/etc/ssh_config</code>  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SendEnv VARNAME</span><br></pre></td></tr></table></figure>\n<p> <code>/etc/sshd_config</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AcceptEnv VARNAME</span><br></pre></td></tr></table></figure>\n<p> $VARNAME  ssh .</p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://feihu.me/blog/2014/env-problem-when-ssh-executing-command-on-remote/\" target=\"_blank\" rel=\"noopener\">ssh</a></p>\n"},{"layout":"post","title":"CuckooFilterBloomFilter","date":"2016-08-01T11:48:00.000Z","comments":1,"description":"BloomFilter CuckooFilter","_content":"\n `Bloom Filter`.  `Cuckoo Filter`  Golang [](https://github.com/zheng-ji/goCuckoo)\n\n![goCuckoo](https://cloud.githubusercontent.com/assets/1414745/17084380/8c3a4896-51ee-11e6-869e-b087226cc5ce.jpg)\n\n`Bloom Filter` \n\n* 1\n* 0 \n\n`Cuckoo Filter` `Bloom Filter`  : \n\n* \n* 4\n\n![model](https://cloud.githubusercontent.com/assets/1414745/17103421/c97635e0-52b0-11e6-83ac-1b1fdbb5d31c.png)\n\n\nFeature\n--------\n\n* \n*  O(1) \n* 95% \n* \n\n\nInstallation\n-------------\n\n```\ngo get github.com/zheng-ji/goCuckoo\n```\n\nExample\n-------\n\n```go\nimport (\n\t\"fmt\"\n\t\"github.com/zheng-ji/goCuckoo\"\n)\n\nfunc main() {\n    // speicify capacity \n\tfilter := cuckoo.NewCuckooFilter(10000)\n\n\tfilter.Insert([]byte(\"zheng-ji\"))\n\tfilter.Insert([]byte(\"stupid\"))\n\tfilter.Insert([]byte(\"coder\"))\n\n\tif filter.Find([]byte(\"stupid\")) {\n\t\tfmt.Println(\"exist\")\n\t} else {\n\t\tfmt.Println(\"Not exist\")\n\t}\n\n\tfilter.Del([]byte(\"stupid\"))\n\tfilter.Println(filter.Size())\n}\n```\n\n\n-------------\n\n- [CMU Paper](http://www.cs.cmu.edu/~binfan/papers/conext14_cuckoofilter.pdf)\n- [CMU PPT](http://www.cs.cmu.edu/~binfan/papers/conext14_cuckoofilter.pptx)\n- [CoolShell Article](http://coolshell.cn/articles/17225.html)\n","source":"_posts/2016-08-01-cuckoofilter.markdown","raw":"---\nlayout: post\ntitle: \"CuckooFilterBloomFilter\"\ndate: 2016-08-01 19:48\ncomments: true\ndescription: BloomFilter CuckooFilter\ncategories: Program\n---\n\n `Bloom Filter`.  `Cuckoo Filter`  Golang [](https://github.com/zheng-ji/goCuckoo)\n\n![goCuckoo](https://cloud.githubusercontent.com/assets/1414745/17084380/8c3a4896-51ee-11e6-869e-b087226cc5ce.jpg)\n\n`Bloom Filter` \n\n* 1\n* 0 \n\n`Cuckoo Filter` `Bloom Filter`  : \n\n* \n* 4\n\n![model](https://cloud.githubusercontent.com/assets/1414745/17103421/c97635e0-52b0-11e6-83ac-1b1fdbb5d31c.png)\n\n\nFeature\n--------\n\n* \n*  O(1) \n* 95% \n* \n\n\nInstallation\n-------------\n\n```\ngo get github.com/zheng-ji/goCuckoo\n```\n\nExample\n-------\n\n```go\nimport (\n\t\"fmt\"\n\t\"github.com/zheng-ji/goCuckoo\"\n)\n\nfunc main() {\n    // speicify capacity \n\tfilter := cuckoo.NewCuckooFilter(10000)\n\n\tfilter.Insert([]byte(\"zheng-ji\"))\n\tfilter.Insert([]byte(\"stupid\"))\n\tfilter.Insert([]byte(\"coder\"))\n\n\tif filter.Find([]byte(\"stupid\")) {\n\t\tfmt.Println(\"exist\")\n\t} else {\n\t\tfmt.Println(\"Not exist\")\n\t}\n\n\tfilter.Del([]byte(\"stupid\"))\n\tfilter.Println(filter.Size())\n}\n```\n\n\n-------------\n\n- [CMU Paper](http://www.cs.cmu.edu/~binfan/papers/conext14_cuckoofilter.pdf)\n- [CMU PPT](http://www.cs.cmu.edu/~binfan/papers/conext14_cuckoofilter.pptx)\n- [CoolShell Article](http://coolshell.cn/articles/17225.html)\n","slug":"2016-08-01-cuckoofilter","published":1,"updated":"2018-07-01T05:58:07.000Z","photos":[],"link":"","_id":"cjv8xuicc004sm1tjftj11yt5","content":"<p> <code>Bloom Filter</code>.  <code>Cuckoo Filter</code>  Golang <a href=\"https://github.com/zheng-ji/goCuckoo\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p><img src=\"https://cloud.githubusercontent.com/assets/1414745/17084380/8c3a4896-51ee-11e6-869e-b087226cc5ce.jpg\" alt=\"goCuckoo\"></p>\n<p><code>Bloom Filter</code> </p>\n<ul>\n<li>1</li>\n<li>0 </li>\n</ul>\n<p><code>Cuckoo Filter</code> <code>Bloom Filter</code>  : </p>\n<ul>\n<li></li>\n<li>4</li>\n</ul>\n<p><img src=\"https://cloud.githubusercontent.com/assets/1414745/17103421/c97635e0-52b0-11e6-83ac-1b1fdbb5d31c.png\" alt=\"model\"></p>\n<h2 id=\"Feature\"><a href=\"#Feature\" class=\"headerlink\" title=\"Feature\"></a>Feature</h2><ul>\n<li></li>\n<li> O(1) </li>\n<li>95% </li>\n<li></li>\n</ul>\n<h2 id=\"Installation\"><a href=\"#Installation\" class=\"headerlink\" title=\"Installation\"></a>Installation</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">go get github.com/zheng-ji/goCuckoo</span><br></pre></td></tr></table></figure>\n<h2 id=\"Example\"><a href=\"#Example\" class=\"headerlink\" title=\"Example\"></a>Example</h2><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">\t<span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"github.com/zheng-ji/goCuckoo\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// speicify capacity </span></span><br><span class=\"line\">\tfilter := cuckoo.NewCuckooFilter(<span class=\"number\">10000</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">\tfilter.Insert([]<span class=\"keyword\">byte</span>(<span class=\"string\">\"zheng-ji\"</span>))</span><br><span class=\"line\">\tfilter.Insert([]<span class=\"keyword\">byte</span>(<span class=\"string\">\"stupid\"</span>))</span><br><span class=\"line\">\tfilter.Insert([]<span class=\"keyword\">byte</span>(<span class=\"string\">\"coder\"</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> filter.Find([]<span class=\"keyword\">byte</span>(<span class=\"string\">\"stupid\"</span>)) &#123;</span><br><span class=\"line\">\t\tfmt.Println(<span class=\"string\">\"exist\"</span>)</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\tfmt.Println(<span class=\"string\">\"Not exist\"</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tfilter.Del([]<span class=\"keyword\">byte</span>(<span class=\"string\">\"stupid\"</span>))</span><br><span class=\"line\">\tfilter.Println(filter.Size())</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"http://www.cs.cmu.edu/~binfan/papers/conext14_cuckoofilter.pdf\" target=\"_blank\" rel=\"noopener\">CMU Paper</a></li>\n<li><a href=\"http://www.cs.cmu.edu/~binfan/papers/conext14_cuckoofilter.pptx\" target=\"_blank\" rel=\"noopener\">CMU PPT</a></li>\n<li><a href=\"http://coolshell.cn/articles/17225.html\" target=\"_blank\" rel=\"noopener\">CoolShell Article</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p> <code>Bloom Filter</code>.  <code>Cuckoo Filter</code>  Golang <a href=\"https://github.com/zheng-ji/goCuckoo\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p><img src=\"https://cloud.githubusercontent.com/assets/1414745/17084380/8c3a4896-51ee-11e6-869e-b087226cc5ce.jpg\" alt=\"goCuckoo\"></p>\n<p><code>Bloom Filter</code> </p>\n<ul>\n<li>1</li>\n<li>0 </li>\n</ul>\n<p><code>Cuckoo Filter</code> <code>Bloom Filter</code>  : </p>\n<ul>\n<li></li>\n<li>4</li>\n</ul>\n<p><img src=\"https://cloud.githubusercontent.com/assets/1414745/17103421/c97635e0-52b0-11e6-83ac-1b1fdbb5d31c.png\" alt=\"model\"></p>\n<h2 id=\"Feature\"><a href=\"#Feature\" class=\"headerlink\" title=\"Feature\"></a>Feature</h2><ul>\n<li></li>\n<li> O(1) </li>\n<li>95% </li>\n<li></li>\n</ul>\n<h2 id=\"Installation\"><a href=\"#Installation\" class=\"headerlink\" title=\"Installation\"></a>Installation</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">go get github.com/zheng-ji/goCuckoo</span><br></pre></td></tr></table></figure>\n<h2 id=\"Example\"><a href=\"#Example\" class=\"headerlink\" title=\"Example\"></a>Example</h2><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">\t<span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"github.com/zheng-ji/goCuckoo\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// speicify capacity </span></span><br><span class=\"line\">\tfilter := cuckoo.NewCuckooFilter(<span class=\"number\">10000</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">\tfilter.Insert([]<span class=\"keyword\">byte</span>(<span class=\"string\">\"zheng-ji\"</span>))</span><br><span class=\"line\">\tfilter.Insert([]<span class=\"keyword\">byte</span>(<span class=\"string\">\"stupid\"</span>))</span><br><span class=\"line\">\tfilter.Insert([]<span class=\"keyword\">byte</span>(<span class=\"string\">\"coder\"</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> filter.Find([]<span class=\"keyword\">byte</span>(<span class=\"string\">\"stupid\"</span>)) &#123;</span><br><span class=\"line\">\t\tfmt.Println(<span class=\"string\">\"exist\"</span>)</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\tfmt.Println(<span class=\"string\">\"Not exist\"</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tfilter.Del([]<span class=\"keyword\">byte</span>(<span class=\"string\">\"stupid\"</span>))</span><br><span class=\"line\">\tfilter.Println(filter.Size())</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"http://www.cs.cmu.edu/~binfan/papers/conext14_cuckoofilter.pdf\" target=\"_blank\" rel=\"noopener\">CMU Paper</a></li>\n<li><a href=\"http://www.cs.cmu.edu/~binfan/papers/conext14_cuckoofilter.pptx\" target=\"_blank\" rel=\"noopener\">CMU PPT</a></li>\n<li><a href=\"http://coolshell.cn/articles/17225.html\" target=\"_blank\" rel=\"noopener\">CoolShell Article</a></li>\n</ul>\n"},{"layout":"post","title":"","date":"2016-09-25T15:37:00.000Z","comments":1,"description":" ","_content":"\n APUE \n\n### \n\n Linux \n\n (shmwrite.c)(shmread.c)\n\n isWritten \n\n\n\n\n### \nLinux  \n P(sv)  V(sv).\n\n* P(sv)sv1\n* V(sv)svsv1.\n\n sv P(sv)  sv 1sv=0,, V(sv) \n\n### mmap  shmget\n\n\n\n,.\n\nmmap  Posix V IPC .\n\nmmap  read()write() mmap ,   memcpy \n\n---\n\n\n\n* : [shmdata.h](https://github.com/zheng-ji/ToyCollection/blob/master/shared_memory/shmdata.h)\n* [shmread.c](https://github.com/zheng-ji/ToyCollection/blob/master/shared_memory/shmread.c)\n* [shmwrite.c](https://github.com/zheng-ji/ToyCollection/blob/master/shared_memory/shmwrite.c)\n","source":"_posts/2016-09-25-gong-xiang-nei-cun-yu-xin-hao-liang.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2016-09-25 23:37\ncomments: true\ndescription:  \ncategories: System\n---\n\n APUE \n\n### \n\n Linux \n\n (shmwrite.c)(shmread.c)\n\n isWritten \n\n\n\n\n### \nLinux  \n P(sv)  V(sv).\n\n* P(sv)sv1\n* V(sv)svsv1.\n\n sv P(sv)  sv 1sv=0,, V(sv) \n\n### mmap  shmget\n\n\n\n,.\n\nmmap  Posix V IPC .\n\nmmap  read()write() mmap ,   memcpy \n\n---\n\n\n\n* : [shmdata.h](https://github.com/zheng-ji/ToyCollection/blob/master/shared_memory/shmdata.h)\n* [shmread.c](https://github.com/zheng-ji/ToyCollection/blob/master/shared_memory/shmread.c)\n* [shmwrite.c](https://github.com/zheng-ji/ToyCollection/blob/master/shared_memory/shmwrite.c)\n","slug":"2016-09-25-gong-xiang-nei-cun-yu-xin-hao-liang","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuicd004um1tj8s511of8","content":"<p> APUE </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Linux </p>\n<p> (shmwrite.c)(shmread.c)</p>\n<p> isWritten </p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Linux  <br> P(sv)  V(sv).</p>\n<ul>\n<li>P(sv)sv1</li>\n<li>V(sv)svsv1.</li>\n</ul>\n<p> sv P(sv)  sv 1sv=0,, V(sv) </p>\n<h3 id=\"mmap--shmget\"><a href=\"#mmap--shmget\" class=\"headerlink\" title=\"mmap  shmget\"></a>mmap  shmget</h3><p></p>\n<p>,.</p>\n<p>mmap  Posix V IPC .</p>\n<p>mmap  read()write() mmap ,   memcpy </p>\n<hr>\n<p></p>\n<ul>\n<li>: <a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/shared_memory/shmdata.h\" target=\"_blank\" rel=\"noopener\">shmdata.h</a></li>\n<li><a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/shared_memory/shmread.c\" target=\"_blank\" rel=\"noopener\">shmread.c</a></li>\n<li><a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/shared_memory/shmwrite.c\" target=\"_blank\" rel=\"noopener\">shmwrite.c</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p> APUE </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Linux </p>\n<p> (shmwrite.c)(shmread.c)</p>\n<p> isWritten </p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Linux  <br> P(sv)  V(sv).</p>\n<ul>\n<li>P(sv)sv1</li>\n<li>V(sv)svsv1.</li>\n</ul>\n<p> sv P(sv)  sv 1sv=0,, V(sv) </p>\n<h3 id=\"mmap--shmget\"><a href=\"#mmap--shmget\" class=\"headerlink\" title=\"mmap  shmget\"></a>mmap  shmget</h3><p></p>\n<p>,.</p>\n<p>mmap  Posix V IPC .</p>\n<p>mmap  read()write() mmap ,   memcpy </p>\n<hr>\n<p></p>\n<ul>\n<li>: <a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/shared_memory/shmdata.h\" target=\"_blank\" rel=\"noopener\">shmdata.h</a></li>\n<li><a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/shared_memory/shmread.c\" target=\"_blank\" rel=\"noopener\">shmread.c</a></li>\n<li><a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/shared_memory/shmwrite.c\" target=\"_blank\" rel=\"noopener\">shmwrite.c</a></li>\n</ul>\n"},{"layout":"post","title":" redis bug","date":"2016-09-28T00:21:00.000Z","description":"Redis ","_content":"\n bug \n\n* [](#)\n* [ ](#)\n* [](#)\n* [](#)\n\n<h3 id=\"\"></h3>\n\n [go-redis-server](https://github.com/youmi/go-redis-server)  redis   AWS  Dynamodb\n\n```go\nfunc (handler *RedisHandler) Get(key string) (result string, err error)\nfunc (handler *RedisHandler) Set(key string, val string) (err error)\nfunc (handler *RedisHandler) Del(key string) (count int, err error)\n```\n\n redis  GetSetDel \n\n GetSet\n AWS  Dynamodb \n\n\n\n<h3 id=\"\"></h3>\n\n\n\n```go\nfunc (handler *RedisHandler) \nSet(key string, val string) (err error) {\n\t...\n\n\tm, err := JSONToMap(val)\n\t_, err = table.PutItem(m)\n\tif err != nil {\n\t\tlog.Log.Errorf(\"PutItem failed, \n\t\ttable: %s, primary key: %s, value: %+v, \n\t\terr: %s\", \n\t\ttableName, primaryVal, m, err.Error())\n\t\treturn\n\t}\n\treturn\n}\n```\n\nSet DynamodbDynamodb redis\n\n AWS Dynamodb  go-redis-server \n\n AWS Dynamodb  aws-go-sdk Dynamodb  \n\n\n```\nValidationException: One or more parameter values were invalid:\nAn AttributeValue may not contain an empty string\n\tstatus code: 400\n```\n\n1234 pyredis \n\n\n```python\nimport redis\nimport json\nimport random\nr = redis.Redis(host='localhost',port=1234,db=0)\n\ntable_name = 'test'\nprimary_key = 'a'\n\ni = 0\nwhile True:\n    if i > 2:\n        break\n    data = {\n        'a': str(random.random()),\n        'b': ,\n    }\n    key = '{0}:{1}:{2}'.format(table_name, primary_key, data[primary_key])\n    value = json.dumps(data)\n    r.set(key, value)\n    i = i + 1\n```\n\nstrace \n\n```\n$ sudo strace -p 22404\nProcess 22404 attached\nrecvfrom(3,\n```\n\n\n\n<h3 id=\"\"></h3>\n\n go-redis-server  err \n\n```go\nfunc (handler *RedisHandler) Set(key string, val string) (err error) {\n\t...\n\n\tm, err := JSONToMap(val)\n\t_, err = table.PutItem(m)\n\tif err != nil {\n\t\terr = errors.New(\"I am a Custom Error\")\n\t\treturn\n\t}\n\treturn\n}\n```\n\n2\nerror \n\n```\nAWS \nValidationException: One or more parameter values were invalid:\nAn AttributeValue may not contain an empty string\n\tstatus code: 400\n\n\nI am a Custom Error\n```\n\n ErrorReply.WriteTo \n\n>-,CR + LF \n\n go-redis-server \n\n\n```go\nfor {\n\trequest, err := parseRequest(conn)\n\tif err != nil {\n\t\treturn err\n\t}\n\t\trequest.Host = clientAddr\n\t\trequest.ClientChan = clientChan\n\t\treply, err := srv.Apply(request)\n\t\tif err != nil {\n\t\t\treturn err\n\t\t}\n\t\tif _, err = reply.WriteTo(conn); err != nil {\n\t\t\treturn err\n\t\t}\n\t}\n\treturn nil\n}\nfunc (er *ErrorReply) WriteTo(w io.Writer) (int64, error) {\n\tn, err := w.Write([]byte(\"-\" + er.code + \" \" + er.message + \"\\r\\n\"))\n\treturn int64(n), err\n}\n```\n\n [Redis](http://redis.cn/topics/protocol.html) Redis  `\\r\\n`   `\\n`redis \n\n<h3 id=\"\"></h3>\n\n*  go-redis-server \n\n* bug,\n\n*  reflect \n\n---\n\n\n\n- [Redis](http://redis.cn/topics/protocol.html)\n- [go-redis-server](https://github.com/youmi/go-redis-server)\n","source":"_posts/2016-09-28-ji-yi-ci-redis-server-bug.markdown","raw":"---\nlayout: post\ntitle: \" redis bug\"\ndate: 2016-09-28 08:21\ndescription: Redis  \ncategories: Program\n---\n\n bug \n\n* [](#)\n* [ ](#)\n* [](#)\n* [](#)\n\n<h3 id=\"\"></h3>\n\n [go-redis-server](https://github.com/youmi/go-redis-server)  redis   AWS  Dynamodb\n\n```go\nfunc (handler *RedisHandler) Get(key string) (result string, err error)\nfunc (handler *RedisHandler) Set(key string, val string) (err error)\nfunc (handler *RedisHandler) Del(key string) (count int, err error)\n```\n\n redis  GetSetDel \n\n GetSet\n AWS  Dynamodb \n\n\n\n<h3 id=\"\"></h3>\n\n\n\n```go\nfunc (handler *RedisHandler) \nSet(key string, val string) (err error) {\n\t...\n\n\tm, err := JSONToMap(val)\n\t_, err = table.PutItem(m)\n\tif err != nil {\n\t\tlog.Log.Errorf(\"PutItem failed, \n\t\ttable: %s, primary key: %s, value: %+v, \n\t\terr: %s\", \n\t\ttableName, primaryVal, m, err.Error())\n\t\treturn\n\t}\n\treturn\n}\n```\n\nSet DynamodbDynamodb redis\n\n AWS Dynamodb  go-redis-server \n\n AWS Dynamodb  aws-go-sdk Dynamodb  \n\n\n```\nValidationException: One or more parameter values were invalid:\nAn AttributeValue may not contain an empty string\n\tstatus code: 400\n```\n\n1234 pyredis \n\n\n```python\nimport redis\nimport json\nimport random\nr = redis.Redis(host='localhost',port=1234,db=0)\n\ntable_name = 'test'\nprimary_key = 'a'\n\ni = 0\nwhile True:\n    if i > 2:\n        break\n    data = {\n        'a': str(random.random()),\n        'b': ,\n    }\n    key = '{0}:{1}:{2}'.format(table_name, primary_key, data[primary_key])\n    value = json.dumps(data)\n    r.set(key, value)\n    i = i + 1\n```\n\nstrace \n\n```\n$ sudo strace -p 22404\nProcess 22404 attached\nrecvfrom(3,\n```\n\n\n\n<h3 id=\"\"></h3>\n\n go-redis-server  err \n\n```go\nfunc (handler *RedisHandler) Set(key string, val string) (err error) {\n\t...\n\n\tm, err := JSONToMap(val)\n\t_, err = table.PutItem(m)\n\tif err != nil {\n\t\terr = errors.New(\"I am a Custom Error\")\n\t\treturn\n\t}\n\treturn\n}\n```\n\n2\nerror \n\n```\nAWS \nValidationException: One or more parameter values were invalid:\nAn AttributeValue may not contain an empty string\n\tstatus code: 400\n\n\nI am a Custom Error\n```\n\n ErrorReply.WriteTo \n\n>-,CR + LF \n\n go-redis-server \n\n\n```go\nfor {\n\trequest, err := parseRequest(conn)\n\tif err != nil {\n\t\treturn err\n\t}\n\t\trequest.Host = clientAddr\n\t\trequest.ClientChan = clientChan\n\t\treply, err := srv.Apply(request)\n\t\tif err != nil {\n\t\t\treturn err\n\t\t}\n\t\tif _, err = reply.WriteTo(conn); err != nil {\n\t\t\treturn err\n\t\t}\n\t}\n\treturn nil\n}\nfunc (er *ErrorReply) WriteTo(w io.Writer) (int64, error) {\n\tn, err := w.Write([]byte(\"-\" + er.code + \" \" + er.message + \"\\r\\n\"))\n\treturn int64(n), err\n}\n```\n\n [Redis](http://redis.cn/topics/protocol.html) Redis  `\\r\\n`   `\\n`redis \n\n<h3 id=\"\"></h3>\n\n*  go-redis-server \n\n* bug,\n\n*  reflect \n\n---\n\n\n\n- [Redis](http://redis.cn/topics/protocol.html)\n- [go-redis-server](https://github.com/youmi/go-redis-server)\n","slug":"2016-09-28-ji-yi-ci-redis-server-bug","published":1,"updated":"2018-07-01T05:58:18.000Z","comments":1,"photos":[],"link":"","_id":"cjv8xuicf004wm1tjc50jzk76","content":"<p> bug </p>\n<ul>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"> </a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<p> <a href=\"https://github.com/youmi/go-redis-server\" target=\"_blank\" rel=\"noopener\">go-redis-server</a>  redis   AWS  Dynamodb</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(handler *RedisHandler)</span> <span class=\"title\">Get</span><span class=\"params\">(key <span class=\"keyword\">string</span>)</span> <span class=\"params\">(result <span class=\"keyword\">string</span>, err error)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">func</span> <span class=\"params\">(handler *RedisHandler)</span> <span class=\"title\">Set</span><span class=\"params\">(key <span class=\"keyword\">string</span>, val <span class=\"keyword\">string</span>)</span> <span class=\"params\">(err error)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">func</span> <span class=\"params\">(handler *RedisHandler)</span> <span class=\"title\">Del</span><span class=\"params\">(key <span class=\"keyword\">string</span>)</span> <span class=\"params\">(count <span class=\"keyword\">int</span>, err error)</span></span></span><br></pre></td></tr></table></figure>\n<p> redis  GetSetDel </p>\n<p> GetSet<br> AWS  Dynamodb <br><br></p>\n<h3 id=\"\"></h3>\n\n<p></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(handler *RedisHandler)</span> </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">Set</span><span class=\"params\">(key <span class=\"keyword\">string</span>, val <span class=\"keyword\">string</span>)</span> <span class=\"params\">(err error)</span></span> &#123;</span><br><span class=\"line\">\t...</span><br><span class=\"line\"></span><br><span class=\"line\">\tm, err := JSONToMap(val)</span><br><span class=\"line\">\t_, err = table.PutItem(m)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Log.Errorf(<span class=\"string\">\"PutItem failed, </span></span><br><span class=\"line\"><span class=\"string\">\t\ttable: %s, primary key: %s, value: %+v, </span></span><br><span class=\"line\"><span class=\"string\">\t\terr: %s\"</span>, </span><br><span class=\"line\">\t\ttableName, primaryVal, m, err.Error())</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Set DynamodbDynamodb redis</p>\n<p> AWS Dynamodb  go-redis-server </p>\n<p> AWS Dynamodb  aws-go-sdk Dynamodb  <br></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ValidationException: One or more parameter values were invalid:</span><br><span class=\"line\">An AttributeValue may not contain an empty string</span><br><span class=\"line\">\tstatus code: 400</span><br></pre></td></tr></table></figure>\n<p>1234 pyredis <br></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> redis</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\">r = redis.Redis(host=<span class=\"string\">'localhost'</span>,port=<span class=\"number\">1234</span>,db=<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">table_name = <span class=\"string\">'test'</span></span><br><span class=\"line\">primary_key = <span class=\"string\">'a'</span></span><br><span class=\"line\"></span><br><span class=\"line\">i = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</span><br><span class=\"line\">    <span class=\"keyword\">if</span> i &gt; <span class=\"number\">2</span>:</span><br><span class=\"line\">        <span class=\"keyword\">break</span></span><br><span class=\"line\">    data = &#123;</span><br><span class=\"line\">        <span class=\"string\">'a'</span>: str(random.random()),</span><br><span class=\"line\">        <span class=\"string\">'b'</span>: ,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    key = <span class=\"string\">'&#123;0&#125;:&#123;1&#125;:&#123;2&#125;'</span>.format(table_name, primary_key, data[primary_key])</span><br><span class=\"line\">    value = json.dumps(data)</span><br><span class=\"line\">    r.set(key, value)</span><br><span class=\"line\">    i = i + <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n<p>strace </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo strace -p 22404</span><br><span class=\"line\">Process 22404 attached</span><br><span class=\"line\">recvfrom(3,</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"></h3>\n\n<p> go-redis-server  err </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(handler *RedisHandler)</span> <span class=\"title\">Set</span><span class=\"params\">(key <span class=\"keyword\">string</span>, val <span class=\"keyword\">string</span>)</span> <span class=\"params\">(err error)</span></span> &#123;</span><br><span class=\"line\">\t...</span><br><span class=\"line\"></span><br><span class=\"line\">\tm, err := JSONToMap(val)</span><br><span class=\"line\">\t_, err = table.PutItem(m)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\terr = errors.New(<span class=\"string\">\"I am a Custom Error\"</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2<br>error </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AWS </span><br><span class=\"line\">ValidationException: One or more parameter values were invalid:</span><br><span class=\"line\">An AttributeValue may not contain an empty string</span><br><span class=\"line\">\tstatus code: 400</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">I am a Custom Error</span><br></pre></td></tr></table></figure>\n<p> ErrorReply.WriteTo </p>\n<blockquote>\n<p>-,CR + LF </p>\n</blockquote>\n<p> go-redis-server </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">\trequest, err := parseRequest(conn)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> err</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t\trequest.Host = clientAddr</span><br><span class=\"line\">\t\trequest.ClientChan = clientChan</span><br><span class=\"line\">\t\treply, err := srv.Apply(request)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> err</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> _, err = reply.WriteTo(conn); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> err</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">nil</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(er *ErrorReply)</span> <span class=\"title\">WriteTo</span><span class=\"params\">(w io.Writer)</span> <span class=\"params\">(<span class=\"keyword\">int64</span>, error)</span></span> &#123;</span><br><span class=\"line\">\tn, err := w.Write([]<span class=\"keyword\">byte</span>(<span class=\"string\">\"-\"</span> + er.code + <span class=\"string\">\" \"</span> + er.message + <span class=\"string\">\"\\r\\n\"</span>))</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">int64</span>(n), err</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <a href=\"http://redis.cn/topics/protocol.html\" target=\"_blank\" rel=\"noopener\">Redis</a> Redis  <code>\\r\\n</code>   <code>\\n</code>redis </p>\n<h3 id=\"\"></h3>\n\n<ul>\n<li><p> go-redis-server </p>\n</li>\n<li><p>bug,</p>\n</li>\n<li><p> reflect </p>\n</li>\n</ul>\n<hr>\n<p></p>\n<ul>\n<li><a href=\"http://redis.cn/topics/protocol.html\" target=\"_blank\" rel=\"noopener\">Redis</a></li>\n<li><a href=\"https://github.com/youmi/go-redis-server\" target=\"_blank\" rel=\"noopener\">go-redis-server</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p> bug </p>\n<ul>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"> </a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n</ul>\n<h3 id=\"\"></h3>\n\n<p> <a href=\"https://github.com/youmi/go-redis-server\" target=\"_blank\" rel=\"noopener\">go-redis-server</a>  redis   AWS  Dynamodb</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(handler *RedisHandler)</span> <span class=\"title\">Get</span><span class=\"params\">(key <span class=\"keyword\">string</span>)</span> <span class=\"params\">(result <span class=\"keyword\">string</span>, err error)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">func</span> <span class=\"params\">(handler *RedisHandler)</span> <span class=\"title\">Set</span><span class=\"params\">(key <span class=\"keyword\">string</span>, val <span class=\"keyword\">string</span>)</span> <span class=\"params\">(err error)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">func</span> <span class=\"params\">(handler *RedisHandler)</span> <span class=\"title\">Del</span><span class=\"params\">(key <span class=\"keyword\">string</span>)</span> <span class=\"params\">(count <span class=\"keyword\">int</span>, err error)</span></span></span><br></pre></td></tr></table></figure>\n<p> redis  GetSetDel </p>\n<p> GetSet<br> AWS  Dynamodb <br><br></p>\n<h3 id=\"\"></h3>\n\n<p></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(handler *RedisHandler)</span> </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">Set</span><span class=\"params\">(key <span class=\"keyword\">string</span>, val <span class=\"keyword\">string</span>)</span> <span class=\"params\">(err error)</span></span> &#123;</span><br><span class=\"line\">\t...</span><br><span class=\"line\"></span><br><span class=\"line\">\tm, err := JSONToMap(val)</span><br><span class=\"line\">\t_, err = table.PutItem(m)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Log.Errorf(<span class=\"string\">\"PutItem failed, </span></span><br><span class=\"line\"><span class=\"string\">\t\ttable: %s, primary key: %s, value: %+v, </span></span><br><span class=\"line\"><span class=\"string\">\t\terr: %s\"</span>, </span><br><span class=\"line\">\t\ttableName, primaryVal, m, err.Error())</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Set DynamodbDynamodb redis</p>\n<p> AWS Dynamodb  go-redis-server </p>\n<p> AWS Dynamodb  aws-go-sdk Dynamodb  <br></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ValidationException: One or more parameter values were invalid:</span><br><span class=\"line\">An AttributeValue may not contain an empty string</span><br><span class=\"line\">\tstatus code: 400</span><br></pre></td></tr></table></figure>\n<p>1234 pyredis <br></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> redis</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\">r = redis.Redis(host=<span class=\"string\">'localhost'</span>,port=<span class=\"number\">1234</span>,db=<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">table_name = <span class=\"string\">'test'</span></span><br><span class=\"line\">primary_key = <span class=\"string\">'a'</span></span><br><span class=\"line\"></span><br><span class=\"line\">i = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</span><br><span class=\"line\">    <span class=\"keyword\">if</span> i &gt; <span class=\"number\">2</span>:</span><br><span class=\"line\">        <span class=\"keyword\">break</span></span><br><span class=\"line\">    data = &#123;</span><br><span class=\"line\">        <span class=\"string\">'a'</span>: str(random.random()),</span><br><span class=\"line\">        <span class=\"string\">'b'</span>: ,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    key = <span class=\"string\">'&#123;0&#125;:&#123;1&#125;:&#123;2&#125;'</span>.format(table_name, primary_key, data[primary_key])</span><br><span class=\"line\">    value = json.dumps(data)</span><br><span class=\"line\">    r.set(key, value)</span><br><span class=\"line\">    i = i + <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n<p>strace </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo strace -p 22404</span><br><span class=\"line\">Process 22404 attached</span><br><span class=\"line\">recvfrom(3,</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"></h3>\n\n<p> go-redis-server  err </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(handler *RedisHandler)</span> <span class=\"title\">Set</span><span class=\"params\">(key <span class=\"keyword\">string</span>, val <span class=\"keyword\">string</span>)</span> <span class=\"params\">(err error)</span></span> &#123;</span><br><span class=\"line\">\t...</span><br><span class=\"line\"></span><br><span class=\"line\">\tm, err := JSONToMap(val)</span><br><span class=\"line\">\t_, err = table.PutItem(m)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\terr = errors.New(<span class=\"string\">\"I am a Custom Error\"</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2<br>error </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AWS </span><br><span class=\"line\">ValidationException: One or more parameter values were invalid:</span><br><span class=\"line\">An AttributeValue may not contain an empty string</span><br><span class=\"line\">\tstatus code: 400</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">I am a Custom Error</span><br></pre></td></tr></table></figure>\n<p> ErrorReply.WriteTo </p>\n<blockquote>\n<p>-,CR + LF </p>\n</blockquote>\n<p> go-redis-server </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">\trequest, err := parseRequest(conn)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> err</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t\trequest.Host = clientAddr</span><br><span class=\"line\">\t\trequest.ClientChan = clientChan</span><br><span class=\"line\">\t\treply, err := srv.Apply(request)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> err</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> _, err = reply.WriteTo(conn); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> err</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">nil</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(er *ErrorReply)</span> <span class=\"title\">WriteTo</span><span class=\"params\">(w io.Writer)</span> <span class=\"params\">(<span class=\"keyword\">int64</span>, error)</span></span> &#123;</span><br><span class=\"line\">\tn, err := w.Write([]<span class=\"keyword\">byte</span>(<span class=\"string\">\"-\"</span> + er.code + <span class=\"string\">\" \"</span> + er.message + <span class=\"string\">\"\\r\\n\"</span>))</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">int64</span>(n), err</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <a href=\"http://redis.cn/topics/protocol.html\" target=\"_blank\" rel=\"noopener\">Redis</a> Redis  <code>\\r\\n</code>   <code>\\n</code>redis </p>\n<h3 id=\"\"></h3>\n\n<ul>\n<li><p> go-redis-server </p>\n</li>\n<li><p>bug,</p>\n</li>\n<li><p> reflect </p>\n</li>\n</ul>\n<hr>\n<p></p>\n<ul>\n<li><a href=\"http://redis.cn/topics/protocol.html\" target=\"_blank\" rel=\"noopener\">Redis</a></li>\n<li><a href=\"https://github.com/youmi/go-redis-server\" target=\"_blank\" rel=\"noopener\">go-redis-server</a></li>\n</ul>\n"},{"layout":"post","title":"cgroup ","date":"2016-12-02T07:41:00.000Z","comments":1,"description":"cgroup","_content":"\nCgroup  Docker CPU\n\n### \n\n Ubuntu 14.04 \n\n```\nsudo apt-get install cgroup-bin\n```\n\n\n`mount -t cgroup` \n\n```\ncgroup on /sys/fs/cgroup/cpuset type cgroup (rw,relatime,cpuset)\ncgroup on /sys/fs/cgroup/cpu type cgroup (rw,relatime,cpu)\n...\ncgroup on /sys/fs/cgroup/hugetlb type cgroup (rw,relatime,hugetlb)\n```\n\n mount \n\n```\ncd /sys/fs\nmkdir cgroup\nmount -t tmpfs cgroup_root ./cgroup\nmkdir cgroup/cpuset\nmount -t cgroup -ocpuset cpuset ./cgroup/cpuset/\nmkdir cgroup/cpu\nmount -t cgroup -ocpu cpu ./cgroup/cpu/\nmkdir cgroup/memory\nmount -t cgroup -omemory memory ./cgroup/memory/\n```\n\n### \n\n cgroup  CPU (baozou)\n\n```py\ncount = 0\nwhile True:\n    count = count + 1 - 1\n```\n\ntop -p 100% CPU\n\n```\n  PID      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                       \n16515      20   0    2336    728    544 R  100.0  0.0   1:27.23 baozou\n```\n\n CPU ?  cgroup \n\n```sh\ncd /sys/fs/cgroup/cpu\nmkdir calm      // \nls /calm        //  CPU \ncgroup.clone_children  cpu.cfs_period_us  cpu.shares  notify_on_release\ncgroup.procs           cpu.cfs_quota_us   cpu.stat    tasks\n```\n\n\n\n```\n// 10000020000cpu20%\necho 20000 > /sys/fs/cgroup/cpu/calm/cpu.cfs_quota_us, \n\n//  PID 16515\necho 16515 > /sys/fs/cgroup/cpu/calm/tasks\n```\n\n CPU  20% \n\n```\n  PID       PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                       \n16515       20   0    2336    728    544 R  20.0  0.0   1:27.23 baozou\n```\n\n PID \n\n```\nsudo cgexec -g cpu:calm ./baozou\n```\n\n?\n\n```\n$ sudo cgget calm\ncalm:\ncpu.shares: 1024\ncpu.cfs_quota_us: 20000\ncpu.stat: nr_periods 6943\n    nr_throttled 6941\n    throttled_time 563080015831\ncpu.cfs_period_us: 100000\n```\n\n `calm` \n\n```\n// cgroup \nsudo cgcreate -g cpu:/calm -g memory:/calm\n\n// \nsudo cgset -r cpu.shares=200 calm\n\n// \nsudo cgset -r memory.limit_in_bytes=64k calm\n\n// \nsudo cgdelete cpu/calm memory:/calm\n```\n\n---\n\n\n\n* [Docker: Linux CGroup](http://coolshell.cn/articles/17049.html)\n* [cgroup](http://www.jianshu.com/p/dc3140699e79)\n","source":"_posts/2016-12-02-cgroupxian-zhi-ji-suan-zi-yuan.markdown","raw":"---\nlayout: post\ntitle: \"cgroup \"\ndate: 2016-12-02 15:41\ncomments: true\ncategories: System\ndescription: cgroup\n---\n\nCgroup  Docker CPU\n\n### \n\n Ubuntu 14.04 \n\n```\nsudo apt-get install cgroup-bin\n```\n\n\n`mount -t cgroup` \n\n```\ncgroup on /sys/fs/cgroup/cpuset type cgroup (rw,relatime,cpuset)\ncgroup on /sys/fs/cgroup/cpu type cgroup (rw,relatime,cpu)\n...\ncgroup on /sys/fs/cgroup/hugetlb type cgroup (rw,relatime,hugetlb)\n```\n\n mount \n\n```\ncd /sys/fs\nmkdir cgroup\nmount -t tmpfs cgroup_root ./cgroup\nmkdir cgroup/cpuset\nmount -t cgroup -ocpuset cpuset ./cgroup/cpuset/\nmkdir cgroup/cpu\nmount -t cgroup -ocpu cpu ./cgroup/cpu/\nmkdir cgroup/memory\nmount -t cgroup -omemory memory ./cgroup/memory/\n```\n\n### \n\n cgroup  CPU (baozou)\n\n```py\ncount = 0\nwhile True:\n    count = count + 1 - 1\n```\n\ntop -p 100% CPU\n\n```\n  PID      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                       \n16515      20   0    2336    728    544 R  100.0  0.0   1:27.23 baozou\n```\n\n CPU ?  cgroup \n\n```sh\ncd /sys/fs/cgroup/cpu\nmkdir calm      // \nls /calm        //  CPU \ncgroup.clone_children  cpu.cfs_period_us  cpu.shares  notify_on_release\ncgroup.procs           cpu.cfs_quota_us   cpu.stat    tasks\n```\n\n\n\n```\n// 10000020000cpu20%\necho 20000 > /sys/fs/cgroup/cpu/calm/cpu.cfs_quota_us, \n\n//  PID 16515\necho 16515 > /sys/fs/cgroup/cpu/calm/tasks\n```\n\n CPU  20% \n\n```\n  PID       PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                       \n16515       20   0    2336    728    544 R  20.0  0.0   1:27.23 baozou\n```\n\n PID \n\n```\nsudo cgexec -g cpu:calm ./baozou\n```\n\n?\n\n```\n$ sudo cgget calm\ncalm:\ncpu.shares: 1024\ncpu.cfs_quota_us: 20000\ncpu.stat: nr_periods 6943\n    nr_throttled 6941\n    throttled_time 563080015831\ncpu.cfs_period_us: 100000\n```\n\n `calm` \n\n```\n// cgroup \nsudo cgcreate -g cpu:/calm -g memory:/calm\n\n// \nsudo cgset -r cpu.shares=200 calm\n\n// \nsudo cgset -r memory.limit_in_bytes=64k calm\n\n// \nsudo cgdelete cpu/calm memory:/calm\n```\n\n---\n\n\n\n* [Docker: Linux CGroup](http://coolshell.cn/articles/17049.html)\n* [cgroup](http://www.jianshu.com/p/dc3140699e79)\n","slug":"2016-12-02-cgroupxian-zhi-ji-suan-zi-yuan","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuicg004ym1tjajxasz5w","content":"<p>Cgroup  Docker CPU</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Ubuntu 14.04 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install cgroup-bin</span><br></pre></td></tr></table></figure>\n<p><br><code>mount -t cgroup</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cgroup on /sys/fs/cgroup/cpuset type cgroup (rw,relatime,cpuset)</span><br><span class=\"line\">cgroup on /sys/fs/cgroup/cpu type cgroup (rw,relatime,cpu)</span><br><span class=\"line\">...</span><br><span class=\"line\">cgroup on /sys/fs/cgroup/hugetlb type cgroup (rw,relatime,hugetlb)</span><br></pre></td></tr></table></figure>\n<p> mount </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /sys/fs</span><br><span class=\"line\">mkdir cgroup</span><br><span class=\"line\">mount -t tmpfs cgroup_root ./cgroup</span><br><span class=\"line\">mkdir cgroup/cpuset</span><br><span class=\"line\">mount -t cgroup -ocpuset cpuset ./cgroup/cpuset/</span><br><span class=\"line\">mkdir cgroup/cpu</span><br><span class=\"line\">mount -t cgroup -ocpu cpu ./cgroup/cpu/</span><br><span class=\"line\">mkdir cgroup/memory</span><br><span class=\"line\">mount -t cgroup -omemory memory ./cgroup/memory/</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> cgroup  CPU (baozou)</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">count = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</span><br><span class=\"line\">    count = count + <span class=\"number\">1</span> - <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n<p>top -p 100% CPU</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  PID      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                       </span><br><span class=\"line\">16515      20   0    2336    728    544 R  100.0  0.0   1:27.23 baozou</span><br></pre></td></tr></table></figure>\n<p> CPU ?  cgroup </p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /sys/fs/cgroup/cpu</span><br><span class=\"line\">mkdir calm      // </span><br><span class=\"line\">ls /calm        //  CPU </span><br><span class=\"line\">cgroup.clone_children  cpu.cfs_period_us  cpu.shares  notify_on_release</span><br><span class=\"line\">cgroup.procs           cpu.cfs_quota_us   cpu.stat    tasks</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 10000020000cpu20%</span><br><span class=\"line\">echo 20000 &gt; /sys/fs/cgroup/cpu/calm/cpu.cfs_quota_us, </span><br><span class=\"line\"></span><br><span class=\"line\">//  PID 16515</span><br><span class=\"line\">echo 16515 &gt; /sys/fs/cgroup/cpu/calm/tasks</span><br></pre></td></tr></table></figure>\n<p> CPU  20% </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  PID       PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                       </span><br><span class=\"line\">16515       20   0    2336    728    544 R  20.0  0.0   1:27.23 baozou</span><br></pre></td></tr></table></figure>\n<p> PID </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo cgexec -g cpu:calm ./baozou</span><br></pre></td></tr></table></figure>\n<p>?</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo cgget calm</span><br><span class=\"line\">calm:</span><br><span class=\"line\">cpu.shares: 1024</span><br><span class=\"line\">cpu.cfs_quota_us: 20000</span><br><span class=\"line\">cpu.stat: nr_periods 6943</span><br><span class=\"line\">    nr_throttled 6941</span><br><span class=\"line\">    throttled_time 563080015831</span><br><span class=\"line\">cpu.cfs_period_us: 100000</span><br></pre></td></tr></table></figure>\n<p> <code>calm</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// cgroup </span><br><span class=\"line\">sudo cgcreate -g cpu:/calm -g memory:/calm</span><br><span class=\"line\"></span><br><span class=\"line\">// </span><br><span class=\"line\">sudo cgset -r cpu.shares=200 calm</span><br><span class=\"line\"></span><br><span class=\"line\">// </span><br><span class=\"line\">sudo cgset -r memory.limit_in_bytes=64k calm</span><br><span class=\"line\"></span><br><span class=\"line\">// </span><br><span class=\"line\">sudo cgdelete cpu/calm memory:/calm</span><br></pre></td></tr></table></figure>\n<hr>\n<p></p>\n<ul>\n<li><a href=\"http://coolshell.cn/articles/17049.html\" target=\"_blank\" rel=\"noopener\">Docker: Linux CGroup</a></li>\n<li><a href=\"http://www.jianshu.com/p/dc3140699e79\" target=\"_blank\" rel=\"noopener\">cgroup</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>Cgroup  Docker CPU</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Ubuntu 14.04 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install cgroup-bin</span><br></pre></td></tr></table></figure>\n<p><br><code>mount -t cgroup</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cgroup on /sys/fs/cgroup/cpuset type cgroup (rw,relatime,cpuset)</span><br><span class=\"line\">cgroup on /sys/fs/cgroup/cpu type cgroup (rw,relatime,cpu)</span><br><span class=\"line\">...</span><br><span class=\"line\">cgroup on /sys/fs/cgroup/hugetlb type cgroup (rw,relatime,hugetlb)</span><br></pre></td></tr></table></figure>\n<p> mount </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /sys/fs</span><br><span class=\"line\">mkdir cgroup</span><br><span class=\"line\">mount -t tmpfs cgroup_root ./cgroup</span><br><span class=\"line\">mkdir cgroup/cpuset</span><br><span class=\"line\">mount -t cgroup -ocpuset cpuset ./cgroup/cpuset/</span><br><span class=\"line\">mkdir cgroup/cpu</span><br><span class=\"line\">mount -t cgroup -ocpu cpu ./cgroup/cpu/</span><br><span class=\"line\">mkdir cgroup/memory</span><br><span class=\"line\">mount -t cgroup -omemory memory ./cgroup/memory/</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> cgroup  CPU (baozou)</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">count = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</span><br><span class=\"line\">    count = count + <span class=\"number\">1</span> - <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n<p>top -p 100% CPU</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  PID      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                       </span><br><span class=\"line\">16515      20   0    2336    728    544 R  100.0  0.0   1:27.23 baozou</span><br></pre></td></tr></table></figure>\n<p> CPU ?  cgroup </p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /sys/fs/cgroup/cpu</span><br><span class=\"line\">mkdir calm      // </span><br><span class=\"line\">ls /calm        //  CPU </span><br><span class=\"line\">cgroup.clone_children  cpu.cfs_period_us  cpu.shares  notify_on_release</span><br><span class=\"line\">cgroup.procs           cpu.cfs_quota_us   cpu.stat    tasks</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 10000020000cpu20%</span><br><span class=\"line\">echo 20000 &gt; /sys/fs/cgroup/cpu/calm/cpu.cfs_quota_us, </span><br><span class=\"line\"></span><br><span class=\"line\">//  PID 16515</span><br><span class=\"line\">echo 16515 &gt; /sys/fs/cgroup/cpu/calm/tasks</span><br></pre></td></tr></table></figure>\n<p> CPU  20% </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  PID       PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                       </span><br><span class=\"line\">16515       20   0    2336    728    544 R  20.0  0.0   1:27.23 baozou</span><br></pre></td></tr></table></figure>\n<p> PID </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo cgexec -g cpu:calm ./baozou</span><br></pre></td></tr></table></figure>\n<p>?</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo cgget calm</span><br><span class=\"line\">calm:</span><br><span class=\"line\">cpu.shares: 1024</span><br><span class=\"line\">cpu.cfs_quota_us: 20000</span><br><span class=\"line\">cpu.stat: nr_periods 6943</span><br><span class=\"line\">    nr_throttled 6941</span><br><span class=\"line\">    throttled_time 563080015831</span><br><span class=\"line\">cpu.cfs_period_us: 100000</span><br></pre></td></tr></table></figure>\n<p> <code>calm</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// cgroup </span><br><span class=\"line\">sudo cgcreate -g cpu:/calm -g memory:/calm</span><br><span class=\"line\"></span><br><span class=\"line\">// </span><br><span class=\"line\">sudo cgset -r cpu.shares=200 calm</span><br><span class=\"line\"></span><br><span class=\"line\">// </span><br><span class=\"line\">sudo cgset -r memory.limit_in_bytes=64k calm</span><br><span class=\"line\"></span><br><span class=\"line\">// </span><br><span class=\"line\">sudo cgdelete cpu/calm memory:/calm</span><br></pre></td></tr></table></figure>\n<hr>\n<p></p>\n<ul>\n<li><a href=\"http://coolshell.cn/articles/17049.html\" target=\"_blank\" rel=\"noopener\">Docker: Linux CGroup</a></li>\n<li><a href=\"http://www.jianshu.com/p/dc3140699e79\" target=\"_blank\" rel=\"noopener\">cgroup</a></li>\n</ul>\n"},{"layout":"post","title":"Squid ","date":"2017-02-22T14:30:00.000Z","comments":1,"description":"squid, ","_content":"\n### \n\n* \n\n \n\n* \n\n()\n\n### \n\nNginx  HTTPS \n\n*  hostname \n*  resolver,  DNS\n*  Nginx \n\n```\nserver{\n      resolver 8.8.8.8;\n      resolver_timeout 30s; \n      listen 80;\n      location / {\n                proxy_pass http://$http_host$request_uri;\n                proxy_set_header Host $http_host;\n        }\n}\n```\n\nSquid  HTTP  HTTPS\n\n\n```\nsudo apt-get install squid\n```\n\n `/etc/squid3/squid.conf`, \n\n```\nhttp_port 3128                 \t#\n#http_access deny !Safe_ports \t#\n#http_access deny manager     \t#\n\n#\nacl our_networks src 172.16.1.0/24 \nhttp_access allow our_networks\n```\n\n```\nsudo service squid3 restart\n```\n\nSquid  ,  Squid , .  Squid , .  `cache_peer` \n\n```\ncache_peer hostname type http_port icp_port option\n\ne.g.\ncache_peer xxx.proxy.com parent 9020 0 no-query default login=xxxxx:yyyy\n```\n\n* hostname: ip\n* type hostname  parent  sibling\n* http_porthostname\n* icp_porthostname ICPICP7\n* options\n   1. proxy-onlypeersquid\n   2. weight=npeerpeersquidpeer ICP  weight squid  weight peerICP\n   3. no-querypeerICPpeer\n   4. DefaultpeerICPdefaultno-query\n* login=user:password\n","source":"_posts/2017-02-22-zheng-xiang-yu-fan-xiang-dai-li.markdown","raw":"---\nlayout: post\ntitle: \"Squid \"\ndate: 2017-02-22 22:30\ncomments: true\ncategories: System\ndescription: squid, \n---\n\n### \n\n* \n\n \n\n* \n\n()\n\n### \n\nNginx  HTTPS \n\n*  hostname \n*  resolver,  DNS\n*  Nginx \n\n```\nserver{\n      resolver 8.8.8.8;\n      resolver_timeout 30s; \n      listen 80;\n      location / {\n                proxy_pass http://$http_host$request_uri;\n                proxy_set_header Host $http_host;\n        }\n}\n```\n\nSquid  HTTP  HTTPS\n\n\n```\nsudo apt-get install squid\n```\n\n `/etc/squid3/squid.conf`, \n\n```\nhttp_port 3128                 \t#\n#http_access deny !Safe_ports \t#\n#http_access deny manager     \t#\n\n#\nacl our_networks src 172.16.1.0/24 \nhttp_access allow our_networks\n```\n\n```\nsudo service squid3 restart\n```\n\nSquid  ,  Squid , .  Squid , .  `cache_peer` \n\n```\ncache_peer hostname type http_port icp_port option\n\ne.g.\ncache_peer xxx.proxy.com parent 9020 0 no-query default login=xxxxx:yyyy\n```\n\n* hostname: ip\n* type hostname  parent  sibling\n* http_porthostname\n* icp_porthostname ICPICP7\n* options\n   1. proxy-onlypeersquid\n   2. weight=npeerpeersquidpeer ICP  weight squid  weight peerICP\n   3. no-querypeerICPpeer\n   4. DefaultpeerICPdefaultno-query\n* login=user:password\n","slug":"2017-02-22-zheng-xiang-yu-fan-xiang-dai-li","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuich0050m1tjm60rpmy0","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n</ul>\n<p> </p>\n<ul>\n<li></li>\n</ul>\n<p>()</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Nginx  HTTPS </p>\n<ul>\n<li> hostname </li>\n<li> resolver,  DNS</li>\n<li> Nginx </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server&#123;</span><br><span class=\"line\">      resolver 8.8.8.8;</span><br><span class=\"line\">      resolver_timeout 30s; </span><br><span class=\"line\">      listen 80;</span><br><span class=\"line\">      location / &#123;</span><br><span class=\"line\">                proxy_pass http://$http_host$request_uri;</span><br><span class=\"line\">                proxy_set_header Host $http_host;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Squid  HTTP  HTTPS</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install squid</span><br></pre></td></tr></table></figure>\n<p> <code>/etc/squid3/squid.conf</code>, </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http_port 3128                 \t#</span><br><span class=\"line\">#http_access deny !Safe_ports \t#</span><br><span class=\"line\">#http_access deny manager     \t#</span><br><span class=\"line\"></span><br><span class=\"line\">#</span><br><span class=\"line\">acl our_networks src 172.16.1.0/24 </span><br><span class=\"line\">http_access allow our_networks</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service squid3 restart</span><br></pre></td></tr></table></figure>\n<p>Squid  ,  Squid , .  Squid , .  <code>cache_peer</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cache_peer hostname type http_port icp_port option</span><br><span class=\"line\"></span><br><span class=\"line\">e.g.</span><br><span class=\"line\">cache_peer xxx.proxy.com parent 9020 0 no-query default login=xxxxx:yyyy</span><br></pre></td></tr></table></figure>\n<ul>\n<li>hostname: ip</li>\n<li>type hostname  parent  sibling</li>\n<li>http_porthostname</li>\n<li>icp_porthostname ICPICP7</li>\n<li>options<ol>\n<li>proxy-onlypeersquid</li>\n<li>weight=npeerpeersquidpeer ICP  weight squid  weight peerICP</li>\n<li>no-querypeerICPpeer</li>\n<li>DefaultpeerICPdefaultno-query</li>\n</ol>\n</li>\n<li>login=user:password</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n</ul>\n<p> </p>\n<ul>\n<li></li>\n</ul>\n<p>()</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Nginx  HTTPS </p>\n<ul>\n<li> hostname </li>\n<li> resolver,  DNS</li>\n<li> Nginx </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server&#123;</span><br><span class=\"line\">      resolver 8.8.8.8;</span><br><span class=\"line\">      resolver_timeout 30s; </span><br><span class=\"line\">      listen 80;</span><br><span class=\"line\">      location / &#123;</span><br><span class=\"line\">                proxy_pass http://$http_host$request_uri;</span><br><span class=\"line\">                proxy_set_header Host $http_host;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Squid  HTTP  HTTPS</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install squid</span><br></pre></td></tr></table></figure>\n<p> <code>/etc/squid3/squid.conf</code>, </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http_port 3128                 \t#</span><br><span class=\"line\">#http_access deny !Safe_ports \t#</span><br><span class=\"line\">#http_access deny manager     \t#</span><br><span class=\"line\"></span><br><span class=\"line\">#</span><br><span class=\"line\">acl our_networks src 172.16.1.0/24 </span><br><span class=\"line\">http_access allow our_networks</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service squid3 restart</span><br></pre></td></tr></table></figure>\n<p>Squid  ,  Squid , .  Squid , .  <code>cache_peer</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cache_peer hostname type http_port icp_port option</span><br><span class=\"line\"></span><br><span class=\"line\">e.g.</span><br><span class=\"line\">cache_peer xxx.proxy.com parent 9020 0 no-query default login=xxxxx:yyyy</span><br></pre></td></tr></table></figure>\n<ul>\n<li>hostname: ip</li>\n<li>type hostname  parent  sibling</li>\n<li>http_porthostname</li>\n<li>icp_porthostname ICPICP7</li>\n<li>options<ol>\n<li>proxy-onlypeersquid</li>\n<li>weight=npeerpeersquidpeer ICP  weight squid  weight peerICP</li>\n<li>no-querypeerICPpeer</li>\n<li>DefaultpeerICPdefaultno-query</li>\n</ol>\n</li>\n<li>login=user:password</li>\n</ul>\n"},{"layout":"post","title":"zookeeper ","date":"2017-02-25T09:30:00.000Z","comments":1,"description":"zookeeper","_content":"\nZooKeeper \n\n### \n\n ZooKeeper  LeaderFollowerObserver\n\n ZooKeeper Leader Follower  Observer\nLeader Follower  Observer Observer  Leader  Observer \n\n### \n\n ZooKeeper  TCP  ZooKeeper  Watch \n\n\n### \n\nZooKeeper  ZNodeZooKeeperZNode TreeZNodeZNodeZNode\n\nZooKeeperZNode ZNode  ZNode  ZNode  ZooKeeper\n\nZooKeeper SEQUENTIALZooKeeper\n\n### \n\nZooKeeper  ZNode ZNodeZooKeeperStatStatZNode versionZNode, cversionZNode aversionZNodeACL\n\n### \n\n ZooKeeper  ZooKeeper ZooKeeperIDZXID64ZXIDZXIDZooKeeper\n\n### Watcher\n\nZooKeeper  WatcherZooKeeper  ZooKeeper \n\n###  ACL\n\nZooKeeper  Access Control Lists ZooKeeper 5\n\n```\nCREATE: \nREAD: \nWRITE\nDELETE: \nADMIN: ACL\nCREATE  DELETE \n```\n\n### ZAB \n\nZooKeeper Atomic BroadcastZABZooKeeper\n\nLeader Follower Leader  Proposal Proposal Follower  Leader  Follower  Follower Leader  Follower  Commit  Proposal \n\n### \n\n* -\n\n ZooKeeper  ZooKeeper \n\n Watcher \n\n* ID\n\n* \n\nZooKeeper  Watcher ZKZNode  ZNode ZNode ZNode  Watcher \n\n* \n\n ZK  ZK  ZK \n\n* \n\n \n\n ZooKeeper  ZNode ZNode/x_lock/x_lock/lockZooKeeper/x_lock Watcher  lock \n\n","source":"_posts/2017-02-25-zookeeper-bi-ji.markdown","raw":"---\nlayout: post\ntitle: \"zookeeper \"\ndate: 2017-02-25 17:30\ncomments: true\ncategories: Server\ndescription: zookeeper\n---\n\nZooKeeper \n\n### \n\n ZooKeeper  LeaderFollowerObserver\n\n ZooKeeper Leader Follower  Observer\nLeader Follower  Observer Observer  Leader  Observer \n\n### \n\n ZooKeeper  TCP  ZooKeeper  Watch \n\n\n### \n\nZooKeeper  ZNodeZooKeeperZNode TreeZNodeZNodeZNode\n\nZooKeeperZNode ZNode  ZNode  ZNode  ZooKeeper\n\nZooKeeper SEQUENTIALZooKeeper\n\n### \n\nZooKeeper  ZNode ZNodeZooKeeperStatStatZNode versionZNode, cversionZNode aversionZNodeACL\n\n### \n\n ZooKeeper  ZooKeeper ZooKeeperIDZXID64ZXIDZXIDZooKeeper\n\n### Watcher\n\nZooKeeper  WatcherZooKeeper  ZooKeeper \n\n###  ACL\n\nZooKeeper  Access Control Lists ZooKeeper 5\n\n```\nCREATE: \nREAD: \nWRITE\nDELETE: \nADMIN: ACL\nCREATE  DELETE \n```\n\n### ZAB \n\nZooKeeper Atomic BroadcastZABZooKeeper\n\nLeader Follower Leader  Proposal Proposal Follower  Leader  Follower  Follower Leader  Follower  Commit  Proposal \n\n### \n\n* -\n\n ZooKeeper  ZooKeeper \n\n Watcher \n\n* ID\n\n* \n\nZooKeeper  Watcher ZKZNode  ZNode ZNode ZNode  Watcher \n\n* \n\n ZK  ZK  ZK \n\n* \n\n \n\n ZooKeeper  ZNode ZNode/x_lock/x_lock/lockZooKeeper/x_lock Watcher  lock \n\n","slug":"2017-02-25-zookeeper-bi-ji","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuici0052m1tj0z1iqleb","content":"<p>ZooKeeper </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> ZooKeeper  LeaderFollowerObserver</p>\n<p> ZooKeeper Leader Follower  Observer<br>Leader Follower  Observer Observer  Leader  Observer </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> ZooKeeper  TCP  ZooKeeper  Watch </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>ZooKeeper  ZNodeZooKeeperZNode TreeZNodeZNodeZNode</p>\n<p>ZooKeeperZNode ZNode  ZNode  ZNode  ZooKeeper</p>\n<p>ZooKeeper SEQUENTIALZooKeeper</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>ZooKeeper  ZNode ZNodeZooKeeperStatStatZNode versionZNode, cversionZNode aversionZNodeACL</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> ZooKeeper  ZooKeeper ZooKeeperIDZXID64ZXIDZXIDZooKeeper</p>\n<h3 id=\"Watcher\"><a href=\"#Watcher\" class=\"headerlink\" title=\"Watcher\"></a>Watcher</h3><p>ZooKeeper  WatcherZooKeeper  ZooKeeper </p>\n<h3 id=\"ACL\"><a href=\"#ACL\" class=\"headerlink\" title=\"ACL\"></a>ACL</h3><p>ZooKeeper  Access Control Lists ZooKeeper 5</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE: </span><br><span class=\"line\">READ: </span><br><span class=\"line\">WRITE</span><br><span class=\"line\">DELETE: </span><br><span class=\"line\">ADMIN: ACL</span><br><span class=\"line\">CREATE  DELETE </span><br></pre></td></tr></table></figure>\n<h3 id=\"ZAB-\"><a href=\"#ZAB-\" class=\"headerlink\" title=\"ZAB \"></a>ZAB </h3><p>ZooKeeper Atomic BroadcastZABZooKeeper</p>\n<p>Leader Follower Leader  Proposal Proposal Follower  Leader  Follower  Follower Leader  Follower  Commit  Proposal </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>-</li>\n</ul>\n<p> ZooKeeper  ZooKeeper </p>\n<p> Watcher </p>\n<ul>\n<li><p>ID</p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<p>ZooKeeper  Watcher ZKZNode  ZNode ZNode ZNode  Watcher </p>\n<ul>\n<li></li>\n</ul>\n<p> ZK  ZK  ZK </p>\n<ul>\n<li></li>\n</ul>\n<p> </p>\n<p> ZooKeeper  ZNode ZNode/x_lock/x_lock/lockZooKeeper/x_lock Watcher  lock </p>\n","site":{"data":{}},"excerpt":"","more":"<p>ZooKeeper </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> ZooKeeper  LeaderFollowerObserver</p>\n<p> ZooKeeper Leader Follower  Observer<br>Leader Follower  Observer Observer  Leader  Observer </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> ZooKeeper  TCP  ZooKeeper  Watch </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>ZooKeeper  ZNodeZooKeeperZNode TreeZNodeZNodeZNode</p>\n<p>ZooKeeperZNode ZNode  ZNode  ZNode  ZooKeeper</p>\n<p>ZooKeeper SEQUENTIALZooKeeper</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>ZooKeeper  ZNode ZNodeZooKeeperStatStatZNode versionZNode, cversionZNode aversionZNodeACL</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> ZooKeeper  ZooKeeper ZooKeeperIDZXID64ZXIDZXIDZooKeeper</p>\n<h3 id=\"Watcher\"><a href=\"#Watcher\" class=\"headerlink\" title=\"Watcher\"></a>Watcher</h3><p>ZooKeeper  WatcherZooKeeper  ZooKeeper </p>\n<h3 id=\"ACL\"><a href=\"#ACL\" class=\"headerlink\" title=\"ACL\"></a>ACL</h3><p>ZooKeeper  Access Control Lists ZooKeeper 5</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE: </span><br><span class=\"line\">READ: </span><br><span class=\"line\">WRITE</span><br><span class=\"line\">DELETE: </span><br><span class=\"line\">ADMIN: ACL</span><br><span class=\"line\">CREATE  DELETE </span><br></pre></td></tr></table></figure>\n<h3 id=\"ZAB-\"><a href=\"#ZAB-\" class=\"headerlink\" title=\"ZAB \"></a>ZAB </h3><p>ZooKeeper Atomic BroadcastZABZooKeeper</p>\n<p>Leader Follower Leader  Proposal Proposal Follower  Leader  Follower  Follower Leader  Follower  Commit  Proposal </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>-</li>\n</ul>\n<p> ZooKeeper  ZooKeeper </p>\n<p> Watcher </p>\n<ul>\n<li><p>ID</p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<p>ZooKeeper  Watcher ZKZNode  ZNode ZNode ZNode  Watcher </p>\n<ul>\n<li></li>\n</ul>\n<p> ZK  ZK  ZK </p>\n<ul>\n<li></li>\n</ul>\n<p> </p>\n<p> ZooKeeper  ZNode ZNode/x_lock/x_lock/lockZooKeeper/x_lock Watcher  lock </p>\n"},{"layout":"post","title":"","date":"2017-05-29T15:19:00.000Z","comments":1,"description":"","_content":"\nNginx, Redis \n\n* (RPUSH, LPOP) [](https://github.com/antirez/redis/blob/unstable/src/adlist.c)\n\n* Nginx Nginx  socket [](https://github.com/nginx/nginx/blob/master/src/core/ngx_queue.c).\n\n\n\n### \n\n```c\ntypedef struct Node {\n    int num;\n    struct Node * next; //\n    struct Node * pre;  //\n} Node;\n\ntypedef struct dlist {\n    Node * head; //\n    Node * tail; //\n} dlist;\n```\n\n`head`,`tail` \n\n### \n\n\n\n* head  tail \n*  tail \n* \n\n{% img /images/2017/05/dlist-insert.png %}\n\n```c\nstatic int insertDlist(dlist **list, int num) {\n    Node * head = (*list) -> head;\n    Node * tail = (*list) -> tail;\n\n    if (list == NULL) return -1;\n\n    Node * node = initNode(num);\n    if (node == NULL) return -1;\n\n    // empty dlist\n    if ((*list) -> head == NULL && (*list) -> tail == NULL) {\n        (*list)-> head = node;\n        (*list)-> tail = node;\n        return 0;\n    }\n\n    while (head -> next && head -> num < num) {\n        head = head -> next;\n    }\n\n    // at the end\n    if (head->next == NULL) {\n        head -> next = node;\n        node -> pre = head;\n        tail -> pre = node;\n        return 0;\n    } else {\n        // in the middle\n        node-> next = head -> next;\n        head -> next -> pre = node;\n        node -> pre = head;\n        head -> next = node;\n        return 0;\n    }\n}\n\n```\n\n### \n\n\n\n* \n* \n* \n\n{% img /images/2017/05/dlist-delete.png %}\n\n```c\nstatic int deleteDlist(dlist ** list, int location) {\n    Node * head = (*list) -> head;\n    Node * now = NULL;\n    Node * last = NULL;\n\n    if (head == NULL)\n        return -1;\n    if (location <= 0 || location > numOfDlist(*list))\n        return -1;\n\n    if (location == 1) {\n        now = head;\n        (*list) -> head = now ->next;\n        head -> next ->pre = NULL;\n        if (now) {\n            free(now);\n            now = NULL;\n        }\n        return 0;\n    }\n    int num = 0;\n    while (head && num++ < location) {\n        head = head -> next;\n    }\n\n    if (head -> next == NULL) {\n        now = (*list) -> tail;\n        head -> pre -> next = NULL;\n        now -> pre = head->pre;\n        if (head) {\n            free(head);\n            head = NULL;\n        }\n    } else {\n        now = head -> next;\n        last = head -> pre;\n        now ->pre = head -> pre;\n        last -> next = head ->next;\n        if (head) {\n            free(head);\n            head = NULL;\n        }\n    }\n    return 0;\n}\n```\n\n C [](https://github.com/zheng-ji/ToyCollection/blob/master/Dlist/mydlist.c)\n Go , `container/list` \n","source":"_posts/2017-05-29-shuang-duan-lian-biao.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2017-05-29 23:19\ncomments: true\ncategories: Program\ndescription: \n---\n\nNginx, Redis \n\n* (RPUSH, LPOP) [](https://github.com/antirez/redis/blob/unstable/src/adlist.c)\n\n* Nginx Nginx  socket [](https://github.com/nginx/nginx/blob/master/src/core/ngx_queue.c).\n\n\n\n### \n\n```c\ntypedef struct Node {\n    int num;\n    struct Node * next; //\n    struct Node * pre;  //\n} Node;\n\ntypedef struct dlist {\n    Node * head; //\n    Node * tail; //\n} dlist;\n```\n\n`head`,`tail` \n\n### \n\n\n\n* head  tail \n*  tail \n* \n\n{% img /images/2017/05/dlist-insert.png %}\n\n```c\nstatic int insertDlist(dlist **list, int num) {\n    Node * head = (*list) -> head;\n    Node * tail = (*list) -> tail;\n\n    if (list == NULL) return -1;\n\n    Node * node = initNode(num);\n    if (node == NULL) return -1;\n\n    // empty dlist\n    if ((*list) -> head == NULL && (*list) -> tail == NULL) {\n        (*list)-> head = node;\n        (*list)-> tail = node;\n        return 0;\n    }\n\n    while (head -> next && head -> num < num) {\n        head = head -> next;\n    }\n\n    // at the end\n    if (head->next == NULL) {\n        head -> next = node;\n        node -> pre = head;\n        tail -> pre = node;\n        return 0;\n    } else {\n        // in the middle\n        node-> next = head -> next;\n        head -> next -> pre = node;\n        node -> pre = head;\n        head -> next = node;\n        return 0;\n    }\n}\n\n```\n\n### \n\n\n\n* \n* \n* \n\n{% img /images/2017/05/dlist-delete.png %}\n\n```c\nstatic int deleteDlist(dlist ** list, int location) {\n    Node * head = (*list) -> head;\n    Node * now = NULL;\n    Node * last = NULL;\n\n    if (head == NULL)\n        return -1;\n    if (location <= 0 || location > numOfDlist(*list))\n        return -1;\n\n    if (location == 1) {\n        now = head;\n        (*list) -> head = now ->next;\n        head -> next ->pre = NULL;\n        if (now) {\n            free(now);\n            now = NULL;\n        }\n        return 0;\n    }\n    int num = 0;\n    while (head && num++ < location) {\n        head = head -> next;\n    }\n\n    if (head -> next == NULL) {\n        now = (*list) -> tail;\n        head -> pre -> next = NULL;\n        now -> pre = head->pre;\n        if (head) {\n            free(head);\n            head = NULL;\n        }\n    } else {\n        now = head -> next;\n        last = head -> pre;\n        now ->pre = head -> pre;\n        last -> next = head ->next;\n        if (head) {\n            free(head);\n            head = NULL;\n        }\n    }\n    return 0;\n}\n```\n\n C [](https://github.com/zheng-ji/ToyCollection/blob/master/Dlist/mydlist.c)\n Go , `container/list` \n","slug":"2017-05-29-shuang-duan-lian-biao","published":1,"updated":"2018-07-01T05:58:34.000Z","photos":[],"link":"","_id":"cjv8xuicj0054m1tjkouqhk0j","content":"<p>Nginx, Redis </p>\n<ul>\n<li><p>(RPUSH, LPOP) <a href=\"https://github.com/antirez/redis/blob/unstable/src/adlist.c\" target=\"_blank\" rel=\"noopener\"></a></p>\n</li>\n<li><p>Nginx Nginx  socket <a href=\"https://github.com/nginx/nginx/blob/master/src/core/ngx_queue.c\" target=\"_blank\" rel=\"noopener\"></a>.</p>\n</li>\n</ul>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Node</span> &#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> num;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Node</span> * <span class=\"title\">next</span>;</span> <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Node</span> * <span class=\"title\">pre</span>;</span>  <span class=\"comment\">//</span></span><br><span class=\"line\">&#125; Node;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">dlist</span> &#123;</span></span><br><span class=\"line\">    Node * head; <span class=\"comment\">//</span></span><br><span class=\"line\">    Node * tail; <span class=\"comment\">//</span></span><br><span class=\"line\">&#125; dlist;</span><br></pre></td></tr></table></figure>\n<p><code>head</code>,<code>tail</code> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<ul>\n<li>head  tail </li>\n<li> tail </li>\n<li></li>\n</ul>\n<img src=\"/images/2017/05/dlist-insert.png\">\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">insertDlist</span><span class=\"params\">(dlist **<span class=\"built_in\">list</span>, <span class=\"keyword\">int</span> num)</span> </span>&#123;</span><br><span class=\"line\">    Node * head = (*<span class=\"built_in\">list</span>) -&gt; head;</span><br><span class=\"line\">    Node * tail = (*<span class=\"built_in\">list</span>) -&gt; tail;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">list</span> == <span class=\"literal\">NULL</span>) <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    Node * node = initNode(num);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (node == <span class=\"literal\">NULL</span>) <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// empty dlist</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((*<span class=\"built_in\">list</span>) -&gt; head == <span class=\"literal\">NULL</span> &amp;&amp; (*<span class=\"built_in\">list</span>) -&gt; tail == <span class=\"literal\">NULL</span>) &#123;</span><br><span class=\"line\">        (*<span class=\"built_in\">list</span>)-&gt; head = node;</span><br><span class=\"line\">        (*<span class=\"built_in\">list</span>)-&gt; tail = node;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (head -&gt; next &amp;&amp; head -&gt; num &lt; num) &#123;</span><br><span class=\"line\">        head = head -&gt; next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// at the end</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (head-&gt;next == <span class=\"literal\">NULL</span>) &#123;</span><br><span class=\"line\">        head -&gt; next = node;</span><br><span class=\"line\">        node -&gt; pre = head;</span><br><span class=\"line\">        tail -&gt; pre = node;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// in the middle</span></span><br><span class=\"line\">        node-&gt; next = head -&gt; next;</span><br><span class=\"line\">        head -&gt; next -&gt; pre = node;</span><br><span class=\"line\">        node -&gt; pre = head;</span><br><span class=\"line\">        head -&gt; next = node;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<img src=\"/images/2017/05/dlist-delete.png\">\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">deleteDlist</span><span class=\"params\">(dlist ** <span class=\"built_in\">list</span>, <span class=\"keyword\">int</span> location)</span> </span>&#123;</span><br><span class=\"line\">    Node * head = (*<span class=\"built_in\">list</span>) -&gt; head;</span><br><span class=\"line\">    Node * now = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    Node * last = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (head == <span class=\"literal\">NULL</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (location &lt;= <span class=\"number\">0</span> || location &gt; numOfDlist(*<span class=\"built_in\">list</span>))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (location == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        now = head;</span><br><span class=\"line\">        (*<span class=\"built_in\">list</span>) -&gt; head = now -&gt;next;</span><br><span class=\"line\">        head -&gt; next -&gt;pre = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (now) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">free</span>(now);</span><br><span class=\"line\">            now = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> num = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (head &amp;&amp; num++ &lt; location) &#123;</span><br><span class=\"line\">        head = head -&gt; next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (head -&gt; next == <span class=\"literal\">NULL</span>) &#123;</span><br><span class=\"line\">        now = (*<span class=\"built_in\">list</span>) -&gt; tail;</span><br><span class=\"line\">        head -&gt; pre -&gt; next = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">        now -&gt; pre = head-&gt;pre;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (head) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">free</span>(head);</span><br><span class=\"line\">            head = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        now = head -&gt; next;</span><br><span class=\"line\">        last = head -&gt; pre;</span><br><span class=\"line\">        now -&gt;pre = head -&gt; pre;</span><br><span class=\"line\">        last -&gt; next = head -&gt;next;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (head) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">free</span>(head);</span><br><span class=\"line\">            head = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> C <a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/Dlist/mydlist.c\" target=\"_blank\" rel=\"noopener\"></a><br> Go , <code>container/list</code> </p>\n","site":{"data":{}},"excerpt":"","more":"<p>Nginx, Redis </p>\n<ul>\n<li><p>(RPUSH, LPOP) <a href=\"https://github.com/antirez/redis/blob/unstable/src/adlist.c\" target=\"_blank\" rel=\"noopener\"></a></p>\n</li>\n<li><p>Nginx Nginx  socket <a href=\"https://github.com/nginx/nginx/blob/master/src/core/ngx_queue.c\" target=\"_blank\" rel=\"noopener\"></a>.</p>\n</li>\n</ul>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Node</span> &#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> num;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Node</span> * <span class=\"title\">next</span>;</span> <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Node</span> * <span class=\"title\">pre</span>;</span>  <span class=\"comment\">//</span></span><br><span class=\"line\">&#125; Node;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">dlist</span> &#123;</span></span><br><span class=\"line\">    Node * head; <span class=\"comment\">//</span></span><br><span class=\"line\">    Node * tail; <span class=\"comment\">//</span></span><br><span class=\"line\">&#125; dlist;</span><br></pre></td></tr></table></figure>\n<p><code>head</code>,<code>tail</code> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<ul>\n<li>head  tail </li>\n<li> tail </li>\n<li></li>\n</ul>\n<img src=\"/images/2017/05/dlist-insert.png\">\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">insertDlist</span><span class=\"params\">(dlist **<span class=\"built_in\">list</span>, <span class=\"keyword\">int</span> num)</span> </span>&#123;</span><br><span class=\"line\">    Node * head = (*<span class=\"built_in\">list</span>) -&gt; head;</span><br><span class=\"line\">    Node * tail = (*<span class=\"built_in\">list</span>) -&gt; tail;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">list</span> == <span class=\"literal\">NULL</span>) <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    Node * node = initNode(num);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (node == <span class=\"literal\">NULL</span>) <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// empty dlist</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((*<span class=\"built_in\">list</span>) -&gt; head == <span class=\"literal\">NULL</span> &amp;&amp; (*<span class=\"built_in\">list</span>) -&gt; tail == <span class=\"literal\">NULL</span>) &#123;</span><br><span class=\"line\">        (*<span class=\"built_in\">list</span>)-&gt; head = node;</span><br><span class=\"line\">        (*<span class=\"built_in\">list</span>)-&gt; tail = node;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (head -&gt; next &amp;&amp; head -&gt; num &lt; num) &#123;</span><br><span class=\"line\">        head = head -&gt; next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// at the end</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (head-&gt;next == <span class=\"literal\">NULL</span>) &#123;</span><br><span class=\"line\">        head -&gt; next = node;</span><br><span class=\"line\">        node -&gt; pre = head;</span><br><span class=\"line\">        tail -&gt; pre = node;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// in the middle</span></span><br><span class=\"line\">        node-&gt; next = head -&gt; next;</span><br><span class=\"line\">        head -&gt; next -&gt; pre = node;</span><br><span class=\"line\">        node -&gt; pre = head;</span><br><span class=\"line\">        head -&gt; next = node;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<img src=\"/images/2017/05/dlist-delete.png\">\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">deleteDlist</span><span class=\"params\">(dlist ** <span class=\"built_in\">list</span>, <span class=\"keyword\">int</span> location)</span> </span>&#123;</span><br><span class=\"line\">    Node * head = (*<span class=\"built_in\">list</span>) -&gt; head;</span><br><span class=\"line\">    Node * now = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    Node * last = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (head == <span class=\"literal\">NULL</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (location &lt;= <span class=\"number\">0</span> || location &gt; numOfDlist(*<span class=\"built_in\">list</span>))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (location == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        now = head;</span><br><span class=\"line\">        (*<span class=\"built_in\">list</span>) -&gt; head = now -&gt;next;</span><br><span class=\"line\">        head -&gt; next -&gt;pre = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (now) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">free</span>(now);</span><br><span class=\"line\">            now = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> num = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (head &amp;&amp; num++ &lt; location) &#123;</span><br><span class=\"line\">        head = head -&gt; next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (head -&gt; next == <span class=\"literal\">NULL</span>) &#123;</span><br><span class=\"line\">        now = (*<span class=\"built_in\">list</span>) -&gt; tail;</span><br><span class=\"line\">        head -&gt; pre -&gt; next = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">        now -&gt; pre = head-&gt;pre;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (head) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">free</span>(head);</span><br><span class=\"line\">            head = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        now = head -&gt; next;</span><br><span class=\"line\">        last = head -&gt; pre;</span><br><span class=\"line\">        now -&gt;pre = head -&gt; pre;</span><br><span class=\"line\">        last -&gt; next = head -&gt;next;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (head) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">free</span>(head);</span><br><span class=\"line\">            head = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> C <a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/Dlist/mydlist.c\" target=\"_blank\" rel=\"noopener\"></a><br> Go , <code>container/list</code> </p>\n"},{"layout":"post","title":"HTTPServer ","date":"2017-07-13T01:04:00.000Z","comments":1,"description":"graceful shutdown","_content":"\nGo1.8Go 1.8 HTTPServer  GraceFul ShutDown\n\n```go\n// src/net/http/server.go\n// Shutdown gracefully shuts down the server without interrupting any active connections. Shutdown works by first closing all open listeners, then closing all idle connections, and then waiting indefinitely for connections to return to idle and then shut down. If the provided context expires before the shutdown is complete, then the context's error is returned.\n\nfunc (srv *Server) Shutdown(ctx context.Context) error {\n    atomic.AddInt32(&srv.inShutdown, 1)\n    defer atomic.AddInt32(&srv.inShutdown, -1)\n\n    srv.mu.Lock()\n    lnerr := srv.closeListenersLocked()\n    srv.closeDoneChanLocked()\n    srv.mu.Unlock()\n\n    ticker := time.NewTicker(shutdownPollInterval)\n    defer ticker.Stop()\n    for {\n        if srv.closeIdleConns() {\n            return lnerr\n        }\n        select {\n        case <-ctx.Done():\n            return ctx.Err()\n        case <-ticker.C:\n        }\n    }\n}\n```\n\n\nserver.Shutdown  active  listener idle  Connections active  connection  idle Server\n\n Connection  active  server  block \nShutdown  Context  Context \nShutdown  active Connection\n Shutdown \n\n\n\n```go\npackage main\n\nimport (\n\t\"context\"\n\t\"log\"\n\t\"net/http\"\n\t\"os\"\n\t\"os/signal\"\n\t\"time\"\n\t\"github.com/gin-gonic/gin\"\n)\n\nfunc main() {\n\trouter := gin.Default()\n\trouter.GET(\"/\", func(c *gin.Context) {\n\t\ttime.Sleep(3 * time.Second)\n\t\tlog.Printf(http.StatusOK, \"Handle request success\")\n\t})\n\n\tsrv := &http.Server{\n\t\tAddr:    \":8080\",\n\t\tHandler: router,\n\t}\n\n\tgo func() {\n\t\tif err := srv.ListenAndServe(); err != nil {\n\t\t\tlog.Printf(\"listen: %s\\n\", err)\n\t\t}\n\t}()\n\n\tquit := make(chan os.Signal)\n\tsignal.Notify(quit, os.Interrupt)\n\t<-quit\n\tlog.Println(\"Shutdown Server ...\")\n\n\tctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n\tdefer cancel()\n\tif err := srv.Shutdown(ctx); err != nil {\n\t\tlog.Fatal(\"Server Shutdown:\", err)\n\t}\n\tlog.Println(\"Server exist\")\n}\n```\n\n3HTTPServer 5\"\"`curl localhost:8080` Ctrl+C  HTTP \n\n```\n[GIN-debug] [WARNING] Running in \"debug\" mode. Switch to \"release\" mode in production.\n - using env:\texport GIN_MODE=release\n - using code:\tgin.SetMode(gin.ReleaseMode)\n\n[GIN-debug] GET    /                         --> main.main.func1 (3 handlers)\nHandle Request success\n[GIN] 2017/07/12 - 20:30:47 | 200 |  3.000385597s | 127.0.0.1 |   GET     /\n^C  //Ctrl+C\nShutdown Server ...\nlisten: http: Server closed\nHandle Request success //\n[GIN] 2017/07/12 - 20:30:53 | 200 |  3.000360362s | 127.0.0.1 |   GET     /\nServer exist\n```\n","source":"_posts/2017-07-13-httpserver-graceful-shutdown-in-go.markdown","raw":"---\nlayout: post\ntitle: \"HTTPServer \"\ndate: 2017-07-13 09:04\ncomments: true\ncategories: Program\ndescription: graceful shutdown\n---\n\nGo1.8Go 1.8 HTTPServer  GraceFul ShutDown\n\n```go\n// src/net/http/server.go\n// Shutdown gracefully shuts down the server without interrupting any active connections. Shutdown works by first closing all open listeners, then closing all idle connections, and then waiting indefinitely for connections to return to idle and then shut down. If the provided context expires before the shutdown is complete, then the context's error is returned.\n\nfunc (srv *Server) Shutdown(ctx context.Context) error {\n    atomic.AddInt32(&srv.inShutdown, 1)\n    defer atomic.AddInt32(&srv.inShutdown, -1)\n\n    srv.mu.Lock()\n    lnerr := srv.closeListenersLocked()\n    srv.closeDoneChanLocked()\n    srv.mu.Unlock()\n\n    ticker := time.NewTicker(shutdownPollInterval)\n    defer ticker.Stop()\n    for {\n        if srv.closeIdleConns() {\n            return lnerr\n        }\n        select {\n        case <-ctx.Done():\n            return ctx.Err()\n        case <-ticker.C:\n        }\n    }\n}\n```\n\n\nserver.Shutdown  active  listener idle  Connections active  connection  idle Server\n\n Connection  active  server  block \nShutdown  Context  Context \nShutdown  active Connection\n Shutdown \n\n\n\n```go\npackage main\n\nimport (\n\t\"context\"\n\t\"log\"\n\t\"net/http\"\n\t\"os\"\n\t\"os/signal\"\n\t\"time\"\n\t\"github.com/gin-gonic/gin\"\n)\n\nfunc main() {\n\trouter := gin.Default()\n\trouter.GET(\"/\", func(c *gin.Context) {\n\t\ttime.Sleep(3 * time.Second)\n\t\tlog.Printf(http.StatusOK, \"Handle request success\")\n\t})\n\n\tsrv := &http.Server{\n\t\tAddr:    \":8080\",\n\t\tHandler: router,\n\t}\n\n\tgo func() {\n\t\tif err := srv.ListenAndServe(); err != nil {\n\t\t\tlog.Printf(\"listen: %s\\n\", err)\n\t\t}\n\t}()\n\n\tquit := make(chan os.Signal)\n\tsignal.Notify(quit, os.Interrupt)\n\t<-quit\n\tlog.Println(\"Shutdown Server ...\")\n\n\tctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n\tdefer cancel()\n\tif err := srv.Shutdown(ctx); err != nil {\n\t\tlog.Fatal(\"Server Shutdown:\", err)\n\t}\n\tlog.Println(\"Server exist\")\n}\n```\n\n3HTTPServer 5\"\"`curl localhost:8080` Ctrl+C  HTTP \n\n```\n[GIN-debug] [WARNING] Running in \"debug\" mode. Switch to \"release\" mode in production.\n - using env:\texport GIN_MODE=release\n - using code:\tgin.SetMode(gin.ReleaseMode)\n\n[GIN-debug] GET    /                         --> main.main.func1 (3 handlers)\nHandle Request success\n[GIN] 2017/07/12 - 20:30:47 | 200 |  3.000385597s | 127.0.0.1 |   GET     /\n^C  //Ctrl+C\nShutdown Server ...\nlisten: http: Server closed\nHandle Request success //\n[GIN] 2017/07/12 - 20:30:53 | 200 |  3.000360362s | 127.0.0.1 |   GET     /\nServer exist\n```\n","slug":"2017-07-13-httpserver-graceful-shutdown-in-go","published":1,"updated":"2018-07-01T05:58:47.000Z","photos":[],"link":"","_id":"cjv8xuick0056m1tjg6y3yb90","content":"<p>Go1.8Go 1.8 HTTPServer  GraceFul ShutDown</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src/net/http/server.go</span></span><br><span class=\"line\"><span class=\"comment\">// Shutdown gracefully shuts down the server without interrupting any active connections. Shutdown works by first closing all open listeners, then closing all idle connections, and then waiting indefinitely for connections to return to idle and then shut down. If the provided context expires before the shutdown is complete, then the context's error is returned.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(srv *Server)</span> <span class=\"title\">Shutdown</span><span class=\"params\">(ctx context.Context)</span> <span class=\"title\">error</span></span> &#123;</span><br><span class=\"line\">    atomic.AddInt32(&amp;srv.inShutdown, <span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">defer</span> atomic.AddInt32(&amp;srv.inShutdown, <span class=\"number\">-1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    srv.mu.Lock()</span><br><span class=\"line\">    lnerr := srv.closeListenersLocked()</span><br><span class=\"line\">    srv.closeDoneChanLocked()</span><br><span class=\"line\">    srv.mu.Unlock()</span><br><span class=\"line\"></span><br><span class=\"line\">    ticker := time.NewTicker(shutdownPollInterval)</span><br><span class=\"line\">    <span class=\"keyword\">defer</span> ticker.Stop()</span><br><span class=\"line\">    <span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> srv.closeIdleConns() &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> lnerr</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">select</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> &lt;-ctx.Done():</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ctx.Err()</span><br><span class=\"line\">        <span class=\"keyword\">case</span> &lt;-ticker.C:</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>server.Shutdown  active  listener idle  Connections active  connection  idle Server</p>\n<p> Connection  active  server  block <br>Shutdown  Context  Context <br>Shutdown  active Connection<br> Shutdown </p>\n<p></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">\t<span class=\"string\">\"context\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"log\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"net/http\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"os\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"os/signal\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"time\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"github.com/gin-gonic/gin\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\trouter := gin.Default()</span><br><span class=\"line\">\trouter.GET(<span class=\"string\">\"/\"</span>, <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(c *gin.Context)</span></span> &#123;</span><br><span class=\"line\">\t\ttime.Sleep(<span class=\"number\">3</span> * time.Second)</span><br><span class=\"line\">\t\tlog.Printf(http.StatusOK, <span class=\"string\">\"Handle request success\"</span>)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">\tsrv := &amp;http.Server&#123;</span><br><span class=\"line\">\t\tAddr:    <span class=\"string\">\":8080\"</span>,</span><br><span class=\"line\">\t\tHandler: router,</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">go</span> <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err := srv.ListenAndServe(); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlog.Printf(<span class=\"string\">\"listen: %s\\n\"</span>, err)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;()</span><br><span class=\"line\"></span><br><span class=\"line\">\tquit := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> os.Signal)</span><br><span class=\"line\">\tsignal.Notify(quit, os.Interrupt)</span><br><span class=\"line\">\t&lt;-quit</span><br><span class=\"line\">\tlog.Println(<span class=\"string\">\"Shutdown Server ...\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">\tctx, cancel := context.WithTimeout(context.Background(), <span class=\"number\">5</span>*time.Second)</span><br><span class=\"line\">\t<span class=\"keyword\">defer</span> cancel()</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err := srv.Shutdown(ctx); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Fatal(<span class=\"string\">\"Server Shutdown:\"</span>, err)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tlog.Println(<span class=\"string\">\"Server exist\"</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>3HTTPServer 5<code>curl localhost:8080</code> Ctrl+C  HTTP </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GIN-debug] [WARNING] Running in &quot;debug&quot; mode. Switch to &quot;release&quot; mode in production.</span><br><span class=\"line\"> - using env:\texport GIN_MODE=release</span><br><span class=\"line\"> - using code:\tgin.SetMode(gin.ReleaseMode)</span><br><span class=\"line\"></span><br><span class=\"line\">[GIN-debug] GET    /                         --&gt; main.main.func1 (3 handlers)</span><br><span class=\"line\">Handle Request success</span><br><span class=\"line\">[GIN] 2017/07/12 - 20:30:47 | 200 |  3.000385597s | 127.0.0.1 |   GET     /</span><br><span class=\"line\">^C  //Ctrl+C</span><br><span class=\"line\">Shutdown Server ...</span><br><span class=\"line\">listen: http: Server closed</span><br><span class=\"line\">Handle Request success //</span><br><span class=\"line\">[GIN] 2017/07/12 - 20:30:53 | 200 |  3.000360362s | 127.0.0.1 |   GET     /</span><br><span class=\"line\">Server exist</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>Go1.8Go 1.8 HTTPServer  GraceFul ShutDown</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src/net/http/server.go</span></span><br><span class=\"line\"><span class=\"comment\">// Shutdown gracefully shuts down the server without interrupting any active connections. Shutdown works by first closing all open listeners, then closing all idle connections, and then waiting indefinitely for connections to return to idle and then shut down. If the provided context expires before the shutdown is complete, then the context's error is returned.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(srv *Server)</span> <span class=\"title\">Shutdown</span><span class=\"params\">(ctx context.Context)</span> <span class=\"title\">error</span></span> &#123;</span><br><span class=\"line\">    atomic.AddInt32(&amp;srv.inShutdown, <span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">defer</span> atomic.AddInt32(&amp;srv.inShutdown, <span class=\"number\">-1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    srv.mu.Lock()</span><br><span class=\"line\">    lnerr := srv.closeListenersLocked()</span><br><span class=\"line\">    srv.closeDoneChanLocked()</span><br><span class=\"line\">    srv.mu.Unlock()</span><br><span class=\"line\"></span><br><span class=\"line\">    ticker := time.NewTicker(shutdownPollInterval)</span><br><span class=\"line\">    <span class=\"keyword\">defer</span> ticker.Stop()</span><br><span class=\"line\">    <span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> srv.closeIdleConns() &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> lnerr</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">select</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> &lt;-ctx.Done():</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ctx.Err()</span><br><span class=\"line\">        <span class=\"keyword\">case</span> &lt;-ticker.C:</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>server.Shutdown  active  listener idle  Connections active  connection  idle Server</p>\n<p> Connection  active  server  block <br>Shutdown  Context  Context <br>Shutdown  active Connection<br> Shutdown </p>\n<p></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">\t<span class=\"string\">\"context\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"log\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"net/http\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"os\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"os/signal\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"time\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"github.com/gin-gonic/gin\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\trouter := gin.Default()</span><br><span class=\"line\">\trouter.GET(<span class=\"string\">\"/\"</span>, <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(c *gin.Context)</span></span> &#123;</span><br><span class=\"line\">\t\ttime.Sleep(<span class=\"number\">3</span> * time.Second)</span><br><span class=\"line\">\t\tlog.Printf(http.StatusOK, <span class=\"string\">\"Handle request success\"</span>)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">\tsrv := &amp;http.Server&#123;</span><br><span class=\"line\">\t\tAddr:    <span class=\"string\">\":8080\"</span>,</span><br><span class=\"line\">\t\tHandler: router,</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">go</span> <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err := srv.ListenAndServe(); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlog.Printf(<span class=\"string\">\"listen: %s\\n\"</span>, err)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;()</span><br><span class=\"line\"></span><br><span class=\"line\">\tquit := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> os.Signal)</span><br><span class=\"line\">\tsignal.Notify(quit, os.Interrupt)</span><br><span class=\"line\">\t&lt;-quit</span><br><span class=\"line\">\tlog.Println(<span class=\"string\">\"Shutdown Server ...\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">\tctx, cancel := context.WithTimeout(context.Background(), <span class=\"number\">5</span>*time.Second)</span><br><span class=\"line\">\t<span class=\"keyword\">defer</span> cancel()</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err := srv.Shutdown(ctx); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Fatal(<span class=\"string\">\"Server Shutdown:\"</span>, err)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tlog.Println(<span class=\"string\">\"Server exist\"</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>3HTTPServer 5<code>curl localhost:8080</code> Ctrl+C  HTTP </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GIN-debug] [WARNING] Running in &quot;debug&quot; mode. Switch to &quot;release&quot; mode in production.</span><br><span class=\"line\"> - using env:\texport GIN_MODE=release</span><br><span class=\"line\"> - using code:\tgin.SetMode(gin.ReleaseMode)</span><br><span class=\"line\"></span><br><span class=\"line\">[GIN-debug] GET    /                         --&gt; main.main.func1 (3 handlers)</span><br><span class=\"line\">Handle Request success</span><br><span class=\"line\">[GIN] 2017/07/12 - 20:30:47 | 200 |  3.000385597s | 127.0.0.1 |   GET     /</span><br><span class=\"line\">^C  //Ctrl+C</span><br><span class=\"line\">Shutdown Server ...</span><br><span class=\"line\">listen: http: Server closed</span><br><span class=\"line\">Handle Request success //</span><br><span class=\"line\">[GIN] 2017/07/12 - 20:30:53 | 200 |  3.000360362s | 127.0.0.1 |   GET     /</span><br><span class=\"line\">Server exist</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"MIT 6.824 MapReduce","date":"2017-06-04T05:27:00.000Z","comments":1,"description":"MapReduce","_content":"\n MIT 6.824 [Lab1 MapReduce](http://nil.csail.mit.edu/6.824/2017/labs/lab-1.html)\n\n### MapReduce \n\n*  M  Mi\n*  master \n* master  worker Mi  map  KV \n*  KV  nReduce  Reduce  map  Mi  nReduce  Rimrtmp-JobName-Mi-Ri Mi Ri  M * nReduce \n*  Mi  Ri Key  Key  Value  Key /list(value)\n*  Reducelist(value) R  mrtmp.JobName-res-Ri\n*  Merge \n\n### \n\n* Part1  doMap  doReducedoMap 34. doReduce 56\n* Part2  main/wc.go Part1\n* Part3  map  reduce RPCchannel \n\n### \n\n[](https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce)\n\n* common.go [11-32](https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/common.go#L11)C\n* common_reduce.go [Line75](https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/common_reduce.go#L75)sort.strings \n* commo_rpc.go [Line59](https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/common_rpc.go#L59)rpc\n* master.go [Line95-99](https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/master.go#L95)mr.newCond.Broadcast(),mr.wait()\n* master.go [Line15-16](https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/master.go#L15) Master sync.Mutex,  Master sync.Mutex.  master.Lock()\n* master_rpc.go [Line14](https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/master_rpc.go#L14),[Line37](https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/master_rpc.go#L37)chanel closecase <- shutdown  \n","source":"_posts/2017-06-04-mit-6-dot-824-mapreduce.markdown","raw":"---\nlayout: post\ntitle: \"MIT 6.824 MapReduce\"\ndate: 2017-06-04 13:27\ncomments: true\ncategories: Program\ndescription: MapReduce\n---\n\n MIT 6.824 [Lab1 MapReduce](http://nil.csail.mit.edu/6.824/2017/labs/lab-1.html)\n\n### MapReduce \n\n*  M  Mi\n*  master \n* master  worker Mi  map  KV \n*  KV  nReduce  Reduce  map  Mi  nReduce  Rimrtmp-JobName-Mi-Ri Mi Ri  M * nReduce \n*  Mi  Ri Key  Key  Value  Key /list(value)\n*  Reducelist(value) R  mrtmp.JobName-res-Ri\n*  Merge \n\n### \n\n* Part1  doMap  doReducedoMap 34. doReduce 56\n* Part2  main/wc.go Part1\n* Part3  map  reduce RPCchannel \n\n### \n\n[](https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce)\n\n* common.go [11-32](https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/common.go#L11)C\n* common_reduce.go [Line75](https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/common_reduce.go#L75)sort.strings \n* commo_rpc.go [Line59](https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/common_rpc.go#L59)rpc\n* master.go [Line95-99](https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/master.go#L95)mr.newCond.Broadcast(),mr.wait()\n* master.go [Line15-16](https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/master.go#L15) Master sync.Mutex,  Master sync.Mutex.  master.Lock()\n* master_rpc.go [Line14](https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/master_rpc.go#L14),[Line37](https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/master_rpc.go#L37)chanel closecase <- shutdown  \n","slug":"2017-06-04-mit-6-dot-824-mapreduce","published":1,"updated":"2018-07-01T05:58:41.000Z","photos":[],"link":"","_id":"cjv8xuicl0058m1tjnz86r22p","content":"<p> MIT 6.824 <a href=\"http://nil.csail.mit.edu/6.824/2017/labs/lab-1.html\" target=\"_blank\" rel=\"noopener\">Lab1 MapReduce</a></p>\n<h3 id=\"MapReduce-\"><a href=\"#MapReduce-\" class=\"headerlink\" title=\"MapReduce \"></a>MapReduce </h3><ul>\n<li> M  Mi</li>\n<li> master </li>\n<li>master  worker Mi  map  KV </li>\n<li> KV  nReduce  Reduce  map  Mi  nReduce  Rimrtmp-JobName-Mi-Ri Mi Ri  M * nReduce </li>\n<li> Mi  Ri Key  Key  Value  Key /list(value)</li>\n<li> Reducelist(value) R  mrtmp.JobName-res-Ri</li>\n<li> Merge </li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>Part1  doMap  doReducedoMap 34. doReduce 56</li>\n<li>Part2  main/wc.go Part1</li>\n<li>Part3  map  reduce RPCchannel </li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce\" target=\"_blank\" rel=\"noopener\"></a></p>\n<ul>\n<li>common.go <a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/common.go#L11\" target=\"_blank\" rel=\"noopener\">11-32</a>C</li>\n<li>common_reduce.go <a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/common_reduce.go#L75\" target=\"_blank\" rel=\"noopener\">Line75</a>sort.strings </li>\n<li>commo_rpc.go <a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/common_rpc.go#L59\" target=\"_blank\" rel=\"noopener\">Line59</a>rpc</li>\n<li>master.go <a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/master.go#L95\" target=\"_blank\" rel=\"noopener\">Line95-99</a>mr.newCond.Broadcast(),mr.wait()</li>\n<li>master.go <a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/master.go#L15\" target=\"_blank\" rel=\"noopener\">Line15-16</a> Master sync.Mutex,  Master sync.Mutex.  master.Lock()</li>\n<li>master_rpc.go <a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/master_rpc.go#L14\" target=\"_blank\" rel=\"noopener\">Line14</a>,<a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/master_rpc.go#L37\" target=\"_blank\" rel=\"noopener\">Line37</a>chanel closecase &lt;- shutdown  </li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p> MIT 6.824 <a href=\"http://nil.csail.mit.edu/6.824/2017/labs/lab-1.html\" target=\"_blank\" rel=\"noopener\">Lab1 MapReduce</a></p>\n<h3 id=\"MapReduce-\"><a href=\"#MapReduce-\" class=\"headerlink\" title=\"MapReduce \"></a>MapReduce </h3><ul>\n<li> M  Mi</li>\n<li> master </li>\n<li>master  worker Mi  map  KV </li>\n<li> KV  nReduce  Reduce  map  Mi  nReduce  Rimrtmp-JobName-Mi-Ri Mi Ri  M * nReduce </li>\n<li> Mi  Ri Key  Key  Value  Key /list(value)</li>\n<li> Reducelist(value) R  mrtmp.JobName-res-Ri</li>\n<li> Merge </li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>Part1  doMap  doReducedoMap 34. doReduce 56</li>\n<li>Part2  main/wc.go Part1</li>\n<li>Part3  map  reduce RPCchannel </li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce\" target=\"_blank\" rel=\"noopener\"></a></p>\n<ul>\n<li>common.go <a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/common.go#L11\" target=\"_blank\" rel=\"noopener\">11-32</a>C</li>\n<li>common_reduce.go <a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/common_reduce.go#L75\" target=\"_blank\" rel=\"noopener\">Line75</a>sort.strings </li>\n<li>commo_rpc.go <a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/common_rpc.go#L59\" target=\"_blank\" rel=\"noopener\">Line59</a>rpc</li>\n<li>master.go <a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/master.go#L95\" target=\"_blank\" rel=\"noopener\">Line95-99</a>mr.newCond.Broadcast(),mr.wait()</li>\n<li>master.go <a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/master.go#L15\" target=\"_blank\" rel=\"noopener\">Line15-16</a> Master sync.Mutex,  Master sync.Mutex.  master.Lock()</li>\n<li>master_rpc.go <a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/master_rpc.go#L14\" target=\"_blank\" rel=\"noopener\">Line14</a>,<a href=\"https://github.com/zheng-ji/ToyCollection/blob/master/6.824-golabs-2017/src/mapreduce/master_rpc.go#L37\" target=\"_blank\" rel=\"noopener\">Line37</a>chanel closecase &lt;- shutdown  </li>\n</ul>\n"},{"layout":"post","title":"boost-utility","date":"2018-07-01T05:50:03.000Z","_content":"\n`BOOST`  C++11,  BOOST  BOOST  utility\n\n* BOOST_SCOPE_EXIT\n\nBOOST_SCOPE_EXIT,   BOOST_SCOPE_EXITBOOST_SCOPE_EXIT_END\n\n\n\n```c++\nvoid func (int ans) \n{\n    bool flag = false;\n    BOOST_SCOPE_EXIT(&flag) {\n        if (!flag)\n            std::cout << \"false\" <<std::endl;\n        else\n            std::cout << \"true\" << std::endl;\n    } BOOST_SCOPE_EXIT_END\n    flag = ((ans == 1)? true:false);\n}\n```\n\n* boost::split\n\n\n\n```\n#include <boost/algorithm/string/split.hpp>\nint main( int argc, char** argv )\n{\n    string source = \"how to live in the world!\";\n    vector<string> destination;\n    boost::split( destination, source, boost::is_any_of( \" ,!\" ), boost::token_compress_on );\n    vector<string>::iterator it ;\n    for (it= destination.begin(); it != destination.end(); ++ it)\n        cout << *it << endl;\n    return 0;\n}\n```\n\n* boost::regex\n\n\n\n```\nboost::regex_match(str, boost::regex(\"^1[3|4|5|8][0-9]{9}$\")) \n```\n\n* BOOST \n\n```\n#include \"boost/thread/shared_mutex.hpp\"\nboost::shared_mutex m_rwlock;\nboost::shared_lock<boost::shared_mutex> guard(m_rwlock);\nboost::unique_lock<boost::shared_mutex> guard(m_rwlock);\n\n#include \"boost/thread/locks.hpp\"\n#include \"boost/thread/shared_mutex.hpp\"\nusing namespace std;\n\n//\nclass NameMap{\n\n    private:\n        boost::shared_mutex m_rwlock;\n        map<uint32_t, string> m_map;\n    public:\n        bool find(uint32_t uin, string & nickname) {\n            boost::shared_lock<boost::shared_mutex> guard(m_rwlock);\n            auto it = m_map.find(uin);\n            if(it == m_map.end()){\n                return false;\n            }   \n            nickname = it->second;\n            return true;\n        }   \n\n        void insert(uint32_t uin, const string & nickname) {\n            boost::unique_lock<boost::shared_mutex> guard(m_rwlock);\n            m_map[uin]=nickname;\n        }   \n\n        size_t size(){\n            boost::shared_lock<boost::shared_mutex> guard(m_rwlock);\n            return m_map.size();\n        }   \n};\n```\n\n\n\n","source":"_posts/2018-07-01-boost-utility.md","raw":"---\nlayout: post\ntitle: boost-utility\ndate: 2018-07-01 13:50:03\ncategories: Program\n---\n\n`BOOST`  C++11,  BOOST  BOOST  utility\n\n* BOOST_SCOPE_EXIT\n\nBOOST_SCOPE_EXIT,   BOOST_SCOPE_EXITBOOST_SCOPE_EXIT_END\n\n\n\n```c++\nvoid func (int ans) \n{\n    bool flag = false;\n    BOOST_SCOPE_EXIT(&flag) {\n        if (!flag)\n            std::cout << \"false\" <<std::endl;\n        else\n            std::cout << \"true\" << std::endl;\n    } BOOST_SCOPE_EXIT_END\n    flag = ((ans == 1)? true:false);\n}\n```\n\n* boost::split\n\n\n\n```\n#include <boost/algorithm/string/split.hpp>\nint main( int argc, char** argv )\n{\n    string source = \"how to live in the world!\";\n    vector<string> destination;\n    boost::split( destination, source, boost::is_any_of( \" ,!\" ), boost::token_compress_on );\n    vector<string>::iterator it ;\n    for (it= destination.begin(); it != destination.end(); ++ it)\n        cout << *it << endl;\n    return 0;\n}\n```\n\n* boost::regex\n\n\n\n```\nboost::regex_match(str, boost::regex(\"^1[3|4|5|8][0-9]{9}$\")) \n```\n\n* BOOST \n\n```\n#include \"boost/thread/shared_mutex.hpp\"\nboost::shared_mutex m_rwlock;\nboost::shared_lock<boost::shared_mutex> guard(m_rwlock);\nboost::unique_lock<boost::shared_mutex> guard(m_rwlock);\n\n#include \"boost/thread/locks.hpp\"\n#include \"boost/thread/shared_mutex.hpp\"\nusing namespace std;\n\n//\nclass NameMap{\n\n    private:\n        boost::shared_mutex m_rwlock;\n        map<uint32_t, string> m_map;\n    public:\n        bool find(uint32_t uin, string & nickname) {\n            boost::shared_lock<boost::shared_mutex> guard(m_rwlock);\n            auto it = m_map.find(uin);\n            if(it == m_map.end()){\n                return false;\n            }   \n            nickname = it->second;\n            return true;\n        }   \n\n        void insert(uint32_t uin, const string & nickname) {\n            boost::unique_lock<boost::shared_mutex> guard(m_rwlock);\n            m_map[uin]=nickname;\n        }   \n\n        size_t size(){\n            boost::shared_lock<boost::shared_mutex> guard(m_rwlock);\n            return m_map.size();\n        }   \n};\n```\n\n\n\n","slug":"2018-07-01-boost-utility","published":1,"updated":"2018-07-27T15:55:14.000Z","comments":1,"photos":[],"link":"","_id":"cjv8xuicn005am1tjfe8utuc2","content":"<p><code>BOOST</code>  C++11,  BOOST  BOOST  utility</p>\n<ul>\n<li>BOOST_SCOPE_EXIT</li>\n</ul>\n<p>BOOST_SCOPE_EXIT,   BOOST_SCOPE_EXITBOOST_SCOPE_EXIT_END</p>\n<p></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">func</span> <span class=\"params\">(<span class=\"keyword\">int</span> ans)</span> </span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">bool</span> flag = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    BOOST_SCOPE_EXIT(&amp;flag) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!flag)</span><br><span class=\"line\">            <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"false\"</span> &lt;&lt;<span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">            <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"true\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    &#125; BOOST_SCOPE_EXIT_END</span><br><span class=\"line\">    flag = ((ans == <span class=\"number\">1</span>)? <span class=\"literal\">true</span>:<span class=\"literal\">false</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>boost::split</li>\n</ul>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include &lt;boost/algorithm/string/split.hpp&gt;</span><br><span class=\"line\">int main( int argc, char** argv )</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    string source = &quot;how to live in the world!&quot;;</span><br><span class=\"line\">    vector&lt;string&gt; destination;</span><br><span class=\"line\">    boost::split( destination, source, boost::is_any_of( &quot; ,!&quot; ), boost::token_compress_on );</span><br><span class=\"line\">    vector&lt;string&gt;::iterator it ;</span><br><span class=\"line\">    for (it= destination.begin(); it != destination.end(); ++ it)</span><br><span class=\"line\">        cout &lt;&lt; *it &lt;&lt; endl;</span><br><span class=\"line\">    return 0;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>boost::regex</li>\n</ul>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">boost::regex_match(str, boost::regex(&quot;^1[3|4|5|8][0-9]&#123;9&#125;$&quot;))</span><br></pre></td></tr></table></figure>\n<ul>\n<li>BOOST </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include &quot;boost/thread/shared_mutex.hpp&quot;</span><br><span class=\"line\">boost::shared_mutex m_rwlock;</span><br><span class=\"line\">boost::shared_lock&lt;boost::shared_mutex&gt; guard(m_rwlock);</span><br><span class=\"line\">boost::unique_lock&lt;boost::shared_mutex&gt; guard(m_rwlock);</span><br><span class=\"line\"></span><br><span class=\"line\">#include &quot;boost/thread/locks.hpp&quot;</span><br><span class=\"line\">#include &quot;boost/thread/shared_mutex.hpp&quot;</span><br><span class=\"line\">using namespace std;</span><br><span class=\"line\"></span><br><span class=\"line\">//</span><br><span class=\"line\">class NameMap&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private:</span><br><span class=\"line\">        boost::shared_mutex m_rwlock;</span><br><span class=\"line\">        map&lt;uint32_t, string&gt; m_map;</span><br><span class=\"line\">    public:</span><br><span class=\"line\">        bool find(uint32_t uin, string &amp; nickname) &#123;</span><br><span class=\"line\">            boost::shared_lock&lt;boost::shared_mutex&gt; guard(m_rwlock);</span><br><span class=\"line\">            auto it = m_map.find(uin);</span><br><span class=\"line\">            if(it == m_map.end())&#123;</span><br><span class=\"line\">                return false;</span><br><span class=\"line\">            &#125;   </span><br><span class=\"line\">            nickname = it-&gt;second;</span><br><span class=\"line\">            return true;</span><br><span class=\"line\">        &#125;   </span><br><span class=\"line\"></span><br><span class=\"line\">        void insert(uint32_t uin, const string &amp; nickname) &#123;</span><br><span class=\"line\">            boost::unique_lock&lt;boost::shared_mutex&gt; guard(m_rwlock);</span><br><span class=\"line\">            m_map[uin]=nickname;</span><br><span class=\"line\">        &#125;   </span><br><span class=\"line\"></span><br><span class=\"line\">        size_t size()&#123;</span><br><span class=\"line\">            boost::shared_lock&lt;boost::shared_mutex&gt; guard(m_rwlock);</span><br><span class=\"line\">            return m_map.size();</span><br><span class=\"line\">        &#125;   </span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><code>BOOST</code>  C++11,  BOOST  BOOST  utility</p>\n<ul>\n<li>BOOST_SCOPE_EXIT</li>\n</ul>\n<p>BOOST_SCOPE_EXIT,   BOOST_SCOPE_EXITBOOST_SCOPE_EXIT_END</p>\n<p></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">func</span> <span class=\"params\">(<span class=\"keyword\">int</span> ans)</span> </span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">bool</span> flag = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    BOOST_SCOPE_EXIT(&amp;flag) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!flag)</span><br><span class=\"line\">            <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"false\"</span> &lt;&lt;<span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">            <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"true\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    &#125; BOOST_SCOPE_EXIT_END</span><br><span class=\"line\">    flag = ((ans == <span class=\"number\">1</span>)? <span class=\"literal\">true</span>:<span class=\"literal\">false</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>boost::split</li>\n</ul>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include &lt;boost/algorithm/string/split.hpp&gt;</span><br><span class=\"line\">int main( int argc, char** argv )</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    string source = &quot;how to live in the world!&quot;;</span><br><span class=\"line\">    vector&lt;string&gt; destination;</span><br><span class=\"line\">    boost::split( destination, source, boost::is_any_of( &quot; ,!&quot; ), boost::token_compress_on );</span><br><span class=\"line\">    vector&lt;string&gt;::iterator it ;</span><br><span class=\"line\">    for (it= destination.begin(); it != destination.end(); ++ it)</span><br><span class=\"line\">        cout &lt;&lt; *it &lt;&lt; endl;</span><br><span class=\"line\">    return 0;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>boost::regex</li>\n</ul>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">boost::regex_match(str, boost::regex(&quot;^1[3|4|5|8][0-9]&#123;9&#125;$&quot;))</span><br></pre></td></tr></table></figure>\n<ul>\n<li>BOOST </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include &quot;boost/thread/shared_mutex.hpp&quot;</span><br><span class=\"line\">boost::shared_mutex m_rwlock;</span><br><span class=\"line\">boost::shared_lock&lt;boost::shared_mutex&gt; guard(m_rwlock);</span><br><span class=\"line\">boost::unique_lock&lt;boost::shared_mutex&gt; guard(m_rwlock);</span><br><span class=\"line\"></span><br><span class=\"line\">#include &quot;boost/thread/locks.hpp&quot;</span><br><span class=\"line\">#include &quot;boost/thread/shared_mutex.hpp&quot;</span><br><span class=\"line\">using namespace std;</span><br><span class=\"line\"></span><br><span class=\"line\">//</span><br><span class=\"line\">class NameMap&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private:</span><br><span class=\"line\">        boost::shared_mutex m_rwlock;</span><br><span class=\"line\">        map&lt;uint32_t, string&gt; m_map;</span><br><span class=\"line\">    public:</span><br><span class=\"line\">        bool find(uint32_t uin, string &amp; nickname) &#123;</span><br><span class=\"line\">            boost::shared_lock&lt;boost::shared_mutex&gt; guard(m_rwlock);</span><br><span class=\"line\">            auto it = m_map.find(uin);</span><br><span class=\"line\">            if(it == m_map.end())&#123;</span><br><span class=\"line\">                return false;</span><br><span class=\"line\">            &#125;   </span><br><span class=\"line\">            nickname = it-&gt;second;</span><br><span class=\"line\">            return true;</span><br><span class=\"line\">        &#125;   </span><br><span class=\"line\"></span><br><span class=\"line\">        void insert(uint32_t uin, const string &amp; nickname) &#123;</span><br><span class=\"line\">            boost::unique_lock&lt;boost::shared_mutex&gt; guard(m_rwlock);</span><br><span class=\"line\">            m_map[uin]=nickname;</span><br><span class=\"line\">        &#125;   </span><br><span class=\"line\"></span><br><span class=\"line\">        size_t size()&#123;</span><br><span class=\"line\">            boost::shared_lock&lt;boost::shared_mutex&gt; guard(m_rwlock);</span><br><span class=\"line\">            return m_map.size();</span><br><span class=\"line\">        &#125;   </span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"","date":"2018-06-17T07:49:00.000Z","comments":1,"_content":"\n \n\n,, , , , , ,  , \n\n,,  C++ , \n\n\n* \n* \n* \n*  IM \n\n  \"\" , \n\n,,,, \n\n, , \n","source":"_posts/2018-06-17-ban-nian-sui-xiang.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2018-06-17 15:49\ncomments: true\ncategories: Life\n---\n\n \n\n,, , , , , ,  , \n\n,,  C++ , \n\n\n* \n* \n* \n*  IM \n\n  \"\" , \n\n,,,, \n\n, , \n","slug":"2018-06-17-ban-nian-sui-xiang","published":1,"updated":"2018-06-17T11:55:31.000Z","photos":[],"link":"","_id":"cjv8xuico005cm1tjhks11ugs","content":"<p> </p>\n<p>,, , , , , ,  , </p>\n<p>,,  C++ , </p>\n<p></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li> IM </li>\n</ul>\n<p>   , </p>\n<p>,,,, </p>\n<p>, , </p>\n","site":{"data":{}},"excerpt":"","more":"<p> </p>\n<p>,, , , , , ,  , </p>\n<p>,,  C++ , </p>\n<p></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li> IM </li>\n</ul>\n<p>   , </p>\n<p>,,,, </p>\n<p>, , </p>\n"},{"title":"Libco","date":"2018-07-14T08:46:46.000Z","_content":"\n> Libco   C/C++ ,  co_create/co_resume/co_yield  co_poll\n\n [example_cond.cpp](https://github.com/Tencent/libco/blob/master/example_cond.cpp) \n\n```c\n#include <unistd.h>\n#include <stdio.h>\n#include <stdlib.h>\n#include <queue>\n#include \"co_routine.h\"\nusing namespace std;\nstruct stTask_t\n{\n    int id;\n};\nstruct stEnv_t\n{\n    stCoCond_t* cond;\n    queue<stTask_t*> task_queue;\n};\nvoid* Producer(void* args)\n{\n    co_enable_hook_sys();\n    stEnv_t* env = (stEnv_t*)args;\n    int id = 0;\n    while (true)\n    {\n        stTask_t* task = (stTask_t*)calloc(1, sizeof(stTask_t));\n        task->id = id++;\n        env->task_queue.push(task);\n        printf(\"%s:%d produce task %d\\n\", __func__, __LINE__, task->id);\n        co_cond_signal(env->cond);\n        poll(NULL, 0, 1000);\n    }\n    return NULL;\n}\nvoid* Consumer(void* args)\n{\n    co_enable_hook_sys();\n    stEnv_t* env = (stEnv_t*)args;\n    while (true)\n    {\n        if (env->task_queue.empty())\n        {\n            co_cond_timedwait(env->cond, -1);\n            continue;\n        }\n        stTask_t* task = env->task_queue.front();\n        env->task_queue.pop();\n        printf(\"%s:%d consume task %d\\n\", __func__, __LINE__, task->id);\n        free(task);\n    }\n    return NULL;\n}\nint main()\n{\n    stEnv_t* env = new stEnv_t;\n    env->cond = co_cond_alloc();\n\n    stCoRoutine_t* consumer_routine;\n    co_create(&consumer_routine, NULL, Consumer, env);\n    co_resume(consumer_routine);\n\n    stCoRoutine_t* producer_routine;\n    co_create(&producer_routine, NULL, Producer, env);\n    co_resume(producer_routine);\n\n    co_eventloop(co_get_epoll_ct(), NULL, NULL);\n    return 0;\n}\n```\n\n\n```\ngit clone https://github.com/Tencent/libco\ncd libco\nmake\n// -ldl -lpthread\ng++ example_cond.cpp -o main  -L./lib -lcolib -lpthread -ldl\n./main \n```\n\n\n\n* co_create , \nco attr  NULLroutine arg \n\n```\nint co_create(stCoRoutine_t** co, const stCoRoutineAttr_t* attr,\nvoid* (*routine)(void*), void* arg);\n```\n\n\n* co_resume \n\n co\n\n* co_eventloop\n\nco_eventloop  epoll ctx  co_get_epoll_ct()pfn  co_eventloop arg  pfn\n\n```\nvoid co_eventloop(stCoEpoll_t *ctx, pfn_co_eventloop_t pfn, void *arg)\n```\n\n\n* co_enable_hook_sys() \n\nco_enable_hook_sys  libco  io  libco \n\n*  poll  sleep \n sleep  poll  co_poll\n\n```\nint poll(struct pollfd fds[], nfds_t nfds, int timeout)\n```\n\n* \n\n```\nco_cond_alloc\nco_cond_signal\nco_cond_broadcast\nco_cond_timedwait\n```\n","source":"_posts/2018-07-14-libco-study.md","raw":"---\ntitle: Libco\ndate: 2018-07-14 16:46:46\ncategories: Program\n---\n\n> Libco   C/C++ ,  co_create/co_resume/co_yield  co_poll\n\n [example_cond.cpp](https://github.com/Tencent/libco/blob/master/example_cond.cpp) \n\n```c\n#include <unistd.h>\n#include <stdio.h>\n#include <stdlib.h>\n#include <queue>\n#include \"co_routine.h\"\nusing namespace std;\nstruct stTask_t\n{\n    int id;\n};\nstruct stEnv_t\n{\n    stCoCond_t* cond;\n    queue<stTask_t*> task_queue;\n};\nvoid* Producer(void* args)\n{\n    co_enable_hook_sys();\n    stEnv_t* env = (stEnv_t*)args;\n    int id = 0;\n    while (true)\n    {\n        stTask_t* task = (stTask_t*)calloc(1, sizeof(stTask_t));\n        task->id = id++;\n        env->task_queue.push(task);\n        printf(\"%s:%d produce task %d\\n\", __func__, __LINE__, task->id);\n        co_cond_signal(env->cond);\n        poll(NULL, 0, 1000);\n    }\n    return NULL;\n}\nvoid* Consumer(void* args)\n{\n    co_enable_hook_sys();\n    stEnv_t* env = (stEnv_t*)args;\n    while (true)\n    {\n        if (env->task_queue.empty())\n        {\n            co_cond_timedwait(env->cond, -1);\n            continue;\n        }\n        stTask_t* task = env->task_queue.front();\n        env->task_queue.pop();\n        printf(\"%s:%d consume task %d\\n\", __func__, __LINE__, task->id);\n        free(task);\n    }\n    return NULL;\n}\nint main()\n{\n    stEnv_t* env = new stEnv_t;\n    env->cond = co_cond_alloc();\n\n    stCoRoutine_t* consumer_routine;\n    co_create(&consumer_routine, NULL, Consumer, env);\n    co_resume(consumer_routine);\n\n    stCoRoutine_t* producer_routine;\n    co_create(&producer_routine, NULL, Producer, env);\n    co_resume(producer_routine);\n\n    co_eventloop(co_get_epoll_ct(), NULL, NULL);\n    return 0;\n}\n```\n\n\n```\ngit clone https://github.com/Tencent/libco\ncd libco\nmake\n// -ldl -lpthread\ng++ example_cond.cpp -o main  -L./lib -lcolib -lpthread -ldl\n./main \n```\n\n\n\n* co_create , \nco attr  NULLroutine arg \n\n```\nint co_create(stCoRoutine_t** co, const stCoRoutineAttr_t* attr,\nvoid* (*routine)(void*), void* arg);\n```\n\n\n* co_resume \n\n co\n\n* co_eventloop\n\nco_eventloop  epoll ctx  co_get_epoll_ct()pfn  co_eventloop arg  pfn\n\n```\nvoid co_eventloop(stCoEpoll_t *ctx, pfn_co_eventloop_t pfn, void *arg)\n```\n\n\n* co_enable_hook_sys() \n\nco_enable_hook_sys  libco  io  libco \n\n*  poll  sleep \n sleep  poll  co_poll\n\n```\nint poll(struct pollfd fds[], nfds_t nfds, int timeout)\n```\n\n* \n\n```\nco_cond_alloc\nco_cond_signal\nco_cond_broadcast\nco_cond_timedwait\n```\n","slug":"2018-07-14-libco-study","published":1,"updated":"2018-07-14T14:46:28.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjv8xuicp005em1tjb1qlvs8c","content":"<blockquote>\n<p>Libco   C/C++ ,  co_create/co_resume/co_yield  co_poll</p>\n</blockquote>\n<p> <a href=\"https://github.com/Tencent/libco/blob/master/example_cond.cpp\" target=\"_blank\" rel=\"noopener\">example_cond.cpp</a> </p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;unistd.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;queue&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">\"co_routine.h\"</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">stTask_t</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> id;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">stEnv_t</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">    stCoCond_t* cond;</span><br><span class=\"line\">    <span class=\"built_in\">queue</span>&lt;stTask_t*&gt; task_queue;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span>* <span class=\"title\">Producer</span><span class=\"params\">(<span class=\"keyword\">void</span>* args)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    co_enable_hook_sys();</span><br><span class=\"line\">    stEnv_t* env = (stEnv_t*)args;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> id = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        stTask_t* task = (stTask_t*)<span class=\"built_in\">calloc</span>(<span class=\"number\">1</span>, <span class=\"keyword\">sizeof</span>(stTask_t));</span><br><span class=\"line\">        task-&gt;id = id++;</span><br><span class=\"line\">        env-&gt;task_queue.push(task);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"%s:%d produce task %d\\n\"</span>, __func__, __LINE__, task-&gt;id);</span><br><span class=\"line\">        co_cond_signal(env-&gt;cond);</span><br><span class=\"line\">        poll(<span class=\"literal\">NULL</span>, <span class=\"number\">0</span>, <span class=\"number\">1000</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span>* <span class=\"title\">Consumer</span><span class=\"params\">(<span class=\"keyword\">void</span>* args)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    co_enable_hook_sys();</span><br><span class=\"line\">    stEnv_t* env = (stEnv_t*)args;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (env-&gt;task_queue.empty())</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            co_cond_timedwait(env-&gt;cond, <span class=\"number\">-1</span>);</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        stTask_t* task = env-&gt;task_queue.front();</span><br><span class=\"line\">        env-&gt;task_queue.pop();</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"%s:%d consume task %d\\n\"</span>, __func__, __LINE__, task-&gt;id);</span><br><span class=\"line\">        <span class=\"built_in\">free</span>(task);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    stEnv_t* env = <span class=\"keyword\">new</span> stEnv_t;</span><br><span class=\"line\">    env-&gt;cond = co_cond_alloc();</span><br><span class=\"line\"></span><br><span class=\"line\">    stCoRoutine_t* consumer_routine;</span><br><span class=\"line\">    co_create(&amp;consumer_routine, <span class=\"literal\">NULL</span>, Consumer, env);</span><br><span class=\"line\">    co_resume(consumer_routine);</span><br><span class=\"line\"></span><br><span class=\"line\">    stCoRoutine_t* producer_routine;</span><br><span class=\"line\">    co_create(&amp;producer_routine, <span class=\"literal\">NULL</span>, Producer, env);</span><br><span class=\"line\">    co_resume(producer_routine);</span><br><span class=\"line\"></span><br><span class=\"line\">    co_eventloop(co_get_epoll_ct(), <span class=\"literal\">NULL</span>, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/Tencent/libco</span><br><span class=\"line\">cd libco</span><br><span class=\"line\">make</span><br><span class=\"line\">// -ldl -lpthread</span><br><span class=\"line\">g++ example_cond.cpp -o main  -L./lib -lcolib -lpthread -ldl</span><br><span class=\"line\">./main</span><br></pre></td></tr></table></figure></p>\n<p></p>\n<ul>\n<li>co_create , <br>co attr  NULLroutine arg </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">int co_create(stCoRoutine_t** co, const stCoRoutineAttr_t* attr,</span><br><span class=\"line\">void* (*routine)(void*), void* arg);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>co_resume </li>\n</ul>\n<p> co</p>\n<ul>\n<li>co_eventloop</li>\n</ul>\n<p>co_eventloop  epoll ctx  co_get_epoll_ct()pfn  co_eventloop arg  pfn</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">void co_eventloop(stCoEpoll_t *ctx, pfn_co_eventloop_t pfn, void *arg)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>co_enable_hook_sys() </li>\n</ul>\n<p>co_enable_hook_sys  libco  io  libco </p>\n<ul>\n<li>poll  sleep <br> sleep  poll  co_poll</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">int poll(struct pollfd fds[], nfds_t nfds, int timeout)</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">co_cond_alloc</span><br><span class=\"line\">co_cond_signal</span><br><span class=\"line\">co_cond_broadcast</span><br><span class=\"line\">co_cond_timedwait</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>Libco   C/C++ ,  co_create/co_resume/co_yield  co_poll</p>\n</blockquote>\n<p> <a href=\"https://github.com/Tencent/libco/blob/master/example_cond.cpp\" target=\"_blank\" rel=\"noopener\">example_cond.cpp</a> </p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;unistd.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;queue&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">\"co_routine.h\"</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">stTask_t</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> id;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">stEnv_t</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">    stCoCond_t* cond;</span><br><span class=\"line\">    <span class=\"built_in\">queue</span>&lt;stTask_t*&gt; task_queue;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span>* <span class=\"title\">Producer</span><span class=\"params\">(<span class=\"keyword\">void</span>* args)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    co_enable_hook_sys();</span><br><span class=\"line\">    stEnv_t* env = (stEnv_t*)args;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> id = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        stTask_t* task = (stTask_t*)<span class=\"built_in\">calloc</span>(<span class=\"number\">1</span>, <span class=\"keyword\">sizeof</span>(stTask_t));</span><br><span class=\"line\">        task-&gt;id = id++;</span><br><span class=\"line\">        env-&gt;task_queue.push(task);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"%s:%d produce task %d\\n\"</span>, __func__, __LINE__, task-&gt;id);</span><br><span class=\"line\">        co_cond_signal(env-&gt;cond);</span><br><span class=\"line\">        poll(<span class=\"literal\">NULL</span>, <span class=\"number\">0</span>, <span class=\"number\">1000</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span>* <span class=\"title\">Consumer</span><span class=\"params\">(<span class=\"keyword\">void</span>* args)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    co_enable_hook_sys();</span><br><span class=\"line\">    stEnv_t* env = (stEnv_t*)args;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (env-&gt;task_queue.empty())</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            co_cond_timedwait(env-&gt;cond, <span class=\"number\">-1</span>);</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        stTask_t* task = env-&gt;task_queue.front();</span><br><span class=\"line\">        env-&gt;task_queue.pop();</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"%s:%d consume task %d\\n\"</span>, __func__, __LINE__, task-&gt;id);</span><br><span class=\"line\">        <span class=\"built_in\">free</span>(task);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    stEnv_t* env = <span class=\"keyword\">new</span> stEnv_t;</span><br><span class=\"line\">    env-&gt;cond = co_cond_alloc();</span><br><span class=\"line\"></span><br><span class=\"line\">    stCoRoutine_t* consumer_routine;</span><br><span class=\"line\">    co_create(&amp;consumer_routine, <span class=\"literal\">NULL</span>, Consumer, env);</span><br><span class=\"line\">    co_resume(consumer_routine);</span><br><span class=\"line\"></span><br><span class=\"line\">    stCoRoutine_t* producer_routine;</span><br><span class=\"line\">    co_create(&amp;producer_routine, <span class=\"literal\">NULL</span>, Producer, env);</span><br><span class=\"line\">    co_resume(producer_routine);</span><br><span class=\"line\"></span><br><span class=\"line\">    co_eventloop(co_get_epoll_ct(), <span class=\"literal\">NULL</span>, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/Tencent/libco</span><br><span class=\"line\">cd libco</span><br><span class=\"line\">make</span><br><span class=\"line\">// -ldl -lpthread</span><br><span class=\"line\">g++ example_cond.cpp -o main  -L./lib -lcolib -lpthread -ldl</span><br><span class=\"line\">./main</span><br></pre></td></tr></table></figure></p>\n<p></p>\n<ul>\n<li>co_create , <br>co attr  NULLroutine arg </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">int co_create(stCoRoutine_t** co, const stCoRoutineAttr_t* attr,</span><br><span class=\"line\">void* (*routine)(void*), void* arg);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>co_resume </li>\n</ul>\n<p> co</p>\n<ul>\n<li>co_eventloop</li>\n</ul>\n<p>co_eventloop  epoll ctx  co_get_epoll_ct()pfn  co_eventloop arg  pfn</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">void co_eventloop(stCoEpoll_t *ctx, pfn_co_eventloop_t pfn, void *arg)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>co_enable_hook_sys() </li>\n</ul>\n<p>co_enable_hook_sys  libco  io  libco </p>\n<ul>\n<li>poll  sleep <br> sleep  poll  co_poll</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">int poll(struct pollfd fds[], nfds_t nfds, int timeout)</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">co_cond_alloc</span><br><span class=\"line\">co_cond_signal</span><br><span class=\"line\">co_cond_broadcast</span><br><span class=\"line\">co_cond_timedwait</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"C++  - Valgrind, Sanitizer, GDB","date":"2018-07-14T08:46:46.000Z","_content":"\n C++ \n* valgrind\n* sanitizer\n* gdb\n\n`valgrind`  C/C++ Valgrind \n\n\n\n```\n#include <stdio.h>\n#include <malloc.h>\n\nint main(void) {\n    int *p = NULL;\n    p = malloc(10 * sizeof(int));\n    free(p);\n    *p = 3;\n    return 0;\n}\n```\n\n,  valgrind \n\n```\ng++ -g -o bug main.c\nvalgrind --tool=memcheck --leak-check=full --log-file=memchk.log ./bug\n```\n\nvalgrind  ``,   LeakSummary:\n\n```\nLeakSummary\ndefinitely lost: .\nindirectly lost: \npossibly lost \nstill reachable:  new  delete\n```\n\n----\n\n [sanitizer](https://github.com/google/sanitizers), \n\n `-fsanitize=address` , \n\n```\ngcc -fsanitize=address -g -o bug main.c\n./bug\n```\n\n\n\n```\n==8035== ERROR: AddressSanitizer: heap-use-after-free on address 0x60080000bfd0 at pc 0x4007e1 bp 0x7ffeb17cf780 sp 0x7ffeb17cf778\nWRITE of size 4 at 0x60080000bfd0 thread T0\n    #0 0x4007e0 (/data1/mm64/levizheng/QQMail/study/test_debug/a+0x4007e0)\n    #1 0x7f6808337c04 (/usr/lib64/libc-2.17.so+0x21c04)\n    #2 0x4006b8 (/data1/mm64/levizheng/QQMail/study/test_debug/a+0x4006b8)\n```\n\n, `address2line -e bug`,  `0x4007e0`, \n \n\n----\n\n GDB\n\n GDB \n\n```\ngdb <execute_binary>\n```\n\n `set args`\n\n```\nset args -i config.file\n```\n\n `run`\n\n `bt`,  \n`f #num`  frame `p arg` \n, \n\n```\np __str\np *this\n```\n\n:\n\n```\nProgram received signal SIGSEGV, Segmentation fault.\nstd::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string (this=0x7fffffffdd40, __str=...) at /data1/gcc-4.8.2_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/bits/basic_string.tcc:173\n173    /data1/gcc-4.8.2_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/bits/basic_string.tcc: No such file or directory.\n(gdb) bt\n#0  std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string (this=0x7fffffffdd40, __str=...) at /data1/gcc-4.8.2_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/bits/basic_string.tcc:173\n#1  0x00000000006476d6 in GetBinLogSynShmPath (this=<optimized out>) at mmux/mmuxstatbf/mmuxstatbfconfig.h:95\n#2  BinLogSyncMgr::InitShmData (this=0x1fbee80) at mmux/mmuxstatbf/binlogsyncmgr.cpp:112\n#3  0x0000000000641b80 in GetMetaPtr (this=0x1fbee80) at mmux/mmuxstatbf/binlogsyncmgr.h:68\n#4  MMUxStatBFServer::BeforeMasterRun (this=0x7fffffffe1d0, pvProcArgs=<optimized out>) at mmux/mmuxstatbf/mmuxstatbfserver.h:75\n(gdb) p __str\n$1 = (const std::basic_string<char, std::char_traits<char>, std::allocator<char> > &) @0x20: <error reading variable>\n(gdb) f 1\n#1  0x00000000006476d6 in GetBinLogSynShmPath (this=<optimized out>) at mmux/mmuxstatbf/mmuxstatbfconfig.h:95\n95    mmux/mmuxstatbf/mmuxstatbfconfig.h: No such file or directory.\n(gdb) p  *this\n(gdb) f 2\n#2  BinLogSyncMgr::InitShmData (this=0x1fbee80) at mmux/mmuxstatbf/binlogsyncmgr.cpp:112\n112    mmux/mmuxstatbf/binlogsyncmgr.cpp: No such file or directory.\n(gdb) info locals\nis_new = 0\n__func__ = \"InitShmData\"\n(gdb) f 1\n```\n\n","source":"_posts/2018-07-27-valgrind-sanitize.md","raw":"---\nlayout: post\ntitle: C++  - Valgrind, Sanitizer, GDB\ndate: 2018-07-14 16:46:46\ncategories: Program\n---\n\n C++ \n* valgrind\n* sanitizer\n* gdb\n\n`valgrind`  C/C++ Valgrind \n\n\n\n```\n#include <stdio.h>\n#include <malloc.h>\n\nint main(void) {\n    int *p = NULL;\n    p = malloc(10 * sizeof(int));\n    free(p);\n    *p = 3;\n    return 0;\n}\n```\n\n,  valgrind \n\n```\ng++ -g -o bug main.c\nvalgrind --tool=memcheck --leak-check=full --log-file=memchk.log ./bug\n```\n\nvalgrind  ``,   LeakSummary:\n\n```\nLeakSummary\ndefinitely lost: .\nindirectly lost: \npossibly lost \nstill reachable:  new  delete\n```\n\n----\n\n [sanitizer](https://github.com/google/sanitizers), \n\n `-fsanitize=address` , \n\n```\ngcc -fsanitize=address -g -o bug main.c\n./bug\n```\n\n\n\n```\n==8035== ERROR: AddressSanitizer: heap-use-after-free on address 0x60080000bfd0 at pc 0x4007e1 bp 0x7ffeb17cf780 sp 0x7ffeb17cf778\nWRITE of size 4 at 0x60080000bfd0 thread T0\n    #0 0x4007e0 (/data1/mm64/levizheng/QQMail/study/test_debug/a+0x4007e0)\n    #1 0x7f6808337c04 (/usr/lib64/libc-2.17.so+0x21c04)\n    #2 0x4006b8 (/data1/mm64/levizheng/QQMail/study/test_debug/a+0x4006b8)\n```\n\n, `address2line -e bug`,  `0x4007e0`, \n \n\n----\n\n GDB\n\n GDB \n\n```\ngdb <execute_binary>\n```\n\n `set args`\n\n```\nset args -i config.file\n```\n\n `run`\n\n `bt`,  \n`f #num`  frame `p arg` \n, \n\n```\np __str\np *this\n```\n\n:\n\n```\nProgram received signal SIGSEGV, Segmentation fault.\nstd::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string (this=0x7fffffffdd40, __str=...) at /data1/gcc-4.8.2_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/bits/basic_string.tcc:173\n173    /data1/gcc-4.8.2_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/bits/basic_string.tcc: No such file or directory.\n(gdb) bt\n#0  std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string (this=0x7fffffffdd40, __str=...) at /data1/gcc-4.8.2_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/bits/basic_string.tcc:173\n#1  0x00000000006476d6 in GetBinLogSynShmPath (this=<optimized out>) at mmux/mmuxstatbf/mmuxstatbfconfig.h:95\n#2  BinLogSyncMgr::InitShmData (this=0x1fbee80) at mmux/mmuxstatbf/binlogsyncmgr.cpp:112\n#3  0x0000000000641b80 in GetMetaPtr (this=0x1fbee80) at mmux/mmuxstatbf/binlogsyncmgr.h:68\n#4  MMUxStatBFServer::BeforeMasterRun (this=0x7fffffffe1d0, pvProcArgs=<optimized out>) at mmux/mmuxstatbf/mmuxstatbfserver.h:75\n(gdb) p __str\n$1 = (const std::basic_string<char, std::char_traits<char>, std::allocator<char> > &) @0x20: <error reading variable>\n(gdb) f 1\n#1  0x00000000006476d6 in GetBinLogSynShmPath (this=<optimized out>) at mmux/mmuxstatbf/mmuxstatbfconfig.h:95\n95    mmux/mmuxstatbf/mmuxstatbfconfig.h: No such file or directory.\n(gdb) p  *this\n(gdb) f 2\n#2  BinLogSyncMgr::InitShmData (this=0x1fbee80) at mmux/mmuxstatbf/binlogsyncmgr.cpp:112\n112    mmux/mmuxstatbf/binlogsyncmgr.cpp: No such file or directory.\n(gdb) info locals\nis_new = 0\n__func__ = \"InitShmData\"\n(gdb) f 1\n```\n\n","slug":"2018-07-27-valgrind-sanitize","published":1,"updated":"2018-08-19T02:34:09.000Z","comments":1,"photos":[],"link":"","_id":"cjv8xuicq005gm1tjtkz11k38","content":"<p> C++ </p>\n<ul>\n<li>valgrind</li>\n<li>sanitizer</li>\n<li>gdb</li>\n</ul>\n<p><code>valgrind</code>  C/C++ Valgrind </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include &lt;stdio.h&gt;</span><br><span class=\"line\">#include &lt;malloc.h&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">int main(void) &#123;</span><br><span class=\"line\">    int *p = NULL;</span><br><span class=\"line\">    p = malloc(10 * sizeof(int));</span><br><span class=\"line\">    free(p);</span><br><span class=\"line\">    *p = 3;</span><br><span class=\"line\">    return 0;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>,  valgrind </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">g++ -g -o bug main.c</span><br><span class=\"line\">valgrind --tool=memcheck --leak-check=full --log-file=memchk.log ./bug</span><br></pre></td></tr></table></figure>\n<p>valgrind  <code></code>,   LeakSummary:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LeakSummary</span><br><span class=\"line\">definitely lost: .</span><br><span class=\"line\">indirectly lost: </span><br><span class=\"line\">possibly lost </span><br><span class=\"line\">still reachable:  new  delete</span><br></pre></td></tr></table></figure>\n<hr>\n<p> <a href=\"https://github.com/google/sanitizers\" target=\"_blank\" rel=\"noopener\">sanitizer</a>, </p>\n<p> <code>-fsanitize=address</code> , </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gcc -fsanitize=address -g -o bug main.c</span><br><span class=\"line\">./bug</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">==8035== ERROR: AddressSanitizer: heap-use-after-free on address 0x60080000bfd0 at pc 0x4007e1 bp 0x7ffeb17cf780 sp 0x7ffeb17cf778</span><br><span class=\"line\">WRITE of size 4 at 0x60080000bfd0 thread T0</span><br><span class=\"line\">    #0 0x4007e0 (/data1/mm64/levizheng/QQMail/study/test_debug/a+0x4007e0)</span><br><span class=\"line\">    #1 0x7f6808337c04 (/usr/lib64/libc-2.17.so+0x21c04)</span><br><span class=\"line\">    #2 0x4006b8 (/data1/mm64/levizheng/QQMail/study/test_debug/a+0x4006b8)</span><br></pre></td></tr></table></figure>\n<p>, <code>address2line -e bug</code>,  <code>0x4007e0</code>,<br> </p>\n<hr>\n<p> GDB</p>\n<p> GDB </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gdb &lt;execute_binary&gt;</span><br></pre></td></tr></table></figure>\n<p> <code>set args</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set args -i config.file</span><br></pre></td></tr></table></figure>\n<p> <code>run</code></p>\n<p> <code>bt</code>, <br><code>f #num</code>  frame <code>p arg</code> <br>, </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">p __str</span><br><span class=\"line\">p *this</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Program received signal SIGSEGV, Segmentation fault.</span><br><span class=\"line\">std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::basic_string (this=0x7fffffffdd40, __str=...) at /data1/gcc-4.8.2_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/bits/basic_string.tcc:173</span><br><span class=\"line\">173    /data1/gcc-4.8.2_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/bits/basic_string.tcc: No such file or directory.</span><br><span class=\"line\">(gdb) bt</span><br><span class=\"line\">#0  std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::basic_string (this=0x7fffffffdd40, __str=...) at /data1/gcc-4.8.2_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/bits/basic_string.tcc:173</span><br><span class=\"line\">#1  0x00000000006476d6 in GetBinLogSynShmPath (this=&lt;optimized out&gt;) at mmux/mmuxstatbf/mmuxstatbfconfig.h:95</span><br><span class=\"line\">#2  BinLogSyncMgr::InitShmData (this=0x1fbee80) at mmux/mmuxstatbf/binlogsyncmgr.cpp:112</span><br><span class=\"line\">#3  0x0000000000641b80 in GetMetaPtr (this=0x1fbee80) at mmux/mmuxstatbf/binlogsyncmgr.h:68</span><br><span class=\"line\">#4  MMUxStatBFServer::BeforeMasterRun (this=0x7fffffffe1d0, pvProcArgs=&lt;optimized out&gt;) at mmux/mmuxstatbf/mmuxstatbfserver.h:75</span><br><span class=\"line\">(gdb) p __str</span><br><span class=\"line\">$1 = (const std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &amp;) @0x20: &lt;error reading variable&gt;</span><br><span class=\"line\">(gdb) f 1</span><br><span class=\"line\">#1  0x00000000006476d6 in GetBinLogSynShmPath (this=&lt;optimized out&gt;) at mmux/mmuxstatbf/mmuxstatbfconfig.h:95</span><br><span class=\"line\">95    mmux/mmuxstatbf/mmuxstatbfconfig.h: No such file or directory.</span><br><span class=\"line\">(gdb) p  *this</span><br><span class=\"line\">(gdb) f 2</span><br><span class=\"line\">#2  BinLogSyncMgr::InitShmData (this=0x1fbee80) at mmux/mmuxstatbf/binlogsyncmgr.cpp:112</span><br><span class=\"line\">112    mmux/mmuxstatbf/binlogsyncmgr.cpp: No such file or directory.</span><br><span class=\"line\">(gdb) info locals</span><br><span class=\"line\">is_new = 0</span><br><span class=\"line\">__func__ = &quot;InitShmData&quot;</span><br><span class=\"line\">(gdb) f 1</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p> C++ </p>\n<ul>\n<li>valgrind</li>\n<li>sanitizer</li>\n<li>gdb</li>\n</ul>\n<p><code>valgrind</code>  C/C++ Valgrind </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include &lt;stdio.h&gt;</span><br><span class=\"line\">#include &lt;malloc.h&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">int main(void) &#123;</span><br><span class=\"line\">    int *p = NULL;</span><br><span class=\"line\">    p = malloc(10 * sizeof(int));</span><br><span class=\"line\">    free(p);</span><br><span class=\"line\">    *p = 3;</span><br><span class=\"line\">    return 0;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>,  valgrind </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">g++ -g -o bug main.c</span><br><span class=\"line\">valgrind --tool=memcheck --leak-check=full --log-file=memchk.log ./bug</span><br></pre></td></tr></table></figure>\n<p>valgrind  <code></code>,   LeakSummary:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LeakSummary</span><br><span class=\"line\">definitely lost: .</span><br><span class=\"line\">indirectly lost: </span><br><span class=\"line\">possibly lost </span><br><span class=\"line\">still reachable:  new  delete</span><br></pre></td></tr></table></figure>\n<hr>\n<p> <a href=\"https://github.com/google/sanitizers\" target=\"_blank\" rel=\"noopener\">sanitizer</a>, </p>\n<p> <code>-fsanitize=address</code> , </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gcc -fsanitize=address -g -o bug main.c</span><br><span class=\"line\">./bug</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">==8035== ERROR: AddressSanitizer: heap-use-after-free on address 0x60080000bfd0 at pc 0x4007e1 bp 0x7ffeb17cf780 sp 0x7ffeb17cf778</span><br><span class=\"line\">WRITE of size 4 at 0x60080000bfd0 thread T0</span><br><span class=\"line\">    #0 0x4007e0 (/data1/mm64/levizheng/QQMail/study/test_debug/a+0x4007e0)</span><br><span class=\"line\">    #1 0x7f6808337c04 (/usr/lib64/libc-2.17.so+0x21c04)</span><br><span class=\"line\">    #2 0x4006b8 (/data1/mm64/levizheng/QQMail/study/test_debug/a+0x4006b8)</span><br></pre></td></tr></table></figure>\n<p>, <code>address2line -e bug</code>,  <code>0x4007e0</code>,<br> </p>\n<hr>\n<p> GDB</p>\n<p> GDB </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gdb &lt;execute_binary&gt;</span><br></pre></td></tr></table></figure>\n<p> <code>set args</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set args -i config.file</span><br></pre></td></tr></table></figure>\n<p> <code>run</code></p>\n<p> <code>bt</code>, <br><code>f #num</code>  frame <code>p arg</code> <br>, </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">p __str</span><br><span class=\"line\">p *this</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Program received signal SIGSEGV, Segmentation fault.</span><br><span class=\"line\">std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::basic_string (this=0x7fffffffdd40, __str=...) at /data1/gcc-4.8.2_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/bits/basic_string.tcc:173</span><br><span class=\"line\">173    /data1/gcc-4.8.2_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/bits/basic_string.tcc: No such file or directory.</span><br><span class=\"line\">(gdb) bt</span><br><span class=\"line\">#0  std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::basic_string (this=0x7fffffffdd40, __str=...) at /data1/gcc-4.8.2_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/bits/basic_string.tcc:173</span><br><span class=\"line\">#1  0x00000000006476d6 in GetBinLogSynShmPath (this=&lt;optimized out&gt;) at mmux/mmuxstatbf/mmuxstatbfconfig.h:95</span><br><span class=\"line\">#2  BinLogSyncMgr::InitShmData (this=0x1fbee80) at mmux/mmuxstatbf/binlogsyncmgr.cpp:112</span><br><span class=\"line\">#3  0x0000000000641b80 in GetMetaPtr (this=0x1fbee80) at mmux/mmuxstatbf/binlogsyncmgr.h:68</span><br><span class=\"line\">#4  MMUxStatBFServer::BeforeMasterRun (this=0x7fffffffe1d0, pvProcArgs=&lt;optimized out&gt;) at mmux/mmuxstatbf/mmuxstatbfserver.h:75</span><br><span class=\"line\">(gdb) p __str</span><br><span class=\"line\">$1 = (const std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &amp;) @0x20: &lt;error reading variable&gt;</span><br><span class=\"line\">(gdb) f 1</span><br><span class=\"line\">#1  0x00000000006476d6 in GetBinLogSynShmPath (this=&lt;optimized out&gt;) at mmux/mmuxstatbf/mmuxstatbfconfig.h:95</span><br><span class=\"line\">95    mmux/mmuxstatbf/mmuxstatbfconfig.h: No such file or directory.</span><br><span class=\"line\">(gdb) p  *this</span><br><span class=\"line\">(gdb) f 2</span><br><span class=\"line\">#2  BinLogSyncMgr::InitShmData (this=0x1fbee80) at mmux/mmuxstatbf/binlogsyncmgr.cpp:112</span><br><span class=\"line\">112    mmux/mmuxstatbf/binlogsyncmgr.cpp: No such file or directory.</span><br><span class=\"line\">(gdb) info locals</span><br><span class=\"line\">is_new = 0</span><br><span class=\"line\">__func__ = &quot;InitShmData&quot;</span><br><span class=\"line\">(gdb) f 1</span><br></pre></td></tr></table></figure>\n"},{"title":"NLP - ","date":"2018-09-08T02:11:42.000Z","_content":"\n``\n* [](#)\n* [](#)\n* [](#)\n\n### \n\n A  B\nab -> abc\nabc -> ab\nabc -> dbc\n D `Levenshtein `\n S = D / Max(len(A) len(B))\n\n\n### \n\n[LeetCode](https://leetcode.com/problems/edit-distance/)  \n\n A  m  A[1]  A[m] B  n  B[1]  B[n]D[i][j]  A[1]-A[i]  B[1]-B[j] \n* :  A[i] == B[j] D[i][j] = D[i-1][j-1] hel -> hal  = he -> ha \n* :  A[i]  B[j] D[i][j]  3 :\n    - D[i-1][j] + 1 A[i] xyz  -> abc   = xy -> abc  + 1\n    - D[i][j-1] + 1 B[j])  xyz -> abc  = xyzc -> abc  + 1;  xyzc->abc   xyz->ab xyz -> abc  = xyzc -> abc  + 1 = xyz->ab  + 1\n    - D[i-1][j-1] + 1 A[i]  B[j]  xyz -> abc  = xyc -> abc  + 1 = xy -> ab  + 1 ()\n* \n    - A[i][0] = i B  A[1]-A[i]  i\n    - B[0][j] = j A  A  B[1]-B[j] j\n\n```\nint distance(char *a, char *b, int i, int j)\n{\n    if (j == 0) return i;\n    else if (i == 0) return j;\n    else if (a[i-1] == b[j-1]) \n        return edit_distance(a, b, i - 1, j - 1);\n    else\n        return Min3(edit_distance(a, b, i - 1, j) + 1\n                edit_distance(a, b, i, j - 1) + 1\n                edit_distance(a, b, i - 1, j - 1) + 1);\n}\n```\n\n## \n\n \n\n```\nint distance(char *a, char *b)\n{\n    int lena = strlen(a);\n    int lenb = strlen(b);\n    int d[lena+1][lenb+1];\n    int i, j;\n    for (i = 0; i <= lena; i++)\n        d[i][0] = i;\n    for (j = 0; j <= lenb; j++)\n        d[0][j] = j;\n    for (i = 1; i <= lena; i++) \n    {\n        for (j = 1; j <= lenb; j++) \n        {\n            if (a[i-1] == b[j-1]) \n            {\n                d[i][j] = d[i-1][j-1];\n            } \n            else \n            {\n                d[i][j] = min_of_three(d[i-1][j]+1, d[i][j-1]+1, d[i-1][j-1]+1);\n            }\n        }\n    }\n    return d[lena][lenb];\n}\n```\n","source":"_posts/2018-09-08-edit-distance.md","raw":"---\ntitle: NLP - \ndate: 2018-09-08 10:11:42\ntags:\ncategories: NLP\n---\n\n``\n* [](#)\n* [](#)\n* [](#)\n\n### \n\n A  B\nab -> abc\nabc -> ab\nabc -> dbc\n D `Levenshtein `\n S = D / Max(len(A) len(B))\n\n\n### \n\n[LeetCode](https://leetcode.com/problems/edit-distance/)  \n\n A  m  A[1]  A[m] B  n  B[1]  B[n]D[i][j]  A[1]-A[i]  B[1]-B[j] \n* :  A[i] == B[j] D[i][j] = D[i-1][j-1] hel -> hal  = he -> ha \n* :  A[i]  B[j] D[i][j]  3 :\n    - D[i-1][j] + 1 A[i] xyz  -> abc   = xy -> abc  + 1\n    - D[i][j-1] + 1 B[j])  xyz -> abc  = xyzc -> abc  + 1;  xyzc->abc   xyz->ab xyz -> abc  = xyzc -> abc  + 1 = xyz->ab  + 1\n    - D[i-1][j-1] + 1 A[i]  B[j]  xyz -> abc  = xyc -> abc  + 1 = xy -> ab  + 1 ()\n* \n    - A[i][0] = i B  A[1]-A[i]  i\n    - B[0][j] = j A  A  B[1]-B[j] j\n\n```\nint distance(char *a, char *b, int i, int j)\n{\n    if (j == 0) return i;\n    else if (i == 0) return j;\n    else if (a[i-1] == b[j-1]) \n        return edit_distance(a, b, i - 1, j - 1);\n    else\n        return Min3(edit_distance(a, b, i - 1, j) + 1\n                edit_distance(a, b, i, j - 1) + 1\n                edit_distance(a, b, i - 1, j - 1) + 1);\n}\n```\n\n## \n\n \n\n```\nint distance(char *a, char *b)\n{\n    int lena = strlen(a);\n    int lenb = strlen(b);\n    int d[lena+1][lenb+1];\n    int i, j;\n    for (i = 0; i <= lena; i++)\n        d[i][0] = i;\n    for (j = 0; j <= lenb; j++)\n        d[0][j] = j;\n    for (i = 1; i <= lena; i++) \n    {\n        for (j = 1; j <= lenb; j++) \n        {\n            if (a[i-1] == b[j-1]) \n            {\n                d[i][j] = d[i-1][j-1];\n            } \n            else \n            {\n                d[i][j] = min_of_three(d[i-1][j]+1, d[i][j-1]+1, d[i-1][j-1]+1);\n            }\n        }\n    }\n    return d[lena][lenb];\n}\n```\n","slug":"2018-09-08-edit-distance","published":1,"updated":"2018-09-08T14:06:50.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjv8xuicr005im1tjq0xpt21g","content":"<p><code></code></p>\n<ul>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> A  B<br>ab -&gt; abc<br>abc -&gt; ab<br>abc -&gt; dbc<br> D <code>Levenshtein </code><br> S = D / Max(len(A) len(B))<br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://leetcode.com/problems/edit-distance/\" target=\"_blank\" rel=\"noopener\">LeetCode</a>  </p>\n<p> A  m  A[1]  A[m] B  n  B[1]  B[n]D[i][j]  A[1]-A[i]  B[1]-B[j] </p>\n<ul>\n<li>:  A[i] == B[j] D[i][j] = D[i-1][j-1] hel -&gt; hal  = he -&gt; ha </li>\n<li>:  A[i]  B[j] D[i][j]  3 :<ul>\n<li>D[i-1][j] + 1 A[i] xyz  -&gt; abc   = xy -&gt; abc  + 1</li>\n<li>D[i][j-1] + 1 B[j])  xyz -&gt; abc  = xyzc -&gt; abc  + 1;  xyzc-&gt;abc   xyz-&gt;ab xyz -&gt; abc  = xyzc -&gt; abc  + 1 = xyz-&gt;ab  + 1</li>\n<li>D[i-1][j-1] + 1 A[i]  B[j]  xyz -&gt; abc  = xyc -&gt; abc  + 1 = xy -&gt; ab  + 1 ()</li>\n</ul>\n</li>\n<li><ul>\n<li>A[i][0] = i B  A[1]-A[i]  i</li>\n<li>B[0][j] = j A  A  B[1]-B[j] j<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">int distance(char *a, char *b, int i, int j)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    if (j == 0) return i;</span><br><span class=\"line\">    else if (i == 0) return j;</span><br><span class=\"line\">    else if (a[i-1] == b[j-1]) </span><br><span class=\"line\">        return edit_distance(a, b, i - 1, j - 1);</span><br><span class=\"line\">    else</span><br><span class=\"line\">        return Min3(edit_distance(a, b, i - 1, j) + 1</span><br><span class=\"line\">                edit_distance(a, b, i, j - 1) + 1</span><br><span class=\"line\">                edit_distance(a, b, i - 1, j - 1) + 1);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <br><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">int distance(char *a, char *b)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    int lena = strlen(a);</span><br><span class=\"line\">    int lenb = strlen(b);</span><br><span class=\"line\">    int d[lena+1][lenb+1];</span><br><span class=\"line\">    int i, j;</span><br><span class=\"line\">    for (i = 0; i &lt;= lena; i++)</span><br><span class=\"line\">        d[i][0] = i;</span><br><span class=\"line\">    for (j = 0; j &lt;= lenb; j++)</span><br><span class=\"line\">        d[0][j] = j;</span><br><span class=\"line\">    for (i = 1; i &lt;= lena; i++) </span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        for (j = 1; j &lt;= lenb; j++) </span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            if (a[i-1] == b[j-1]) </span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                d[i][j] = d[i-1][j-1];</span><br><span class=\"line\">            &#125; </span><br><span class=\"line\">            else </span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                d[i][j] = min_of_three(d[i-1][j]+1, d[i][j-1]+1, d[i-1][j-1]+1);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return d[lena][lenb];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<p><code></code></p>\n<ul>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n<li><a href=\"#\"></a></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> A  B<br>ab -&gt; abc<br>abc -&gt; ab<br>abc -&gt; dbc<br> D <code>Levenshtein </code><br> S = D / Max(len(A) len(B))<br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://leetcode.com/problems/edit-distance/\" target=\"_blank\" rel=\"noopener\">LeetCode</a>  </p>\n<p> A  m  A[1]  A[m] B  n  B[1]  B[n]D[i][j]  A[1]-A[i]  B[1]-B[j] </p>\n<ul>\n<li>:  A[i] == B[j] D[i][j] = D[i-1][j-1] hel -&gt; hal  = he -&gt; ha </li>\n<li>:  A[i]  B[j] D[i][j]  3 :<ul>\n<li>D[i-1][j] + 1 A[i] xyz  -&gt; abc   = xy -&gt; abc  + 1</li>\n<li>D[i][j-1] + 1 B[j])  xyz -&gt; abc  = xyzc -&gt; abc  + 1;  xyzc-&gt;abc   xyz-&gt;ab xyz -&gt; abc  = xyzc -&gt; abc  + 1 = xyz-&gt;ab  + 1</li>\n<li>D[i-1][j-1] + 1 A[i]  B[j]  xyz -&gt; abc  = xyc -&gt; abc  + 1 = xy -&gt; ab  + 1 ()</li>\n</ul>\n</li>\n<li><ul>\n<li>A[i][0] = i B  A[1]-A[i]  i</li>\n<li>B[0][j] = j A  A  B[1]-B[j] j<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">int distance(char *a, char *b, int i, int j)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    if (j == 0) return i;</span><br><span class=\"line\">    else if (i == 0) return j;</span><br><span class=\"line\">    else if (a[i-1] == b[j-1]) </span><br><span class=\"line\">        return edit_distance(a, b, i - 1, j - 1);</span><br><span class=\"line\">    else</span><br><span class=\"line\">        return Min3(edit_distance(a, b, i - 1, j) + 1</span><br><span class=\"line\">                edit_distance(a, b, i, j - 1) + 1</span><br><span class=\"line\">                edit_distance(a, b, i - 1, j - 1) + 1);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <br><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">int distance(char *a, char *b)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    int lena = strlen(a);</span><br><span class=\"line\">    int lenb = strlen(b);</span><br><span class=\"line\">    int d[lena+1][lenb+1];</span><br><span class=\"line\">    int i, j;</span><br><span class=\"line\">    for (i = 0; i &lt;= lena; i++)</span><br><span class=\"line\">        d[i][0] = i;</span><br><span class=\"line\">    for (j = 0; j &lt;= lenb; j++)</span><br><span class=\"line\">        d[0][j] = j;</span><br><span class=\"line\">    for (i = 1; i &lt;= lena; i++) </span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        for (j = 1; j &lt;= lenb; j++) </span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            if (a[i-1] == b[j-1]) </span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                d[i][j] = d[i-1][j-1];</span><br><span class=\"line\">            &#125; </span><br><span class=\"line\">            else </span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                d[i][j] = min_of_three(d[i-1][j]+1, d[i][j-1]+1, d[i-1][j-1]+1);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return d[lena][lenb];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n"},{"title":"","date":"2019-02-05T08:11:42.000Z","_content":"\n### STL queue \nSTL queue  API \n```\ntemplate <typename T typename Container = std::deque<T>>\nclass queue\n{\n    T & front();\n    void push(const T &elem);\n    void pop();\n    bool empty() const; \n};\n```\n\nAPI :\n*  std::vector std::list std::dequeue\n*  front()   `!empty()`  \n\n Redis Queue \n*   front()  pop() \n* \n\n### \n\n*  pop() \n*  `try_pop()`  `try_pop()` \n\n```c\n#include <queue>\n#include <thread>\n#include <mutex>\n#include <condition_variable>\ntemplate <typename T, typename Container = std::queue<T>>\nclass ThreadQueue\n{\n    public:\n        using container_type           = Container;\n        using value_type               = typename Container::value_type;\n        using reference                = typename Container::reference;\n        using const_reference          = typename Container::const_reference;\n        using size_type                = typename Container::size_type;\n        using mutex_type               = std::mutex;\n        using condition_variable_type  = std::condition_variable;\n    private:\n        Container                queue_;\n        mutable mutex_type       mutex_;\n        condition_variable_type  cond_;\n\n    public:\n        ThreadQueue() = default;\n        ThreadQueue(const ThreadQueue &) = delete;\n        ThreadQueue &operator= (const ThreadQueue &) = delete;\n        void pop(reference elem)\n        {\n            std::unique_lock<mutex_type> lock( mutex_ );\n            cond_.wait( lock, [this]() {  return !queue_.empty();  } );\n            elem = std::move( queue_.front() );\n            queue_.pop();\n        }\n        bool try_pop( reference elem )\n        {\n            std::unique_lock<mutex_type> lock( mutex_ );\n            if ( queue_.empty() ) {\n                return false;\n            }\n            elem = std::move( queue_.front() );\n            queue_.pop();\n            return true;\n        }\n\n        bool empty() const\n        {\n            std::lock_guard<mutex_type> lock( mutex_ );\n            return queue_.empty();\n        }\n\n        size_type size() const\n        {\n            std::lock_guard<mutex_type> lock( mutex_ ); \n            return queue_.size();\n        }\n\n        void push( const value_type &elem )\n        {\n            std::lock_guard<mutex_type> lock( mutex_ );\n            queue_.push( elem );\n            cond_.notify_one();\n        }\n\n        void push( value_type &&elem )\n        {\n            std::lock_guard<mutex_type> lock( mutex_ );\n            queue_.push( std::move( elem ) );\n            cond_.notify_one();\n        }  \n};\n```\n","source":"_posts/2019-02-05-blocking-queue.md","raw":"---\ntitle: \ndate: 2019-02-05 16:11:42\ntags:\ncategories: Program\n---\n\n### STL queue \nSTL queue  API \n```\ntemplate <typename T typename Container = std::deque<T>>\nclass queue\n{\n    T & front();\n    void push(const T &elem);\n    void pop();\n    bool empty() const; \n};\n```\n\nAPI :\n*  std::vector std::list std::dequeue\n*  front()   `!empty()`  \n\n Redis Queue \n*   front()  pop() \n* \n\n### \n\n*  pop() \n*  `try_pop()`  `try_pop()` \n\n```c\n#include <queue>\n#include <thread>\n#include <mutex>\n#include <condition_variable>\ntemplate <typename T, typename Container = std::queue<T>>\nclass ThreadQueue\n{\n    public:\n        using container_type           = Container;\n        using value_type               = typename Container::value_type;\n        using reference                = typename Container::reference;\n        using const_reference          = typename Container::const_reference;\n        using size_type                = typename Container::size_type;\n        using mutex_type               = std::mutex;\n        using condition_variable_type  = std::condition_variable;\n    private:\n        Container                queue_;\n        mutable mutex_type       mutex_;\n        condition_variable_type  cond_;\n\n    public:\n        ThreadQueue() = default;\n        ThreadQueue(const ThreadQueue &) = delete;\n        ThreadQueue &operator= (const ThreadQueue &) = delete;\n        void pop(reference elem)\n        {\n            std::unique_lock<mutex_type> lock( mutex_ );\n            cond_.wait( lock, [this]() {  return !queue_.empty();  } );\n            elem = std::move( queue_.front() );\n            queue_.pop();\n        }\n        bool try_pop( reference elem )\n        {\n            std::unique_lock<mutex_type> lock( mutex_ );\n            if ( queue_.empty() ) {\n                return false;\n            }\n            elem = std::move( queue_.front() );\n            queue_.pop();\n            return true;\n        }\n\n        bool empty() const\n        {\n            std::lock_guard<mutex_type> lock( mutex_ );\n            return queue_.empty();\n        }\n\n        size_type size() const\n        {\n            std::lock_guard<mutex_type> lock( mutex_ ); \n            return queue_.size();\n        }\n\n        void push( const value_type &elem )\n        {\n            std::lock_guard<mutex_type> lock( mutex_ );\n            queue_.push( elem );\n            cond_.notify_one();\n        }\n\n        void push( value_type &&elem )\n        {\n            std::lock_guard<mutex_type> lock( mutex_ );\n            queue_.push( std::move( elem ) );\n            cond_.notify_one();\n        }  \n};\n```\n","slug":"2019-02-05-blocking-queue","published":1,"updated":"2019-02-07T07:53:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjv8xuics005km1tj2yoh49ug","content":"<h3 id=\"STL-queue-\"><a href=\"#STL-queue-\" class=\"headerlink\" title=\"STL queue \"></a>STL queue </h3><p>STL queue  API<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">template &lt;typename T typename Container = std::deque&lt;T&gt;&gt;</span><br><span class=\"line\">class queue</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    T &amp; front();</span><br><span class=\"line\">    void push(const T &amp;elem);</span><br><span class=\"line\">    void pop();</span><br><span class=\"line\">    bool empty() const; </span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>API :</p>\n<ul>\n<li> std::vector std::list std::dequeue</li>\n<li> front()   <code>!empty()</code>  </li>\n</ul>\n<p> Redis Queue </p>\n<ul>\n<li>  front()  pop() </li>\n<li></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li> pop() </li>\n<li> <code>try_pop()</code>  <code>try_pop()</code> </li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;queue&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;thread&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;mutex&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;condition_variable&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">template</span> &lt;<span class=\"keyword\">typename</span> T, <span class=\"keyword\">typename</span> Container = <span class=\"built_in\">std</span>::<span class=\"built_in\">queue</span>&lt;T&gt;&gt;</span><br><span class=\"line\">class ThreadQueue</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">        <span class=\"keyword\">using</span> container_type           = Container;</span><br><span class=\"line\">        <span class=\"keyword\">using</span> value_type               = <span class=\"keyword\">typename</span> Container::value_type;</span><br><span class=\"line\">        <span class=\"keyword\">using</span> reference                = <span class=\"keyword\">typename</span> Container::reference;</span><br><span class=\"line\">        <span class=\"keyword\">using</span> const_reference          = <span class=\"keyword\">typename</span> Container::const_reference;</span><br><span class=\"line\">        <span class=\"keyword\">using</span> size_type                = <span class=\"keyword\">typename</span> Container::size_type;</span><br><span class=\"line\">        <span class=\"keyword\">using</span> mutex_type               = <span class=\"built_in\">std</span>::mutex;</span><br><span class=\"line\">        <span class=\"keyword\">using</span> condition_variable_type  = <span class=\"built_in\">std</span>::condition_variable;</span><br><span class=\"line\">    <span class=\"keyword\">private</span>:</span><br><span class=\"line\">        Container                queue_;</span><br><span class=\"line\">        <span class=\"keyword\">mutable</span> mutex_type       mutex_;</span><br><span class=\"line\">        condition_variable_type  cond_;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">        ThreadQueue() = <span class=\"keyword\">default</span>;</span><br><span class=\"line\">        ThreadQueue(<span class=\"keyword\">const</span> ThreadQueue &amp;) = <span class=\"keyword\">delete</span>;</span><br><span class=\"line\">        ThreadQueue &amp;<span class=\"keyword\">operator</span>= (<span class=\"keyword\">const</span> ThreadQueue &amp;) = <span class=\"keyword\">delete</span>;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">pop</span><span class=\"params\">(reference elem)</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">std</span>::unique_lock&lt;mutex_type&gt; lock( mutex_ );</span><br><span class=\"line\">            cond_.wait( lock, [<span class=\"keyword\">this</span>]() &#123;  <span class=\"keyword\">return</span> !queue_.empty();  &#125; );</span><br><span class=\"line\">            elem = <span class=\"built_in\">std</span>::move( queue_.front() );</span><br><span class=\"line\">            queue_.pop();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">try_pop</span><span class=\"params\">( reference elem )</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">std</span>::unique_lock&lt;mutex_type&gt; lock( mutex_ );</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ( queue_.empty() ) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            elem = <span class=\"built_in\">std</span>::move( queue_.front() );</span><br><span class=\"line\">            queue_.pop();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">empty</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">std</span>::lock_guard&lt;mutex_type&gt; lock( mutex_ );</span><br><span class=\"line\">            <span class=\"keyword\">return</span> queue_.empty();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\">size_type <span class=\"title\">size</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">std</span>::lock_guard&lt;mutex_type&gt; lock( mutex_ ); </span><br><span class=\"line\">            <span class=\"keyword\">return</span> queue_.size();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">push</span><span class=\"params\">( <span class=\"keyword\">const</span> value_type &amp;elem )</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">std</span>::lock_guard&lt;mutex_type&gt; lock( mutex_ );</span><br><span class=\"line\">            queue_.push( elem );</span><br><span class=\"line\">            cond_.notify_one();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">push</span><span class=\"params\">( value_type &amp;&amp;elem )</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">std</span>::lock_guard&lt;mutex_type&gt; lock( mutex_ );</span><br><span class=\"line\">            queue_.push( <span class=\"built_in\">std</span>::move( elem ) );</span><br><span class=\"line\">            cond_.notify_one();</span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"STL-queue-\"><a href=\"#STL-queue-\" class=\"headerlink\" title=\"STL queue \"></a>STL queue </h3><p>STL queue  API<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">template &lt;typename T typename Container = std::deque&lt;T&gt;&gt;</span><br><span class=\"line\">class queue</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    T &amp; front();</span><br><span class=\"line\">    void push(const T &amp;elem);</span><br><span class=\"line\">    void pop();</span><br><span class=\"line\">    bool empty() const; </span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>API :</p>\n<ul>\n<li> std::vector std::list std::dequeue</li>\n<li> front()   <code>!empty()</code>  </li>\n</ul>\n<p> Redis Queue </p>\n<ul>\n<li>  front()  pop() </li>\n<li></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li> pop() </li>\n<li> <code>try_pop()</code>  <code>try_pop()</code> </li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;queue&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;thread&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;mutex&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;condition_variable&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">template</span> &lt;<span class=\"keyword\">typename</span> T, <span class=\"keyword\">typename</span> Container = <span class=\"built_in\">std</span>::<span class=\"built_in\">queue</span>&lt;T&gt;&gt;</span><br><span class=\"line\">class ThreadQueue</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">        <span class=\"keyword\">using</span> container_type           = Container;</span><br><span class=\"line\">        <span class=\"keyword\">using</span> value_type               = <span class=\"keyword\">typename</span> Container::value_type;</span><br><span class=\"line\">        <span class=\"keyword\">using</span> reference                = <span class=\"keyword\">typename</span> Container::reference;</span><br><span class=\"line\">        <span class=\"keyword\">using</span> const_reference          = <span class=\"keyword\">typename</span> Container::const_reference;</span><br><span class=\"line\">        <span class=\"keyword\">using</span> size_type                = <span class=\"keyword\">typename</span> Container::size_type;</span><br><span class=\"line\">        <span class=\"keyword\">using</span> mutex_type               = <span class=\"built_in\">std</span>::mutex;</span><br><span class=\"line\">        <span class=\"keyword\">using</span> condition_variable_type  = <span class=\"built_in\">std</span>::condition_variable;</span><br><span class=\"line\">    <span class=\"keyword\">private</span>:</span><br><span class=\"line\">        Container                queue_;</span><br><span class=\"line\">        <span class=\"keyword\">mutable</span> mutex_type       mutex_;</span><br><span class=\"line\">        condition_variable_type  cond_;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">        ThreadQueue() = <span class=\"keyword\">default</span>;</span><br><span class=\"line\">        ThreadQueue(<span class=\"keyword\">const</span> ThreadQueue &amp;) = <span class=\"keyword\">delete</span>;</span><br><span class=\"line\">        ThreadQueue &amp;<span class=\"keyword\">operator</span>= (<span class=\"keyword\">const</span> ThreadQueue &amp;) = <span class=\"keyword\">delete</span>;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">pop</span><span class=\"params\">(reference elem)</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">std</span>::unique_lock&lt;mutex_type&gt; lock( mutex_ );</span><br><span class=\"line\">            cond_.wait( lock, [<span class=\"keyword\">this</span>]() &#123;  <span class=\"keyword\">return</span> !queue_.empty();  &#125; );</span><br><span class=\"line\">            elem = <span class=\"built_in\">std</span>::move( queue_.front() );</span><br><span class=\"line\">            queue_.pop();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">try_pop</span><span class=\"params\">( reference elem )</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">std</span>::unique_lock&lt;mutex_type&gt; lock( mutex_ );</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ( queue_.empty() ) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            elem = <span class=\"built_in\">std</span>::move( queue_.front() );</span><br><span class=\"line\">            queue_.pop();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">empty</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">std</span>::lock_guard&lt;mutex_type&gt; lock( mutex_ );</span><br><span class=\"line\">            <span class=\"keyword\">return</span> queue_.empty();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\">size_type <span class=\"title\">size</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">std</span>::lock_guard&lt;mutex_type&gt; lock( mutex_ ); </span><br><span class=\"line\">            <span class=\"keyword\">return</span> queue_.size();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">push</span><span class=\"params\">( <span class=\"keyword\">const</span> value_type &amp;elem )</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">std</span>::lock_guard&lt;mutex_type&gt; lock( mutex_ );</span><br><span class=\"line\">            queue_.push( elem );</span><br><span class=\"line\">            cond_.notify_one();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">push</span><span class=\"params\">( value_type &amp;&amp;elem )</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">std</span>::lock_guard&lt;mutex_type&gt; lock( mutex_ );</span><br><span class=\"line\">            queue_.push( <span class=\"built_in\">std</span>::move( elem ) );</span><br><span class=\"line\">            cond_.notify_one();</span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n"},{"title":"groupCache ","date":"2019-05-04T04:11:42.000Z","_content":"\n C++ Go  Go  GroupCache \n\n###  groupCache \n\n[groupcache](https://github.com/golang/groupcache) main groupcache  memcachegroupcache  getlru\n\n groupcache  key  peer HTTP  peer \n\n cache  Key  cache  Key groupcache \n\n![](/images/2019/groupcache.png)\n\n### GroupCache \n\ngroupCache  Go Interface\n\n* [lru](https://github.com/golang/groupcache/blob/master/lru/lru.go)\n* [SingleFlight](https://github.com/golang/groupcache/blob/master/singleflight/singleflight.go)\n* [consistenHash](https://github.com/golang/groupcache/blob/master/consistenthash/consistenthash.go)\n* ByteView,Sink\n* [HTTPPool](https://github.com/golang/groupcache/blob/master/http.go)\n* [groupcache.go](https://github.com/golang/groupcache/blob/master/groupcache.go) \n\n\n\n####  LRU \n\nLeast Recently Used  `container/list`   `Cache` list  `Entry`  `OnEvicted`  \n\n cache  LRU\n\n* Add: ?  list  MaxEntries\n* Get  list \n* Remove: ,  OnEvicted \n\n#### \n\nserver  Key Int Key\n\n\n crc32.CheckSumIEEE`replicas`\n\n \n\n\n\n* Add:  Key  replicas  hash  Key\n* Get Key  Key  hash  Key\n\n#### SingleFlight\n\n`call`  sync.Wait  Group Group  `call `,  Key\n\n#### ByteView & Sink \n\nByteView  groupCache  value []byte  string  Copy \n\nSink  `SetString`, `SetBytes` `SetProto` `view`  Struct  SetView ,value  byteview \n\n#### Peer & HTTPPool\n\npeers.go  http.go \n\nHTTPPool  http.Handler  PeerPicker \n\n* `peers` :  Key \n* `httpGetters map[string]*httpGetter`  httpclient\n httpGetter ProtoGetter,  Get \n* `BasePath` `  \"/_groupcache/\".  http.Handle NewHTTPPool `\n* `Replicas` \n\n#### groupcache \n\n groupcache \n\n*  mainCache ()hotCache\n*  key ( PickPeer(key) ) http ( getFromPeer ) http  groupcache\n*  groupcache () mainCache `getLocallly`  NewGroup  Getter Getter  Get \n* hotCache   10%\n* loadGroup singleFlight Key \n\n\n\n","source":"_posts/2019-05-04-groupcache-source-note.md","raw":"---\ntitle: groupCache \ndate: 2019-05-04 12:11:42\ntags: groupCache\ncategories: Program\n---\n\n C++ Go  Go  GroupCache \n\n###  groupCache \n\n[groupcache](https://github.com/golang/groupcache) main groupcache  memcachegroupcache  getlru\n\n groupcache  key  peer HTTP  peer \n\n cache  Key  cache  Key groupcache \n\n![](/images/2019/groupcache.png)\n\n### GroupCache \n\ngroupCache  Go Interface\n\n* [lru](https://github.com/golang/groupcache/blob/master/lru/lru.go)\n* [SingleFlight](https://github.com/golang/groupcache/blob/master/singleflight/singleflight.go)\n* [consistenHash](https://github.com/golang/groupcache/blob/master/consistenthash/consistenthash.go)\n* ByteView,Sink\n* [HTTPPool](https://github.com/golang/groupcache/blob/master/http.go)\n* [groupcache.go](https://github.com/golang/groupcache/blob/master/groupcache.go) \n\n\n\n####  LRU \n\nLeast Recently Used  `container/list`   `Cache` list  `Entry`  `OnEvicted`  \n\n cache  LRU\n\n* Add: ?  list  MaxEntries\n* Get  list \n* Remove: ,  OnEvicted \n\n#### \n\nserver  Key Int Key\n\n\n crc32.CheckSumIEEE`replicas`\n\n \n\n\n\n* Add:  Key  replicas  hash  Key\n* Get Key  Key  hash  Key\n\n#### SingleFlight\n\n`call`  sync.Wait  Group Group  `call `,  Key\n\n#### ByteView & Sink \n\nByteView  groupCache  value []byte  string  Copy \n\nSink  `SetString`, `SetBytes` `SetProto` `view`  Struct  SetView ,value  byteview \n\n#### Peer & HTTPPool\n\npeers.go  http.go \n\nHTTPPool  http.Handler  PeerPicker \n\n* `peers` :  Key \n* `httpGetters map[string]*httpGetter`  httpclient\n httpGetter ProtoGetter,  Get \n* `BasePath` `  \"/_groupcache/\".  http.Handle NewHTTPPool `\n* `Replicas` \n\n#### groupcache \n\n groupcache \n\n*  mainCache ()hotCache\n*  key ( PickPeer(key) ) http ( getFromPeer ) http  groupcache\n*  groupcache () mainCache `getLocallly`  NewGroup  Getter Getter  Get \n* hotCache   10%\n* loadGroup singleFlight Key \n\n\n\n","slug":"2019-05-04-groupcache-source-note","published":1,"updated":"2019-05-04T03:20:33.125Z","_id":"cjv8xuict005nm1tjv865tuj7","comments":1,"layout":"post","photos":[],"link":"","content":"<p> C++ Go  Go  GroupCache </p>\n<h3 id=\"groupCache-\"><a href=\"#groupCache-\" class=\"headerlink\" title=\"groupCache \"></a>groupCache </h3><p><a href=\"https://github.com/golang/groupcache\" target=\"_blank\" rel=\"noopener\">groupcache</a> main groupcache  memcachegroupcache  getlru</p>\n<p> groupcache  key  peer HTTP  peer </p>\n<p> cache  Key  cache  Key groupcache </p>\n<p><img src=\"/images/2019/groupcache.png\" alt=\"\"></p>\n<h3 id=\"GroupCache-\"><a href=\"#GroupCache-\" class=\"headerlink\" title=\"GroupCache \"></a>GroupCache </h3><p>groupCache  Go Interface</p>\n<ul>\n<li><a href=\"https://github.com/golang/groupcache/blob/master/lru/lru.go\" target=\"_blank\" rel=\"noopener\">lru</a></li>\n<li><a href=\"https://github.com/golang/groupcache/blob/master/singleflight/singleflight.go\" target=\"_blank\" rel=\"noopener\">SingleFlight</a></li>\n<li><a href=\"https://github.com/golang/groupcache/blob/master/consistenthash/consistenthash.go\" target=\"_blank\" rel=\"noopener\">consistenHash</a></li>\n<li>ByteView,Sink</li>\n<li><a href=\"https://github.com/golang/groupcache/blob/master/http.go\" target=\"_blank\" rel=\"noopener\">HTTPPool</a></li>\n<li><a href=\"https://github.com/golang/groupcache/blob/master/groupcache.go\" target=\"_blank\" rel=\"noopener\">groupcache.go</a> </li>\n</ul>\n<p></p>\n<h4 id=\"-LRU\"><a href=\"#-LRU\" class=\"headerlink\" title=\" LRU\"></a> LRU</h4><p>Least Recently Used  <code>container/list</code>   <code>Cache</code> list  <code>Entry</code>  <code>OnEvicted</code>  </p>\n<p> cache  LRU</p>\n<ul>\n<li>Add: ?  list  MaxEntries</li>\n<li>Get  list </li>\n<li>Remove: ,  OnEvicted </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>server  Key Int Key</p>\n<p><br> crc32.CheckSumIEEE<code>replicas</code></p>\n<p> </p>\n<p></p>\n<ul>\n<li>Add:  Key  replicas  hash  Key</li>\n<li>Get Key  Key  hash  Key</li>\n</ul>\n<h4 id=\"SingleFlight\"><a href=\"#SingleFlight\" class=\"headerlink\" title=\"SingleFlight\"></a>SingleFlight</h4><p><code>call</code>  sync.Wait  Group Group  <code>call</code>,  Key</p>\n<h4 id=\"ByteView-amp-Sink\"><a href=\"#ByteView-amp-Sink\" class=\"headerlink\" title=\"ByteView &amp; Sink\"></a>ByteView &amp; Sink</h4><p>ByteView  groupCache  value []byte  string  Copy </p>\n<p>Sink  <code>SetString</code>, <code>SetBytes</code> <code>SetProto</code> <code>view</code>  Struct  SetView ,value  byteview </p>\n<h4 id=\"Peer-amp-HTTPPool\"><a href=\"#Peer-amp-HTTPPool\" class=\"headerlink\" title=\"Peer &amp; HTTPPool\"></a>Peer &amp; HTTPPool</h4><p>peers.go  http.go </p>\n<p>HTTPPool  http.Handler  PeerPicker </p>\n<ul>\n<li><code>peers</code> :  Key </li>\n<li><code>httpGetters map[string]*httpGetter</code>  httpclient<br> httpGetter ProtoGetter,  Get </li>\n<li><code>BasePath</code> <code>  &quot;/_groupcache/&quot;.  http.Handle NewHTTPPool </code></li>\n<li><code>Replicas</code> </li>\n</ul>\n<h4 id=\"groupcache-\"><a href=\"#groupcache-\" class=\"headerlink\" title=\"groupcache \"></a>groupcache </h4><p> groupcache </p>\n<ul>\n<li> mainCache ()hotCache</li>\n<li> key ( PickPeer(key) ) http ( getFromPeer ) http  groupcache</li>\n<li> groupcache () mainCache <code>getLocallly</code>  NewGroup  Getter Getter  Get </li>\n<li>hotCache   10%</li>\n<li>loadGroup singleFlight Key </li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p> C++ Go  Go  GroupCache </p>\n<h3 id=\"groupCache-\"><a href=\"#groupCache-\" class=\"headerlink\" title=\"groupCache \"></a>groupCache </h3><p><a href=\"https://github.com/golang/groupcache\" target=\"_blank\" rel=\"noopener\">groupcache</a> main groupcache  memcachegroupcache  getlru</p>\n<p> groupcache  key  peer HTTP  peer </p>\n<p> cache  Key  cache  Key groupcache </p>\n<p><img src=\"/images/2019/groupcache.png\" alt=\"\"></p>\n<h3 id=\"GroupCache-\"><a href=\"#GroupCache-\" class=\"headerlink\" title=\"GroupCache \"></a>GroupCache </h3><p>groupCache  Go Interface</p>\n<ul>\n<li><a href=\"https://github.com/golang/groupcache/blob/master/lru/lru.go\" target=\"_blank\" rel=\"noopener\">lru</a></li>\n<li><a href=\"https://github.com/golang/groupcache/blob/master/singleflight/singleflight.go\" target=\"_blank\" rel=\"noopener\">SingleFlight</a></li>\n<li><a href=\"https://github.com/golang/groupcache/blob/master/consistenthash/consistenthash.go\" target=\"_blank\" rel=\"noopener\">consistenHash</a></li>\n<li>ByteView,Sink</li>\n<li><a href=\"https://github.com/golang/groupcache/blob/master/http.go\" target=\"_blank\" rel=\"noopener\">HTTPPool</a></li>\n<li><a href=\"https://github.com/golang/groupcache/blob/master/groupcache.go\" target=\"_blank\" rel=\"noopener\">groupcache.go</a> </li>\n</ul>\n<p></p>\n<h4 id=\"-LRU\"><a href=\"#-LRU\" class=\"headerlink\" title=\" LRU\"></a> LRU</h4><p>Least Recently Used  <code>container/list</code>   <code>Cache</code> list  <code>Entry</code>  <code>OnEvicted</code>  </p>\n<p> cache  LRU</p>\n<ul>\n<li>Add: ?  list  MaxEntries</li>\n<li>Get  list </li>\n<li>Remove: ,  OnEvicted </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>server  Key Int Key</p>\n<p><br> crc32.CheckSumIEEE<code>replicas</code></p>\n<p> </p>\n<p></p>\n<ul>\n<li>Add:  Key  replicas  hash  Key</li>\n<li>Get Key  Key  hash  Key</li>\n</ul>\n<h4 id=\"SingleFlight\"><a href=\"#SingleFlight\" class=\"headerlink\" title=\"SingleFlight\"></a>SingleFlight</h4><p><code>call</code>  sync.Wait  Group Group  <code>call</code>,  Key</p>\n<h4 id=\"ByteView-amp-Sink\"><a href=\"#ByteView-amp-Sink\" class=\"headerlink\" title=\"ByteView &amp; Sink\"></a>ByteView &amp; Sink</h4><p>ByteView  groupCache  value []byte  string  Copy </p>\n<p>Sink  <code>SetString</code>, <code>SetBytes</code> <code>SetProto</code> <code>view</code>  Struct  SetView ,value  byteview </p>\n<h4 id=\"Peer-amp-HTTPPool\"><a href=\"#Peer-amp-HTTPPool\" class=\"headerlink\" title=\"Peer &amp; HTTPPool\"></a>Peer &amp; HTTPPool</h4><p>peers.go  http.go </p>\n<p>HTTPPool  http.Handler  PeerPicker </p>\n<ul>\n<li><code>peers</code> :  Key </li>\n<li><code>httpGetters map[string]*httpGetter</code>  httpclient<br> httpGetter ProtoGetter,  Get </li>\n<li><code>BasePath</code> <code>  &quot;/_groupcache/&quot;.  http.Handle NewHTTPPool </code></li>\n<li><code>Replicas</code> </li>\n</ul>\n<h4 id=\"groupcache-\"><a href=\"#groupcache-\" class=\"headerlink\" title=\"groupcache \"></a>groupcache </h4><p> groupcache </p>\n<ul>\n<li> mainCache ()hotCache</li>\n<li> key ( PickPeer(key) ) http ( getFromPeer ) http  groupcache</li>\n<li> groupcache () mainCache <code>getLocallly</code>  NewGroup  Getter Getter  Get </li>\n<li>hotCache   10%</li>\n<li>loadGroup singleFlight Key </li>\n</ul>\n"},{"title":"AC ","date":"2019-02-22T08:11:42.000Z","_content":"AC  AhoCorasick   Alfred V. Aho  Margaret J.Corasick \n trie  \n\nAC\n* AC\n* AC\n\n\n### :\n\n*  failPtr \n* \n  * A:  curr failTo  curr  fail  failTo = curr.fail\n  * B:  curr.child[i] == failTo.child[i]\n     *  curr.child[i].fail = failTo.child[i]\n     *   failTo == null\n        *  curr.child[i].fail == root\n        * failTo = failTo.fail B\n     * curr.child[i] A\n* :\n\n### \n\n\n\n* \n* \n\n### \n\nAC Go [goAcAutoMachine](https://github.com/zheng-ji/goAcAutoMachine), \n","source":"_posts/2019-02-22-ac-automachine.md","raw":"---\ntitle: AC \ndate: 2019-02-22 16:11:42\ntags:\ncategories: Program\n---\nAC  AhoCorasick   Alfred V. Aho  Margaret J.Corasick \n trie  \n\nAC\n* AC\n* AC\n\n\n### :\n\n*  failPtr \n* \n  * A:  curr failTo  curr  fail  failTo = curr.fail\n  * B:  curr.child[i] == failTo.child[i]\n     *  curr.child[i].fail = failTo.child[i]\n     *   failTo == null\n        *  curr.child[i].fail == root\n        * failTo = failTo.fail B\n     * curr.child[i] A\n* :\n\n### \n\n\n\n* \n* \n\n### \n\nAC Go [goAcAutoMachine](https://github.com/zheng-ji/goAcAutoMachine), \n","slug":"2019-02-22-ac-automachine","published":1,"updated":"2019-05-04T03:15:07.505Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjv8xuicu005pm1tj9wr2cwbl","content":"<p>AC  AhoCorasick   Alfred V. Aho  Margaret J.Corasick <br> trie  </p>\n<p>AC</p>\n<ul>\n<li>AC</li>\n<li>AC</li>\n</ul>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h3><ul>\n<li> failPtr </li>\n<li><ul>\n<li>A:  curr failTo  curr  fail  failTo = curr.fail</li>\n<li>B:  curr.child[i] == failTo.child[i]<ul>\n<li>curr.child[i].fail = failTo.child[i]</li>\n<li> failTo == null<ul>\n<li> curr.child[i].fail == root</li>\n<li>failTo = failTo.fail B</li>\n</ul>\n</li>\n<li>curr.child[i] A</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>:</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>AC Go <a href=\"https://github.com/zheng-ji/goAcAutoMachine\" target=\"_blank\" rel=\"noopener\">goAcAutoMachine</a>, </p>\n","site":{"data":{}},"excerpt":"","more":"<p>AC  AhoCorasick   Alfred V. Aho  Margaret J.Corasick <br> trie  </p>\n<p>AC</p>\n<ul>\n<li>AC</li>\n<li>AC</li>\n</ul>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h3><ul>\n<li> failPtr </li>\n<li><ul>\n<li>A:  curr failTo  curr  fail  failTo = curr.fail</li>\n<li>B:  curr.child[i] == failTo.child[i]<ul>\n<li>curr.child[i].fail = failTo.child[i]</li>\n<li> failTo == null<ul>\n<li> curr.child[i].fail == root</li>\n<li>failTo = failTo.fail B</li>\n</ul>\n</li>\n<li>curr.child[i] A</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>:</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>AC Go <a href=\"https://github.com/zheng-ji/goAcAutoMachine\" target=\"_blank\" rel=\"noopener\">goAcAutoMachine</a>, </p>\n"},{"title":"ElasticSearch ","date":"2019-02-22T08:11:42.000Z","_content":"\n Eleasticsearch SA\n\n### Mapping  Schema\nES  mapping MySQL  TableSchema mapping  type dynamic=strict\n\n```\ncurl -XPUT \"$URL/mall_goods_v1/?pretty\" -H 'Content-Type:application/json' -d'\n{\n    \"mappings\" : {\n        \"goods\": {\n            \"dynamic\": \"strict\",\n                \"properties\": {\n                    \"item_name\": {\n                        \"type\": \"text\",\n                        \"analyzer\": \"ik_max_word\",\n                        \"search_analyzer\": \"ik_smart\"\n                    },\n                    \"item_code\": {\n                        \"type\": \"keyword\"\n                    },\n                    \"status\": {\n                        \"type\": \"integer\"\n                    }, \n                    \"start_time\":{\n                        \"type\" : \"date\"\n                    }, \n                    \"group_ids\": {\n                        \"type\": \"text\",\n                        \"analyzer\": \"whitespace\"\n                    },\n                }\n        }\n    }\n}';\n```\n### \n\nESIK\n* ik_max_word:\n* ik_smart:\nik_max_word ik_smart\n\n\n\n### \n\n ES  Index (alias) \n:\n student_v1  Index , student_v2  Index,  student_v1  student  student_v2  student  student_v2, \n\n```\ncurl -XPOST \"$URL/_aliases?pretty\" -H 'Content-Type:application/json'  -d' \n{ \"actions\" : [ { \"add\" : { \"index\" : \"student_v2\", \"alias\" : \"student\" } } ] } '\n\n```\n\n\n### ES \n\n*  text  filter  must  filter filter \n\n*  \"match\" \"term\" \n\n*  termvector \n\n```\ncurl -XGET -H 'Content-Type:application/json' \"http://$URL/mall_goods/goods/12954895599938508532/_termvectors?pretty\" -d ' {\n    \"fields\" : [ \"item_name\"],\n    \"offsets\" : true,\n    \"payloads\" : true,\n    \"positions\" : true,\n    \"term_statistics\" : true,\n    \"field_statistics\" : true\n} '\n```\n\n*  \nElasticsearch  Elasticsearch   Elasticsearch   _version     _version .\n version_type = external , \n\n```\nPUT /website/blog/2?version=5&version_type=external\n{\n  \"title\": \"My first external blog entry\",\n  \"text\":  \"Starting to get the hang of this...\"\n}\n```\n\n\n","source":"_posts/2019-03-08-es-skill.md","raw":"---\ntitle: ElasticSearch \ndate: 2019-02-22 16:11:42\ntags:\ncategories: Program\n---\n\n Eleasticsearch SA\n\n### Mapping  Schema\nES  mapping MySQL  TableSchema mapping  type dynamic=strict\n\n```\ncurl -XPUT \"$URL/mall_goods_v1/?pretty\" -H 'Content-Type:application/json' -d'\n{\n    \"mappings\" : {\n        \"goods\": {\n            \"dynamic\": \"strict\",\n                \"properties\": {\n                    \"item_name\": {\n                        \"type\": \"text\",\n                        \"analyzer\": \"ik_max_word\",\n                        \"search_analyzer\": \"ik_smart\"\n                    },\n                    \"item_code\": {\n                        \"type\": \"keyword\"\n                    },\n                    \"status\": {\n                        \"type\": \"integer\"\n                    }, \n                    \"start_time\":{\n                        \"type\" : \"date\"\n                    }, \n                    \"group_ids\": {\n                        \"type\": \"text\",\n                        \"analyzer\": \"whitespace\"\n                    },\n                }\n        }\n    }\n}';\n```\n### \n\nESIK\n* ik_max_word:\n* ik_smart:\nik_max_word ik_smart\n\n\n\n### \n\n ES  Index (alias) \n:\n student_v1  Index , student_v2  Index,  student_v1  student  student_v2  student  student_v2, \n\n```\ncurl -XPOST \"$URL/_aliases?pretty\" -H 'Content-Type:application/json'  -d' \n{ \"actions\" : [ { \"add\" : { \"index\" : \"student_v2\", \"alias\" : \"student\" } } ] } '\n\n```\n\n\n### ES \n\n*  text  filter  must  filter filter \n\n*  \"match\" \"term\" \n\n*  termvector \n\n```\ncurl -XGET -H 'Content-Type:application/json' \"http://$URL/mall_goods/goods/12954895599938508532/_termvectors?pretty\" -d ' {\n    \"fields\" : [ \"item_name\"],\n    \"offsets\" : true,\n    \"payloads\" : true,\n    \"positions\" : true,\n    \"term_statistics\" : true,\n    \"field_statistics\" : true\n} '\n```\n\n*  \nElasticsearch  Elasticsearch   Elasticsearch   _version     _version .\n version_type = external , \n\n```\nPUT /website/blog/2?version=5&version_type=external\n{\n  \"title\": \"My first external blog entry\",\n  \"text\":  \"Starting to get the hang of this...\"\n}\n```\n\n\n","slug":"2019-03-08-es-skill","published":1,"updated":"2019-07-07T02:21:17.715Z","_id":"cjv8xuicw005rm1tjc0srcq8r","comments":1,"layout":"post","photos":[],"link":"","content":"<p> Eleasticsearch SA</p>\n<h3 id=\"Mapping--Schema\"><a href=\"#Mapping--Schema\" class=\"headerlink\" title=\"Mapping  Schema\"></a>Mapping  Schema</h3><p>ES  mapping MySQL  TableSchema mapping  type dynamic=strict</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -XPUT &quot;$URL/mall_goods_v1/?pretty&quot; -H &apos;Content-Type:application/json&apos; -d&apos;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;mappings&quot; : &#123;</span><br><span class=\"line\">        &quot;goods&quot;: &#123;</span><br><span class=\"line\">            &quot;dynamic&quot;: &quot;strict&quot;,</span><br><span class=\"line\">                &quot;properties&quot;: &#123;</span><br><span class=\"line\">                    &quot;item_name&quot;: &#123;</span><br><span class=\"line\">                        &quot;type&quot;: &quot;text&quot;,</span><br><span class=\"line\">                        &quot;analyzer&quot;: &quot;ik_max_word&quot;,</span><br><span class=\"line\">                        &quot;search_analyzer&quot;: &quot;ik_smart&quot;</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    &quot;item_code&quot;: &#123;</span><br><span class=\"line\">                        &quot;type&quot;: &quot;keyword&quot;</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    &quot;status&quot;: &#123;</span><br><span class=\"line\">                        &quot;type&quot;: &quot;integer&quot;</span><br><span class=\"line\">                    &#125;, </span><br><span class=\"line\">                    &quot;start_time&quot;:&#123;</span><br><span class=\"line\">                        &quot;type&quot; : &quot;date&quot;</span><br><span class=\"line\">                    &#125;, </span><br><span class=\"line\">                    &quot;group_ids&quot;: &#123;</span><br><span class=\"line\">                        &quot;type&quot;: &quot;text&quot;,</span><br><span class=\"line\">                        &quot;analyzer&quot;: &quot;whitespace&quot;</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;&apos;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>ESIK</p>\n<ul>\n<li>ik_max_word:</li>\n<li>ik_smart:<br>ik_max_word ik_smart<br></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> ES  Index (alias) <br>:<br> student_v1  Index , student_v2  Index,  student_v1  student  student_v2  student  student_v2, </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -XPOST &quot;$URL/_aliases?pretty&quot; -H &apos;Content-Type:application/json&apos;  -d&apos; </span><br><span class=\"line\">&#123; &quot;actions&quot; : [ &#123; &quot;add&quot; : &#123; &quot;index&quot; : &quot;student_v2&quot;, &quot;alias&quot; : &quot;student&quot; &#125; &#125; ] &#125; &apos;</span><br></pre></td></tr></table></figure>\n<h3 id=\"ES-\"><a href=\"#ES-\" class=\"headerlink\" title=\"ES \"></a>ES </h3><ul>\n<li><p> text  filter  must  filter filter </p>\n</li>\n<li><p> match term </p>\n</li>\n<li><p> termvector </p>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -XGET -H &apos;Content-Type:application/json&apos; &quot;http://$URL/mall_goods/goods/12954895599938508532/_termvectors?pretty&quot; -d &apos; &#123;</span><br><span class=\"line\">    &quot;fields&quot; : [ &quot;item_name&quot;],</span><br><span class=\"line\">    &quot;offsets&quot; : true,</span><br><span class=\"line\">    &quot;payloads&quot; : true,</span><br><span class=\"line\">    &quot;positions&quot; : true,</span><br><span class=\"line\">    &quot;term_statistics&quot; : true,</span><br><span class=\"line\">    &quot;field_statistics&quot; : true</span><br><span class=\"line\">&#125; &apos;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><br>Elasticsearch  Elasticsearch   Elasticsearch   _version     _version .<br> version_type = external , </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT /website/blog/2?version=5&amp;version_type=external</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;title&quot;: &quot;My first external blog entry&quot;,</span><br><span class=\"line\">  &quot;text&quot;:  &quot;Starting to get the hang of this...&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p> Eleasticsearch SA</p>\n<h3 id=\"Mapping--Schema\"><a href=\"#Mapping--Schema\" class=\"headerlink\" title=\"Mapping  Schema\"></a>Mapping  Schema</h3><p>ES  mapping MySQL  TableSchema mapping  type dynamic=strict</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -XPUT &quot;$URL/mall_goods_v1/?pretty&quot; -H &apos;Content-Type:application/json&apos; -d&apos;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;mappings&quot; : &#123;</span><br><span class=\"line\">        &quot;goods&quot;: &#123;</span><br><span class=\"line\">            &quot;dynamic&quot;: &quot;strict&quot;,</span><br><span class=\"line\">                &quot;properties&quot;: &#123;</span><br><span class=\"line\">                    &quot;item_name&quot;: &#123;</span><br><span class=\"line\">                        &quot;type&quot;: &quot;text&quot;,</span><br><span class=\"line\">                        &quot;analyzer&quot;: &quot;ik_max_word&quot;,</span><br><span class=\"line\">                        &quot;search_analyzer&quot;: &quot;ik_smart&quot;</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    &quot;item_code&quot;: &#123;</span><br><span class=\"line\">                        &quot;type&quot;: &quot;keyword&quot;</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    &quot;status&quot;: &#123;</span><br><span class=\"line\">                        &quot;type&quot;: &quot;integer&quot;</span><br><span class=\"line\">                    &#125;, </span><br><span class=\"line\">                    &quot;start_time&quot;:&#123;</span><br><span class=\"line\">                        &quot;type&quot; : &quot;date&quot;</span><br><span class=\"line\">                    &#125;, </span><br><span class=\"line\">                    &quot;group_ids&quot;: &#123;</span><br><span class=\"line\">                        &quot;type&quot;: &quot;text&quot;,</span><br><span class=\"line\">                        &quot;analyzer&quot;: &quot;whitespace&quot;</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;&apos;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>ESIK</p>\n<ul>\n<li>ik_max_word:</li>\n<li>ik_smart:<br>ik_max_word ik_smart<br></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> ES  Index (alias) <br>:<br> student_v1  Index , student_v2  Index,  student_v1  student  student_v2  student  student_v2, </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -XPOST &quot;$URL/_aliases?pretty&quot; -H &apos;Content-Type:application/json&apos;  -d&apos; </span><br><span class=\"line\">&#123; &quot;actions&quot; : [ &#123; &quot;add&quot; : &#123; &quot;index&quot; : &quot;student_v2&quot;, &quot;alias&quot; : &quot;student&quot; &#125; &#125; ] &#125; &apos;</span><br></pre></td></tr></table></figure>\n<h3 id=\"ES-\"><a href=\"#ES-\" class=\"headerlink\" title=\"ES \"></a>ES </h3><ul>\n<li><p> text  filter  must  filter filter </p>\n</li>\n<li><p> match term </p>\n</li>\n<li><p> termvector </p>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -XGET -H &apos;Content-Type:application/json&apos; &quot;http://$URL/mall_goods/goods/12954895599938508532/_termvectors?pretty&quot; -d &apos; &#123;</span><br><span class=\"line\">    &quot;fields&quot; : [ &quot;item_name&quot;],</span><br><span class=\"line\">    &quot;offsets&quot; : true,</span><br><span class=\"line\">    &quot;payloads&quot; : true,</span><br><span class=\"line\">    &quot;positions&quot; : true,</span><br><span class=\"line\">    &quot;term_statistics&quot; : true,</span><br><span class=\"line\">    &quot;field_statistics&quot; : true</span><br><span class=\"line\">&#125; &apos;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><br>Elasticsearch  Elasticsearch   Elasticsearch   _version     _version .<br> version_type = external , </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT /website/blog/2?version=5&amp;version_type=external</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;title&quot;: &quot;My first external blog entry&quot;,</span><br><span class=\"line\">  &quot;text&quot;:  &quot;Starting to get the hang of this...&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"","date":"2012-05-07T05:23:00.000Z","comments":1,"_content":"[](http://www.nowamagic.net/php/php_BeHappyProgrammer.php)\n\n### \n\n.\n\n\n\n\n\n=+\n\nCPU1 2\n\nCPU\n\n12\n\n1W PV166.67160834.554242\n\n42\n\ngooglePV1321.4\n\nHDWiki\n\n### \n\n web  session  web  session  session codercoder coder\n\n\n\nhibernatejavaRuby PHPHDWiki DiscuzLuceneLucene\n\nSQL=10\n\n### \n\n \n\n\n\n QQQQ.\n\nDIV \n\n \n\n\n\n\n\n### \n\nIT\n\nPHP5.3MySQL \n\n\n","source":"_posts/2013-08-28-zuo-kuai-le-de-cheng-xu-yuan.markdown","raw":"---\nlayout: post\ntitle: \"\"\ndate: 2012-05-07 13:23\ncomments: true\ncategories: Life\n---\n[](http://www.nowamagic.net/php/php_BeHappyProgrammer.php)\n\n### \n\n.\n\n\n\n\n\n=+\n\nCPU1 2\n\nCPU\n\n12\n\n1W PV166.67160834.554242\n\n42\n\ngooglePV1321.4\n\nHDWiki\n\n### \n\n web  session  web  session  session codercoder coder\n\n\n\nhibernatejavaRuby PHPHDWiki DiscuzLuceneLucene\n\nSQL=10\n\n### \n\n \n\n\n\n QQQQ.\n\nDIV \n\n \n\n\n\n\n\n### \n\nIT\n\nPHP5.3MySQL \n\n\n","slug":"2013-08-28-zuo-kuai-le-de-cheng-xu-yuan","published":1,"updated":"2018-06-17T10:38:56.000Z","photos":[],"link":"","_id":"cjv8xuicx005tm1tjquntl36m","content":"<p><a href=\"http://www.nowamagic.net/php/php_BeHappyProgrammer.php\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>.</p>\n<p></p>\n<p></p>\n<p>=+</p>\n<p>CPU1 2</p>\n<p>CPU</p>\n<p>12</p>\n<p>1W PV166.67160834.554242</p>\n<p>42</p>\n<p>googlePV1321.4</p>\n<p>HDWiki</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> web  session  web  session  session codercoder coder</p>\n<p></p>\n<p>hibernatejavaRuby PHPHDWiki DiscuzLuceneLucene</p>\n<p>SQL=10</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> </p>\n<p></p>\n<p> QQQQ.</p>\n<p>DIV </p>\n<p> </p>\n<p></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>IT</p>\n<p>PHP5.3MySQL </p>\n<p></p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"http://www.nowamagic.net/php/php_BeHappyProgrammer.php\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>.</p>\n<p></p>\n<p></p>\n<p>=+</p>\n<p>CPU1 2</p>\n<p>CPU</p>\n<p>12</p>\n<p>1W PV166.67160834.554242</p>\n<p>42</p>\n<p>googlePV1321.4</p>\n<p>HDWiki</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> web  session  web  session  session codercoder coder</p>\n<p></p>\n<p>hibernatejavaRuby PHPHDWiki DiscuzLuceneLucene</p>\n<p>SQL=10</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> </p>\n<p></p>\n<p> QQQQ.</p>\n<p>DIV </p>\n<p> </p>\n<p></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>IT</p>\n<p>PHP5.3MySQL </p>\n<p></p>\n"},{"title":"ElasticSearch ","date":"2019-06-13T12:11:42.000Z","_content":"\nElasticSearch  \n\n* ES \n* ElasticDump \n\n### ES \n\n ElasticSearch [](https://www.elastic.co/guide/cn/elasticsearch/guide/current/backing-up-your-cluster.html) \n  NFSAWS S3 HDFS HDFS \n\n HDFS  [repository-hdfs](https://artifacts.elastic.co/downloads/elasticsearch-plugins/repository-hdfs/repository-hdfs-6.6.1.zip)  `/tmp`  ES\n\n```\n./elasticsearch-plugin install file:///tmp/repository-hdfs-6.2.1.zip \n```\n\n\n1.  hdfs_backup ,  `hdfs://<hadoop-domain.com>:9000/data/es_backup`  `{\"acknowlege\":\"true\"}`\n\n ```\n curl -XPUT http://<Port:IP>/_snapshot/hdfs_backup -H 'Content-Type:application/json' -d'\n {  \n   \"type\": \"hdfs\",  \n   \"settings\": {\n     \"uri\": \"hdfs://<hadoop-domain.com>:9000\",\n     \"path\": \"/data/es_backup\"\n   }\n }'\n\n ```\n\n2.  `student ` `{\"acknowlege\":\"true\"}` URL  wait_for_completion=true\n\n```\ncurl -XPUT http://<Port:IP>/_snapshot/hdfs_backup/snapshot_1 -H 'ContentType:application/json' -d'\n{\n    \"indices\": \"student\"\n}'\n```\n\n\n\n3. :\n\n```\ncurl -XGET \"http://<Port:IP>/_snapshot/hdfs_backup/*\" '\n{\n  \"snapshots\" : [\n    {\n      \"snapshot\" : \"snapshot_1\",\n      \"uuid\" : \"kTdQRNs6RbO9LZ0LCfXLYg\",\n      \"version_id\" : 6060199,\n      \"version\" : \"6.6.1\",\n      \"indices\" : [\n        \"student\"\n      ],\n      \"include_global_state\" : true,\n      \"state\" : \"IN_PROGRESS\",\n      \"start_time\" : \"2019-06-13T07:41:47.556Z\",\n      \"start_time_in_millis\" : 1560411707556,\n      \"end_time\" : \"1970-01-01T00:00:00.000Z\",\n      \"end_time_in_millis\" : 0,\n      \"duration_in_millis\" : -1560411707556,\n      \"failures\" : [ ],\n      \"shards\" : {\n        \"total\" : 0,\n        \"failed\" : 0,\n        \"successful\" : 0\n      }\n    }\n  ]\n}\n```\n\n4. \n\n```\ncurl -XPOST \"http://<Port:IP>/_snapshot/hdfs_backup/snapshot_1/_restore?wait_for_completion=true\" -H 'Content-Type: application/json' -d'\n{\n\t\"indices\": \"student\",\"rename_replacement\": \"student\"\n}'\n```\n\n###  ElasticDump \n\n  [elasticdump](https://github.com/taskrabbit/elasticsearch-dump)  nodeJs  ES  [Scroll](https://www.elastic.co/guide/cn/elasticsearch/guide/current/scroll.html) \n\n*  mapping   gzip \n\n```\nelasticdump --input=http://<Port:IP>/student  --type=data --limit=10000  --output=$ | gzip > student.json.gz\nelasticdump --input=http://<Port:IP>/student --output=stduent_mapping.json --type=mapping \n```\n\n* mapping   gzip \n\n```\nelasticdump --input=./student.json --output=http://<Port:IP>/student\n```\n\n \n","source":"_posts/2019-06-13-es-backup.md","raw":"---\ntitle: ElasticSearch \ndate: 2019-06-13 12:11:42\ntags:  System\ncategories: Program\n---\n\nElasticSearch  \n\n* ES \n* ElasticDump \n\n### ES \n\n ElasticSearch [](https://www.elastic.co/guide/cn/elasticsearch/guide/current/backing-up-your-cluster.html) \n  NFSAWS S3 HDFS HDFS \n\n HDFS  [repository-hdfs](https://artifacts.elastic.co/downloads/elasticsearch-plugins/repository-hdfs/repository-hdfs-6.6.1.zip)  `/tmp`  ES\n\n```\n./elasticsearch-plugin install file:///tmp/repository-hdfs-6.2.1.zip \n```\n\n\n1.  hdfs_backup ,  `hdfs://<hadoop-domain.com>:9000/data/es_backup`  `{\"acknowlege\":\"true\"}`\n\n ```\n curl -XPUT http://<Port:IP>/_snapshot/hdfs_backup -H 'Content-Type:application/json' -d'\n {  \n   \"type\": \"hdfs\",  \n   \"settings\": {\n     \"uri\": \"hdfs://<hadoop-domain.com>:9000\",\n     \"path\": \"/data/es_backup\"\n   }\n }'\n\n ```\n\n2.  `student ` `{\"acknowlege\":\"true\"}` URL  wait_for_completion=true\n\n```\ncurl -XPUT http://<Port:IP>/_snapshot/hdfs_backup/snapshot_1 -H 'ContentType:application/json' -d'\n{\n    \"indices\": \"student\"\n}'\n```\n\n\n\n3. :\n\n```\ncurl -XGET \"http://<Port:IP>/_snapshot/hdfs_backup/*\" '\n{\n  \"snapshots\" : [\n    {\n      \"snapshot\" : \"snapshot_1\",\n      \"uuid\" : \"kTdQRNs6RbO9LZ0LCfXLYg\",\n      \"version_id\" : 6060199,\n      \"version\" : \"6.6.1\",\n      \"indices\" : [\n        \"student\"\n      ],\n      \"include_global_state\" : true,\n      \"state\" : \"IN_PROGRESS\",\n      \"start_time\" : \"2019-06-13T07:41:47.556Z\",\n      \"start_time_in_millis\" : 1560411707556,\n      \"end_time\" : \"1970-01-01T00:00:00.000Z\",\n      \"end_time_in_millis\" : 0,\n      \"duration_in_millis\" : -1560411707556,\n      \"failures\" : [ ],\n      \"shards\" : {\n        \"total\" : 0,\n        \"failed\" : 0,\n        \"successful\" : 0\n      }\n    }\n  ]\n}\n```\n\n4. \n\n```\ncurl -XPOST \"http://<Port:IP>/_snapshot/hdfs_backup/snapshot_1/_restore?wait_for_completion=true\" -H 'Content-Type: application/json' -d'\n{\n\t\"indices\": \"student\",\"rename_replacement\": \"student\"\n}'\n```\n\n###  ElasticDump \n\n  [elasticdump](https://github.com/taskrabbit/elasticsearch-dump)  nodeJs  ES  [Scroll](https://www.elastic.co/guide/cn/elasticsearch/guide/current/scroll.html) \n\n*  mapping   gzip \n\n```\nelasticdump --input=http://<Port:IP>/student  --type=data --limit=10000  --output=$ | gzip > student.json.gz\nelasticdump --input=http://<Port:IP>/student --output=stduent_mapping.json --type=mapping \n```\n\n* mapping   gzip \n\n```\nelasticdump --input=./student.json --output=http://<Port:IP>/student\n```\n\n \n","slug":"2019-06-13-es-backup","published":1,"updated":"2019-06-13T12:41:30.000Z","_id":"cjwumzefe0000mmdqx64r9u1n","comments":1,"layout":"post","photos":[],"link":"","content":"<p>ElasticSearch  </p>\n<ul>\n<li>ES </li>\n<li>ElasticDump </li>\n</ul>\n<h3 id=\"ES-\"><a href=\"#ES-\" class=\"headerlink\" title=\"ES \"></a>ES </h3><p> ElasticSearch <a href=\"https://www.elastic.co/guide/cn/elasticsearch/guide/current/backing-up-your-cluster.html\" target=\"_blank\" rel=\"noopener\"></a><br>  NFSAWS S3 HDFS HDFS </p>\n<p> HDFS  <a href=\"https://artifacts.elastic.co/downloads/elasticsearch-plugins/repository-hdfs/repository-hdfs-6.6.1.zip\" target=\"_blank\" rel=\"noopener\">repository-hdfs</a>  <code>/tmp</code>  ES</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./elasticsearch-plugin install file:///tmp/repository-hdfs-6.2.1.zip</span><br></pre></td></tr></table></figure>\n<ol>\n<li><p> hdfs_backup ,  <code>hdfs://&lt;hadoop-domain.com&gt;:9000/data/es_backup</code>  <code>{&quot;acknowlege&quot;:&quot;true&quot;}</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -XPUT http://&lt;Port:IP&gt;/_snapshot/hdfs_backup -H &apos;Content-Type:application/json&apos; -d&apos;</span><br><span class=\"line\">&#123;  </span><br><span class=\"line\">  &quot;type&quot;: &quot;hdfs&quot;,  </span><br><span class=\"line\">  &quot;settings&quot;: &#123;</span><br><span class=\"line\">    &quot;uri&quot;: &quot;hdfs://&lt;hadoop-domain.com&gt;:9000&quot;,</span><br><span class=\"line\">    &quot;path&quot;: &quot;/data/es_backup&quot;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;&apos;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p> <code>student</code> <code>{&quot;acknowlege&quot;:&quot;true&quot;}</code> URL  wait_for_completion=true</p>\n</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -XPUT http://&lt;Port:IP&gt;/_snapshot/hdfs_backup/snapshot_1 -H &apos;ContentType:application/json&apos; -d&apos;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;indices&quot;: &quot;student&quot;</span><br><span class=\"line\">&#125;&apos;</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>:</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -XGET &quot;http://&lt;Port:IP&gt;/_snapshot/hdfs_backup/*&quot; &apos;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;snapshots&quot; : [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      &quot;snapshot&quot; : &quot;snapshot_1&quot;,</span><br><span class=\"line\">      &quot;uuid&quot; : &quot;kTdQRNs6RbO9LZ0LCfXLYg&quot;,</span><br><span class=\"line\">      &quot;version_id&quot; : 6060199,</span><br><span class=\"line\">      &quot;version&quot; : &quot;6.6.1&quot;,</span><br><span class=\"line\">      &quot;indices&quot; : [</span><br><span class=\"line\">        &quot;student&quot;</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      &quot;include_global_state&quot; : true,</span><br><span class=\"line\">      &quot;state&quot; : &quot;IN_PROGRESS&quot;,</span><br><span class=\"line\">      &quot;start_time&quot; : &quot;2019-06-13T07:41:47.556Z&quot;,</span><br><span class=\"line\">      &quot;start_time_in_millis&quot; : 1560411707556,</span><br><span class=\"line\">      &quot;end_time&quot; : &quot;1970-01-01T00:00:00.000Z&quot;,</span><br><span class=\"line\">      &quot;end_time_in_millis&quot; : 0,</span><br><span class=\"line\">      &quot;duration_in_millis&quot; : -1560411707556,</span><br><span class=\"line\">      &quot;failures&quot; : [ ],</span><br><span class=\"line\">      &quot;shards&quot; : &#123;</span><br><span class=\"line\">        &quot;total&quot; : 0,</span><br><span class=\"line\">        &quot;failed&quot; : 0,</span><br><span class=\"line\">        &quot;successful&quot; : 0</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li></li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -XPOST &quot;http://&lt;Port:IP&gt;/_snapshot/hdfs_backup/snapshot_1/_restore?wait_for_completion=true&quot; -H &apos;Content-Type: application/json&apos; -d&apos;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t&quot;indices&quot;: &quot;student&quot;,&quot;rename_replacement&quot;: &quot;student&quot;</span><br><span class=\"line\">&#125;&apos;</span><br></pre></td></tr></table></figure>\n<h3 id=\"-ElasticDump-\"><a href=\"#-ElasticDump-\" class=\"headerlink\" title=\" ElasticDump \"></a> ElasticDump </h3><p>  <a href=\"https://github.com/taskrabbit/elasticsearch-dump\" target=\"_blank\" rel=\"noopener\">elasticdump</a>  nodeJs  ES  <a href=\"https://www.elastic.co/guide/cn/elasticsearch/guide/current/scroll.html\" target=\"_blank\" rel=\"noopener\">Scroll</a> </p>\n<ul>\n<li> mapping   gzip </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">elasticdump --input=http://&lt;Port:IP&gt;/student  --type=data --limit=10000  --output=$ | gzip &gt; student.json.gz</span><br><span class=\"line\">elasticdump --input=http://&lt;Port:IP&gt;/student --output=stduent_mapping.json --type=mapping</span><br></pre></td></tr></table></figure>\n<ul>\n<li>mapping   gzip </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">elasticdump --input=./student.json --output=http://&lt;Port:IP&gt;/student</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>ElasticSearch  </p>\n<ul>\n<li>ES </li>\n<li>ElasticDump </li>\n</ul>\n<h3 id=\"ES-\"><a href=\"#ES-\" class=\"headerlink\" title=\"ES \"></a>ES </h3><p> ElasticSearch <a href=\"https://www.elastic.co/guide/cn/elasticsearch/guide/current/backing-up-your-cluster.html\" target=\"_blank\" rel=\"noopener\"></a><br>  NFSAWS S3 HDFS HDFS </p>\n<p> HDFS  <a href=\"https://artifacts.elastic.co/downloads/elasticsearch-plugins/repository-hdfs/repository-hdfs-6.6.1.zip\" target=\"_blank\" rel=\"noopener\">repository-hdfs</a>  <code>/tmp</code>  ES</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./elasticsearch-plugin install file:///tmp/repository-hdfs-6.2.1.zip</span><br></pre></td></tr></table></figure>\n<ol>\n<li><p> hdfs_backup ,  <code>hdfs://&lt;hadoop-domain.com&gt;:9000/data/es_backup</code>  <code>{&quot;acknowlege&quot;:&quot;true&quot;}</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -XPUT http://&lt;Port:IP&gt;/_snapshot/hdfs_backup -H &apos;Content-Type:application/json&apos; -d&apos;</span><br><span class=\"line\">&#123;  </span><br><span class=\"line\">  &quot;type&quot;: &quot;hdfs&quot;,  </span><br><span class=\"line\">  &quot;settings&quot;: &#123;</span><br><span class=\"line\">    &quot;uri&quot;: &quot;hdfs://&lt;hadoop-domain.com&gt;:9000&quot;,</span><br><span class=\"line\">    &quot;path&quot;: &quot;/data/es_backup&quot;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;&apos;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p> <code>student</code> <code>{&quot;acknowlege&quot;:&quot;true&quot;}</code> URL  wait_for_completion=true</p>\n</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -XPUT http://&lt;Port:IP&gt;/_snapshot/hdfs_backup/snapshot_1 -H &apos;ContentType:application/json&apos; -d&apos;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;indices&quot;: &quot;student&quot;</span><br><span class=\"line\">&#125;&apos;</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>:</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -XGET &quot;http://&lt;Port:IP&gt;/_snapshot/hdfs_backup/*&quot; &apos;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;snapshots&quot; : [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      &quot;snapshot&quot; : &quot;snapshot_1&quot;,</span><br><span class=\"line\">      &quot;uuid&quot; : &quot;kTdQRNs6RbO9LZ0LCfXLYg&quot;,</span><br><span class=\"line\">      &quot;version_id&quot; : 6060199,</span><br><span class=\"line\">      &quot;version&quot; : &quot;6.6.1&quot;,</span><br><span class=\"line\">      &quot;indices&quot; : [</span><br><span class=\"line\">        &quot;student&quot;</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      &quot;include_global_state&quot; : true,</span><br><span class=\"line\">      &quot;state&quot; : &quot;IN_PROGRESS&quot;,</span><br><span class=\"line\">      &quot;start_time&quot; : &quot;2019-06-13T07:41:47.556Z&quot;,</span><br><span class=\"line\">      &quot;start_time_in_millis&quot; : 1560411707556,</span><br><span class=\"line\">      &quot;end_time&quot; : &quot;1970-01-01T00:00:00.000Z&quot;,</span><br><span class=\"line\">      &quot;end_time_in_millis&quot; : 0,</span><br><span class=\"line\">      &quot;duration_in_millis&quot; : -1560411707556,</span><br><span class=\"line\">      &quot;failures&quot; : [ ],</span><br><span class=\"line\">      &quot;shards&quot; : &#123;</span><br><span class=\"line\">        &quot;total&quot; : 0,</span><br><span class=\"line\">        &quot;failed&quot; : 0,</span><br><span class=\"line\">        &quot;successful&quot; : 0</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li></li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -XPOST &quot;http://&lt;Port:IP&gt;/_snapshot/hdfs_backup/snapshot_1/_restore?wait_for_completion=true&quot; -H &apos;Content-Type: application/json&apos; -d&apos;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t&quot;indices&quot;: &quot;student&quot;,&quot;rename_replacement&quot;: &quot;student&quot;</span><br><span class=\"line\">&#125;&apos;</span><br></pre></td></tr></table></figure>\n<h3 id=\"-ElasticDump-\"><a href=\"#-ElasticDump-\" class=\"headerlink\" title=\" ElasticDump \"></a> ElasticDump </h3><p>  <a href=\"https://github.com/taskrabbit/elasticsearch-dump\" target=\"_blank\" rel=\"noopener\">elasticdump</a>  nodeJs  ES  <a href=\"https://www.elastic.co/guide/cn/elasticsearch/guide/current/scroll.html\" target=\"_blank\" rel=\"noopener\">Scroll</a> </p>\n<ul>\n<li> mapping   gzip </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">elasticdump --input=http://&lt;Port:IP&gt;/student  --type=data --limit=10000  --output=$ | gzip &gt; student.json.gz</span><br><span class=\"line\">elasticdump --input=http://&lt;Port:IP&gt;/student --output=stduent_mapping.json --type=mapping</span><br></pre></td></tr></table></figure>\n<ul>\n<li>mapping   gzip </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">elasticdump --input=./student.json --output=http://&lt;Port:IP&gt;/student</span><br></pre></td></tr></table></figure>\n"},{"title":"ProtoBuffer  Option ","date":"2019-08-03T04:11:42.000Z","_content":"\n\n ProtoBuffer ,  Kid ProtoBuffer  `age`7\n\n```\nmessage Kid\n{\n   optional uint32 age = 1 [default=7];\n   optional uint32 score = 2 ;\n}\n```\n\n PB   Option \n\n`` Option,  Option,  ProtoBuffer :\n\n```\nmessage Kid\n{\n   optional uint32 age = 1 [default=7];\n   optional uint32 score = 2 [action = Report];\n}\n```\n\n PB Option\n\n\n#### \n\n1:   FieldOption , `action.proto`  Option  Proto \n\n```\npackage action;\nimport \"google/protobuf/descriptor.proto\";\n\nenum ActionType {\n    REPORT = 1;\n}\nextend google.protobuf.FieldOptions {\n    optional ActionType rule = 12345 [default = REPORT];\n}\n```\n\n2  Option\nimport , \n\n```\npackage Kid                                                                          \nimport \"action.proto\";                                                                    \nmessage person \n{\n   optional uint32 age = 1;\n   optional int32 age = 2[(action.rule) = REPORT]         \n}\n```\n\n\n####  OPTION \n\n descriptor && reflection  option  \n\n```\n#include <iostream>\n#include <google/protobuf/message.h>\n#include <google/protobuf/descriptor.h>\n#include \"kid.pb.h\"\nusing namespace std;\n\nint main()\n{\n    Kid obj;\n    obj.set_age(12);\n\n    auto descriptor = obj.GetDescriptor();\n    auto reflection = obj.GetReflection();\n\t//  FieldName \n    auto  idField = descriptor->FindFieldByName(\"age\");\n    reflection->SetInt32(&obj, idField, 18);\n    for (unsigned int i = 0; i < descriptor->field_count(); ++i) \n    {\n        auto field = descriptor->field(i);\n\n        cout << \"field_is_repeated:\" << field->is_repeated() << endl;\n        //  field_num\n        cout << \"field_num:\" << field->number() << endl;\n        //  Option cout << \"optiona value:\" << field->options().GetExtension(action::rule) << endl;\n\n        switch (field->type()) \n        {\n            case ::google::protobuf::FieldDescriptor::TYPE_INT32:\n                cout << \"int type, value:\" << reflection->GetInt32(obj, field);\n                break;\n            case ::google::protobuf::FieldDescriptor::TYPE_FLOAT:\n                cout << \"float type, value:\" << reflection->GetFloat(obj, field);\n                break;\n            default:\n                cout << \"not found\" << endl;\n        }\n    }\n    return 0;\n}\n```\n\n\n\n\n\n","source":"_posts/2019-08-03-protobuffer-extension.md","raw":"\n---\ntitle: ProtoBuffer  Option \ndate: 2019-08-03 12:11:42\ntags:  ProtoBuffer\ncategories: Program\n---\n\n\n ProtoBuffer ,  Kid ProtoBuffer  `age`7\n\n```\nmessage Kid\n{\n   optional uint32 age = 1 [default=7];\n   optional uint32 score = 2 ;\n}\n```\n\n PB   Option \n\n`` Option,  Option,  ProtoBuffer :\n\n```\nmessage Kid\n{\n   optional uint32 age = 1 [default=7];\n   optional uint32 score = 2 [action = Report];\n}\n```\n\n PB Option\n\n\n#### \n\n1:   FieldOption , `action.proto`  Option  Proto \n\n```\npackage action;\nimport \"google/protobuf/descriptor.proto\";\n\nenum ActionType {\n    REPORT = 1;\n}\nextend google.protobuf.FieldOptions {\n    optional ActionType rule = 12345 [default = REPORT];\n}\n```\n\n2  Option\nimport , \n\n```\npackage Kid                                                                          \nimport \"action.proto\";                                                                    \nmessage person \n{\n   optional uint32 age = 1;\n   optional int32 age = 2[(action.rule) = REPORT]         \n}\n```\n\n\n####  OPTION \n\n descriptor && reflection  option  \n\n```\n#include <iostream>\n#include <google/protobuf/message.h>\n#include <google/protobuf/descriptor.h>\n#include \"kid.pb.h\"\nusing namespace std;\n\nint main()\n{\n    Kid obj;\n    obj.set_age(12);\n\n    auto descriptor = obj.GetDescriptor();\n    auto reflection = obj.GetReflection();\n\t//  FieldName \n    auto  idField = descriptor->FindFieldByName(\"age\");\n    reflection->SetInt32(&obj, idField, 18);\n    for (unsigned int i = 0; i < descriptor->field_count(); ++i) \n    {\n        auto field = descriptor->field(i);\n\n        cout << \"field_is_repeated:\" << field->is_repeated() << endl;\n        //  field_num\n        cout << \"field_num:\" << field->number() << endl;\n        //  Option cout << \"optiona value:\" << field->options().GetExtension(action::rule) << endl;\n\n        switch (field->type()) \n        {\n            case ::google::protobuf::FieldDescriptor::TYPE_INT32:\n                cout << \"int type, value:\" << reflection->GetInt32(obj, field);\n                break;\n            case ::google::protobuf::FieldDescriptor::TYPE_FLOAT:\n                cout << \"float type, value:\" << reflection->GetFloat(obj, field);\n                break;\n            default:\n                cout << \"not found\" << endl;\n        }\n    }\n    return 0;\n}\n```\n\n\n\n\n\n","slug":"2019-08-03-protobuffer-extension","published":1,"updated":"2019-08-03T13:22:42.732Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjyvkhh2z0000o9tj0hnpyz1j","content":"<p> ProtoBuffer ,  Kid ProtoBuffer  <code>age</code>7</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">message Kid</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   optional uint32 age = 1 [default=7];</span><br><span class=\"line\">   optional uint32 score = 2 ;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> PB   Option </p>\n<p><code></code> Option,  Option,  ProtoBuffer :</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">message Kid</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   optional uint32 age = 1 [default=7];</span><br><span class=\"line\">   optional uint32 score = 2 [action = Report];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> PB Option</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>1:   FieldOption , <code>action.proto</code>  Option  Proto </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package action;</span><br><span class=\"line\">import &quot;google/protobuf/descriptor.proto&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">enum ActionType &#123;</span><br><span class=\"line\">    REPORT = 1;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">extend google.protobuf.FieldOptions &#123;</span><br><span class=\"line\">    optional ActionType rule = 12345 [default = REPORT];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2  Option<br>import , </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package Kid                                                                          </span><br><span class=\"line\">import &quot;action.proto&quot;;                                                                    </span><br><span class=\"line\">message person </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   optional uint32 age = 1;</span><br><span class=\"line\">   optional int32 age = 2[(action.rule) = REPORT]         </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"-OPTION-\"><a href=\"#-OPTION-\" class=\"headerlink\" title=\" OPTION \"></a> OPTION </h4><p> descriptor &amp;&amp; reflection  option  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include &lt;iostream&gt;</span><br><span class=\"line\">#include &lt;google/protobuf/message.h&gt;</span><br><span class=\"line\">#include &lt;google/protobuf/descriptor.h&gt;</span><br><span class=\"line\">#include &quot;kid.pb.h&quot;</span><br><span class=\"line\">using namespace std;</span><br><span class=\"line\"></span><br><span class=\"line\">int main()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    Kid obj;</span><br><span class=\"line\">    obj.set_age(12);</span><br><span class=\"line\"></span><br><span class=\"line\">    auto descriptor = obj.GetDescriptor();</span><br><span class=\"line\">    auto reflection = obj.GetReflection();</span><br><span class=\"line\">\t//  FieldName </span><br><span class=\"line\">    auto  idField = descriptor-&gt;FindFieldByName(&quot;age&quot;);</span><br><span class=\"line\">    reflection-&gt;SetInt32(&amp;obj, idField, 18);</span><br><span class=\"line\">    for (unsigned int i = 0; i &lt; descriptor-&gt;field_count(); ++i) </span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        auto field = descriptor-&gt;field(i);</span><br><span class=\"line\"></span><br><span class=\"line\">        cout &lt;&lt; &quot;field_is_repeated:&quot; &lt;&lt; field-&gt;is_repeated() &lt;&lt; endl;</span><br><span class=\"line\">        //  field_num</span><br><span class=\"line\">        cout &lt;&lt; &quot;field_num:&quot; &lt;&lt; field-&gt;number() &lt;&lt; endl;</span><br><span class=\"line\">        //  Option cout &lt;&lt; &quot;optiona value:&quot; &lt;&lt; field-&gt;options().GetExtension(action::rule) &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">        switch (field-&gt;type()) </span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            case ::google::protobuf::FieldDescriptor::TYPE_INT32:</span><br><span class=\"line\">                cout &lt;&lt; &quot;int type, value:&quot; &lt;&lt; reflection-&gt;GetInt32(obj, field);</span><br><span class=\"line\">                break;</span><br><span class=\"line\">            case ::google::protobuf::FieldDescriptor::TYPE_FLOAT:</span><br><span class=\"line\">                cout &lt;&lt; &quot;float type, value:&quot; &lt;&lt; reflection-&gt;GetFloat(obj, field);</span><br><span class=\"line\">                break;</span><br><span class=\"line\">            default:</span><br><span class=\"line\">                cout &lt;&lt; &quot;not found&quot; &lt;&lt; endl;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return 0;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n","site":{"data":{}},"excerpt":"","more":"<p> ProtoBuffer ,  Kid ProtoBuffer  <code>age</code>7</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">message Kid</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   optional uint32 age = 1 [default=7];</span><br><span class=\"line\">   optional uint32 score = 2 ;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> PB   Option </p>\n<p><code></code> Option,  Option,  ProtoBuffer :</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">message Kid</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   optional uint32 age = 1 [default=7];</span><br><span class=\"line\">   optional uint32 score = 2 [action = Report];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> PB Option</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>1:   FieldOption , <code>action.proto</code>  Option  Proto </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package action;</span><br><span class=\"line\">import &quot;google/protobuf/descriptor.proto&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">enum ActionType &#123;</span><br><span class=\"line\">    REPORT = 1;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">extend google.protobuf.FieldOptions &#123;</span><br><span class=\"line\">    optional ActionType rule = 12345 [default = REPORT];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2  Option<br>import , </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package Kid                                                                          </span><br><span class=\"line\">import &quot;action.proto&quot;;                                                                    </span><br><span class=\"line\">message person </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   optional uint32 age = 1;</span><br><span class=\"line\">   optional int32 age = 2[(action.rule) = REPORT]         </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"-OPTION-\"><a href=\"#-OPTION-\" class=\"headerlink\" title=\" OPTION \"></a> OPTION </h4><p> descriptor &amp;&amp; reflection  option  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include &lt;iostream&gt;</span><br><span class=\"line\">#include &lt;google/protobuf/message.h&gt;</span><br><span class=\"line\">#include &lt;google/protobuf/descriptor.h&gt;</span><br><span class=\"line\">#include &quot;kid.pb.h&quot;</span><br><span class=\"line\">using namespace std;</span><br><span class=\"line\"></span><br><span class=\"line\">int main()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    Kid obj;</span><br><span class=\"line\">    obj.set_age(12);</span><br><span class=\"line\"></span><br><span class=\"line\">    auto descriptor = obj.GetDescriptor();</span><br><span class=\"line\">    auto reflection = obj.GetReflection();</span><br><span class=\"line\">\t//  FieldName </span><br><span class=\"line\">    auto  idField = descriptor-&gt;FindFieldByName(&quot;age&quot;);</span><br><span class=\"line\">    reflection-&gt;SetInt32(&amp;obj, idField, 18);</span><br><span class=\"line\">    for (unsigned int i = 0; i &lt; descriptor-&gt;field_count(); ++i) </span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        auto field = descriptor-&gt;field(i);</span><br><span class=\"line\"></span><br><span class=\"line\">        cout &lt;&lt; &quot;field_is_repeated:&quot; &lt;&lt; field-&gt;is_repeated() &lt;&lt; endl;</span><br><span class=\"line\">        //  field_num</span><br><span class=\"line\">        cout &lt;&lt; &quot;field_num:&quot; &lt;&lt; field-&gt;number() &lt;&lt; endl;</span><br><span class=\"line\">        //  Option cout &lt;&lt; &quot;optiona value:&quot; &lt;&lt; field-&gt;options().GetExtension(action::rule) &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">        switch (field-&gt;type()) </span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            case ::google::protobuf::FieldDescriptor::TYPE_INT32:</span><br><span class=\"line\">                cout &lt;&lt; &quot;int type, value:&quot; &lt;&lt; reflection-&gt;GetInt32(obj, field);</span><br><span class=\"line\">                break;</span><br><span class=\"line\">            case ::google::protobuf::FieldDescriptor::TYPE_FLOAT:</span><br><span class=\"line\">                cout &lt;&lt; &quot;float type, value:&quot; &lt;&lt; reflection-&gt;GetFloat(obj, field);</span><br><span class=\"line\">                break;</span><br><span class=\"line\">            default:</span><br><span class=\"line\">                cout &lt;&lt; &quot;not found&quot; &lt;&lt; endl;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return 0;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cjv8xui390000m1tj8iz6072z","category_id":"cjv8xui3f0002m1tj0zlc1f7v","_id":"cjv8xui3o0009m1tjfy9h7l2o"},{"post_id":"cjv8xui3k0005m1tjq4ls55sx","category_id":"cjv8xui3f0002m1tj0zlc1f7v","_id":"cjv8xui3q000cm1tjple7266q"},{"post_id":"cjv8xui3m0007m1tjb1ppr8wt","category_id":"cjv8xui3l0006m1tj8tv4mh93","_id":"cjv8xui3s000em1tjppfnnffu"},{"post_id":"cjv8xui3d0001m1tjtc5w0qtn","category_id":"cjv8xui3l0006m1tj8tv4mh93","_id":"cjv8xui3w000hm1tjzue86yh7"},{"post_id":"cjv8xui3p000bm1tj19yhm3eg","category_id":"cjv8xui3f0002m1tj0zlc1f7v","_id":"cjv8xui3x000jm1tjwexp7csv"},{"post_id":"cjv8xui3h0003m1tj30h6szin","category_id":"cjv8xui3o000am1tjpk24z8gs","_id":"cjv8xui3y000mm1tjpavg81m7"},{"post_id":"cjv8xui3i0004m1tjo1eefp4a","category_id":"cjv8xui3l0006m1tj8tv4mh93","_id":"cjv8xui3z000om1tjyx374oa6"},{"post_id":"cjv8xui3y000lm1tjoxtaefxe","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xui41000sm1tjy9y64use"},{"post_id":"cjv8xui3n0008m1tj0qrtsdvj","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xui42000um1tjpa7k5mir"},{"post_id":"cjv8xui3z000nm1tjlegrq1rh","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xui44000xm1tj0wfclmoj"},{"post_id":"cjv8xui40000rm1tjz925ihj0","category_id":"cjv8xui3z000pm1tjsvdpdpb0","_id":"cjv8xui45000zm1tj48jt00xl"},{"post_id":"cjv8xui3r000dm1tj4vkjjs92","category_id":"cjv8xui3z000pm1tjsvdpdpb0","_id":"cjv8xui470012m1tjt335enef"},{"post_id":"cjv8xui41000tm1tjiwnwpgvd","category_id":"cjv8xui3f0002m1tj0zlc1f7v","_id":"cjv8xui480014m1tj49fdp1p7"},{"post_id":"cjv8xui43000wm1tjvn1sygw7","category_id":"cjv8xui3l0006m1tj8tv4mh93","_id":"cjv8xui490017m1tjlx198ac6"},{"post_id":"cjv8xui3v000gm1tjucnd9jh2","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xui4b0019m1tj5suldcn6"},{"post_id":"cjv8xui44000ym1tjglmx6f2r","category_id":"cjv8xui3f0002m1tj0zlc1f7v","_id":"cjv8xui4c001cm1tjumsthjao"},{"post_id":"cjv8xui460011m1tj5e59dc6m","category_id":"cjv8xui3l0006m1tj8tv4mh93","_id":"cjv8xui4e001em1tjnfy68p3t"},{"post_id":"cjv8xui3w000im1tjdz38atu2","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xui4g001hm1tjqz18j462"},{"post_id":"cjv8xui490016m1tjp4g7c0uc","category_id":"cjv8xui3z000pm1tjsvdpdpb0","_id":"cjv8xui4i001jm1tjvctupb9r"},{"post_id":"cjv8xui40000qm1tj3287x4h0","category_id":"cjv8xui3z000pm1tjsvdpdpb0","_id":"cjv8xui4k001lm1tjziw0rxiv"},{"post_id":"cjv8xui4b001bm1tjh0jpimcn","category_id":"cjv8xui3l0006m1tj8tv4mh93","_id":"cjv8xui4l001nm1tj6ubapvcn"},{"post_id":"cjv8xui470013m1tjaf2pmba4","category_id":"cjv8xui4b001am1tjphnfvvkf","_id":"cjv8xui4n001pm1tj13z40hps"},{"post_id":"cjv8xui4d001dm1tjre6ee0tw","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xui4o001rm1tjofetyxh2"},{"post_id":"cjv8xui4f001gm1tjl1tndacc","category_id":"cjv8xui3z000pm1tjsvdpdpb0","_id":"cjv8xui4p001tm1tjah5pprap"},{"post_id":"cjv8xui4a0018m1tjj91cop8q","category_id":"cjv8xui4b001am1tjphnfvvkf","_id":"cjv8xui4q001vm1tjang11z8j"},{"post_id":"cjv8xui4h001im1tjvbkbdbhe","category_id":"cjv8xui4b001am1tjphnfvvkf","_id":"cjv8xui4r001xm1tjo1l0geso"},{"post_id":"cjv8xui4j001km1tj99301vkn","category_id":"cjv8xui3f0002m1tj0zlc1f7v","_id":"cjv8xui4s001zm1tj4wooyi02"},{"post_id":"cjv8xui4l001mm1tjtco34r0q","category_id":"cjv8xui3f0002m1tj0zlc1f7v","_id":"cjv8xui4u0021m1tjynsks9oc"},{"post_id":"cjv8xui4m001om1tjvqwgiie6","category_id":"cjv8xui3o000am1tjpk24z8gs","_id":"cjv8xui4v0023m1tjthajv24i"},{"post_id":"cjv8xui4n001qm1tji108cru2","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xui4w0025m1tjfevldxfl"},{"post_id":"cjv8xui4o001sm1tjdc0kg42u","category_id":"cjv8xui3f0002m1tj0zlc1f7v","_id":"cjv8xui4x0027m1tjldmmfb5k"},{"post_id":"cjv8xui4p001um1tjo9esjf7i","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xui4y0029m1tjcm86as0w"},{"post_id":"cjv8xui4q001wm1tj76uqx7cg","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xui4z002bm1tj4k34ob25"},{"post_id":"cjv8xui4r001ym1tjetrt9wyf","category_id":"cjv8xui3z000pm1tjsvdpdpb0","_id":"cjv8xui50002dm1tjmclhz2ak"},{"post_id":"cjv8xui4t0020m1tjds219qi2","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xui51002fm1tjtc0oipfj"},{"post_id":"cjv8xui4u0022m1tj0t497ro1","category_id":"cjv8xui3o000am1tjpk24z8gs","_id":"cjv8xui53002hm1tjtqi4nufp"},{"post_id":"cjv8xui4v0024m1tj92v4coxc","category_id":"cjv8xui3f0002m1tj0zlc1f7v","_id":"cjv8xui54002jm1tjm2bqj73p"},{"post_id":"cjv8xui4w0026m1tjs0e0khms","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xui55002lm1tjbi2zqbhw"},{"post_id":"cjv8xui4x0028m1tj9vhjj5jm","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xui56002nm1tjiudy9kfl"},{"post_id":"cjv8xui4y002am1tj4i24foab","category_id":"cjv8xui3f0002m1tj0zlc1f7v","_id":"cjv8xui5a002qm1tj8ljhoy71"},{"post_id":"cjv8xui4z002cm1tjoldjo4de","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xui5b002sm1tjqkl19vo1"},{"post_id":"cjv8xui51002em1tj8ebjj4sb","category_id":"cjv8xui3l0006m1tj8tv4mh93","_id":"cjv8xui5c002vm1tj6m5ocdd4"},{"post_id":"cjv8xui52002gm1tj8iqn4565","category_id":"cjv8xui4b001am1tjphnfvvkf","_id":"cjv8xui5e002xm1tj19yol7h5"},{"post_id":"cjv8xui53002im1tj1r593y7q","category_id":"cjv8xui3l0006m1tj8tv4mh93","_id":"cjv8xui5f002zm1tj8k9632fy"},{"post_id":"cjv8xui55002mm1tjvcadjcby","category_id":"cjv8xui4b001am1tjphnfvvkf","_id":"cjv8xui5h0031m1tjucadj8zo"},{"post_id":"cjv8xui5a002rm1tjrxydlxa3","category_id":"cjv8xui4b001am1tjphnfvvkf","_id":"cjv8xui5i0033m1tjs394sjg8"},{"post_id":"cjv8xui54002km1tj4qpqnjr4","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xui5j0034m1tj17ud563y"},{"post_id":"cjv8xui5b002tm1tjapxbhguc","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xui5k0035m1tj2bvqmmfl"},{"post_id":"cjv8xui5d002wm1tjk59ebgd8","category_id":"cjv8xui3f0002m1tj0zlc1f7v","_id":"cjv8xui5k0036m1tj69zktl7c"},{"post_id":"cjv8xui57002pm1tjt9tcw25t","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xui5k0037m1tj5n05uy1o"},{"post_id":"cjv8xui5e002ym1tjwwu8bgwx","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xui5l0038m1tjwxyuyqfd"},{"post_id":"cjv8xui5g0030m1tjbgpzeldo","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xui5l0039m1tj4qyodh1g"},{"post_id":"cjv8xui5h0032m1tjumn9qjue","category_id":"cjv8xui4b001am1tjphnfvvkf","_id":"cjv8xui5l003am1tjjexvfoik"},{"post_id":"cjv8xuib8003bm1tju6wxau9q","category_id":"cjv8xui3l0006m1tj8tv4mh93","_id":"cjv8xuibf003hm1tjyw79wj1t"},{"post_id":"cjv8xuiba003dm1tj6m9iamjo","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuibh003jm1tjw090pmtr"},{"post_id":"cjv8xuibd003fm1tja5sajp60","category_id":"cjv8xui3l0006m1tj8tv4mh93","_id":"cjv8xuibi003lm1tjdm7upj05"},{"post_id":"cjv8xuibf003gm1tjic5h6hhc","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xuibj003nm1tj4ukp44bt"},{"post_id":"cjv8xuibg003im1tjtkiuwybv","category_id":"cjv8xui4b001am1tjphnfvvkf","_id":"cjv8xuibk003pm1tjak3fnjqo"},{"post_id":"cjv8xuibh003km1tj7k6ryp8u","category_id":"cjv8xui4b001am1tjphnfvvkf","_id":"cjv8xuibl003rm1tjtovkid6v"},{"post_id":"cjv8xuibi003mm1tjc5xcxcf7","category_id":"cjv8xui4b001am1tjphnfvvkf","_id":"cjv8xuibn003tm1tj4flyh030"},{"post_id":"cjv8xuibk003om1tjy2olal2t","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xuibo003vm1tjel8wk54a"},{"post_id":"cjv8xuibl003qm1tjczmuqgdj","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuibr003xm1tjar1l3t88"},{"post_id":"cjv8xuibm003sm1tjl0wmmb0y","category_id":"cjv8xui3o000am1tjpk24z8gs","_id":"cjv8xuibs003zm1tjzrgl8kft"},{"post_id":"cjv8xuibo003um1tjwx6m42gq","category_id":"cjv8xui4b001am1tjphnfvvkf","_id":"cjv8xuibt0041m1tjy1ufpou2"},{"post_id":"cjv8xuibp003wm1tjs8k1fi2r","category_id":"cjv8xui3l0006m1tj8tv4mh93","_id":"cjv8xuibv0043m1tjxe4tpfwd"},{"post_id":"cjv8xuibs003ym1tjj33wyhnu","category_id":"cjv8xui3l0006m1tj8tv4mh93","_id":"cjv8xuibx0045m1tjuqt6x712"},{"post_id":"cjv8xuibt0040m1tjqrei7q7b","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuiby0047m1tjvasurt4b"},{"post_id":"cjv8xuibu0042m1tjvslqhsyr","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xuic00049m1tj2wcd4k6j"},{"post_id":"cjv8xuibv0044m1tjjvvydm27","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuic1004bm1tjvn396xwu"},{"post_id":"cjv8xuiby0046m1tjkpkyeoiy","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xuic3004dm1tje1fso60q"},{"post_id":"cjv8xuibz0048m1tjni35uzm1","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xuic4004fm1tj1f7gc5u4"},{"post_id":"cjv8xuic0004am1tjsv3txfus","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xuic5004hm1tjvba4cnqy"},{"post_id":"cjv8xuic2004cm1tjuibg3jm2","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xuic7004jm1tjrut7fb13"},{"post_id":"cjv8xuic3004em1tjubxqnqzc","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xuic8004lm1tjm0fxa1uq"},{"post_id":"cjv8xuic4004gm1tjjmij08nb","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xuica004nm1tjqieghzno"},{"post_id":"cjv8xuic6004im1tj5dd38bwk","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xuicb004pm1tjvemsew6g"},{"post_id":"cjv8xuic8004km1tjs33unflv","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xuicc004rm1tjrsqbmbbl"},{"post_id":"cjv8xuic9004mm1tjool8mm5i","category_id":"cjv8xui4b001am1tjphnfvvkf","_id":"cjv8xuicd004tm1tj0fa7at99"},{"post_id":"cjv8xuica004om1tjk4otlnm7","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuice004vm1tjaxaktitc"},{"post_id":"cjv8xuicb004qm1tj9dacr3ox","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xuicf004xm1tjziwkmefx"},{"post_id":"cjv8xuicc004sm1tjftj11yt5","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuich004zm1tjdixe0usm"},{"post_id":"cjv8xuicd004um1tj8s511of8","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xuici0051m1tjuml2g6h5"},{"post_id":"cjv8xuicf004wm1tjc50jzk76","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuicj0053m1tjatcexooc"},{"post_id":"cjv8xuicg004ym1tjajxasz5w","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xuick0055m1tjb555rlrp"},{"post_id":"cjv8xuich0050m1tjm60rpmy0","category_id":"cjv8xui56002om1tjxdlhkgnh","_id":"cjv8xuicl0057m1tjubrrvrgp"},{"post_id":"cjv8xuici0052m1tj0z1iqleb","category_id":"cjv8xui3l0006m1tj8tv4mh93","_id":"cjv8xuicm0059m1tjylfnjxjm"},{"post_id":"cjv8xuicj0054m1tjkouqhk0j","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuico005bm1tj4bw20o3x"},{"post_id":"cjv8xuick0056m1tjg6y3yb90","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuicp005dm1tjt2qa3068"},{"post_id":"cjv8xuicl0058m1tjnz86r22p","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuicq005fm1tjl55vkus9"},{"post_id":"cjv8xuicn005am1tjfe8utuc2","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuicr005hm1tj6yjyqq8e"},{"post_id":"cjv8xuico005cm1tjhks11ugs","category_id":"cjv8xui3f0002m1tj0zlc1f7v","_id":"cjv8xuics005jm1tjnon0ndfq"},{"post_id":"cjv8xuicp005em1tjb1qlvs8c","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuict005lm1tjds1dv7f7"},{"post_id":"cjv8xuicq005gm1tjtkz11k38","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuicu005om1tjsipfkoup"},{"post_id":"cjv8xuics005km1tj2yoh49ug","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuicx005sm1tjihiygtne"},{"post_id":"cjv8xuict005nm1tjv865tuj7","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuicy005um1tjxjyvuqi9"},{"post_id":"cjv8xuicu005pm1tj9wr2cwbl","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuicy005vm1tj33oxikvo"},{"post_id":"cjv8xuicr005im1tjq0xpt21g","category_id":"cjv8xuict005mm1tj8mmq7g47","_id":"cjv8xuicz005xm1tj9ut6qqnx"},{"post_id":"cjv8xuicw005rm1tjc0srcq8r","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjv8xuicz005ym1tj68tpiajz"},{"post_id":"cjv8xuicx005tm1tjquntl36m","category_id":"cjv8xui3f0002m1tj0zlc1f7v","_id":"cjv8xuicz005zm1tjj67za19j"},{"post_id":"cjwumzefe0000mmdqx64r9u1n","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjwumzegc0002mmdqop21lx8e"},{"post_id":"cjyvkhh2z0000o9tj0hnpyz1j","category_id":"cjv8xui3x000km1tj4qtabd9f","_id":"cjyvkhh3y0002o9tj72djg719"}],"PostTag":[{"post_id":"cjv8xuict005nm1tjv865tuj7","tag_id":"cjv8xuicw005qm1tj93145mbo","_id":"cjv8xuicz005wm1tjhsmtnq1g"},{"post_id":"cjwumzefe0000mmdqx64r9u1n","tag_id":"cjwumzefo0001mmdqwgqrhl2h","_id":"cjwumzegd0003mmdqg1bwkl0j"},{"post_id":"cjyvkhh2z0000o9tj0hnpyz1j","tag_id":"cjyvkhh380001o9tjsqicrfjd","_id":"cjyvkhh410003o9tjpgtnnfpo"}],"Tag":[{"name":"groupCache","_id":"cjv8xuicw005qm1tj93145mbo"},{"name":"System","_id":"cjwumzefo0001mmdqwgqrhl2h"},{"name":"ProtoBuffer","_id":"cjyvkhh380001o9tjsqicrfjd"}]}}